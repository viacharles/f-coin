(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{yGy4:function(t,i,n){"use strict";n.r(i),n.d(i,"FriendModule",function(){return m});var e=n("ofXK"),c=n("IzEk"),r=n("iuoO"),o=n("AytR"),s=n("fXoL"),d=n("AWfg"),a=n("LJo4"),b=n("PvES");function l(t,i){if(1&t){const t=s.Pb();s.Ob(0,"li",1),s.Ob(1,"div"),s.Kb(2,"img",2),s.Ob(3,"p"),s.pc(4),s.Nb(),s.Nb(),s.Ob(5,"div"),s.Ob(6,"button",3),s.Vb("click",function(){s.ic(t);const n=i.$implicit;return s.Yb().ignoreInvite(n.id)}),s.pc(7,"\u5ffd\u7565"),s.Nb(),s.Ob(8,"span",4),s.Vb("click",function(){s.ic(t);const n=i.$implicit;return s.Yb().addFriendFromInvite(n.id)}),s.pc(9," person_add_alt "),s.Nb(),s.Nb(),s.Nb()}if(2&t){const t=i.$implicit,n=s.Yb();s.yb(2),s.dc("src",t.avatar||n.defaultAvatar,s.kc),s.yb(2),s.qc(t.name||"\u672a\u8a2d\u5b9a\u66b1\u7a31")}}function u(t,i){if(1&t){const t=s.Pb();s.Ob(0,"li",1),s.Ob(1,"div"),s.Kb(2,"img",2),s.Ob(3,"p"),s.pc(4),s.Nb(),s.Nb(),s.Ob(5,"span",4),s.Vb("click",function(){s.ic(t);const n=i.$implicit;return s.Yb().addFriendFromRecommend(n.id)}),s.pc(6," person_add_alt "),s.Nb(),s.Nb()}if(2&t){const t=i.$implicit,n=s.Yb();s.yb(2),s.dc("src",t.avatar||n.defaultAvatar,s.kc),s.yb(2),s.qc(t.name||"\u672a\u8a2d\u5b9a\u66b1\u7a31")}}let h=(()=>{class t{constructor(t,i,n){this.$feature=t,this.$user=i,this.$logger=n,this.defaultAvatar=o.a.defaultAvatar,this.inviteList=[],this.recommendList=[]}get id(){return this.user.id}ngOnInit(){this.$user.user$.pipe(Object(c.a)(1)).subscribe(t=>{this.user=t,this.init()})}addFriendFromInvite(t){this.$feature.fireEvent({action:r.a.AddFriend,id:t,user:this.user}).then(()=>this.inviteList=this.inviteList.filter(i=>i.id!==t))}addFriendFromRecommend(t){this.$feature.fireEvent({action:r.a.AddFriend,id:t,user:this.user}).then(()=>this.recommendList=this.recommendList.filter(i=>i.id!==t))}ignoreInvite(t){this.$feature.fireEvent({action:r.a.IgnoreInvite,user:this.user,id:t}).then(()=>this.inviteList=this.inviteList.filter(i=>i.id!==t))}init(){this.$feature.fireEvent({action:r.a.FetchInviteList,user:this.user}).then(t=>{this.$logger.systemMessage(t.length+" invitations were received "),this.inviteList=t}),this.$feature.fireEvent({action:r.a.FetchRecommendList}).then(t=>{this.$logger.systemMessage(t.length+" recommendations were received "),this.recommendList=t.filter(({id:t})=>{var i,n;return!(null===(i=this.user)||void 0===i?void 0:i.friends.includes(t))&&t!==(null===(n=this.user)||void 0===n?void 0:n.id)})})}}return t.\u0275fac=function(i){return new(i||t)(s.Jb(d.a),s.Jb(a.a),s.Jb(b.a))},t.\u0275cmp=s.Db({type:t,selectors:[["app-recommend-page"]],decls:9,vars:4,consts:[["class","list",4,"ngFor","ngForOf"],[1,"list"],[3,"src"],[3,"click"],[1,"material-icons",3,"click"]],template:function(t,i){1&t&&(s.Ob(0,"section"),s.Ob(1,"ul"),s.Ob(2,"h3"),s.pc(3),s.Nb(),s.nc(4,l,10,2,"li",0),s.Nb(),s.Ob(5,"ul"),s.Ob(6,"h3"),s.pc(7),s.Nb(),s.nc(8,u,7,2,"li",0),s.Nb(),s.Nb()),2&t&&(s.yb(3),s.rc("\u597d\u53cb\u9080\u8acb ",i.inviteList.length,""),s.yb(1),s.dc("ngForOf",i.inviteList),s.yb(3),s.rc("\u4f60\u53ef\u80fd\u8a8d\u8b58\u7684\u4eba\uff1f ",i.recommendList.length,""),s.yb(1),s.dc("ngForOf",i.recommendList))},directives:[e.k],styles:["[_nghost-%COMP%], section[_ngcontent-%COMP%]{width:100%;height:100%}section[_ngcontent-%COMP%]{padding:15px 20px}ul[_ngcontent-%COMP%]{width:auto;height:auto}ul[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:15px 0;font-weight:700}.list[_ngcontent-%COMP%]{justify-content:space-between;width:50%;min-width:300px;padding:7px 0}.list[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{align-items:center}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:40px;height:40px;border-radius:50%}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:10px}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;width:49px;height:27px;margin-right:20px;color:#afb1b5;border:1px solid #cfcfcf;border-radius:4px;background:none}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#acacac;border:1px solid #acacac}.list[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:#afb1b5}"]}),t})();var g=n("tyNb");const p=[{path:"",component:h},{path:"recommend",component:h}];let f=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(i){return new(i||t)},imports:[[g.e.forChild(p)],g.e]}),t})(),m=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(i){return new(i||t)},imports:[[e.c,f]]}),t})()}}]);