(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.r(e),n.d(e,"Component",function(){return o}),n.d(e,"ComponentContainer",function(){return c}),n.d(e,"Provider",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.__read)(o.value,2),c=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:u});c.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.__read)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=s),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var c=Object(r.__values)(this.instancesDeferred.entries()),u=c.next();!u.done;u=c.next()){var l=Object(r.__read)(u.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=Object(r.__values)(o),a=s.next();!a.done;a=s.next()){var c=a.value;try{c(t,e)}catch(u){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))}}class s extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("zUnb")},"0tOT":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t){this.$logger=t}fireEvent(t){return this.$logger.debugMessage(`${this.featureName} event ${t.action} has been triggered.`),this.resolveAction(t).then(t=>t)}}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp");class o extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3/ER":function(t,e,n){"use strict";(function(t){var r=n("Ju5/"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}).call(this,n("3UD+")(t))},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3Pt+":function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return Dt}),n.d(e,"c",function(){return Ot}),n.d(e,"d",function(){return At}),n.d(e,"e",function(){return Nt}),n.d(e,"f",function(){return It}),n.d(e,"g",function(){return St}),n.d(e,"h",function(){return c}),n.d(e,"i",function(){return j}),n.d(e,"j",function(){return M}),n.d(e,"k",function(){return yt}),n.d(e,"l",function(){return U}),n.d(e,"m",function(){return Rt}),n.d(e,"n",function(){return _}),n.d(e,"o",function(){return wt});var r=n("fXoL"),i=n("ofXK"),o=n("cp0P"),s=n("Cfvw"),a=n("lJxs");const c=new r.q("NgValueAccessor"),u={provide:c,useExisting:Object(r.T)(()=>l),multi:!0};let l=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.xb([u])]}),t})();const h={provide:c,useExisting:Object(r.T)(()=>f),multi:!0},d=new r.q("CompositionEventMode");let f=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(i.t)()?Object(i.t)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(d,8))},t.\u0275dir=r.Db({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.xb([h])]}),t})();function p(t){return null==t||0===t.length}function g(t){return null!=t&&"number"==typeof t.length}const m=new r.q("NgValidators"),b=new r.q("NgAsyncValidators"),v=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _{static min(t){return e=>{if(p(e.value)||p(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(p(e.value)||p(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return p(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return p(t.value)||v.test(t.value)?null:{email:!0}}static minLength(t){return e=>p(e.value)||!g(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>g(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return _.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(p(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(y);return 0==e.length?null:function(t){return k(C(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(y);return 0==e.length?null:function(t){const n=C(t,e).map(w);return Object(o.a)(n).pipe(Object(a.a)(k))}}}function y(t){return null!=t}function w(t){const e=Object(r.qb)(t)?Object(s.a)(t):t;return Object(r.pb)(e),e}function k(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function C(t,e){return e.map(e=>e(t))}function A(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function E(t){return null!=t?_.compose(A(t)):null}function O(t){return null!=t?_.composeAsync(A(t)):null}function x(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function S(t){return t._rawValidators}function T(t){return t._rawAsyncValidators}let I=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=E(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=O(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t}),t})(),P=(()=>{class t extends I{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return D(e||t)},t.\u0275dir=r.Db({type:t,features:[r.vb]}),t})();const D=r.Pb(P);class N extends I{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class R{constructor(t){this._cd=t}get ngClassUntouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.untouched)&&void 0!==n&&n}get ngClassTouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.touched)&&void 0!==n&&n}get ngClassPristine(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pristine)&&void 0!==n&&n}get ngClassDirty(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.dirty)&&void 0!==n&&n}get ngClassValid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.valid)&&void 0!==n&&n}get ngClassInvalid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.invalid)&&void 0!==n&&n}get ngClassPending(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pending)&&void 0!==n&&n}}let j=(()=>{class t extends R{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(N,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),M=(()=>{class t extends R{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(P,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();const F={provide:c,useExisting:Object(r.T)(()=>L),multi:!0};let L=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([F])]}),t})();const B={provide:c,useExisting:Object(r.T)(()=>U),multi:!0};let V=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),U=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(N),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(V),r.Ib(r.r))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([B])]}),t})();const q={provide:c,useExisting:Object(r.T)(()=>z),multi:!0};let z=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([q])]}),t})();const K={provide:c,useExisting:Object(r.T)(()=>H),multi:!0};let H=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([K])]}),t})();const W={provide:c,useExisting:Object(r.T)(()=>G),multi:!0};let G=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([W])]}),t})();function $(t,e){return[...e.path,t]}function Q(t,e){J(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Z(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Z(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Y(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function J(t,e,n){const r=S(t);null!==e.validator?t.setValidators(x(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=T(t);if(null!==e.asyncValidator?t.setAsyncValidators(x(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Y(e._rawValidators,n),Y(e._rawAsyncValidators,n)}}function X(t,e,n){if(null!==t){if(null!==e.validator){const n=S(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=T(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};Y(e._rawValidators,t),Y(e._rawAsyncValidators,t)}}function Z(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function tt(t,e){J(t,e,!1)}function et(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const nt=[l,z,L,H,G,U];function rt(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===f?n=t:(e=t,nt.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function it(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ot="VALID",st="INVALID",at="PENDING",ct="DISABLED";function ut(t){return(ft(t)?t.validators:t)||null}function lt(t){return Array.isArray(t)?E(t):t||null}function ht(t,e){return(ft(e)?e.asyncValidators:t)||null}function dt(t){return Array.isArray(t)?O(t):t||null}function ft(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class pt{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=lt(this._rawValidators),this._composedAsyncValidatorFn=dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ot}get invalid(){return this.status===st}get pending(){return this.status==at}get disabled(){return this.status===ct}get enabled(){return this.status!==ct}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=lt(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=dt(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=at,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ct,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ot,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ot&&this.status!==at||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ct:ot}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=at,this._hasOwnPendingAsyncValidator=!0;const e=w(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof mt?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof bt&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?ct:this.errors?st:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(at)?at:this._anyControlsHaveStatus(st)?st:ot}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ft(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class gt extends pt{constructor(t=null,e,n){super(ut(e),ht(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){it(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){it(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class mt extends pt{constructor(t,e,n){super(ut(e),ht(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof gt?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class bt extends pt{constructor(t,e,n){super(ut(e),ht(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof gt?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const vt={provide:N,useExisting:Object(r.T)(()=>yt)},_t=(()=>Promise.resolve(null))();let yt=(()=>{class t extends N{constructor(t,e,n,i){super(),this.control=new gt,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=rt(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),et(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?$(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Q(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_t.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;_t.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(P,9),r.Ib(m,10),r.Ib(b,10),r.Ib(c,10))},t.\u0275dir=r.Db({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.xb([vt]),r.vb,r.wb]}),t})(),wt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const kt=new r.q("NgModelWithFormControlWarning"),Ct={provide:P,useExisting:Object(r.T)(()=>At)};let At=(()=>{class t extends P{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Q(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){it(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);tt(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);tt(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),X(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}(t.control||null,t),e&&Q(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){J(this.form,this,!1),this._oldForm&&X(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(m,10),r.Ib(b,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([Ct]),r.vb,r.wb]}),t})();const Et={provide:N,useExisting:Object(r.T)(()=>Ot)};let Ot=(()=>{class t extends N{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=rt(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),et(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return $(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(P,13),r.Ib(m,10),r.Ib(b,10),r.Ib(c,10),r.Ib(kt,8))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.xb([Et]),r.vb,r.wb]}),t._ngModelWarningSentOnce=!1,t})();const xt={provide:m,useExisting:Object(r.T)(()=>St),multi:!0};let St=(()=>{class t{constructor(){this._validator=_.nullValidator}ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null==this.minlength?null:this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=_.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.zb("minlength",e.minlength?e.minlength:null)},inputs:{minlength:"minlength"},features:[r.xb([xt]),r.wb]}),t})();const Tt={provide:m,useExisting:Object(r.T)(()=>It),multi:!0};let It=(()=>{class t{constructor(){this._validator=_.nullValidator}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=_.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.zb("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[r.xb([Tt]),r.wb]}),t})(),Pt=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),Dt=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new mt(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new gt(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new bt(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof gt||t instanceof mt||t instanceof bt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),Nt=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[V],imports:[Pt]}),t})(),Rt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:kt,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Dt,V],imports:[Pt]}),t})()},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function c(t){a=t}var u,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),g=new s.Logger("@firebase/database"),m=(u=1,function(){return u++}),b=function(t){var e=Object(i.stringToByteArray)(t),n=new i.Sha1;n.update(e);var r=n.digest();return i.base64.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.stringify)(o):o,n+=" "}return n},_=null,y=!0,w=function(t,e){Object(i.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.LogLevel.VERBOSE,_=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?_=t:(_=null,p.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===y&&(y=!1,null===_&&!0===p.get("logging_enabled")&&w(!0)),_){var n=v.apply(null,t);_(n)}},C=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,Object(o.__spreadArray)([t],Object(o.__read)(e)))}},A=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));throw g.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.warn(n)},x=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",T="[MAX_NAME]",I=function(t,e){if(t===e)return 0;if(t===S||e===T)return-1;if(e===S||t===T)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},D=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.stringify)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(i.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.stringify)(e[o]),r+=":",r+=N(t[e[o]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,o,s;Object(i.assert)(!x(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var c=a.join(""),u="";for(s=0;s<64;s+=8){var l=parseInt(c.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},B=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){O('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),q=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H="websocket",W="long_polling",G=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if(Object(i.assert)("string"==typeof e,"typeof type must == string"),Object(i.assert)("object"==typeof n,"typeof params must == object"),e===H)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return j(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.deepCopy)(this.counters_)},t}(),Y={},J={};function X(t){var e=t.toString();return Y[e]||(Y[e]=new Q),Y[e]}var Z=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&B(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=X(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Z(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.base64Encode)(e),r=R(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){k("frame writing exception"),c.stack&&k(c.stack),k(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||k("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),$(t,H,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(u){this.log_("Error instantiating WebSocket.");var c=u.message||u.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var c=Object(o.__values)(t.ALL_TRANSPORTS),u=c.next();!u.done;u=c.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,c,u){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=D("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?A("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):A("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.__spreadArray)([],Object(o.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.assert)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.isMobileCordova)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ht("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function _t(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function yt(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function kt(t,e){for(var n=bt(t,0),r=bt(e,0),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ct(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function At(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Et=function(){return function(t,e){this.errorPrefix_=e,this.parts_=bt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.stringLength)(this.parts_[n]);Ot(this)}}();function Ot(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xt(t))}function xt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var St,Tt,It=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),Pt=1e3,Dt=function(t){function e(n,r,o,s,a,c,u,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=c,h.appCheckTokenProvider_=u,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=C("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Pt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return It.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.stringify)(o)),Object(i.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.Deferred,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.assert)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,c=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==c&&n.removeListen_(i,o),t.onComplete&&t.onComplete(c,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.contains)(t,"w")){var n=Object(i.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):A("Unrecognized action received from server: "+Object(i.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.__awaiter)(this,void 0,void 0,function(){var t,n,r,s,a,c,u,l,h,d,f,p,g,m=this;return Object(o.__generator)(this,function(b){switch(b.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,c=!1,u=null,this.realtime_={close:l=function(){u?u.close():(c=!0,r())},sendRequest:function(t){Object(i.assert)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.__read.apply(void 0,[b.sent(),2]),f=d[0],p=d[1],c?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,u=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){O(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=b.sent(),this.log_("Failed to get token: "+g),c||(this.repoInfo_.nodeAdmin&&O(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){k("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.__values)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var c=(n=void 0,Object(o.__values)(a.values())),u=c.next();!u.done;u=c.next())this.sendListen_(u.value)}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.isMobileCordova)()?t["framework.cordova"]=1:Object(i.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Nt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Nt(S,t),r=new Nt(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Nt.MIN},t}(),jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return St},set:function(t){St=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return I(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(T,St)},e.prototype.makePost=function(t,e){return Object(i.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Nt(t,St)},e.prototype.toString=function(){return".key"},e}(Rt),Mt=new jt,Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Bt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Lt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Bt,t}();function Ut(t,e){return I(t.name,e.name)}function qt(t,e){return I(t,e)}var zt,Kt,Ht,Wt,Gt,$t=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.contains)(e,".sv"),"Priority must be a string or number.")}else Object(i.assert)(t===Tt||t.isEmpty(),"priority of unexpected type.");Object(i.assert)(t===Tt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return yt(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.assert)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.assert)(o>=0,"Unknown leaf type: "+n),Object(i.assert)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(T,new Yt("[PRIORITY-POST]",Ht))},e.prototype.makePost=function(t,e){var n=Kt(t);return new Nt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Xt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,null,null);var c=parseInt(a/2,10)+e,u=i(e,c),l=i(c+1,r);return o=t[c],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,u,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var u=i(o+1,a),l=t[o],h=n?n(l):l;c(new Lt(h,l.node,r,null,u))},c=function(t){r?(r.left=t,r=t):(o=t,r=t)},u=0;u<e.count;++u){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(u+1));l?a(h,Lt.BLACK):(a(h,Lt.BLACK),a(h,Lt.RED))}return o}(new Zt(t.length));return new Vt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.assert)(ee&&Jt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ee},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(i.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.assert)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,c=n.getIterator(Nt.Wrap),u=c.getNext();u;)a=a||e.isDefinedOn(u.node),s.push(u),u=c.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.__assign)({},this.indexSet_);h[l]=e;var d=Object(o.__assign)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.map)(this.indexes_,function(t,o){var s=Object(i.safeGet)(r.indexSet_,o);if(Object(i.assert)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],c=n.getIterator(Nt.Wrap),u=c.getNext();u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Nt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.map)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Nt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&Object(i.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(qt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Nt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Gt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(i.assert)(".priority"!==ft(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Nt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Vt(qt),re.EMPTY_NODE,ne.Default)||this}return Object(o.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return j(t,function(e,r){if(Object(i.contains)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(j(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Nt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,Ut,function(t){return t.name},qt);if(o){var a=te(r,Jt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Jt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Nt,{MIN:{value:new Nt(S,re.EMPTY_NODE)},MAX:{value:new Nt(T,ie)}}),jt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,Tt=ie,Ht=ie,Kt=oe;var se,ae,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.assert)(!yt(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Nt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Nt(T,t)},e.prototype.toString=function(){return bt(this.indexPath_,0).join("/")},e}(Rt),ue=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?I(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return Nt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Nt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.assert)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.assert)(20===o.length,"nextPushId: Length should be 20."),o}),de=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return T;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return S;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function be(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(i.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(be(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_e=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Nt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Nt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ye=function(){function t(t){this.rangedFilter_=new _e(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Nt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,c=void 0,u=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();u=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&u(a,s)<=0&&(h=!0),h&&o<this.limit_&&u(s,c)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var c=t;Object(i.assert)(c.numChildren()===this.limit_,"");var u=new Nt(e,n),l=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(c.hasChild(e)){for(var d=c.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||c.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(be(e,n,d)),c.updateImmediateChild(e,n);null!=o&&o.trackChildChange(me(e,d));var g=c.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,u)>=0?(null!=o&&(o.trackChildChange(me(l.name,l.node)),o.trackChildChange(ge(e,n))),c.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:T},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function ke(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ce(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ae(t,e){var n=t.copy();return n.index_=e,n}function Ee(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===ue?e="$value":t.index_===Mt?e="$key":(Object(i.assert)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.stringify)(e),t.startSet_&&(n.startAt=Object(i.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Oe(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var xe=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=C("p:rest:"),o.listens_={},o}return Object(o.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var c=e.getListenId_(t,r),u={};this.listens_[c]=u;var l=Ee(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.safeGet)(s.listens_,c)===u&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ee(t._queryParams),r=t._path.toString(),o=new i.Deferred;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.__read)(s,2),c=a[0],u=a[1];c&&c.accessToken&&(e.auth=c.accessToken),u&&u.token&&(e.ac=u.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.jsonEval)(h.responseText)}catch(e){O("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&O("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),Se=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Te(){return{value:null,children:new Map}}function Ie(t,e,n){if(yt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,Te()),Ie(t.children.get(r),e=gt(e),n)}}function Pe(t,e){if(yt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Ie(t,new ht(e),n)}),Pe(t,e)}if(t.children.size>0){var r=ft(e);return e=gt(e),t.children.has(r)&&Pe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function De(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){De(r,new ht(e.toString()+"/"+t),n)})}var Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.__assign)({},t);return this.last_&&j(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;j(e,function(e,o){o>0&&Object(i.contains)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),je=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Fe,Le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=je.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(yt(this.path)){if(null!=this.affectedTree.value)return Object(i.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(dt(),n,this.revert)}return Object(i.assert)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Be=function(){function t(t,e){this.source=t,this.path=e,this.type=je.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,dt()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=je.OVERWRITE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),Ue=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=je.MERGE}return t.prototype.operationForChild=function(e){if(yt(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,dt(),n.value):new t(this.source,dt(),n)}return Object(i.assert)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),qe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(yt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Ke(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.assertionError)("Should only compare child_ events.");var r=new Nt(e.childName,e.snapshotNode),o=new Nt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function He(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return He(new qe(e,n,r),t.serverCache)}function Ge(t,e,n,r){return He(t.eventCache,new qe(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Fe||(Fe=new Vt(P)),e=Fe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return j(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(yt(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:_t(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(yt(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(yt(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(yt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(yt(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(yt(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(_t(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(yt(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),_t(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(yt(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),_t(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(_t(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Xe(t,e,n){if(yt(e))return new Je(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new Ye(n),c=t.writeTree_.setTree(e,a);return new Je(c)}function Ze(t,e,n){var r=t;return j(n,function(t,n){r=Xe(r,_t(e,t),n)}),r}function tn(t,e){if(yt(e))return Je.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Je(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Nt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Nt(t,n.value))}),e}function on(t,e){if(yt(e))return t;var n=nn(t,e);return new Je(null!=n?new Ye(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return cn(dt(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.assert)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=cn(_t(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(_t(t,".priority"),r)),n}function un(t,e){return yn(e,t)}function ln(t,e){if(t.snap)return At(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&At(_t(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function dn(t,e,n){for(var r=Je.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,c=void 0;if(s.snap)At(n,a)?r=Xe(r,c=wt(n,a),s.snap):At(a,n)&&(c=wt(a,n),r=Xe(r,dt(),s.snap.getChild(c)));else{if(!s.children)throw Object(i.assertionError)("WriteRecord should have .snap or .children");if(At(n,a))r=Ze(r,c=wt(n,a),s.children);else if(At(a,n))if(yt(c=wt(a,n)))r=Ze(r,dt(),s.children);else{var u=Object(i.safeGet)(s.children,ft(c));if(u){var l=u.getChild(gt(c));r=Xe(r,dt(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,dt())?an(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(At(t.path,e)||At(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,dt())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,o){Object(i.assert)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=_t(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function bn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,_t(t.treePath,e))}function vn(t,e,n){return function(t,e,n,r){var i=_t(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function _n(t,e){return yn(_t(t.treePath,e),t.writeTree)}function yn(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,be(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),kn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Cn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new qe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,c=on(t.visibleWrites,e),u=nn(c,dt());if(null!=u)a=u;else{if(null==n)return[];a=an(c,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function An(t,e,n,r,o,s){var a=e.eventCache;if(null!=bn(r,n))return e;var c=void 0,u=void 0;if(yt(n))if(Object(i.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);c=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=pn(r,Qe(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ft(n);if(".priority"===f){Object(i.assert)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,u=e.serverCache.getNode());c=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=gt(n),b=void 0;if(a.isCompleteForChild(f)){u=e.serverCache.getNode();var v=mn(r,n,a.getNode(),u);b=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else b=vn(r,f,e.serverCache);c=null!=b?t.filter.updateChild(a.getNode(),f,b,m,o,s):a.getNode()}}return We(e,c,a.isFullyInitialized()||yt(n),t.filter.filtersNodes())}function En(t,e,n,r,i,o,s,a){var c,u=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(yt(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),h,null)}else{var d=ft(n);if(!u.isCompleteForPath(n)&&pt(n)>1)return e;var f=gt(n),p=u.getNode().getImmediateChild(d).updateChild(f,r);c=".priority"===d?l.updatePriority(u.getNode(),p):l.updateChild(u.getNode(),d,p,f,kn,null)}var g=Ge(e,c,u.isFullyInitialized()||yt(n),l.filtersNodes());return An(t,g,n,i,new Cn(i,g,o),a)}function On(t,e,n,r,i,o,s){var a,c,u=e.eventCache,l=new Cn(i,e,o);if(yt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,c,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)c=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,c,u.isFullyInitialized(),u.isFiltered());else{var d=gt(n),f=u.getNode().getImmediateChild(h),p=void 0;if(yt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:We(e,t.filter.updateChild(u.getNode(),h,p,d,l,s),u.isFullyInitialized(),t.filter.filtersNodes())}}return a}function xn(t,e){return t.eventCache.isCompleteForChild(e)}function Sn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Tn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var c,u=e;c=yt(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return c.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var c=Sn(0,e.serverCache.getNode().getImmediateChild(n),r);u=En(t,u,new ht(n),c,i,o,s,a)}}),c.children.inorderTraversal(function(n,r){var c=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!c){var h=Sn(0,e.serverCache.getNode().getImmediateChild(n),r);u=En(t,u,new ht(n),h,i,o,s,a)}}),u}var In,Pn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new ye(n):new _e(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,c=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new qe(c,s.isFullyInitialized(),i.filtersNodes()),h=new qe(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=He(h,l),this.eventGenerator_=new ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Dn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!yt(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function Nn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){Object(i.assert)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var c=t.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(c)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function jn(t,e,n,r){e.type===je.MERGE&&null!==e.source.queryId&&(Object(i.assert)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.assert)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,c=function(t,e,n,r,o){var s,a,c=new wn;if(n.type===je.OVERWRITE){var u=n;u.source.fromUser?s=On(t,e,u.path,u.snap,r,o,c):(Object(i.assert)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!yt(u.path),s=En(t,e,u.path,u.snap,r,o,a,c))}else if(n.type===je.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,c){var u=_t(n,r);xn(e,ft(u))&&(a=On(t,a,u,c,i,o,s))}),r.foreach(function(r,c){var u=_t(n,r);xn(e,ft(u))||(a=On(t,a,u,c,i,o,s))}),a}(t,e,l.path,l.children,r,o,c):(Object(i.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Tn(t,e,l.path,l.children,r,o,a,c))}else if(n.type===je.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=bn(r,n))return e;var c=new Cn(r,e,o),u=e.eventCache.getNode(),l=void 0;if(yt(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,Qe(e));else{var d=e.serverCache.getNode();Object(i.assert)(d instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,d)}l=t.filter.updateFullNode(u,h=h,s)}else{var f=ft(n),p=vn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(u,f,p,gt(n),c,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,re.EMPTY_NODE,gt(n),c,s):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=bn(r,dt()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,c):function(t,e,n,r,i,o,s){if(null!=bn(i,n))return e;var a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(yt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return En(t,e,n,c.getNode().getChild(n),i,o,a,s);if(yt(n)){var u=new Ye(null);return c.getNode().forEachChild(Mt,function(t,e){u=u.set(new ht(t),e)}),Tn(t,e,n,u,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=_t(n,t);c.isCompleteForPath(r)&&(l=l.set(t,c.getNode().getChild(r)))}),Tn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,c)}else{if(n.type!==je.LISTEN_COMPLETE)throw Object(i.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return An(t,Ge(e,o.getNode(),o.isFullyInitialized()||yt(n),o.isFiltered()),n,r,kn,i)}(t,e,n.path,r,c)}var d=c.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=c.viewCache,Object(i.assert)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.assert)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.assert)(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=c.viewCache,Mn(t,c.changes,c.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Ke(t,i,"child_removed",e,r,n),Ke(t,i,"child_added",e,r,n),Ke(t,i,"child_moved",o,r,n),Ke(t,i,"child_changed",e,r,n),Ke(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Fn,Ln=function(){return function(){this.views=new Map}}();function Bn(t,e,n,r){var s,a,c=e.source.queryId;if(null!==c){var u=t.views.get(c);return Object(i.assert)(null!=u,"SyncTree gave us an op for an invalid query."),jn(u,e,n,r)}var l=[];try{for(var h=Object(o.__values)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(jn(u=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var c=He(new qe(s,a,!1),new qe(r,i,!1));return new Pn(e,c)}return o}function Un(t){var e,n,r=[];try{for(var i=Object(o.__values)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function qn(t,e){var n,r,i=null;try{for(var s=Object(o.__values)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||Dn(a.value,e)}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function zn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function Kn(t,e){return null!=zn(t,e)}function Hn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(o.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var c=t.allWrites[a];c.visible&&(a>=n&&ln(c,r.path)?o=!1:At(r.path,c.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=dn(t.allWrites,hn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):j(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,_t(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ye(null);return null!=r.snap?o=o.set(dt(),!0):j(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Le(r.path,o,n))}return[]}function Jn(t,e,n){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),c=[];if(a&&("default"===e._queryIdentifier||Kn(a,e))){var u=function(t,e,n,r){var s,a,c=e._queryIdentifier,u=[],l=[],h=Hn(t);if("default"===c)try{for(var d=Object(o.__values)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(o.__read)(f.value,2),m=g[0];l=l.concat(Rn(p=g[1],n,r)),Nn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||u.push(p.query))}}catch(b){s={error:b}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(c))&&(l=l.concat(Rn(p,n,r)),Nn(p)&&(t.views.delete(c),p.query._queryParams.loadsAllData()||u.push(p.query)));return h&&!Hn(t)&&u.push(new(Object(i.assert)(In,"Reference.ts has not been loaded"),In)(e._repo,e._path)),{removed:u,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=u.removed;c=u.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Hn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Hn(e))return[Wn(e)];var r=[];return e&&(r=Un(e)),j(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],b=m.query,v=ir(t,m);t.listenProvider_.startListening(lr(b),or(t,b),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return c}function Zn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||qn(e,n),s=s||Hn(e)});var a,c=t.syncPointTree_.get(r);c?(s=s||Hn(c),o=o||qn(c,dt())):(c=new Ln,t.syncPointTree_=t.syncPointTree_.set(r,c)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=qn(e,dt());n&&(o=o.updateImmediateChild(t,n))}));var u=Kn(c,e);if(!u&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(c,e,n,un(t.pendingWriteTree_,r),o,a);if(!u&&!s){var f=zn(c,e);d=d.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),c=t.syncPointTree_.subtree(r);if(o)Object(i.assert)(!Hn(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=c.fold(function(t,e,n){if(!yt(t)&&e&&Hn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(Un(e).map(function(t){return t.query}))),j(n,function(t,e){r=r.concat(e)}),r}),l=0;l<u.length;++l){var h=u[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,f))}return d}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=qn(n,wt(t,e));if(r)return r});return fn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,un(t.pendingWriteTree_,dt()))}function nr(t,e,n,r){if(yt(t.path))return rr(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=qn(i,dt()));var o=[],s=ft(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){var u=n?n.getImmediateChild(s):null,l=_n(r,s);o=o.concat(nr(a,c,u,l))}return i&&(o=o.concat(Bn(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=qn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=_n(r,e),c=t.operationForChild(e);c&&(o=o.concat(rr(c,i,s,a)))}),i&&(o=o.concat(Bn(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=wt(o,e);return ur(t,o,new Be(Me(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return Object(i.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function ur(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.assert)(r,"Missing sync point for query tag that we're tracking"),Bn(r,n,un(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.assert)(Fn,"Reference.ts has not been loaded"),Fn)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=_t(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?(Object(i.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.assert)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.assert)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.assert)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return vr(e,new dr(n,t),r)},br=function(t,e,n){return vr(t,new hr(e),n)};function vr(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=fr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var c=t;return r=c,o!==c.getPriority().val()&&(r=r.updatePriority(new Yt(o))),c.forEachChild(Jt,function(t,i){var o=vr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var _r=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function yr(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=ft(n);null!==o;){var s=Object(i.safeGet)(r.node.children,o)||{children:{},childCount:0};r=new _r(o,r,s),o=ft(n=gt(n))}return r}function wr(t){return t.node.value}function kr(t,e){t.node.value=e,xr(t)}function Cr(t){return t.node.childCount>0}function Ar(t,e){j(t.node.children,function(n,r){e(new _r(n,t,r))})}function Er(t,e,n,r){n&&!r&&e(t),Ar(t,function(t){Er(t,e,!0,r)}),n&&r&&e(t)}function Or(t){return new ht(null===t.parent?t.name:Or(t.parent)+"/"+t.name)}function xr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Cr(t)}(n),o=Object(i.contains)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,xr(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,xr(t))}(t.parent,t.name,t)}var Sr=/[\[\].#$\/\u0000-\u001F\u007F]/,Tr=/[\[\].#$\u0000-\u001F\u007F]/,Ir=10485760,Pr=function(t){return"string"==typeof t&&0!==t.length&&!Sr.test(t)},Dr=function(t){return"string"==typeof t&&0!==t.length&&!Tr.test(t)},Nr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!x(t)||t&&"object"==typeof t&&Object(i.contains)(t,".sv")},Rr=function(t,e,n,r){r&&void 0===e||jr(Object(i.errorPrefix)(t,"value"),e,n)},jr=function(t,e,n){var r=n instanceof ht?new Et(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+xt(r));if("function"==typeof e)throw new Error(t+"contains a function "+xt(r)+" with contents = "+e.toString());if(x(e))throw new Error(t+"contains "+e.toString()+" "+xt(r));if("string"==typeof e&&e.length>Ir/3&&Object(i.stringLength)(e)>Ir)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+xt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(j(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Pr(e)))throw new Error(t+" contains an invalid key ("+e+") "+xt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,c;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.stringLength)(e),Ot(t)}(r,e),jr(t,n,r),c=(a=r).parts_.pop(),a.byteLength_-=Object(i.stringLength)(c),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+xt(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];j(e,function(t,e){var r=new ht(t);if(jr(o,e,_t(n,r)),".priority"===mt(r)&&!Nr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=bt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(kt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&At(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Fr=function(t,e,n){if(!n||void 0!==e){if(x(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nr(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Br=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Dr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ur=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},qr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Pr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Dr(t)}(n))throw new Error(Object(i.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.errorPrefix)(t,e)+"must be a boolean.")},Kr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Hr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ct(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){Hr(t,n),$r(t,function(t){return Ct(t,e)})}function Gr(t,e,n){Hr(t,n),$r(t,function(t){return At(t,e)||At(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();_&&k("event: "+n.toString()),B(r)}}}var Yr="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Te(),this.transactionQueueTree_=new _r,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Zr(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var c=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,c=wt(s,e),u=Ye.fromObject(n);return ur(t,s,new Ue(Me(a),c,u))}return[]}(t.serverSyncTree_,s,c,o)}else{var u=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,c=wt(s,e);return ur(t,s,new Ve(Me(a),c,n))}return[]}(t.serverSyncTree_,s,u,o)}else if(r){var l=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ye.fromObject(n);return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Jn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=fi(t,s)),Gr(t.eventQueue_,d,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ui(t,"onDisconnectEvents");var e=Zr(t),n=Te();De(t.onDisconnect_,dt(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);Ie(n,r,o)});var r=[];De(n,dt(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=vi(t,e);fi(t,i)}),t.onDisconnect_=Te(),Gr(t.eventQueue_,dt(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ui(t,"set",{path:e.toString(),value:n,priority:r});var o=Zr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),c=br(s,a,o),u=ri(t),l=Qn(t.serverSyncTree_,e,c,u,!0);Hr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||O("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o);Gr(t.eventQueue_,e,s),li(0,i,n,r)});var h=vi(t,e);fi(t,h),Gr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Pe(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Ie(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===ft(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ui(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),k.apply(void 0,Object(o.__spreadArray)([r],Object(o.__read)(e)))}function li(t,e,n,r){e&&B(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||bi(t,e),wr(e)){var n=gi(t,e);Object(i.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),c=0;c<n.length;c++){var u=n[c];Object(i.assert)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=wt(e,u.path);s=s.updateChild(l,u.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ui(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(bi(t,yr(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)B(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(O("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;fi(t,e)}},a)}(t,Or(e),n)}else Cr(e)&&Ar(e,function(e){di(t,e)})}function fi(t,e){var n=pi(t,e),r=Or(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var c,u=e[a],l=wt(n,u.path),h=!1;if(Object(i.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)h=!0,c=u.abortReason,o=o.concat(Yn(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)h=!0,c="maxretry",o=o.concat(Yn(t.serverSyncTree_,u.currentWriteId,!0));else{var d=hi(t,u.path,s);u.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){jr("transaction failed: Data returned ",f,u.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(i.contains)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=u.currentWriteId,m=Zr(t),b=br(p,d,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=b,u.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat(Qn(t.serverSyncTree_,u.path,b,u.currentWriteId,u.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,c="nodata",o=o.concat(Yn(t.serverSyncTree_,u.currentWriteId,!0))}Gr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===c?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(c),!1,null)}))},c=0;c<e.length;c++)a(c);for(bi(t,t.transactionQueueTree_),c=0;c<r.length;c++)B(r[c]);di(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===wr(r);)r=yr(r,n),n=ft(e=gt(e));return r}function gi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Ar(e,function(e){mi(t,e,n)})}function bi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,kr(e,n.length>0?n:void 0)}Ar(e,function(e){bi(t,e)})}function vi(t,e){var n=Or(pi(t,e)),r=yr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){_i(t,e)}),_i(t,r),Er(r,function(e){_i(t,e)}),n}function _i(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?kr(e,void 0):n.length=s+1,Gr(t.eventQueue_,Or(e),o),a=0;a<r.length;a++)B(r[a])}}var yi=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new G(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,c="https",u=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(c=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.__values)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var c=a.split("=");2===c.length?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===c||"wss"===c,u=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}},ki=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.stringify)(this.snapshot.exportVal())},t}(),Ci=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ai=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ei=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.Deferred;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Ur("OnDisconnect.remove",this._path);var t=new i.Deferred;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Ur("OnDisconnect.set",this._path),Rr("OnDisconnect.set",t,this._path,!1);var e=new i.Deferred;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Ur("OnDisconnect.setWithPriority",this._path),Rr("OnDisconnect.setWithPriority",t,this._path,!1),Fr("OnDisconnect.setWithPriority",e,!1);var n=new i.Deferred;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Ie(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Ur("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new i.Deferred;return function(t,e,n,r){if(Object(i.isEmpty)(n))return k("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&j(n,function(n,r){var i=oe(r);Ie(t.onDisconnect_,_t(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Oi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return yt(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ii(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Oe(this._queryParams),e=N(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Oe(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ct(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function xi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Si(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==T)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Jt){if(null!=e&&!Nr(e)||null!=n&&!Nr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.assert)(t.getIndex()instanceof ce||t.getIndex()===ue,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ti(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ii=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Oi),Pi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Ri(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ri(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Di(t,e){return(t=Object(i.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Ri(t._root,e):t._root}function Ni(t,e){(t=Object(i.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=yi(e,t._repo.repoInfo_.nodeAdmin);qr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||E("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Di(t,n.path.toString())}function Ri(t,e){var n;return null===ft((t=Object(i.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new Ii(t._repo,_t(t._path,e))}function ji(t,e){t=Object(i.getModularInstance)(t),Ur("push",t._path),Rr("push",e,t._path,!0);var n,r=Xr(t._repo),o=he(r),s=Ri(t,o),a=Ri(t,o);return n=null!=e?Fi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Mi(t){return Ur("remove",t._path),Fi(t,null)}function Fi(t,e){t=Object(i.getModularInstance)(t),Ur("set",t._path),Rr("set",e,t._path,!1);var n=new i.Deferred;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Li(t,e){t=Object(i.getModularInstance)(t),Ur("setPriority",t._path),Fr("setPriority",e,!1);var n=new i.Deferred;return ii(t._repo,_t(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Bi(t,e,n){if(Ur("setWithPriority",t._path),Rr("setWithPriority",e,t._path,!1),Fr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.Deferred;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Mr("update",e,t._path,!1);var n=new i.Deferred;return function(t,e,n,r){ui(t,"update",{path:e.toString(),value:n});var o=!0,s=Zr(t),a={};if(j(n,function(n,r){o=!1,a[n]=mr(_t(e,n),oe(r),t.serverSyncTree_,s)}),o)k("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var c=ri(t),u=function(t,e,n,r){!function(t,e,n,r){Object(i.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ye.fromObject(n);return er(t,new Ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,c);Hr(t.eventQueue_,u),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||O("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o),a=s.length>0?fi(t,e):e;Gr(t.eventQueue_,a,s),li(0,r,n,i)}),j(n,function(n){var r=vi(t,_t(e,n));fi(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Ui=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ki("value",this,new Pi(t.snapshotNode,new Ii(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),qi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.assert)(null!=t.childName,"Child events should have a childName.");var n=Ri(new Ii(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ki(t.type,this,new Pi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ai(t._repo,t,u),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var c=new Ai(n,o||void 0),u="value"===e?new Ui(c):new qi(e,c);return function(t,e,n){var r;r=".info"===ft(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,u),function(){return ai(t._repo,t,u)}}function Ki(t,e,n,r){return zi(t,"value",e,n,r)}function Hi(t,e,n,r){return zi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return zi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return zi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return zi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Ai(n):null;"value"===e?r=new Ui(i):e&&(r=new qi(e,i)),ai(t._repo,t,r)}var Yi=function(){return function(){}}(),Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("endAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(Ti(e),Si(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Xi(t,e){return Br("endAt","key",e,!0),new Ji(t,e)}var Zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?S:fe(r)),i.endBeforeSet_=!0,i);if(Ti(o),Si(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function to(t,e){return Br("endBefore","key",e,!0),new Zi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("startAt",this._value,t._path,!0);var e=ke(t._queryParams,this._value,this._key);if(Ti(e),Si(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Oi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function no(t,e){return void 0===t&&(t=null),Br("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=de(n)),i=ke(e,n,r)):i=ke(e,n,null==r?T:de(r)),i.startAfterSet_=!0,i);if(Ti(o),Si(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Oi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function io(t,e){return Br("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByChild");var e=new ht(this._path);if(yt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Ae(t._queryParams,n);return Si(r),new Oi(t._repo,t._path,r,!0)},e}(Yi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new uo(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByKey");var e=Ae(t._queryParams,Mt);return Si(e),new Oi(t._repo,t._path,e,!0)},e}(Yi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByPriority");var e=Ae(t._queryParams,Jt);return Si(e),new Oi(t._repo,t._path,e,!0)},e}(Yi);function go(){return new po}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){xi(t,"orderByValue");var e=Ae(t._queryParams,ue);return Si(e),new Oi(t._repo,t._path,e,!0)},e}(Yi);function bo(){return new mo}var vo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(Rr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Yi);function _o(t,e){return Br("equalTo","key",e,!0),new vo(t,e)}function yo(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.getModularInstance)(t);try{for(var c=Object(o.__values)(r),u=c.next();!u.done;u=c.next()){var l=u.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return a}!function(t){Object(i.assert)(!In,"__referenceConstructor has already been defined"),In=t}(Ii),function(t){Object(i.assert)(!Fn,"__referenceConstructor has already been defined"),Fn=t}(Ii);var wo={},ko=!1;function Co(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=yi(o,i),c=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(s=!0,c=(a=yi(o="http://"+u+"?ns="+c.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new z(z.OWNER):new q(t.name,t.options,e);qr("Invalid Firebase Database URL",a),yt(a.path)||E("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,ko,n,r),i[t.toURLString()]=o,o}(c,t,l,new U(t.name,n));return new Ao(h,t)}var Ao=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new xe(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Dt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){j(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},o=t.repoInfo_.toString(),J[o]||(J[o]=r()),J[o]),t.infoData_=new Se,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ii(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||E("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&E("Cannot call "+t+" on a deleted database.")},t}();function Eo(t){(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function Oo(t){var e;(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var xo={".sv":"timestamp"},So=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function To(t,e,n){var r;if(t=Object(i.getModularInstance)(t),Ur("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.Deferred,a=Ki(t,function(){});return function(e,n,r,o,a,c){ui(e,"transaction on "+n);var u={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Pi(r,new Ii(t._repo,t._path),Jt),s.resolve(new So(n,i)))},status:null,order:m(),applyLocally:c,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);u.currentInputSnapshot=l;var h=u.update(l.val());if(void 0===h)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{jr("transaction failed: Data returned ",h,u.path),u.status=0;var d=yr(e.transactionQueueTree_,n),f=wr(d)||[];f.push(u),kr(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.contains)(h,".priority")?(p=Object(i.safeGet)(h,".priority"),Object(i.assert)(Nr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Zr(e),b=oe(h,p),v=br(b,l,g);u.currentOutputSnapshotRaw=b,u.currentOutputSnapshotResolved=v,u.currentWriteId=ri(e);var _=Qn(e.serverSyncTree_,n,v,u.currentWriteId,u.applyLocally);Gr(e.eventQueue_,n,_),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var Io=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.validateArgCount)("OnDisconnect.set",1,2,arguments.length),Object(i.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.validateCallback)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),Po=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Do=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),Object(i.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),No=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.validateArgCount)("Query.on",2,4,arguments.length),Object(i.validateCallback)("Query.on","callback",n,!1);var c=t.getCancelAndContextArgs_("Query.on",r,o),u=function(t,e){n.call(c.context,new Do(a.database,t),e)};u.userCallback=n,u.context=c.context;var l=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return Ki(this._delegate,u,l),n;case"child_added":return Hi(this._delegate,u,l),n;case"child_removed":return $i(this._delegate,u,l),n;case"child_changed":return Wi(this._delegate,u,l),n;case"child_moved":return Gi(this._delegate,u,l),n;default:throw new Error(Object(i.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.validateArgCount)("Query.off",0,3,arguments.length),Lr("Query.off",t,!0),Object(i.validateCallback)("Query.off","callback",e,!0),Object(i.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||qn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||qn(i,dt()):(i=new Ln,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new qe(r,!0,!1):null;return $e(Vn(i,e,un(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n).withIndex(e._queryParams.getIndex()),i=Jn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ui(t,"get for query "+Object(i.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.getModularInstance)(t))._repo,t).then(function(e){return new Pi(e,new Ii(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Do(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.validateArgCount)("Query.once",1,4,arguments.length),Object(i.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),c=new i.Deferred,u=function(t,e){var r=new Do(s.database,t);n&&n.call(a.context,r,e),c.resolve(r)};u.userCallback=n,u.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),c.reject(t)};switch(e){case"value":Ki(this._delegate,u,l,{onlyOnce:!0});break;case"child_added":Hi(this._delegate,u,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,u,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,u,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,u,l,{onlyOnce:!0});break;default:throw new Error(Object(i.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},t.prototype.limitToFirst=function(e){return Object(i.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,yo(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,yo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return Object(i.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,yo(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,yo(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,yo(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,yo(this._delegate,bo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,yo(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,yo(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,yo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,yo(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,yo(this._delegate,_o(e,n)))},t.prototype.toString=function(){return Object(i.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,Object(i.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this.database,new Ii(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Ro=function(t){function e(e,n){var r=t.call(this,e,new Oi(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.__extends)(e,t),e.prototype.getKey=function(){return Object(i.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ri(this._delegate,t))},e.prototype.getParent=function(){Object(i.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.validateArgCount)("Reference.set",1,2,arguments.length),Object(i.validateCallback)("Reference.set","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ur("Reference.update",this._delegate._path),Object(i.validateCallback)("Reference.update","onComplete",e,!0);var o=Vi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Bi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.validateArgCount)("Reference.remove",0,1,arguments.length),Object(i.validateCallback)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.validateArgCount)("Reference.transaction",1,3,arguments.length),Object(i.validateCallback)("Reference.transaction","transactionUpdate",t,!1),Object(i.validateCallback)("Reference.transaction","onComplete",e,!0),zr("Reference.transaction","applyLocally",n,!0);var o=To(this._delegate,t,{applyLocally:n}).then(function(t){return new Po(t.committed,new Do(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.validateArgCount)("Reference.setPriority",1,2,arguments.length),Object(i.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.validateArgCount)("Reference.push",0,2,arguments.length),Object(i.validateCallback)("Reference.push","onComplete",n,!0);var o=ji(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Ur("Reference.onDisconnect",this._delegate._path),new Io(new Ei(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(No),jo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&E("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&E('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new z(z.OWNER);else if(r.mockUserToken){var a="string"==typeof r.mockUserToken?r.mockUserToken:Object(i.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new z(a)}!function(t,e,n,r){t.repoInfo_=new G(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Ro){var e=Ni(this._delegate,t.toString());return new Ro(this,e)}return e=Di(this._delegate,t),new Ro(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.validateArgCount)(e,1,1,arguments.length);var n=Ni(this._delegate,t);return new Ro(this,n)},t.prototype.goOffline=function(){return Object(i.validateArgCount)("database.goOffline",0,0,arguments.length),Eo(this._delegate)},t.prototype.goOnline=function(){return Object(i.validateArgCount)("database.goOnline",0,0,arguments.length),Oo(this._delegate)},t.ServerValue={TIMESTAMP:xo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ne(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);j(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new r.Provider("auth-internal",new r.ComponentContainer("database-standalone"));return u.setComponent(new r.Component("auth-internal",function(){return i},"PRIVATE")),{instance:new jo(Co(e,u,void 0,n,a),e),namespace:o}}}),Fo=Dt;Dt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Dt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Lo=Object.freeze({__proto__:null,DataConnection:Fo,RealTimeConnection:at,hijackHash:function(t){var e=Dt.prototype.put;return Dt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Dt.prototype.put=e}},ConnectionTarget:G,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){ko=t}(t)}}),Bo=jo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.Component("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new jo(Co(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Ro,Query:No,Database:jo,DataSnapshot:Do,enableLogging:w,INTERNAL:Mo,ServerValue:Bo,TEST_ACCESS:Lo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.11.0"),Object(i.isNodeSdk)()&&(t.exports=n)}(e.default)}).call(this,n("3UD+")(t))},"70T+":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("mrSG"),i=n("fXoL"),o=function(t){return t[t.OFF=0]="OFF",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG",t[t.LOG=5]="LOG",t}({});const s=new i.q("LoggerLevel");let a=(()=>{let t=class{constructor(t){this._level=t,this.log=this._level>=o.LOG&&console&&console.log?console.log.bind(console):()=>{},this.debug=this._level>=o.DEBUG&&console&&console.debug?console.debug.bind(console):()=>{},this.info=this._level>=o.INFO&&console&&console.info?console.info.bind(console):()=>{},this.warn=this._level>=o.WARN&&console&&console.warn?console.warn.bind(console):()=>{},this.error=this._level>=o.ERROR&&console&&console.error?console.error.bind(console):()=>{},this.group=this._level>o.OFF&&console&&console.group?console.group.bind(console):()=>{},this.groupCollapsed=this._level>o.OFF&&console&&console.groupCollapsed?console.groupCollapsed.bind(console):()=>{},this.groupEnd=this._level>o.OFF&&console&&console.groupEnd?console.groupEnd.bind(console):()=>{},this.time=this._level>=o.DEBUG&&console&&console.time?console.time.bind(console):()=>{},this.timeEnd=this._level>=o.DEBUG&&console&&console.timeEnd?console.timeEnd.bind(console):()=>{}}get level(){return this._level}};return t.\u0275fac=function(e){return new(e||t)(i.Rb(s))},t.\u0275prov=i.Eb({token:t,factory:function(e){return t.\u0275fac(e)}}),t=Object(r.__decorate)([Object(r.__param)(0,Object(i.p)(s))],t),t})();var c;let u=(()=>{let t=c=class{static forRoot(t=o.LOG){return{ngModule:c,providers:[a,{provide:s,useValue:t}]}}};return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)}}),t})()},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),c=n("NJ4a");class u extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends u{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},AWfg:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("iuoO"),i=n("0tOT"),o=n("fXoL"),s=n("J8cO"),a=n("PvES");let c=(()=>{class t extends i.a{constructor(t,e){super(e),this.$userCenter=t,this.$logger=e,this.featureName="Friend"}resolveAction({action:t,id:e,user:n}){return new Promise(i=>{switch(t){case r.a.FetchRecommendList:i(this.$userCenter.fetchAllUsers());break;case r.a.FetchInviteList:i(this.$userCenter.fetchUsers(n.inviteAddFriends));break;case r.a.SearchUser:i(this.$userCenter.fetchUser(e));break;case r.a.AddFriend:null==n||n.addFriend(e),this.$userCenter.updateUserProfile({friends:null==n?void 0:n.friends},null==n?void 0:n.id).then(()=>{this.$logger.systemMessage(`user ${null==n?void 0:n.id} has successfully added ${e}.`),i(this.updateFriendInvitedList(n.id,e))});break;case r.a.IgnoreInvite:null==n||n.ignoreInvite(e),this.$userCenter.updateUserProfile({inviteAddFriends:null==n?void 0:n.inviteAddFriends},null==n?void 0:n.id).then(()=>{this.$logger.systemMessage(`user ${null==n?void 0:n.id} invitation has successfully ignored.`),i(this.removeFriend(n.id,e))})}})}removeFriend(t,e){return new Promise(n=>{this.$userCenter.fetchUser(e).then(({friends:n})=>this.$userCenter.updateUserProfile({friends:n.filter(e=>e!==t)},e)).then(()=>n(!0))})}updateFriendInvitedList(t,e){return new Promise(n=>{this.$userCenter.fetchUser(e).then(({inviteAddFriends:n})=>this.$userCenter.updateUserProfile({inviteAddFriends:[...n,t]},e)).then(()=>n(!0))})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(s.a),o.Rb(a.a))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},AytR:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,i=n("CmIU"),o=n("phrh");const s={production:!0,defaultAvatar:"assets/images/icons/empty-avatar.jpeg",defaultUrl:`${i.d.User}/${null===(r=o.e.get(i.f.Chat))||void 0===r?void 0:r.path}`,firebaseConfig:{apiKey:"AIzaSyAJ-b0JwMjkqFkOTEQxBdKBCZFXCbzkf_Q",authDomain:"f-coin-1bf5f.firebaseapp.com",projectId:"f-coin-1bf5f",storageBucket:"f-coin-1bf5f.appspot.com",messagingSenderId:"516639164071",appId:"1:516639164071:web:c7326f2d951b027c86fd82",measurementId:"G-RY2EQ8FL6X"}}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),c=n("Lhse"),u=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[c.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[c.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},CmIU:function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return a}),n.d(e,"c",function(){return c});var r=function(t){return t.User="user",t.Business="business",t.Friend="friend",t.Social="social",t}({}),i=function(t){return t.Chat="chat",t}({}),o=function(t){return t.Analyze="analyze",t}({}),s=function(t){return t.Recommend="recommend",t}({}),a=function(t){return t.SharedWall="shared-wall",t}({}),c=function(t){return t.Landing="landing",t.SignOn="sign-on",t}({})},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},DZuR:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t,e){this.$fb=t,this.$logger=e}fetch(t=!0){return this.$fb.request(this.databaseName,t)}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},FpXt:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ofXK"),i=n("3Pt+"),o=n("fwGN"),s=n("zioG"),a=n("fXoL");let c=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[r.c,i.e,s.b]]}),t})(),u=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[r.c]]}),t})(),l=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[r.c,i.e,i.m,o.a,c,u],i.e,i.m,o.a,c,u]}),t})()},GyhO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("LRne"),i=n("bHdf");function o(...t){return Object(i.a)(1)(Object(r.a)(...t))}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),c=n("2fFW");let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new c(t,this.total))}}class c extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},J8cO:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("cp0P"),i=n("DZuR"),o=n("fXoL"),s=n("a/YC"),a=n("PvES");let c=(()=>{class t extends i.a{constructor(t,e){super(t,e),this.databaseName="user"}updateUserProfile(t,e){return new Promise(n=>{this.fetch().update(t,e).then(t=>n(t))})}fetchUser(t){return new Promise(e=>{this.fetch().read$(t).subscribe(t=>{this.$logger.systemMessage(t?`user ${t.id} profile has been successfully fetched.`:"user not found."),e(t)})})}fetchUsers(t){return new Promise(e=>{t.length>0?Object(r.a)(t.map(t=>this.fetch().read$(t))).subscribe(n=>{this.$logger.systemMessage(`total ${t.length} user profiles has been successfully fetched.`),e(n)}):e([])})}fetchAllUsers(){return new Promise(t=>{this.fetch().read$().subscribe(e=>{this.$logger.systemMessage(`All ${e.length} users has been successfully fetched.`),t(e.map(({value:t})=>t))})})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(s.a),o.Rb(a.a))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("GyhO"),i=n("z+Ro");function o(...t){const e=t[t.length-1];return Object(i.a)(e)?(t.pop(),n=>Object(r.a)(t,n,e)):e=>Object(r.a)(t,e)}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.default});var i="8.10.0";r.default.registerVersion("firebase",i,"app"),r.default.SDK_VERSION=i},"Ju5/":function(t,e,n){"use strict";var r=n("XqMk"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},L3Qv:function(t,e,n){"use strict";e.a=function(){return!1}},LJo4:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("2Vo4"),i=n("iuoO");class o{constructor({id:t,avatar:e,friends:n,name:r,totalAssets:i,inviteAddFriends:o}){this.name=r,this.id=t,this.avatar=e||"",this.friends=n||[],this.totalAssets=i||0,this.inviteAddFriends=o||[]}addFriend(t){this.friends.push(t),this.inviteAddFriends=this.inviteAddFriends.filter(e=>e!==t)}ignoreInvite(t){this.inviteAddFriends=this.inviteAddFriends.filter(e=>e!==t)}}var s=n("IzEk"),a=n("fXoL"),c=n("J8cO"),u=n("PvES");let l=(()=>{class t{constructor(t,e){this.$userCenter=t,this.$logger=e,this.friends=new r.a([]),this.friends$=this.friends.asObservable(),this.user=new r.a(null),this.user$=this.user.asObservable()}generateUser(t){this.$userCenter.fetchUser(t).then(e=>{this.user.next(new o(e)),this.$logger.systemMessage("welcome user "+t)})}fetchFriendList(t){this.$userCenter.fetchUsers(t.friends).then(t=>this.updateFriendsList(t))}getUser(t){return new Promise(e=>{t?e(t):this.user$.pipe(Object(s.a)(1)).subscribe(t=>e(t))})}updateFriendsList(t){this.friends.next(t.map(t=>new i.b(t)))}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(c.a),a.Rb(u.a))},t.\u0275prov=a.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},"N+D2":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fXoL"),i=n("PvES");let o=(()=>{class t{constructor(t,e){this.injector=t,this.$logger=e,this.loadingQueue=new Set,this.isActivated=!1,window.requestAnimationFrame(this.watchOverlay.bind(this))}startLoading(){const t=(new Date).toISOString();return this.loadingQueue.has(t)||this.loadingQueue.add(t),t}endLoading(t,e){this.loadingQueue.has(t)&&this.loadingQueue.delete(t),null==e||e.focus()}watchOverlay(){this.isActivated=this.loadingQueue.size>0,window.requestAnimationFrame(this.watchOverlay.bind(this))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.r),r.Rb(i.a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},PvES:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fXoL"),i=n("70T+");let o=(()=>{class t{constructor(t){this.logger=t,this.systemMessage=(t="",e)=>e?this.logger.log("[System]: "+t,e):this.logger.log("[System]: "+t),this.errorMessage=(t="",e,n="System")=>e?this.logger.error(`[${n} error]: ${t}`,e):this.logger.error(`[${n} error]: ${t}`),this.debugMessage=(t="")=>this.logger.debug("%c[Debug]: "+t,"color: #5EA4FF ; background: #2C0101")}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(i.b))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),c=n("c2HN"),u=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(c.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(u.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SlXt:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("fXoL");let o=(()=>{class t{constructor(){this.destroy=new r.a,this.onDestroy$=this.destroy.asObservable()}onDestroy(){}ngOnDestroy(){this.destroy.next(),this.destroy.complete(),this.onDestroy()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})()},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),c=n("SpAZ");function u(t,e){const n=arguments.length>=2;return u=>u.pipe(t?Object(i.a)((e,n)=>t(e,n,u)):c.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},UbJi:function(t,e,n){"use strict";n.d(e,"a",function(){return P}),n.d(e,"b",function(){return E});var r=n("fXoL"),i=n("XNiG"),o=n("LRne"),s=n("HDdC"),a=n("Cfvw"),c=n("VRyK"),u=n("pxpQ"),l=n("eIep"),h=n("lJxs"),d=n("qgXg"),f=n("quSY"),p=n("9ppp"),g=n("Ylt2");class m extends i.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new b(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new p.a;if(this.isStopped||this.hasError?o=f.a.EMPTY:(this.observers.push(t),o=new g.a(this,t)),r&&t.add(t=new u.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||d.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class b{constructor(t,e){this.time=t,this.value=e}}function v(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,c=!1;return function(u){let l;s++,!i||a?(a=!1,i=new m(t,e,r),l=i.subscribe(this),o=u.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){c=!0,o=void 0,i.complete()}}),c&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!c&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}var _=n("SxV6");function y(t,e){return e?Object(l.a)(()=>t,e):Object(l.a)(()=>t)}var w=n("tf+s"),k=n("pLZG"),C=n("spgP"),A=n("ofXK");const E=new r.q("angularfire2.auth.use-emulator"),O=new r.q("angularfire2.auth.settings"),x=new r.q("angularfire2.auth.tenant-id"),S=new r.q("angularfire2.auth.langugage-code"),T=new r.q("angularfire2.auth.use-device-language"),I=new r.q("angularfire.auth.persistence");let P=(()=>{class t{constructor(t,e,r,d,f,p,g,m,b,E){const O=new C.d(d),x=Object(C.h)(O),S=new i.a,T=Object(o.a)(void 0).pipe(Object(u.b)(O.outsideAngular),Object(l.a)(()=>d.runOutsideAngular(()=>n.e(9).then(n.bind(null,"6nsN")))),Object(h.a)(()=>Object(C.g)(t,d,e)),Object(h.a)(t=>d.runOutsideAngular(()=>{const e=f,n=p;return Object(C.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=d.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator("http://"+e.join(":")),g&&(r.tenantId=g),r.languageCode=m,b&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return E&&r.setPersistence(E),r},[e,g,m,b,n,E])})),v({bufferSize:1,refCount:!1}));if(Object(A.q)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(o.a)(null);else{T.pipe(Object(_.a)()).subscribe();const t=T.pipe(Object(l.a)(t=>t.getRedirectResult().then(t=>t,()=>null)),x,v({bufferSize:1,refCount:!1})),e=t=>new s.a(e=>({unsubscribe:d.runOutsideAngular(()=>t(e))})),n=T.pipe(Object(l.a)(t=>e(t.onAuthStateChanged.bind(t)))),r=T.pipe(Object(l.a)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(y(n),Object(w.a)(O.outsideAngular),Object(u.b)(O.insideAngular)),this.user=t.pipe(y(r),Object(w.a)(O.outsideAngular),Object(u.b)(O.insideAngular)),this.idToken=this.user.pipe(Object(l.a)(t=>t?Object(a.a)(t.getIdToken()):Object(o.a)(null))),this.idTokenResult=this.user.pipe(Object(l.a)(t=>t?Object(a.a)(t.getIdTokenResult()):Object(o.a)(null))),this.credential=Object(c.a)(t,S,this.authState.pipe(Object(k.a)(t=>!t))).pipe(Object(h.a)(t=>(null==t?void 0:t.user)?t:null),Object(w.a)(O.outsideAngular),Object(u.b)(O.insideAngular))}return Object(C.i)(this,T,d,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>S.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(C.c),r.Rb(C.b,8),r.Rb(r.B),r.Rb(r.z),r.Rb(E,8),r.Rb(O,8),r.Rb(x,8),r.Rb(S,8),r.Rb(T,8),r.Rb(I,8))},t.\u0275prov=r.Eb({factory:function(){return new t(r.Rb(C.c),r.Rb(C.b,8),r.Rb(r.B),r.Rb(r.z),r.Rb(E,8),r.Rb(O,8),r.Rb(x,8),r.Rb(S,8),r.Rb(T,8),r.Rb(I,8))},token:t,providedIn:"any"}),t})();Object(C.e)(P,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}])},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WOAq:function(t,e,n){"use strict";(function(t){var r=n("Ju5/"),i=n("L3Qv"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.a.Buffer:void 0;e.a=(a?a.isBuffer:void 0)||i.a}).call(this,n("3UD+")(t))},"X8/r":function(t,e,n){"use strict";var r=n("zIRd"),i=n("/6Yf"),o=n("mrSG"),s=n("qOnz"),a=n("q/0M");function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,l=c(r),h=((u={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",u["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",u["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",u["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",u["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",u["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",u["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",u["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",u["recaptcha-error"]="ReCAPTCHA error.",u),d=new s.ErrorFactory("appCheck","AppCheck",h),f=new Map,p={activated:!1,tokenObservers:[]},g={enabled:!1};function m(t){return f.get(t)||p}function b(t,e){f.set(t,e)}function v(){return g}var _="https://content-firebaseappcheck.googleapis.com/v1beta",y=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise(function(t){setTimeout(t,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function w(){return self.grecaptcha}function k(t){if(!m(t).activated)throw d.create("use-before-activation",{appName:t.name})}function C(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,function(){var t,i,s,a,c,u,l,h,f,p;return o.__generator(this,function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw c=o.sent(),d.create("fetch-network-error",{originalErrorMessage:c.message});case 4:if(200!==a.status)throw d.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return u=o.sent(),[3,8];case 7:throw l=o.sent(),d.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=u.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw d.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return f=1e3*Number(h[1]),p=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:p+f,issuedAtTimeMillis:p}]}})})}function A(t,e){var n=t.options;return{url:_+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function E(t,e){var n=t.options;return{url:_+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var O="firebase-app-check-store",x="debug-token",S=null;function T(){return S||(S=new Promise(function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(d.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(O,{keyPath:"compositeKey"})}}}catch(r){e(d.create("storage-open",{originalErrorMessage:r.message}))}}))}function I(t){return D(N(t))}function P(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,T()];case 1:return n=o.sent(),r=n.transaction(O,"readwrite"),i=r.objectStore(O),s=i.put({compositeKey:t,value:e}),[2,new Promise(function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(d.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function D(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,T()];case 1:return e=o.sent(),n=e.transaction(O,"readonly"),r=n.objectStore(O),i=r.get(t),[2,new Promise(function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(d.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function N(t){return t.options.appId+"-"+t.name}var R=new a.Logger("@firebase/app-check");function j(t,e){return s.isIndexedDBAvailable()?function(t,e){return P(N(t),e)}(t,e).catch(function(t){R.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function M(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){if((t=v()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var F={error:"UNKNOWN_ERROR"};function L(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,c,u,l,h,d,f,p;return o.__generator(this,function(g){switch(g.label){case 0:return k(t),r=m(t),a=void 0,(i=r.token)?[3,2]:[4,r.cachedTokenPromise];case 1:(c=g.sent())&&q(c)&&(i=c,b(t,o.__assign(o.__assign({},r),{token:i})),U(t,{token:i.token})),g.label=2;case 2:return!n&&i&&q(i)?[2,{token:i.token}]:v().enabled?(l=C,h=E,d=[t],[4,M()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,d.concat([g.sent()])),e])];case 4:return u=g.sent(),[4,j(t,u)];case 5:return g.sent(),b(t,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return g.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=g.sent(),[3,9];case 8:return f=g.sent(),R.error(f),a=f,[3,9];case 9:return i?[3,10]:(p=function(t){return{token:(e=F,s.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(a),[3,12]);case 10:return p={token:i.token},b(t,o.__assign(o.__assign({},r),{token:i})),[4,j(t,i)];case 11:g.sent(),g.label=12;case 12:return U(t,p),[2,p]}})})}function B(t,e,n,r,i){var s=m(t),a={next:r,error:i,type:n},c=o.__assign(o.__assign({},s),{tokenObservers:o.__spreadArray(o.__spreadArray([],s.tokenObservers),[a])});if(!c.tokenRefresher){var u=function(t,e){var n=this;return new y(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return m(t).token?[3,2]:[4,L(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,L(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var e=m(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(t,e);c.tokenRefresher=u}if(!c.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&c.tokenRefresher.start(),s.token&&q(s.token)){var l=s.token;Promise.resolve().then(function(){return r({token:l.token})}).catch(function(){})}else null==s.token&&s.cachedTokenPromise.then(function(t){t&&q(t)&&r({token:t.token})}).catch(function(){});b(t,c)}function V(t,e){var n=m(t),r=n.tokenObservers.filter(function(t){return t.next!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),b(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function U(t,e){for(var n=0,r=m(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function q(t){return t.expireTimeMillis-Date.now()>0}function z(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return k(t),[4,m(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise(function(n,r){var i=m(t).reCAPTCHAState;e.ready(function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function K(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=m(t);b(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var H=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw d.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,z(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),d.create("recaptcha-error");case 4:return[2,C(A(this._app,t),this._platformLoggerProvider)]}})})},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,function(t,e){var n=m(t),r=new s.Deferred;b(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var c,u,l=w();return l?l.ready(function(){K(t,e,l,i),r.resolve(l)}):(c=function(){var n=w();if(!n)throw new Error("no recaptcha");n.ready(function(){K(t,e,n,i),r.resolve(n)})},(u=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",u.onload=c,document.head.appendChild(u)),r.promise}(t,this._siteKey).catch(function(){})},t}(),W=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,function(){var t,e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!this._app)throw d.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),e=s.issuedAtTime(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,o.__assign(o.__assign({},t),{issuedAtTimeMillis:n})]}})})},t.prototype.initialize=function(t){this._app=t},t}();var G="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{app:e,activate:function(t,r){return function(t,e,n,r){var i=m(t);if(i.activated)throw d.create("already-activated",{appName:t.name});var a=o.__assign(o.__assign({},i),{activated:!0});a.cachedTokenPromise=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,I(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),R.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}(t).then(function(e){return e&&q(e)&&b(t,o.__assign(o.__assign({},m(t)),{token:e})),e}),a.provider="string"==typeof e?new H(e):e instanceof H||e instanceof W?e:new W({getToken:e.getToken}),a.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,b(t,a),a.provider.initialize(t,n)}(e,t,n,r)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=m(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),b(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)},getToken:function(t){return function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r;return o.__generator(this,function(i){switch(i.label){case 0:return[4,L(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}})})}(e,n,t)},onTokenChanged:function(t,r,i){return function(t,e,n,r,i){var o,s=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?s=n.error.bind(n):r&&(s=r),B(t,e,"EXTERNAL",o,s),function(){return V(t,o)}}(e,n,t,r)},INTERNAL:{delete:function(){for(var t=0,n=m(e).tokenObservers;t<n.length;t++)V(e,n[t].next);return Promise.resolve()}}};var e,n},"PUBLIC").setServiceProps({ReCaptchaV3Provider:H,CustomProvider:W}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(G).initialize()})),t.INTERNAL.registerComponent(new i.Component(G,function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return L(e,n,t)},addTokenListener:function(t){return B(e,n,"INTERNAL",t)},removeTokenListener:function(t){return V(e,t)}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.2")}(l.default),function(){var t=s.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=v();e.enabled=!0;var n=new s.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,D(x)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),P(x,r)).catch(function(t){return R.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r})})}())}}()},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("sVev"),i=n("7o/Q");function o(t=c){return e=>e.lift(new s(t))}class s{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function c(){return new r.a}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),c=n("2QA8");class u extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},XqMk:function(t,e,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global;e.a=r},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},"a/YC":function(t,e,n){"use strict";n.d(e,"a",function(){return V});var r=n("nYR2"),i=n("lJxs"),o=n("vkgz"),s=n("fXoL"),a=n("D0XW"),c=n("HDdC"),u=n("Cfvw"),l=n("LRne"),h=n("JX91"),d=n("7o/Q");function f(){return t=>t.lift(new p)}class p{call(t,e){return e.subscribe(new g(t))}}class g extends d.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var m=n("Kqap"),b=n("/uUt"),v=n("pLZG"),_=n("pxpQ"),y=n("spgP"),w=n("ofXK"),k=n("Jgta"),C=(n("xo5E"),n("UbJi"));function A(t,e){return function(t,e=a.b){return new c.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function E(t,e){return A(t,e).pipe(Object(i.a)(t=>({payload:t,type:"query"})))}function O(t,e){return E(t,e).pipe(Object(h.a)(void 0),f(),Object(i.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function x(t,e,n){return O(t,n).pipe(Object(m.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return S(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return S(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return S(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Object(b.a)(),Object(i.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function S(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function T(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class I{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=O(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(i.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Object(h.a)(void 0),f(),Object(v.a)(([t,e])=>e.length>0||!t),Object(i.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(m.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=T(t);return x(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return E(this.query,this.afs.schedulers.outsideAngular).pipe(Object(i.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(u.a)(this.query.get(t)).pipe(Object(_.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new P(this.ref.doc(t),this.afs)}}class P{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=F(n,e);return new I(r,i,this.afs)}snapshotChanges(){return A(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(h.a)(void 0),f(),Object(i.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(i.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(u.a)(this.ref.get(t)).pipe(Object(_.b)(this.afs.schedulers.insideAngular))}}class D{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?O(this.query,this.afs.schedulers.outsideAngular).pipe(Object(i.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(v.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):O(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(m.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=T(t);return x(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return E(this.query,this.afs.schedulers.outsideAngular).pipe(Object(i.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(u.a)(this.query.get(t)).pipe(Object(_.b)(this.afs.schedulers.insideAngular))}}const N=new s.q("angularfire2.enableFirestorePersistence"),R=new s.q("angularfire2.firestore.persistenceSettings"),j=new s.q("angularfire2.firestore.settings"),M=new s.q("angularfire2.firestore.use-emulator");function F(t,e=(t=>t)){return{query:e(t),ref:t}}let L=(()=>{class t{constructor(t,e,n,r,i,o,s,a,c){this.schedulers=new y.d(o),this.keepUnstableUntilFirst=Object(y.h)(this.schedulers);const h=Object(y.g)(t,o,e);!k.a.auth&&c&&Object(y.j)();const d=a;[this.firestore,this.persistenceEnabled$]=Object(y.f)(h.name+".firestore","AngularFirestore",h,()=>{const t=o.runOutsideAngular(()=>h.firestore());if(r&&t.settings(r),d&&t.useEmulator(...d),n&&!Object(w.q)(i)){const e=()=>{try{return Object(u.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),Object(l.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(l.a)(!1)]},[r,d,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=F(n,e),o=this.schedulers.ngZone.run(()=>r);return new I(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new D(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new P(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(y.c),s.Rb(y.b,8),s.Rb(N,8),s.Rb(j,8),s.Rb(s.B),s.Rb(s.z),s.Rb(R,8),s.Rb(M,8),s.Rb(C.b,8))},t.\u0275prov=s.Eb({factory:function(){return new t(s.Rb(y.c),s.Rb(y.b,8),s.Rb(N,8),s.Rb(j,8),s.Rb(s.B),s.Rb(s.z),s.Rb(R,8),s.Rb(M,8),s.Rb(C.b,8))},token:t,providedIn:"any"}),t})();var B=n("N+D2");let V=(()=>{class t{constructor(t,e){this.$store=t,this.$overlay=e}request(t,e=!0){const n=e?this.$overlay.startLoading():null,o=document.activeElement;return o.blur(),{create:(e,r)=>r?this.getDoc(t,r).set(e).then(()=>this.$overlay.endLoading(n,o)):this.getCollection(t).add(e).then(()=>this.$overlay.endLoading(n,o)),read:e=>e?this.readDocument(t,e,n,o):this.readCollection(t,n,o),read$:e=>e?this.getDoc(t,e).get().pipe(Object(r.a)(()=>this.$overlay.endLoading(n,o)),Object(i.a)(t=>t.data())):this.$store.collection(t).get().pipe(Object(r.a)(()=>this.$overlay.endLoading(n,o)),Object(i.a)(t=>t.docs.map(t=>({key:t.id,value:t.data()})))),update:(e,r)=>this.getDoc(t,r).update(e).then(()=>this.$overlay.endLoading(n,o)),delete:e=>this.getDoc(t,e).delete().then(()=>this.$overlay.endLoading(n,o))}}watch(t){const e=this.$overlay.startLoading();return{onChanges$:()=>this.$store.collection(t).valueChanges().pipe(Object(o.a)(()=>this.$overlay.endLoading(e))),doc:n=>({onChanges$:()=>this.$store.collection(t).doc(n).valueChanges().pipe(Object(o.a)(()=>this.$overlay.endLoading(e)))})}}getDoc(t,e){return this.$store.collection(t).doc(e)}getCollection(t){return this.$store.collection(t)}readDocument(t,e,n,r){return new Promise(i=>{this.getDoc(t,e).get().subscribe(t=>{this.$overlay.endLoading(n,r),i(t.data())})})}readCollection(t,e,n){return new Promise(r=>{this.$store.collection(t).get().subscribe(t=>{this.$overlay.endLoading(e,n),r(t.docs.map(t=>({key:t.id,value:t.data()})))})})}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(L),s.Rb(B.a))},t.\u0275prov=s.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("HDdC"),i=n("DH7j"),o=n("lJxs"),s=n("XoHu"),a=n("Cfvw");function c(...t){if(1===t.length){const e=t[0];if(Object(i.a)(e))return u(e,null);if(Object(s.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return u(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return u(t=1===t.length&&Object(i.a)(t[0])?t[0]:t,null).pipe(Object(o.a)(t=>e(...t)))}return u(t,null)}function u(t,e){return new r.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let c=0;c<r;c++){const u=Object(a.a)(t[c]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,s++),i[c]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&l||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}},dfiu:function(t,e,n){"use strict";!function(t){const e=t.zh=t.zh||{};e.dictionary=Object.assign(e.dictionary||{},{"%0 of %1":"%0/%1",Aquamarine:"\u6dfa\u7da0\u8272",Black:"\u9ed1\u8272",Blue:"\u85cd\u8272",Bold:"\u7c97\u9ad4","Bulleted List":"\u7b26\u865f\u6e05\u55ae","Dim grey":"\u6de1\u7070\u8272","Document colors":"\u6587\u4ef6\u984f\u8272","Dropdown toolbar":"\u4e0b\u62c9\u9078\u55ae","Edit block":"\u7de8\u8f2f\u5340\u584a","Editor toolbar":"\u7de8\u8f2f\u5668\u5de5\u5177","Font Color":"\u5b57\u9ad4\u984f\u8272",Green:"\u7da0\u8272",Grey:"\u7070\u8272","Insert paragraph after block":"\u5728\u9019\u500b\u5340\u584a\u5f8c\u9762\u63d2\u5165\u4e00\u500b\u6bb5\u843d","Insert paragraph before block":"\u5728\u9019\u500b\u5340\u584a\u524d\u9762\u63d2\u5165\u4e00\u500b\u6bb5\u843d",Italic:"\u659c\u9ad4","Light blue":"\u4eae\u85cd\u8272","Light green":"\u4eae\u7da0\u8272","Light grey":"\u4eae\u7070\u8272",Next:"\u4e0b\u4e00","Numbered List":"\u6709\u5e8f\u6e05\u55ae",Orange:"\u6a58\u8272",Previous:"\u4e0a\u4e00",Purple:"\u7d2b\u8272",Red:"\u7d05\u8272",Redo:"\u91cd\u505a","Remove color":"\u79fb\u9664\u984f\u8272","Remove Format":"\u79fb\u9664\u683c\u5f0f","Rich Text Editor":"\u8c50\u5bcc\u6587\u5b57\u7de8\u8f2f\u5668","Rich Text Editor, %0":"\u8c50\u5bcc\u6587\u5b57\u7de8\u8f2f\u5668\uff0c%0","Select all":"\u9078\u53d6\u5168\u90e8","Show more items":"\u986f\u793a\u66f4\u591a",Turquoise:"\u85cd\u7da0\u8272",Undo:"\u53d6\u6d88",White:"\u767d\u8272",Yellow:"\u9ec3\u8272"}),e.getPluralForm=function(t){return 0}}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=43)}([function(t,e,n){n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});class r extends Error{constructor(t,e,n){super(function(t,e){const n=new WeakSet;return t+(e?" "+JSON.stringify(e,(t,e)=>{if("object"==typeof e&&null!==e){if(n.has(e))return`[object ${e.constructor.name}]`;n.add(e)}return e}):"")+o(t)}(t,n)),this.name="CKEditorError",this.context=e,this.data=n}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;const n=new r(t.message,e);throw n.stack=t.stack,n}}function i(t,e){console.warn(...function(t,e){const n=o(t);return e?[t,e,n]:[t,n]}(t,e))}function o(t){return"\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-"+t}},function(t,e,n){var r=function(){var t;return function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t}}(),i=function(){var e={};return function(n){if(void 0===e[n]){var r=document.querySelector(n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[n]=r}return e[n]}}(),o=[];function s(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function a(t,e){for(var n={},r=[],i=0;i<t.length;i++){var a=t[i],c=e.base?a[0]+e.base:a[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var h=s(l),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:l,updater:p(d,e),references:1}),r.push(l)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach(function(t){e.setAttribute(t,r[t])}),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function l(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=u(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function h(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var d=null,f=0;function p(t,e){var n,r,i;if(e.singleton){var o=f++;n=d||(d=c(e)),r=l.bind(null,n,o,!1),i=l.bind(null,n,o,!0)}else n=c(e),r=h.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var c=a(t,e),u=0;u<n.length;u++){var l=s(n[u]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}n=c}}}},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var e=r(t,4),n=e[1],i=e[3];if(!i)return n;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),a="/*# ".concat(s," */"),c=i.sources.map(function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")});return[n].concat(c).concat([a]).join("\n")}return[n].join("\n")}},function(t,e,n){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);r&&i[c[0]]||(n&&(c[2]=c[2]?"".concat(n," and ").concat(c[2]):n),e.push(c))}},e}},,function(t,e,n){var r=n(9),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,n,r){(function(t){var i=r(5),o=r(42),s=e&&!e.nodeType&&e,a=s&&"object"==typeof t&&t&&!t.nodeType&&t,c=a&&a.exports===s?i.a.Buffer:void 0;n.a=(c?c.isBuffer:void 0)||o.a}).call(this,r(11)(t))},function(t,n,r){(function(t){var i=r(9),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o&&i.a.process,c=function(){try{return s&&s.require&&s.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();n.a=c}).call(this,r(11)(t))},function(t,e,n){(function(t){var e=n(0);const r="object"==typeof window?window:t;if(r.CKEDITOR_VERSION)throw new e.a("ckeditor-duplicated-modules",null);r.CKEDITOR_VERSION="31.1.0"}).call(this,n(41))},function(t,e,n){(function(t){e.a="object"==typeof t&&t&&t.Object===Object&&t}).call(this,n(41))},function(t,n,r){(function(t){var i=r(5),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?i.a.Buffer:void 0,c=a?a.allocUnsafe:void 0;n.a=function(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}}).call(this,r(11)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-engine/theme/renderer.css"],names:[],mappings:"AAMA,qDACC,YACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* Elements marked by the Renderer as hidden should be invisible in the editor. */\n.ck.ck-editor__editable span[data-ck-unsafe-element] {\n\tdisplay: none;\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/globals/_hidden.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/globals/_reset.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/globals/_zindex.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/globals/_transition.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_colors.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_disabled.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_focus.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_fonts.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_reset.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_rounded.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_shadow.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_spacing.css"],names:[],mappings:"AAQA,WAGC,sBACD,CCPA,iDAGC,qBAAsB,CACtB,UAAW,CACX,WAAY,CACZ,eACD,CCPA,MACC,gBAAiB,CACjB,4CACD,CCAA,oDAEC,yBACD,CCNA,MACC,kCAAmD,CACnD,+BAAoD,CACpD,8BAAgD,CAChD,8BAAmD,CACnD,6BAAmD,CACnD,yBAA+C,CAC/C,8BAAmD,CACnD,oCAAuD,CACvD,6BAAkD,CAIlD,+CAAwD,CACxD,qEAA+E,CAC/E,qCAAwD,CACxD,sDAA8D,CAC9D,iDAAyD,CACzD,yCAAqD,CACrD,uCAAsD,CACtD,6CAA0D,CAC1D,uCAAsD,CAItD,gDAAuD,CACvD,kDAA+D,CAC/D,mDAAgE,CAChE,+CAA6D,CAC7D,yDAA8D,CAE9D,uCAAuD,CACvD,6CAA4D,CAC5D,8CAA4D,CAC5D,0CAAyD,CACzD,gDAA8D,CAE9D,+DAAsE,CACtE,iDAAkE,CAClE,kDAAkE,CAClE,8CAA+D,CAC/D,oDAAoE,CACpE,6DAAsE,CAEtE,8BAAoD,CACpD,gCAAqD,CAErD,+CAA4D,CAC5D,qDAAiE,CACjE,+EAAqF,CACrF,oDAAmE,CACnE,yEAA8E,CAC9E,qDAAgE,CAIhE,oEAA2E,CAC3E,4DAAoE,CAIpE,2DAAoE,CACpE,+BAAiD,CACjD,wDAAgE,CAChE,+CAA0D,CAC1D,4CAA2D,CAC3D,wCAAwD,CACxD,sCAAsD,CAItD,0DAAmE,CACnE,uFAA6F,CAC7F,gEAAuE,CACvE,4EAAiF,CACjF,8DAAsE,CAItE,2DAAoE,CACpE,mDAA6D,CAI7D,6DAAsE,CACtE,qDAA+D,CAI/D,uDAAgE,CAChE,uDAAiE,CAIjE,0CAAyD,CAIzD,wCAA2D,CAI3D,+BAAoD,CACpD,wDAAmE,CACnE,mDAAgE,CCpGhE,wBAAyB,CCAzB,0CAA2C,CAK3C,gGAAiG,CAKjG,4GAA6G,CAK7G,sGAAuG,CAKvG,sDAAuD,CCvBvD,wBAAyB,CACzB,6BAA8B,CAC9B,wDAA6D,CAE7D,yBAA0B,CAC1B,2BAA4B,CAC5B,yBAA0B,CAC1B,wBAAyB,CACzB,0BAA2B,CCJ3B,kCJoGD,CI9FA,iDAIC,QAAS,CACT,SAAU,CACV,QAAS,CACT,sBAAuB,CACvB,oBAAqB,CACrB,qBAAsB,CACtB,eAAgB,CAGhB,oBACD,CAKA,oCAGC,wBAAyB,CACzB,iGAAkG,CAClG,0BAA2B,CAC3B,eAAgB,CAChB,kBAAmB,CACnB,WAAY,CACZ,UACD,CAGC,2BACC,gBACD,CAEA,wBAEC,sBACD,CAEA,0BACC,oBACD,CAEA,kGAGC,WACD,CAEA,gIAGC,cACD,CAEA,0BACC,YAAa,CACb,yBACD,CAEA,0CAEC,SAAU,CACV,QACD,CAMD,8BAEC,gBACD,CCnFA,MACC,sBAAuB,CCAvB,gEAAiE,CAKjE,0DAA2D,CAK3D,wEAAyE,CCbzE,uBAA8B,CAC9B,mDAA2D,CAC3D,4CAAkD,CAClD,oDAA4D,CAC5D,mDAA2D,CAC3D,kDAA2D,CAC3D,yDFFD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A class which hides an element in DOM.\n */\n.ck-hidden {\n\t/* Override selector specificity. Otherwise, all elements with some display\n\tstyle defined will override this one, which is not a desired result. */\n\tdisplay: none !important;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-reset,\n.ck.ck-reset_all,\n.ck.ck-reset_all * {\n\tbox-sizing: border-box;\n\twidth: auto;\n\theight: auto;\n\tposition: static;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-z-default: 1;\n\t--ck-z-modal: calc( var(--ck-z-default) + 999 );\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A class that disables all transitions of the element and its children.\n */\n.ck-transitions-disabled,\n.ck-transitions-disabled * {\n\ttransition: none !important;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-color-base-foreground: \t\t\t\t\t\t\t\thsl(0, 0%, 98%);\n\t--ck-color-base-background: \t\t\t\t\t\t\t\thsl(0, 0%, 100%);\n\t--ck-color-base-border: \t\t\t\t\t\t\t\t\thsl(0, 0%, 77%);\n\t--ck-color-base-action: \t\t\t\t\t\t\t\t\thsl(104, 44%, 48%);\n\t--ck-color-base-focus: \t\t\t\t\t\t\t\t\t\thsl(209, 92%, 70%);\n\t--ck-color-base-text: \t\t\t\t\t\t\t\t\t\thsl(0, 0%, 20%);\n\t--ck-color-base-active: \t\t\t\t\t\t\t\t\thsl(208, 88%, 52%);\n\t--ck-color-base-active-focus:\t\t\t\t\t\t\t\thsl(208, 88%, 47%);\n\t--ck-color-base-error:\t\t\t\t\t\t\t\t\t\thsl(15, 100%, 43%);\n\n\t/* -- Generic colors ------------------------------------------------------------------------ */\n\n\t--ck-color-focus-border-coordinates: \t\t\t\t\t\t208, 79%, 51%;\n\t--ck-color-focus-border: \t\t\t\t\t\t\t\t\thsl(var(--ck-color-focus-border-coordinates));\n\t--ck-color-focus-outer-shadow:\t\t\t\t\t\t\t\thsl(207, 89%, 86%);\n\t--ck-color-focus-disabled-shadow:\t\t\t\t\t\t\thsla(209, 90%, 72%,.3);\n\t--ck-color-focus-error-shadow:\t\t\t\t\t\t\t\thsla(9,100%,56%,.3);\n\t--ck-color-text: \t\t\t\t\t\t\t\t\t\t\tvar(--ck-color-base-text);\n\t--ck-color-shadow-drop: \t\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.15);\n\t--ck-color-shadow-drop-active:\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.2);\n\t--ck-color-shadow-inner: \t\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.1);\n\n\t/* -- Buttons ------------------------------------------------------------------------------- */\n\n\t--ck-color-button-default-background: \t\t\t\t\t\ttransparent;\n\t--ck-color-button-default-hover-background: \t\t\t\thsl(0, 0%, 90%);\n\t--ck-color-button-default-active-background: \t\t\t\thsl(0, 0%, 85%);\n\t--ck-color-button-default-active-shadow: \t\t\t\t\thsl(0, 0%, 75%);\n\t--ck-color-button-default-disabled-background: \t\t\t\ttransparent;\n\n\t--ck-color-button-on-background: \t\t\t\t\t\t\thsl(0, 0%, 87%);\n\t--ck-color-button-on-hover-background: \t\t\t\t\t\thsl(0, 0%, 77%);\n\t--ck-color-button-on-active-background: \t\t\t\t\thsl(0, 0%, 73%);\n\t--ck-color-button-on-active-shadow: \t\t\t\t\t\thsl(0, 0%, 63%);\n\t--ck-color-button-on-disabled-background: \t\t\t\t\thsl(0, 0%, 87%);\n\n\t--ck-color-button-action-background: \t\t\t\t\t\tvar(--ck-color-base-action);\n\t--ck-color-button-action-hover-background: \t\t\t\t\thsl(104, 44%, 43%);\n\t--ck-color-button-action-active-background: \t\t\t\thsl(104, 44%, 41%);\n\t--ck-color-button-action-active-shadow: \t\t\t\t\thsl(104, 44%, 36%);\n\t--ck-color-button-action-disabled-background: \t\t\t\thsl(104, 44%, 58%);\n\t--ck-color-button-action-text: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\n\t--ck-color-button-save: \t\t\t\t\t\t\t\t\thsl(120, 100%, 27%);\n\t--ck-color-button-cancel: \t\t\t\t\t\t\t\t\thsl(15, 100%, 43%);\n\n\t--ck-color-switch-button-off-background:\t\t\t\t\thsl(0, 0%, 69%);\n\t--ck-color-switch-button-off-hover-background:\t\t\t\thsl(0, 0%, 64%);\n\t--ck-color-switch-button-on-background:\t\t\t\t\t\tvar(--ck-color-button-action-background);\n\t--ck-color-switch-button-on-hover-background:\t\t\t\thsl(104, 44%, 43%);\n\t--ck-color-switch-button-inner-background:\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-switch-button-inner-shadow:\t\t\t\t\t\thsla(0, 0%, 0%, 0.1);\n\n\t/* -- Dropdown ------------------------------------------------------------------------------ */\n\n\t--ck-color-dropdown-panel-background: \t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-dropdown-panel-border: \t\t\t\t\t\t\tvar(--ck-color-base-border);\n\n\t/* -- Input --------------------------------------------------------------------------------- */\n\n\t--ck-color-input-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-input-border: \t\t\t\t\t\t\t\t\thsl(0, 0%, 78%);\n\t--ck-color-input-error-border:\t\t\t\t\t\t\t\tvar(--ck-color-base-error);\n\t--ck-color-input-text: \t\t\t\t\t\t\t\t\t\tvar(--ck-color-base-text);\n\t--ck-color-input-disabled-background: \t\t\t\t\t\thsl(0, 0%, 95%);\n\t--ck-color-input-disabled-border: \t\t\t\t\t\t\thsl(0, 0%, 78%);\n\t--ck-color-input-disabled-text: \t\t\t\t\t\t\thsl(0, 0%, 46%);\n\n\t/* -- List ---------------------------------------------------------------------------------- */\n\n\t--ck-color-list-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-list-button-hover-background: \t\t\t\t\tvar(--ck-color-button-default-hover-background);\n\t--ck-color-list-button-on-background: \t\t\t\t\t\tvar(--ck-color-base-active);\n\t--ck-color-list-button-on-background-focus: \t\t\t\tvar(--ck-color-base-active-focus);\n\t--ck-color-list-button-on-text:\t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\n\t/* -- Panel --------------------------------------------------------------------------------- */\n\n\t--ck-color-panel-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-panel-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\n\n\t/* -- Toolbar ------------------------------------------------------------------------------- */\n\n\t--ck-color-toolbar-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-foreground);\n\t--ck-color-toolbar-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\n\n\t/* -- Tooltip ------------------------------------------------------------------------------- */\n\n\t--ck-color-tooltip-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-text);\n\t--ck-color-tooltip-text: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\n\t/* -- Engine -------------------------------------------------------------------------------- */\n\n\t--ck-color-engine-placeholder-text: \t\t\t\t\t\thsl(0, 0%, 44%);\n\n\t/* -- Upload -------------------------------------------------------------------------------- */\n\n\t--ck-color-upload-bar-background:\t\t \t\t\t\t\thsl(209, 92%, 70%);\n\n\t/* -- Link -------------------------------------------------------------------------------- */\n\n\t--ck-color-link-default:\t\t\t\t\t\t\t\t\thsl(240, 100%, 47%);\n\t--ck-color-link-selected-background:\t\t\t\t\t\thsla(201, 100%, 56%, 0.1);\n\t--ck-color-link-fake-selection:\t\t\t\t\t\t\t\thsla(201, 100%, 56%, 0.3);\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t/**\n\t * An opacity value of disabled UI item.\n\t */\n\t--ck-disabled-opacity: .5;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t/**\n\t * The geometry of the of focused element's outer shadow.\n\t */\n\t--ck-focus-outer-shadow-geometry: 0 0 0 3px;\n\n\t/**\n\t * A visual style of focused element's outer shadow.\n\t */\n\t--ck-focus-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);\n\n\t/**\n\t * A visual style of focused element's outer shadow (when disabled).\n\t */\n\t--ck-focus-disabled-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);\n\n\t/**\n\t * A visual style of focused element's outer shadow (when has errors).\n\t */\n\t--ck-focus-error-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);\n\n\t/**\n\t * A visual style of focused element's border or outline.\n\t */\n\t--ck-focus-ring: 1px solid var(--ck-color-focus-border);\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-font-size-base: 13px;\n\t--ck-line-height-base: 1.84615;\n\t--ck-font-face: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;\n\n\t--ck-font-size-tiny: 0.7em;\n\t--ck-font-size-small: 0.75em;\n\t--ck-font-size-normal: 1em;\n\t--ck-font-size-big: 1.4em;\n\t--ck-font-size-large: 1.8em;\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t/* This is super-important. This is **manually** adjusted so a button without an icon\n\tis never smaller than a button with icon, additionally making sure that text-less buttons\n\tare perfect squares. The value is also shared by other components which should stay "in-line"\n\twith buttons. */\n\t--ck-ui-component-min-height: 2.3em;\n}\n\n/**\n * Resets an element, ignoring its children.\n */\n.ck.ck-reset,\n.ck.ck-reset_all,\n.ck.ck-reset_all * {\n\t/* Do not include inheritable rules here. */\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tbackground: transparent;\n\ttext-decoration: none;\n\tvertical-align: middle;\n\ttransition: none;\n\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/105 */\n\tword-wrap: break-word;\n}\n\n/**\n * Resets an element AND its children.\n */\n.ck.ck-reset_all,\n.ck.ck-reset_all * {\n\t/* These are rule inherited by all children elements. */\n\tborder-collapse: collapse;\n\tfont: normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);\n\tcolor: var(--ck-color-text);\n\ttext-align: left;\n\twhite-space: nowrap;\n\tcursor: auto;\n\tfloat: none;\n}\n\n.ck.ck-reset_all {\n\t& .ck-rtl * {\n\t\ttext-align: right;\n\t}\n\n\t& iframe {\n\t\t/* For IE */\n\t\tvertical-align: inherit;\n\t}\n\n\t& textarea {\n\t\twhite-space: pre-wrap;\n\t}\n\n\t& textarea,\n\t& input[type="text"],\n\t& input[type="password"] {\n\t\tcursor: text;\n\t}\n\n\t& textarea[disabled],\n\t& input[type="text"][disabled],\n\t& input[type="password"][disabled] {\n\t\tcursor: default;\n\t}\n\n\t& fieldset {\n\t\tpadding: 10px;\n\t\tborder: 2px groove hsl(255, 7%, 88%);\n\t}\n\n\t& button::-moz-focus-inner {\n\t\t/* See http://stackoverflow.com/questions/5517744/remove-extra-button-spacing-padding-in-firefox */\n\t\tpadding: 0;\n\t\tborder: 0\n\t}\n}\n\n/**\n * Default UI rules for RTL languages.\n */\n.ck[dir="rtl"],\n.ck[dir="rtl"] .ck {\n\ttext-align: right;\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Default border-radius value.\n */\n:root{\n\t--ck-border-radius: 2px;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t/**\n\t * A visual style of element's inner shadow (i.e. input).\n\t */\n\t--ck-inner-shadow: 2px 2px 3px var(--ck-color-shadow-inner) inset;\n\n\t/**\n\t * A visual style of element's drop shadow (i.e. panel).\n\t */\n\t--ck-drop-shadow: 0 1px 2px 1px var(--ck-color-shadow-drop);\n\n\t/**\n\t * A visual style of element's active shadow (i.e. comment or suggestion).\n\t */\n\t--ck-drop-shadow-active: 0 3px 6px 1px var(--ck-color-shadow-drop-active);\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-spacing-unit: \t\t\t\t\t\t0.6em;\n\t--ck-spacing-large: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 1.5);\n\t--ck-spacing-standard: \t\t\t\t\tvar(--ck-spacing-unit);\n\t--ck-spacing-medium: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.8);\n\t--ck-spacing-small: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.5);\n\t--ck-spacing-tiny: \t\t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.3);\n\t--ck-spacing-extra-tiny: \t\t\t\tcalc(var(--ck-spacing-unit) * 0.16);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/icon/icon.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/icon/icon.css"],names:[],mappings:"AAKA,YACC,qBACD,CCFA,MACC,0EACD,CAEA,YACC,yBAA0B,CAC1B,0BAA2B,CAG3B,uBAAwB,CAQxB,qBAcD,CAZC,0BARA,aAAc,CAGd,cAgBA,CAJC,yBAEC,iBACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-icon {\n\tvertical-align: middle;\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-icon-size: calc(var(--ck-line-height-base) * var(--ck-font-size-normal));\n}\n\n.ck.ck-icon {\n\twidth: var(--ck-icon-size);\n\theight: var(--ck-icon-size);\n\n\t/* Multiplied by the height of the line in "px" should give SVG "viewport" dimensions */\n\tfont-size: .8333350694em;\n\n\tcolor: inherit;\n\n\t/* Inherit cursor style (#5). */\n\tcursor: inherit;\n\n\t/* This will prevent blurry icons on Firefox. See #340. */\n\twill-change: transform;\n\n\t& * {\n\t\t/* Inherit cursor style (#5). */\n\t\tcursor: inherit;\n\n\t\t/* Allows dynamic coloring of the icons. */\n\t\tcolor: inherit;\n\n\t\t&:not([fill]) {\n\t\t\t/* Needed by FF. */\n\t\t\tfill: currentColor;\n\t\t}\n\t}\n}\n'],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,'.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}',"",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/tooltip/tooltip.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/tooltip/tooltip.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAKA,sDAEC,iBAAkB,CAGlB,mBAAoB,CAIpB,kCACD,CAEA,eAEC,iBAAkB,CAClB,SAAU,CACV,YAAa,CACb,yBAWD,CATC,iCACC,oBAOD,CALC,uCACC,UAAW,CACX,OAAQ,CACR,QACD,CCxBF,MACC,2BACD,CAEA,eACC,QAAS,CAMT,KAAM,CAON,sCAwKD,CAtKC,iCChBA,eDqCA,CArBA,yGCZC,qCDiCD,CArBA,iCAGC,cAAe,CACf,eAAgB,CAChB,kCAAmC,CACnC,wDAAyD,CACzD,6CAA8C,CAC9C,iBAAkB,CAClB,SAYD,CAVC,uCAMC,sCAAuC,CACvC,kBAAmB,CACnB,QACD,CAYD,sFAGC,4CAA+C,CAC/C,0BASD,CAPC,8JAEC,+CAAkD,CAClD,0BAA6B,CAC7B,6BAAoF,CAApF,sDAAoF,CAApF,8BAAoF,CAApF,4BAAoF,CACpF,8CAAsG,CAAtG,gDAAsG,CAAtG,+CAAsG,CAAtG,kBACD,CAaD,6BACC,SAAU,CACV,SAWD,CATC,+CACC,SAAU,CACV,2CACD,CAEA,qDACC,SAAU,CACV,OACD,CAYD,6BACC,QAAS,CACT,UAYD,CAVC,+CACC,UAAW,CACX,0CACD,CAEA,qDACC,UAAW,CACX,MAAO,CACP,yBACD,CAYD,4BACC,yCAA4C,CAC5C,2BAQD,CANC,oDACC,4CAA+C,CAC/C,0BAA6B,CAC7B,6BAAoF,CAApF,+BAAoF,CAApF,8BAAoF,CAApF,mDAAoF,CACpF,8CAAsG,CAAtG,qBAAsG,CAAtG,+CAAsG,CAAtG,6CACD,CAUD,4BACC,8CAA+C,CAC/C,OAaD,CAXC,8CACC,MAAO,CACP,0BAQD,CANC,oDACC,0CAA6C,CAC7C,8CAAiD,CACjD,6BAAoF,CAApF,+BAAoF,CAApF,qDAAoF,CAApF,4BAAoF,CACpF,mBAAsG,CAAtG,gDAAsG,CAAtG,+CAAsG,CAAtG,6CACD,CAWF,4BACC,+CAAgD,CAChD,SAAU,CACV,OAaD,CAXC,8CACC,MAAO,CACP,0BAQD,CANC,oDACC,SAAU,CACV,8CAAiD,CACjD,oDAAoF,CAApF,+BAAoF,CAApF,8BAAoF,CAApF,4BAAoF,CACpF,8CAAsG,CAAtG,gDAAsG,CAAtG,oBAAsG,CAAtG,6CACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-tooltip,\n.ck.ck-tooltip .ck-tooltip__text::after {\n\tposition: absolute;\n\n\t/* Without this, hovering the tooltip could keep it visible. */\n\tpointer-events: none;\n\n\t/* This is to get rid of flickering when transitioning opacity in Chrome.\n\tIt\'s weird but it works. */\n\t-webkit-backface-visibility: hidden;\n}\n\n.ck.ck-tooltip {\n\t/* Tooltip is hidden by default. */\n\tvisibility: hidden;\n\topacity: 0;\n\tdisplay: none;\n\tz-index: var(--ck-z-modal);\n\n\t& .ck-tooltip__text {\n\t\tdisplay: inline-block;\n\n\t\t&::after {\n\t\t\tcontent: "";\n\t\t\twidth: 0;\n\t\t\theight: 0;\n\t\t}\n\t}\n}\n','/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n\n:root {\n\t--ck-tooltip-arrow-size: 5px;\n}\n\n.ck.ck-tooltip {\n\tleft: 50%;\n\n\t/*\n\t * Prevent blurry tooltips in LoDPI environments.\n\t * See https://github.com/ckeditor/ckeditor5/issues/1802.\n\t */\n\ttop: 0;\n\n\t/*\n\t * For the transition to work, the tooltip must be controlled\n\t * using visibility+opacity. A delay prevents a "tooltip avalanche"\n\t * i.e. when scanning the toolbar with mouse cursor.\n\t */\n\ttransition: opacity .2s ease-in-out .2s;\n\n\t& .ck-tooltip__text {\n\t\t@mixin ck-rounded-corners;\n\n\t\tfont-size: .9em;\n\t\tline-height: 1.5;\n\t\tcolor: var(--ck-color-tooltip-text);\n\t\tpadding: var(--ck-spacing-small) var(--ck-spacing-medium);\n\t\tbackground: var(--ck-color-tooltip-background);\n\t\tposition: relative;\n\t\tleft: -50%;\n\n\t\t&::after {\n\t\t\t/*\n\t\t\t * For the transition to work, the tooltip must be controlled\n\t\t\t * using visibility+opacity. A delay prevents a "tooltip avalanche"\n\t\t\t * i.e. when scanning the toolbar with mouse cursor.\n\t\t\t */\n\t\t\ttransition: opacity .2s ease-in-out .2s;\n\t\t\tborder-style: solid;\n\t\t\tleft: 50%;\n\t\t}\n\t}\n\n\t/**\n\t * A class that displays the tooltip south of the element.\n\t *\n\t *       [element]\n\t *           ^\n\t *     +-----------+\n\t *     |  Tooltip  |\n\t *     +-----------+\n\t */\n\t&.ck-tooltip_s,\n\t&.ck-tooltip_sw,\n\t&.ck-tooltip_se {\n\t\tbottom: calc(-1 * var(--ck-tooltip-arrow-size));\n\t\ttransform: translateY( 100% );\n\n\t\t& .ck-tooltip__text::after {\n\t\t\t/* 1px addresses gliches in rendering causing gap between the triangle and the text */\n\t\t\ttop: calc(-1 * var(--ck-tooltip-arrow-size) + 1px);\n\t\t\ttransform: translateX( -50% );\n\t\t\tborder-color: transparent transparent var(--ck-color-tooltip-background) transparent;\n\t\t\tborder-width: 0 var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size);\n\t\t}\n\t}\n\n\t/**\n\t * A class that displays the tooltip south-west of the element.\n\t *\n\t *        [element]\n\t *            ^\n\t *  +-----------+\n\t *  |  Tooltip  |\n\t *  +-----------+\n\t */\n\n\t&.ck-tooltip_sw {\n\t\tright: 50%;\n\t\tleft: auto;\n\n\t\t& .ck-tooltip__text {\n\t\t\tleft: auto;\n\t\t\tright: calc( -2 * var(--ck-tooltip-arrow-size));\n\t\t}\n\n\t\t& .ck-tooltip__text::after {\n\t\t\tleft: auto;\n\t\t\tright: 0;\n\t\t}\n\t}\n\n\t/**\n\t * A class that displays the tooltip south-east of the element.\n\t *\n\t *  [element]\n\t *      ^\n\t *    +-----------+\n\t *    |  Tooltip  |\n\t *    +-----------+\n\t */\n\t&.ck-tooltip_se {\n\t\tleft: 50%;\n\t\tright: auto;\n\n\t\t& .ck-tooltip__text {\n\t\t\tright: auto;\n\t\t\tleft: calc( -2 * var(--ck-tooltip-arrow-size));\n\t\t}\n\n\t\t& .ck-tooltip__text::after {\n\t\t\tright: auto;\n\t\t\tleft: 0;\n\t\t\ttransform: translateX( 50% );\n\t\t}\n\t}\n\n\t/**\n\t * A class that displays the tooltip north of the element.\n\t *\n\t *     +-----------+\n\t *     |  Tooltip  |\n\t *     +-----------+\n\t *           V\n\t *       [element]\n\t */\n\t&.ck-tooltip_n {\n\t\ttop: calc(-1 * var(--ck-tooltip-arrow-size));\n\t\ttransform: translateY( -100% );\n\n\t\t& .ck-tooltip__text::after {\n\t\t\tbottom: calc(-1 * var(--ck-tooltip-arrow-size));\n\t\t\ttransform: translateX( -50% );\n\t\t\tborder-color: var(--ck-color-tooltip-background) transparent transparent transparent;\n\t\t\tborder-width: var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size) 0 var(--ck-tooltip-arrow-size);\n\t\t}\n\t}\n\n\t/**\n\t * A class that displays the tooltip east of the element.\n\t *\n\t *                +----------+\n\t *    [element] < |   east   |\n\t *                +----------+\n\t */\n\t&.ck-tooltip_e {\n\t\tleft: calc(100% + var(--ck-tooltip-arrow-size));\n\t\ttop: 50%;\n\n\t\t& .ck-tooltip__text {\n\t\t\tleft: 0;\n\t\t\ttransform: translateY( -50% );\n\n\t\t\t&::after {\n\t\t\t\tleft: calc(-1 * var(--ck-tooltip-arrow-size));\n\t\t\t\ttop: calc(50% - 1 * var(--ck-tooltip-arrow-size));\n\t\t\t\tborder-color: transparent var(--ck-color-tooltip-background) transparent transparent;\n\t\t\t\tborder-width: var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size) 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * A class that displays the tooltip west of the element.\n\t *\n\t *    +----------+\n\t *    |   west   | > [element]\n\t *    +----------+\n\t */\n\t&.ck-tooltip_w {\n\t\tright: calc(100% + var(--ck-tooltip-arrow-size));\n\t\tleft: auto;\n\t\ttop: 50%;\n\n\t\t& .ck-tooltip__text {\n\t\t\tleft: 0;\n\t\t\ttransform: translateY( -50% );\n\n\t\t\t&::after {\n\t\t\t\tleft: 100%;\n\t\t\t\ttop: calc(50% - 1 * var(--ck-tooltip-arrow-size));\n\t\t\t\tborder-color: transparent transparent transparent var(--ck-color-tooltip-background);\n\t\t\t\tborder-width: var(--ck-tooltip-arrow-size) 0 var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size);\n\t\t\t}\n\t\t}\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/button/button.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_unselectable.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/tooltip/mixins/_tooltip.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/button/button.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/mixins/_button.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_disabled.css"],names:[],mappings:"AAQA,6BCCC,qBAAsB,CACtB,wBAAyB,CACzB,oBAAqB,CACrB,gBD6BD,CE/BC,qDACC,aAqBD,CAHC,oBAnBD,qDAoBE,YAEF,CADC,CFvBF,6BAKC,iBAAkB,CAClB,mBAAoB,CACpB,kBAAmB,CACnB,oBAyBD,CAvBC,iEACC,YACD,CAGC,yGACC,oBACD,CAID,iFACC,sBACD,CEkBA,iEACC,kBAAmB,CACnB,SACD,CAbA,yFACC,YACD,CC7BD,6BCAC,oDD0ID,CCvIE,6EACC,0DACD,CAEA,+EACC,2DAA4C,CAC5C,uEACD,CAID,qDACC,6DACD,CDhBD,6BEDC,eF2ID,CA1IA,wIEGE,qCFuIF,CA1IA,6BAKC,kBAAmB,CACnB,cAAe,CACf,qBAAsB,CACtB,8BAA+B,CAC/B,iBAAkB,CAGlB,2CAA4C,CAC5C,4CAA6C,CAI7C,aAAc,CAGd,iBAAkB,CAGlB,4BAA6B,CAG7B,4DAA8D,CAG9D,uBA6GD,CA3GC,oFGjCA,YAAa,CACb,2BAA2B,CCF3B,2CJsCA,CAIC,kJAEC,aACD,CAGD,iEAEC,iBAAkB,CAClB,mBAAoB,CACpB,aAAc,CACd,cAAe,CAIf,qBASD,CAlBA,qFAYE,eAMF,CAlBA,qFAgBE,gBAEF,CAEA,yEACC,aAYD,CAbA,6FAIE,mCASF,CAbA,6FAQE,oCAKF,CAbA,yEAWC,eAAiB,CACjB,UACD,CAIC,oIIrFD,oDJyFC,CAEA,uFK3FD,kCL6FC,CAGA,yFKhGD,kCLkGC,CAEA,iGACC,UACD,CAGD,qEACC,yDAcD,CAXC,2HAEE,4CAA+C,CAC/C,oCAOF,CAVA,2HAOE,6CAAgD,CAChD,mCAEF,CAKA,mHACC,WACD,CAID,yCC/HA,+CDiIA,CC9HC,yFACC,qDACD,CAEA,2FACC,sDAA4C,CAC5C,kEACD,CAID,iEACC,wDACD,CDmHA,2DACC,iCACD,CAEA,+DACC,mCACD,CAID,2CC7IC,mDDkJD,CC/IE,2FACC,yDACD,CAEA,6FACC,0DAA4C,CAC5C,sEACD,CAID,mEACC,4DACD,CD6HD,2CAIC,wCACD,CAEA,uCAEC,eACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../mixins/_unselectable.css";\n@import "../tooltip/mixins/_tooltip.css";\n\n.ck.ck-button,\na.ck.ck-button {\n\t@mixin ck-unselectable;\n\t@mixin ck-tooltip_enabled;\n\n\tposition: relative;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: left;\n\n\t& .ck-button__label {\n\t\tdisplay: none;\n\t}\n\n\t&.ck-button_with-text {\n\t\t& .ck-button__label {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t}\n\n\t/* Center the icon horizontally in a button without text. */\n\t&:not(.ck-button_with-text)  {\n\t\tjustify-content: center;\n\t}\n\n\t&:hover {\n\t\t@mixin ck-tooltip_visible;\n\t}\n\n\t/* Get rid of the native focus outline around the tooltip when focused (but not :hover). */\n\t&:focus:not(:hover) {\n\t\t@mixin ck-tooltip_disabled;\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Makes element unselectable.\n */\n@define-mixin ck-unselectable {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Enables the tooltip, which is the tooltip is in DOM but\n * not yet displayed.\n */\n@define-mixin ck-tooltip_enabled {\n\t& .ck-tooltip {\n\t\tdisplay: block;\n\n\t\t/*\n\t\t * Don't display tooltips in devices which don't support :hover.\n\t\t * In fact, it's all about iOS, which forces user to click UI elements twice to execute\n\t\t * the primary action, when tooltips are enabled.\n\t\t *\n\t\t * Q: OK, but why not the following query?\n\t\t *\n\t\t *   @media (hover) {\n\t\t *       display: block;\n\t\t *   }\n\t\t *\n\t\t * A: Because FF does not support it and it would completely disable tooltips\n\t\t * in that browser.\n\t\t *\n\t\t * More in https://github.com/ckeditor/ckeditor5/issues/920.\n\t\t */\n\t\t@media (hover:none) {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n}\n\n/**\n * Disables the tooltip making it disappear from DOM.\n */\n@define-mixin ck-tooltip_disabled {\n\t& .ck-tooltip {\n\t\tdisplay: none;\n\t}\n}\n\n/**\n * Shows the tooltip, which is already in DOM.\n * Requires `ck-tooltip_enabled` first.\n */\n@define-mixin ck-tooltip_visible {\n\t& .ck-tooltip {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_focus.css";\n@import "../../../mixins/_shadow.css";\n@import "../../../mixins/_disabled.css";\n@import "../../../mixins/_rounded.css";\n@import "../../mixins/_button.css";\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\n\n.ck.ck-button,\na.ck.ck-button {\n\t@mixin ck-button-colors --ck-color-button-default;\n\t@mixin ck-rounded-corners;\n\n\twhite-space: nowrap;\n\tcursor: default;\n\tvertical-align: middle;\n\tpadding: var(--ck-spacing-tiny);\n\ttext-align: center;\n\n\t/* A very important piece of styling. Go to variable declaration to learn more. */\n\tmin-width: var(--ck-ui-component-min-height);\n\tmin-height: var(--ck-ui-component-min-height);\n\n\t/* Normalize the height of the line. Removing this will break consistent height\n\tamong text and text-less buttons (with icons). */\n\tline-height: 1;\n\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\tfont-size: inherit;\n\n\t/* Avoid flickering when the foucs border shows up. */\n\tborder: 1px solid transparent;\n\n\t/* Apply some smooth transition to the box-shadow and border. */\n\ttransition: box-shadow .2s ease-in-out, border .2s ease-in-out;\n\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/189 */\n\t-webkit-appearance: none;\n\n\t&:active,\n\t&:focus {\n\t\t@mixin ck-focus-ring;\n\t\t@mixin ck-box-shadow var(--ck-focus-outer-shadow);\n\t}\n\n\t/* Allow icon coloring using the text "color" property. */\n\t& .ck-button__icon {\n\t\t& use,\n\t\t& use * {\n\t\t\tcolor: inherit;\n\t\t}\n\t}\n\n\t& .ck-button__label {\n\t\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\t\tfont-size: inherit;\n\t\tfont-weight: inherit;\n\t\tcolor: inherit;\n\t\tcursor: inherit;\n\n\t\t/* Must be consistent with .ck-icon\'s vertical align. Otherwise, buttons with and\n\t\twithout labels (but with icons) have different sizes in Chrome */\n\t\tvertical-align: middle;\n\n\t\t@mixin ck-dir ltr {\n\t\t\ttext-align: left;\n\t\t}\n\n\t\t@mixin ck-dir rtl {\n\t\t\ttext-align: right;\n\t\t}\n\t}\n\n\t& .ck-button__keystroke {\n\t\tcolor: inherit;\n\n\t\t@mixin ck-dir ltr {\n\t\t\tmargin-left: var(--ck-spacing-large);\n\t\t}\n\n\t\t@mixin ck-dir rtl {\n\t\t\tmargin-right: var(--ck-spacing-large);\n\t\t}\n\n\t\tfont-weight: bold;\n\t\topacity: .7;\n\t}\n\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/70 */\n\t&.ck-disabled {\n\t\t&:active,\n\t\t&:focus {\n\t\t\t/* The disabled button should have a slightly less visible shadow when focused. */\n\t\t\t@mixin ck-box-shadow var(--ck-focus-disabled-outer-shadow);\n\t\t}\n\n\t\t& .ck-button__icon {\n\t\t\t@mixin ck-disabled;\n\t\t}\n\n\t\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\n\t\t& .ck-button__label {\n\t\t\t@mixin ck-disabled;\n\t\t}\n\n\t\t& .ck-button__keystroke {\n\t\t\topacity: .3;\n\t\t}\n\t}\n\n\t&.ck-button_with-text {\n\t\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-standard);\n\n\t\t/* stylelint-disable-next-line no-descending-specificity */\n\t\t& .ck-button__icon {\n\t\t\t@mixin ck-dir ltr {\n\t\t\t\tmargin-left: calc(-1 * var(--ck-spacing-small));\n\t\t\t\tmargin-right: var(--ck-spacing-small);\n\t\t\t}\n\n\t\t\t@mixin ck-dir rtl {\n\t\t\t\tmargin-right: calc(-1 * var(--ck-spacing-small));\n\t\t\t\tmargin-left: var(--ck-spacing-small);\n\t\t\t}\n\t\t}\n\t}\n\n\t&.ck-button_with-keystroke {\n\t\t/* stylelint-disable-next-line no-descending-specificity */\n\t\t& .ck-button__label {\n\t\t\tflex-grow: 1;\n\t\t}\n\t}\n\n\t/* A style of the button which is currently on, e.g. its feature is active. */\n\t&.ck-on {\n\t\t@mixin ck-button-colors --ck-color-button-on;\n\t}\n\n\t&.ck-button-save {\n\t\tcolor: var(--ck-color-button-save);\n\t}\n\n\t&.ck-button-cancel {\n\t\tcolor: var(--ck-color-button-cancel);\n\t}\n}\n\n/* A style of the button which handles the primary action. */\n.ck.ck-button-action,\na.ck.ck-button-action {\n\t@mixin ck-button-colors --ck-color-button-action;\n\n\tcolor: var(--ck-color-button-action-text);\n}\n\n.ck.ck-button-bold,\na.ck.ck-button-bold {\n\tfont-weight: bold;\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements a button of given background color.\n *\n * @param {String} $background - Background color of the button.\n * @param {String} $border - Border color of the button.\n */\n@define-mixin ck-button-colors $prefix {\n\tbackground: var($(prefix)-background);\n\n\t&:not(.ck-disabled) {\n\t\t&:hover {\n\t\t\tbackground: var($(prefix)-hover-background);\n\t\t}\n\n\t\t&:active {\n\t\t\tbackground: var($(prefix)-active-background);\n\t\t\tbox-shadow: inset 0 2px 2px var($(prefix)-active-shadow);\n\t\t}\n\t}\n\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\n\t&.ck-disabled {\n\t\tbackground: var($(prefix)-disabled-background);\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A visual style of focused element's border.\n */\n@define-mixin ck-focus-ring {\n\t/* Disable native outline. */\n\toutline: none;\n\tborder: var(--ck-focus-ring)\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A class which indicates that an element holding it is disabled.\n */\n@define-mixin ck-disabled {\n\topacity: var(--ck-disabled-opacity);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/button/switchbutton.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/button/switchbutton.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_disabled.css"],names:[],mappings:"AASE,4HACC,aACD,CCCF,MAEC,8CAA+C,CAE/C,mDAAoD,CACpD,qCAAsC,CACtC,gKAKD,CAGC,0DAGE,4CAOF,CAVA,0DAQE,2CAEF,CAEA,iDC3BA,eDoEA,CAzCA,yICvBC,qCDgED,CAzCA,2DAKE,gBAoCF,CAzCA,2DAUE,iBA+BF,CAzCA,iDAcC,8BAAiC,CAEjC,0CAA2C,CAC3C,uDAwBD,CAtBC,2EC9CD,eD2DC,CAbA,6LC1CA,qCAAsC,CD4CpC,+CAWF,CAbA,2EAMC,6CAA8C,CAC9C,+CAAgD,CAChD,gDAAiD,CACjD,yDAA0D,CAG1D,uBACD,CAEA,uDACC,6DAKD,CAHC,iFACC,+DACD,CAIF,6DExEA,kCF0EA,CAEA,uDACC,sDAkBD,CAhBC,6DACC,4DACD,CAEA,2FAKE,yDAMF,CAXA,2FASE,kEAEF",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-button.ck-switchbutton {\n\t& .ck-button__toggle {\n\t\tdisplay: block;\n\n\t\t& .ck-button__toggle__inner {\n\t\t\tdisplay: block;\n\t\t}\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n@import "../../../mixins/_disabled.css";\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\n\n/* Note: To avoid rendering issues (aliasing) but to preserve the responsive nature\nof the component, floating\u2013point numbers have been used which, for the default font size\n(see: --ck-font-size-base), will generate simple integers. */\n:root {\n\t/* 34px at 13px font-size */\n\t--ck-switch-button-toggle-width: 2.6153846154em;\n\t/* 14px at 13px font-size */\n\t--ck-switch-button-toggle-inner-size: 1.0769230769em;\n\t--ck-switch-button-toggle-spacing: 1px;\n\t--ck-switch-button-translation: calc(\n\t\tvar(--ck-switch-button-toggle-width) -\n\t\tvar(--ck-switch-button-toggle-inner-size) -\n\t\t2 * var(--ck-switch-button-toggle-spacing)\n\t);\n}\n\n.ck.ck-button.ck-switchbutton {\n\t& .ck-button__label {\n\t\t@mixin ck-dir ltr {\n\t\t\t/* Separate the label from the switch */\n\t\t\tmargin-right: calc(2 * var(--ck-spacing-large));\n\t\t}\n\n\t\t@mixin ck-dir rtl {\n\t\t\t/* Separate the label from the switch */\n\t\t\tmargin-left: calc(2 * var(--ck-spacing-large));\n\t\t}\n\t}\n\n\t& .ck-button__toggle {\n\t\t@mixin ck-rounded-corners;\n\n\t\t@mixin ck-dir ltr {\n\t\t\t/* Make sure the toggle is always to the right as far as possible. */\n\t\t\tmargin-left: auto;\n\t\t}\n\n\t\t@mixin ck-dir rtl {\n\t\t\t/* Make sure the toggle is always to the left as far as possible. */\n\t\t\tmargin-right: auto;\n\t\t}\n\n\t\t/* Gently animate the background color of the toggle switch */\n\t\ttransition: background 400ms ease;\n\n\t\twidth: var(--ck-switch-button-toggle-width);\n\t\tbackground: var(--ck-color-switch-button-off-background);\n\n\t\t& .ck-button__toggle__inner {\n\t\t\t@mixin ck-rounded-corners {\n\t\t\t\tborder-radius: calc(.5 * var(--ck-border-radius));\n\t\t\t}\n\n\t\t\t/* Leave some tiny bit of space around the inner part of the switch */\n\t\t\tmargin: var(--ck-switch-button-toggle-spacing);\n\t\t\twidth: var(--ck-switch-button-toggle-inner-size);\n\t\t\theight: var(--ck-switch-button-toggle-inner-size);\n\t\t\tbackground: var(--ck-color-switch-button-inner-background);\n\n\t\t\t/* Gently animate the inner part of the toggle switch */\n\t\t\ttransition: all 300ms ease;\n\t\t}\n\n\t\t&:hover {\n\t\t\tbackground: var(--ck-color-switch-button-off-hover-background);\n\n\t\t\t& .ck-button__toggle__inner {\n\t\t\t\tbox-shadow: 0 0 0 5px var(--ck-color-switch-button-inner-shadow);\n\t\t\t}\n\t\t}\n\t}\n\n\t&.ck-disabled .ck-button__toggle {\n\t\t@mixin ck-disabled;\n\t}\n\n\t&.ck-on .ck-button__toggle {\n\t\tbackground: var(--ck-color-switch-button-on-background);\n\n\t\t&:hover {\n\t\t\tbackground: var(--ck-color-switch-button-on-hover-background);\n\t\t}\n\n\t\t& .ck-button__toggle__inner {\n\t\t\t/*\n\t\t\t * Move the toggle switch to the right. It will be animated.\n\t\t\t */\n\t\t\t@mixin ck-dir ltr {\n\t\t\t\ttransform: translateX( var( --ck-switch-button-translation ) );\n\t\t\t}\n\n\t\t\t@mixin ck-dir rtl {\n\t\t\t\ttransform: translateX( calc( -1 * var( --ck-switch-button-translation ) ) );\n\t\t\t}\n\t\t}\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A class which indicates that an element holding it is disabled.\n */\n@define-mixin ck-disabled {\n\topacity: var(--ck-disabled-opacity);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/colorgrid/colorgrid.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/colorgrid/colorgrid.css"],names:[],mappings:"AAKA,kBACC,YACD,CCAA,MACC,8BAA+B,CAK/B,qCACD,CAEA,kBACC,YAAa,CACb,WACD,CAEA,wBACC,oCAAqC,CACrC,qCAAsC,CACtC,wCAAyC,CACzC,yCAA0C,CAC1C,SAAU,CACV,8BAA+B,CAC/B,QAmCD,CAjCC,oCACC,YAAa,CACb,gBACD,CAEA,4DACC,gDACD,CAEA,oCACC,YAAa,CACb,2CACD,CAEA,8BACC,8FAKD,CAHC,0CACC,aACD,CAGD,8HAIC,QACD,CAEA,gGAEC,iGACD,CAGD,yBACC,oCACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-color-grid {\n\tdisplay: grid;\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n\n:root {\n\t--ck-color-grid-tile-size: 24px;\n\n\t/* Not using global colors here because these may change but some colors in a pallette\n\t * require special treatment. For instance, this ensures no matter what the UI text color is,\n\t * the check icon will look good on the black color tile. */\n\t--ck-color-color-grid-check-icon: hsl(0, 0%, 0%);\n}\n\n.ck.ck-color-grid {\n\tgrid-gap: 5px;\n\tpadding: 8px;\n}\n\n.ck.ck-color-grid__tile {\n\twidth: var(--ck-color-grid-tile-size);\n\theight: var(--ck-color-grid-tile-size);\n\tmin-width: var(--ck-color-grid-tile-size);\n\tmin-height: var(--ck-color-grid-tile-size);\n\tpadding: 0;\n\ttransition: .2s ease box-shadow;\n\tborder: 0;\n\n\t&.ck-disabled {\n\t\tcursor: unset;\n\t\ttransition: unset;\n\t}\n\n\t&.ck-color-table__color-tile_bordered {\n\t\tbox-shadow: 0 0 0 1px var(--ck-color-base-border);\n\t}\n\n\t& .ck.ck-icon {\n\t\tdisplay: none;\n\t\tcolor: var(--ck-color-color-grid-check-icon);\n\t}\n\n\t&.ck-on {\n\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-base-text);\n\n\t\t& .ck.ck-icon {\n\t\t\tdisplay: block;\n\t\t}\n\t}\n\n\t&.ck-on,\n\t&:focus:not( .ck-disabled ),\n\t&:hover:not( .ck-disabled ) {\n\t\t/* Disable the default .ck-button\'s border ring. */\n\t\tborder: 0;\n\t}\n\n\t&:focus:not( .ck-disabled ),\n\t&:hover:not( .ck-disabled ) {\n\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-focus-border);\n\t}\n}\n\n.ck.ck-color-grid__label {\n\tpadding: 0 var(--ck-spacing-standard);\n}\n'],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,'.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{content:"";position:absolute;width:1px;height:100%;background-color:var(--ck-color-split-button-hover-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}',"",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/dropdown/splitbutton.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/tooltip/mixins/_tooltip.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/splitbutton.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,mBAEC,iBAUD,CARC,iDACC,qCACD,CC0BA,8DACC,YACD,CClCD,MACC,gDAAyD,CACzD,4CACD,CAMC,oIAIE,6BAA8B,CAC9B,gCAQF,CAbA,oIAUE,4BAA6B,CAC7B,+BAEF,CAEA,0CAGC,eAiBD,CApBA,oDAOE,4BAA6B,CAC7B,+BAYF,CApBA,oDAaE,6BAA8B,CAC9B,gCAMF,CAHC,8CACC,mCACD,CASA,0KACC,wDACD,CAIA,8JACC,UAAW,CACX,iBAAkB,CAClB,SAAU,CACV,WAAY,CACZ,0DACD,CAGC,kLACC,SACD,CAIA,kLACC,UACD,CAMF,uCC7EA,eDuFA,CAVA,qHCzEC,qCDmFD,CARE,qKACC,2BACD,CAEA,mKACC,4BACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../tooltip/mixins/_tooltip.css";\n\n.ck.ck-splitbutton {\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\tfont-size: inherit;\n\n\t& .ck-splitbutton__action:focus {\n\t\tz-index: calc(var(--ck-z-default) + 1);\n\t}\n\n\t/* Disable tooltips for the buttons when the button is "open" */\n\t&.ck-splitbutton_open > .ck-button {\n\t\t@mixin ck-tooltip_disabled;\n\t}\n}\n\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Enables the tooltip, which is the tooltip is in DOM but\n * not yet displayed.\n */\n@define-mixin ck-tooltip_enabled {\n\t& .ck-tooltip {\n\t\tdisplay: block;\n\n\t\t/*\n\t\t * Don't display tooltips in devices which don't support :hover.\n\t\t * In fact, it's all about iOS, which forces user to click UI elements twice to execute\n\t\t * the primary action, when tooltips are enabled.\n\t\t *\n\t\t * Q: OK, but why not the following query?\n\t\t *\n\t\t *   @media (hover) {\n\t\t *       display: block;\n\t\t *   }\n\t\t *\n\t\t * A: Because FF does not support it and it would completely disable tooltips\n\t\t * in that browser.\n\t\t *\n\t\t * More in https://github.com/ckeditor/ckeditor5/issues/920.\n\t\t */\n\t\t@media (hover:none) {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n}\n\n/**\n * Disables the tooltip making it disappear from DOM.\n */\n@define-mixin ck-tooltip_disabled {\n\t& .ck-tooltip {\n\t\tdisplay: none;\n\t}\n}\n\n/**\n * Shows the tooltip, which is already in DOM.\n * Requires `ck-tooltip_enabled` first.\n */\n@define-mixin ck-tooltip_visible {\n\t& .ck-tooltip {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n\n:root {\n\t--ck-color-split-button-hover-background: hsl(0, 0%, 92%);\n\t--ck-color-split-button-hover-border: hsl(0, 0%, 70%);\n}\n\n.ck.ck-splitbutton {\n\t/*\n\t * Note: ck-rounded and ck-dir mixins don\'t go together (because they both use @nest).\n\t */\n\t&:hover > .ck-splitbutton__action,\n\t&.ck-splitbutton_open > .ck-splitbutton__action {\n\t\t@nest [dir="ltr"] & {\n\t\t\t/* Don\'t round the action button on the right side */\n\t\t\tborder-top-right-radius: unset;\n\t\t\tborder-bottom-right-radius: unset;\n\t\t}\n\n\t\t@nest [dir="rtl"] & {\n\t\t\t/* Don\'t round the action button on the left side */\n\t\t\tborder-top-left-radius: unset;\n\t\t\tborder-bottom-left-radius: unset;\n\t\t}\n\t}\n\n\t& > .ck-splitbutton__arrow {\n\t\t/* It\'s a text-less button and since the icon is positioned absolutely in such situation,\n\t\tit must get some arbitrary min-width. */\n\t\tmin-width: unset;\n\n\t\t@nest [dir="ltr"] & {\n\t\t\t/* Don\'t round the arrow button on the left side */\n\t\t\tborder-top-left-radius: unset;\n\t\t\tborder-bottom-left-radius: unset;\n\t\t}\n\n\t\t@nest [dir="rtl"] & {\n\t\t\t/* Don\'t round the arrow button on the right side */\n\t\t\tborder-top-right-radius: unset;\n\t\t\tborder-bottom-right-radius: unset;\n\t\t}\n\n\t\t& svg {\n\t\t\twidth: var(--ck-dropdown-arrow-size);\n\t\t}\n\t}\n\n\t/* When the split button is "open" (the arrow is on) or being hovered, it should get some styling\n\tas a whole. The background of both buttons should stand out and there should be a visual\n\tseparation between both buttons. */\n\t&.ck-splitbutton_open,\n\t&:hover {\n\t\t/* When the split button hovered as a whole, not as individual buttons. */\n\t\t& > .ck-button:not(.ck-on):not(.ck-disabled):not(:hover) {\n\t\t\tbackground: var(--ck-color-split-button-hover-background);\n\t\t}\n\n\t\t/* Splitbutton separator needs to be set with the ::after pseudoselector\n\t\tto display properly the borders on focus */\n\t\t& > .ck-splitbutton__arrow:not(.ck-disabled)::after {\n\t\t\tcontent: \'\';\n\t\t\tposition: absolute;\n\t\t\twidth: 1px;\n\t\t\theight: 100%;\n\t\t\tbackground-color: var(--ck-color-split-button-hover-border);\n\t\t}\n\n\t\t@nest [dir="ltr"] & {\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled)::after {\n\t\t\t\tleft: -1px;\n\t\t\t}\n\t\t}\n\n\t\t@nest [dir="rtl"] & {\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled)::after {\n\t\t\t\tright: -1px;\n\t\t\t}\n\t\t}\n\t}\n\n\t/* Don\'t round the bottom left and right corners of the buttons when "open"\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\n\t&.ck-splitbutton_open {\n\t\t@mixin ck-rounded-corners {\n\t\t\t& > .ck-splitbutton__action {\n\t\t\t\tborder-bottom-left-radius: 0;\n\t\t\t}\n\n\t\t\t& > .ck-splitbutton__arrow {\n\t\t\t\tborder-bottom-right-radius: 0;\n\t\t\t}\n\t\t}\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/dropdown/dropdown.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/tooltip/mixins/_tooltip.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/dropdown.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_disabled.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,MACC,4BACD,CAEA,gBACC,oBAAqB,CACrB,iBAqFD,CAnFC,oCACC,mBAAoB,CACpB,2BACD,CAGA,+CACC,UAOD,CCUA,iEACC,YACD,CDVA,oCAGC,kCAAmC,CAEnC,YAAa,CACb,yBAA0B,CAC1B,sCAAuC,CAEvC,iBAyDD,CAvDC,+DACC,oBACD,CAEA,mSAKC,WACD,CAEA,mSASC,QAAS,CACT,WACD,CAEA,oHAEC,MACD,CAEA,oHAEC,OACD,CAEA,kHAGC,QAAS,CACT,0BACD,CAEA,sHAGC,QAAS,CACT,0BACD,CAEA,sHAGC,QAAS,CACT,0BACD,CAQF,mCACC,mCACD,CEhGA,MACC,sDACD,CAEA,gBAEC,iBA2ED,CAzEC,oCACC,mCACD,CAGC,8CACC,gCAAiC,CAGjC,sCACD,CAIA,8CACC,+BAAgC,CAGhC,oCACD,CAGD,gDC/BA,kCDiCA,CAIE,mFAEC,oCACD,CAIA,mFAEC,qCACD,CAID,iEACC,SAAU,CACV,eAAgB,CAChB,sBACD,CAGA,6EC1DD,kCD4DC,CAGA,qDACC,2BAA4B,CAC5B,4BACD,CAEA,sGACC,UACD,CAGA,yHAEC,eAKD,CAHC,qIE7EF,2CF+EE,CAKH,uBGlFC,eH8GD,CA5BA,qFG9EE,qCH0GF,CA5BA,uBEpFC,oCAA8B,CFwF9B,oDAAqD,CACrD,sDAAuD,CACvD,QAAS,CAGT,cAmBD,CAfC,6CACC,wBACD,CAEA,6CACC,yBACD,CAEA,6CACC,2BACD,CAEA,6CACC,4BACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import \"../tooltip/mixins/_tooltip.css\";\n\n:root {\n\t--ck-dropdown-max-width: 75vw;\n}\n\n.ck.ck-dropdown {\n\tdisplay: inline-block;\n\tposition: relative;\n\n\t& .ck-dropdown__arrow {\n\t\tpointer-events: none;\n\t\tz-index: var(--ck-z-default);\n\t}\n\n\t/* Dropdown button should span horizontally, e.g. in vertical toolbars */\n\t& .ck-button.ck-dropdown__button {\n\t\twidth: 100%;\n\n\t\t/* Disable main button's tooltip when the dropdown is open. Otherwise the panel may\n\t\tpartially cover the tooltip */\n\t\t&.ck-on {\n\t\t\t@mixin ck-tooltip_disabled;\n\t\t}\n\t}\n\n\t& .ck-dropdown__panel {\n\t\t/* This is to get rid of flickering when the tooltip is shown under the panel,\n\t\twhich looks like the panel moves vertically a pixel down and up. */\n\t\t-webkit-backface-visibility: hidden;\n\n\t\tdisplay: none;\n\t\tz-index: var(--ck-z-modal);\n\t\tmax-width: var(--ck-dropdown-max-width);\n\n\t\tposition: absolute;\n\n\t\t&.ck-dropdown__panel-visible {\n\t\t\tdisplay: inline-block;\n\t\t}\n\n\t\t&.ck-dropdown__panel_ne,\n\t\t&.ck-dropdown__panel_nw,\n\t\t&.ck-dropdown__panel_n,\n\t\t&.ck-dropdown__panel_nmw,\n\t\t&.ck-dropdown__panel_nme {\n\t\t\tbottom: 100%;\n\t\t}\n\n\t\t&.ck-dropdown__panel_se,\n\t\t&.ck-dropdown__panel_sw,\n\t\t&.ck-dropdown__panel_smw,\n\t\t&.ck-dropdown__panel_sme,\n\t\t&.ck-dropdown__panel_s {\n\t\t\t/*\n\t\t\t * Using transform: translate3d( 0, 100%, 0 ) causes blurry dropdown on Chrome 67-78+ on non-retina displays.\n\t\t\t * See https://github.com/ckeditor/ckeditor5/issues/1053.\n\t\t\t */\n\t\t\ttop: 100%;\n\t\t\tbottom: auto;\n\t\t}\n\n\t\t&.ck-dropdown__panel_ne,\n\t\t&.ck-dropdown__panel_se {\n\t\t\tleft: 0px;\n\t\t}\n\n\t\t&.ck-dropdown__panel_nw,\n\t\t&.ck-dropdown__panel_sw {\n\t\t\tright: 0px;\n\t\t}\n\n\t\t&.ck-dropdown__panel_s,\n\t\t&.ck-dropdown__panel_n {\n\t\t\t/* Positioning panels relative to the center of the button */\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t}\n\n\t\t&.ck-dropdown__panel_nmw,\n\t\t&.ck-dropdown__panel_smw {\n\t\t\t/* Positioning panels relative to the middle-west of the button */\n\t\t\tleft: 75%;\n\t\t\ttransform: translateX(-75%);\n\t\t}\n\n\t\t&.ck-dropdown__panel_nme,\n\t\t&.ck-dropdown__panel_sme {\n\t\t\t/* Positioning panels relative to the middle-east of the button */\n\t\t\tleft: 25%;\n\t\t\ttransform: translateX(-25%);\n\t\t}\n\t}\n}\n\n/*\n * Toolbar dropdown panels should be always above the UI (eg. other dropdown panels) from the editor's content.\n * See https://github.com/ckeditor/ckeditor5/issues/7874\n */\n.ck.ck-toolbar .ck-dropdown__panel {\n\tz-index: calc( var(--ck-z-modal) + 1 );\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Enables the tooltip, which is the tooltip is in DOM but\n * not yet displayed.\n */\n@define-mixin ck-tooltip_enabled {\n\t& .ck-tooltip {\n\t\tdisplay: block;\n\n\t\t/*\n\t\t * Don't display tooltips in devices which don't support :hover.\n\t\t * In fact, it's all about iOS, which forces user to click UI elements twice to execute\n\t\t * the primary action, when tooltips are enabled.\n\t\t *\n\t\t * Q: OK, but why not the following query?\n\t\t *\n\t\t *   @media (hover) {\n\t\t *       display: block;\n\t\t *   }\n\t\t *\n\t\t * A: Because FF does not support it and it would completely disable tooltips\n\t\t * in that browser.\n\t\t *\n\t\t * More in https://github.com/ckeditor/ckeditor5/issues/920.\n\t\t */\n\t\t@media (hover:none) {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n}\n\n/**\n * Disables the tooltip making it disappear from DOM.\n */\n@define-mixin ck-tooltip_disabled {\n\t& .ck-tooltip {\n\t\tdisplay: none;\n\t}\n}\n\n/**\n * Shows the tooltip, which is already in DOM.\n * Requires `ck-tooltip_enabled` first.\n */\n@define-mixin ck-tooltip_visible {\n\t& .ck-tooltip {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n@import "../../../mixins/_disabled.css";\n@import "../../../mixins/_shadow.css";\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\n\n:root {\n\t--ck-dropdown-arrow-size: calc(0.5 * var(--ck-icon-size));\n}\n\n.ck.ck-dropdown {\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\tfont-size: inherit;\n\n\t& .ck-dropdown__arrow {\n\t\twidth: var(--ck-dropdown-arrow-size);\n\t}\n\n\t@mixin ck-dir ltr {\n\t\t& .ck-dropdown__arrow {\n\t\t\tright: var(--ck-spacing-standard);\n\n\t\t\t/* A space to accommodate the triangle. */\n\t\t\tmargin-left: var(--ck-spacing-standard);\n\t\t}\n\t}\n\n\t@mixin ck-dir rtl {\n\t\t& .ck-dropdown__arrow {\n\t\t\tleft: var(--ck-spacing-standard);\n\n\t\t\t/* A space to accommodate the triangle. */\n\t\t\tmargin-right: var(--ck-spacing-small);\n\t\t}\n\t}\n\n\t&.ck-disabled .ck-dropdown__arrow {\n\t\t@mixin ck-disabled;\n\t}\n\n\t& .ck-button.ck-dropdown__button {\n\t\t@mixin ck-dir ltr {\n\t\t\t&:not(.ck-button_with-text) {\n\t\t\t\t/* Make sure dropdowns with just an icon have the right inner spacing */\n\t\t\t\tpadding-left: var(--ck-spacing-small);\n\t\t\t}\n\t\t}\n\n\t\t@mixin ck-dir rtl {\n\t\t\t&:not(.ck-button_with-text) {\n\t\t\t\t/* Make sure dropdowns with just an icon have the right inner spacing */\n\t\t\t\tpadding-right: var(--ck-spacing-small);\n\t\t\t}\n\t\t}\n\n\t\t/* #23 */\n\t\t& .ck-button__label {\n\t\t\twidth: 7em;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\n\t\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/70 */\n\t\t&.ck-disabled .ck-button__label {\n\t\t\t@mixin ck-disabled;\n\t\t}\n\n\t\t/* https://github.com/ckeditor/ckeditor5/issues/816 */\n\t\t&.ck-on {\n\t\t\tborder-bottom-left-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n\n\t\t&.ck-dropdown__button_label-width_auto .ck-button__label {\n\t\t\twidth: auto;\n\t\t}\n\n\t\t/* https://github.com/ckeditor/ckeditor5/issues/8699 */\n\t\t&.ck-off:active,\n\t\t&.ck-on:active {\n\t\t\tbox-shadow: none;\n\t\t\t\n\t\t\t&:focus {\n\t\t\t\t@mixin ck-box-shadow var(--ck-focus-outer-shadow);\n\t\t\t}\n\t\t}\n\t}\n}\n\n.ck.ck-dropdown__panel {\n\t@mixin ck-rounded-corners;\n\t@mixin ck-drop-shadow;\n\n\tbackground: var(--ck-color-dropdown-panel-background);\n\tborder: 1px solid var(--ck-color-dropdown-panel-border);\n\tbottom: 0;\n\n\t/* Make sure the panel is at least as wide as the drop-down\'s button. */\n\tmin-width: 100%;\n\n\t/* Disabled corner border radius to be consistent with the .dropdown__button\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\n\t&.ck-dropdown__panel_se {\n\t\tborder-top-left-radius: 0;\n\t}\n\n\t&.ck-dropdown__panel_sw {\n\t\tborder-top-right-radius: 0;\n\t}\n\n\t&.ck-dropdown__panel_ne {\n\t\tborder-bottom-left-radius: 0;\n\t}\n\n\t&.ck-dropdown__panel_nw {\n\t\tborder-bottom-right-radius: 0;\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A class which indicates that an element holding it is disabled.\n */\n@define-mixin ck-disabled {\n\topacity: var(--ck-disabled-opacity);\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/toolbar/toolbar.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_unselectable.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/toolbar/toolbar.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,eCEC,qBAAsB,CACtB,wBAAyB,CACzB,oBAAqB,CACrB,gBAAgB,CDFhB,YAAa,CACb,oBAAqB,CACrB,kBA6CD,CA3CC,kCACC,YAAa,CACb,kBAAmB,CACnB,kBAAmB,CACnB,WAED,CAEA,yCACC,oBAWD,CAJC,yGAEC,YACD,CAGD,uCACC,eACD,CAEA,sDACC,gBACD,CAEA,sDACC,qBACD,CAEA,sDACC,gBACD,CAGC,yFACC,YACD,CE/CF,eCGC,eD0FD,CA7FA,qECOE,qCDsFF,CA7FA,eAGC,6CAA8C,CAC9C,iCAAkC,CAClC,+CAwFD,CAtFC,yCACC,kBAAmB,CACnB,SAAU,CACV,aAAc,CACd,yCAA0C,CAM1C,kCAAmC,CACnC,qCACD,CAEA,uCACC,QACD,CAGC,gEAEC,oCACD,CAIA,kEACC,YACD,CAGD,gHAGC,kCAAmC,CACnC,qCACD,CAEA,mCAEC,SAgBD,CAbC,0DAEC,UAAW,CAGX,QAAS,CAGT,eAAgB,CAGhB,QACD,CAGD,kCAEC,SAWD,CATC,uDAEC,QAMD,CAHC,yFACC,eACD,CASD,kFACC,mCACD,CAvFF,qCA2FE,QAEF,CAYC,+FACC,cACD,CAEA,iJAEC,mCACD,CAEA,qHACC,aACD,CAIC,6JACC,wBAAyB,CACzB,2BACD,CAGA,2JACC,yBAA0B,CAC1B,4BACD,CAID,qGACC,mCACD,CAGA,yLACC,mCACD,CAWA,qHACC,cACD,CAIC,6JACC,yBAA0B,CAC1B,4BACD,CAGA,2JACC,wBAAyB,CACzB,2BACD,CAID,qGACC,oCACD,CAGA,yLACC,oCACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../mixins/_unselectable.css";\n\n.ck.ck-toolbar {\n\t@mixin ck-unselectable;\n\n\tdisplay: flex;\n\tflex-flow: row nowrap;\n\talign-items: center;\n\n\t& > .ck-toolbar__items {\n\t\tdisplay: flex;\n\t\tflex-flow: row wrap;\n\t\talign-items: center;\n\t\tflex-grow: 1;\n\n\t}\n\n\t& .ck.ck-toolbar__separator {\n\t\tdisplay: inline-block;\n\n\t\t/*\n\t\t * A leading or trailing separator makes no sense (separates from nothing on one side).\n\t\t * For instance, it can happen when toolbar items (also separators) are getting grouped one by one and\n\t\t * moved to another toolbar in the dropdown.\n\t\t */\n\t\t&:first-child,\n\t\t&:last-child {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t& .ck-toolbar__line-break {\n\t\tflex-basis: 100%;\n\t}\n\n\t&.ck-toolbar_grouping > .ck-toolbar__items {\n\t\tflex-wrap: nowrap;\n\t}\n\n\t&.ck-toolbar_vertical > .ck-toolbar__items {\n\t\tflex-direction: column;\n\t}\n\n\t&.ck-toolbar_floating > .ck-toolbar__items {\n\t\tflex-wrap: nowrap;\n\t}\n\n\t& > .ck.ck-toolbar__grouped-dropdown {\n\t\t& > .ck-dropdown__button .ck-dropdown__arrow {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Makes element unselectable.\n */\n@define-mixin ck-unselectable {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\n\n.ck.ck-toolbar {\n\t@mixin ck-rounded-corners;\n\n\tbackground: var(--ck-color-toolbar-background);\n\tpadding: 0 var(--ck-spacing-small);\n\tborder: 1px solid var(--ck-color-toolbar-border);\n\n\t& .ck.ck-toolbar__separator {\n\t\talign-self: stretch;\n\t\twidth: 1px;\n\t\tmin-width: 1px;\n\t\tbackground: var(--ck-color-toolbar-border);\n\n\t\t/*\n\t\t * These margins make the separators look better in balloon toolbars (when aligned with the "tip").\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/7493.\n\t\t */\n\t\tmargin-top: var(--ck-spacing-small);\n\t\tmargin-bottom: var(--ck-spacing-small);\n\t}\n\n\t& .ck-toolbar__line-break {\n\t\theight: 0;\n\t}\n\n\t& > .ck-toolbar__items {\n\t\t& > *:not(.ck-toolbar__line-break) {\n\t\t\t/* (#11) Separate toolbar items. */\n\t\t\tmargin-right: var(--ck-spacing-small);\n\t\t}\n\n\t\t/* Don\'t display a separator after an empty items container, for instance,\n\t\twhen all items were grouped */\n\t\t&:empty + .ck.ck-toolbar__separator {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t& > .ck-toolbar__items > *:not(.ck-toolbar__line-break),\n\t& > .ck.ck-toolbar__grouped-dropdown {\n\t\t/* Make sure items wrapped to the next line have v-spacing */\n\t\tmargin-top: var(--ck-spacing-small);\n\t\tmargin-bottom: var(--ck-spacing-small);\n\t}\n\n\t&.ck-toolbar_vertical {\n\t\t/* Items in a vertical toolbar span the entire width. */\n\t\tpadding: 0;\n\n\t\t/* Specificity matters here. See https://github.com/ckeditor/ckeditor5-theme-lark/issues/168. */\n\t\t& > .ck-toolbar__items > .ck {\n\t\t\t/* Items in a vertical toolbar should span the horizontal space. */\n\t\t\twidth: 100%;\n\n\t\t\t/* Items in a vertical toolbar should have no margin. */\n\t\t\tmargin: 0;\n\n\t\t\t/* Items in a vertical toolbar span the entire width so rounded corners are pointless. */\n\t\t\tborder-radius: 0;\n\n\t\t\t/* Items in a vertical toolbar span the entire width so any border is pointless. */\n\t\t\tborder: 0;\n\t\t}\n\t}\n\n\t&.ck-toolbar_compact {\n\t\t/* No spacing around items. */\n\t\tpadding: 0;\n\n\t\t& > .ck-toolbar__items > * {\n\t\t\t/* Compact toolbar items have no spacing between them. */\n\t\t\tmargin: 0;\n\n\t\t\t/* "Middle" children should have no rounded corners. */\n\t\t\t&:not(:first-child):not(:last-child) {\n\t\t\t\tborder-radius: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t& > .ck.ck-toolbar__grouped-dropdown {\n\t\t/*\n\t\t * Dropdown button has asymmetric padding to fit the arrow.\n\t\t * This button has no arrow so let\'s revert that padding back to normal.\n\t\t */\n\t\t& > .ck.ck-button.ck-dropdown__button {\n\t\t\tpadding-left: var(--ck-spacing-tiny);\n\t\t}\n\t}\n\n\t@nest .ck-toolbar-container & {\n\t\tborder: 0;\n\t}\n}\n\n/* stylelint-disable */\n\n/*\n * Styles for RTL toolbars.\n *\n * Note: In some cases (e.g. a decoupled editor), the toolbar has its own "dir"\n * because its parent is not controlled by the editor framework.\n */\n[dir="rtl"] .ck.ck-toolbar,\n.ck.ck-toolbar[dir="rtl"] {\n\t& > .ck-toolbar__items > .ck {\n\t\tmargin-right: 0;\n\t}\n\n\t&:not(.ck-toolbar_compact) > .ck-toolbar__items > .ck {\n\t\t/* (#11) Separate toolbar items. */\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n\n\t& > .ck-toolbar__items > .ck:last-child {\n\t\tmargin-left: 0;\n\t}\n\n\t&.ck-toolbar_compact > .ck-toolbar__items > .ck {\n\t\t/* No rounded corners on the right side of the first child. */\n\t\t&:first-child {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t}\n\n\t\t/* No rounded corners on the left side of the last child. */\n\t\t&:last-child {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n\t}\n\n\t/* Separate the the separator form the grouping dropdown when some items are grouped. */\n\t& > .ck.ck-toolbar__separator {\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n\n\t/* Some spacing between the items and the separator before the grouped items dropdown. */\n\t&.ck-toolbar_grouping > .ck-toolbar__items:not(:empty):not(:only-child) {\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n}\n\n/*\n * Styles for LTR toolbars.\n *\n * Note: In some cases (e.g. a decoupled editor), the toolbar has its own "dir"\n * because its parent is not controlled by the editor framework.\n */\n[dir="ltr"] .ck.ck-toolbar,\n.ck.ck-toolbar[dir="ltr"] {\n\t& > .ck-toolbar__items > .ck:last-child {\n\t\tmargin-right: 0;\n\t}\n\n\t&.ck-toolbar_compact > .ck-toolbar__items > .ck {\n\t\t/* No rounded corners on the right side of the first child. */\n\t\t&:first-child {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n\n\t\t/* No rounded corners on the left side of the last child. */\n\t\t&:last-child {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t}\n\t}\n\n\t/* Separate the the separator form the grouping dropdown when some items are grouped. */\n\t& > .ck.ck-toolbar__separator {\n\t\tmargin-right: var(--ck-spacing-small);\n\t}\n\n\t/* Some spacing between the items and the separator before the grouped items dropdown. */\n\t&.ck-toolbar_grouping > .ck-toolbar__items:not(:empty):not(:only-child) {\n\t\tmargin-right: var(--ck-spacing-small);\n\t}\n}\n\n/* stylelint-enable */\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/list/list.css","webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_unselectable.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/list/list.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,YCEC,qBAAsB,CACtB,wBAAyB,CACzB,oBAAqB,CACrB,gBAAgB,CDFhB,YAAa,CACb,qBAcD,CAZC,2DAEC,aACD,CAKA,kCACC,iBAAkB,CAClB,2BACD,CEfD,YCEC,eDGD,CALA,+DCME,qCDDF,CALA,YAGC,oBAAqB,CACrB,0CACD,CAEA,kBACC,cAAe,CACf,cA2DD,CAzDC,6BACC,gBAAiB,CACjB,UAAW,CACX,eAAgB,CAChB,eAAgB,CAKhB,mIAiCD,CA7BC,+CAEC,yEACD,CAEA,oCACC,eACD,CAEA,mCACC,oDAAqD,CACrD,yCAaD,CAXC,0CACC,eACD,CAEA,2DACC,0DACD,CAEA,2DACC,4CACD,CAGD,qDACC,uDACD,CAMA,yCACC,0CAA2C,CAC3C,aAMD,CAJC,iEACC,uDAAwD,CACxD,aACD,CAKH,uBACC,UAAW,CACX,UAAW,CACX,sCACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../mixins/_unselectable.css";\n\n.ck.ck-list {\n\t@mixin ck-unselectable;\n\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t& .ck-list__item,\n\t& .ck-list__separator {\n\t\tdisplay: block;\n\t}\n\n\t/* Make sure that whatever child of the list item gets focus, it remains on the\n\ttop. Thanks to that, styles like box-shadow, outline, etc. are not masked by\n\tadjacent list items. */\n\t& .ck-list__item > *:focus {\n\t\tposition: relative;\n\t\tz-index: var(--ck-z-default);\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Makes element unselectable.\n */\n@define-mixin ck-unselectable {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_disabled.css";\n@import "../../../mixins/_rounded.css";\n@import "../../../mixins/_shadow.css";\n\n.ck.ck-list {\n\t@mixin ck-rounded-corners;\n\n\tlist-style-type: none;\n\tbackground: var(--ck-color-list-background);\n}\n\n.ck.ck-list__item {\n\tcursor: default;\n\tmin-width: 12em;\n\n\t& .ck-button {\n\t\tmin-height: unset;\n\t\twidth: 100%;\n\t\ttext-align: left;\n\t\tborder-radius: 0;\n\n\t\t/* List items should have the same height. Use absolute units to make sure it is so\n\t\t   because e.g. different heading styles may have different height\n\t\t   https://github.com/ckeditor/ckeditor5-heading/issues/63 */\n\t\tpadding:\n\t\t\tcalc(.2 * var(--ck-line-height-base) * var(--ck-font-size-base))\n\t\t\tcalc(.4 * var(--ck-line-height-base) * var(--ck-font-size-base));\n\n\t\t& .ck-button__label {\n\t\t\t/* https://github.com/ckeditor/ckeditor5-heading/issues/63 */\n\t\t\tline-height: calc(1.2 * var(--ck-line-height-base) * var(--ck-font-size-base));\n\t\t}\n\n\t\t&:active {\n\t\t\tbox-shadow: none;\n\t\t}\n\n\t\t&.ck-on {\n\t\t\tbackground: var(--ck-color-list-button-on-background);\n\t\t\tcolor: var(--ck-color-list-button-on-text);\n\n\t\t\t&:active {\n\t\t\t\tbox-shadow: none;\n\t\t\t}\n\n\t\t\t&:hover:not(.ck-disabled) {\n\t\t\t\tbackground: var(--ck-color-list-button-on-background-focus);\n\t\t\t}\n\n\t\t\t&:focus:not(.ck-disabled) {\n\t\t\t\tborder-color: var(--ck-color-base-background);\n\t\t\t}\n\t\t}\n\n\t\t&:hover:not(.ck-disabled) {\n\t\t\tbackground: var(--ck-color-list-button-hover-background);\n\t\t}\n\t}\n\n\t/* It\'s unnecessary to change the background/text of a switch toggle; it has different ways\n\tof conveying its state (like the switcher) */\n\t& .ck-switchbutton {\n\t\t&.ck-on {\n\t\t\tbackground: var(--ck-color-list-background);\n\t\t\tcolor: inherit;\n\n\t\t\t&:hover:not(.ck-disabled) {\n\t\t\t\tbackground: var(--ck-color-list-button-hover-background);\n\t\t\t\tcolor: inherit;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.ck.ck-list__separator {\n\theight: 1px;\n\twidth: 100%;\n\tbackground: var(--ck-color-base-border);\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/dropdown/toolbardropdown.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/toolbardropdown.css"],names:[],mappings:"AAKA,MACC,oCACD,CAEA,4CAEC,iBAAkB,CAClB,8CAOD,CAJE,6DACC,qCACD,CCZF,oCACC,QACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-toolbar-dropdown-max-width: 60vw;\n}\n\n.ck.ck-toolbar-dropdown > .ck-dropdown__panel {\n\t/* https://github.com/ckeditor/ckeditor5/issues/5586 */\n\twidth: max-content;\n\tmax-width: var(--ck-toolbar-dropdown-max-width);\n\n\t& .ck-button {\n\t\t&:focus {\n\t\t\tz-index: calc(var(--ck-z-default) + 1);\n\t\t}\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-toolbar-dropdown .ck-toolbar {\n\tborder: 0;\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/listdropdown.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,6CCIC,eDqBD,CAzBA,iICQE,qCAAsC,CDJtC,wBAqBF,CAfE,mFCND,eDYC,CANA,6MCFA,qCAAsC,CDIpC,wBAAyB,CACzB,2BAA4B,CAC5B,4BAEF,CAEA,kFCdD,eDmBC,CALA,2MCVA,qCAAsC,CDYpC,wBAAyB,CACzB,yBAEF",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n\n.ck.ck-dropdown .ck-dropdown__panel .ck-list {\n\t/* Disabled radius of top-left border to be consistent with .dropdown__button\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\n\t@mixin ck-rounded-corners {\n\t\tborder-top-left-radius: 0;\n\t}\n\n\t/* Make sure the button belonging to the first/last child of the list goes well with the\n\tborder radius of the entire panel. */\n\t& .ck-list__item {\n\t\t&:first-child .ck-button {\n\t\t\t@mixin ck-rounded-corners {\n\t\t\t\tborder-top-left-radius: 0;\n\t\t\t\tborder-bottom-left-radius: 0;\n\t\t\t\tborder-bottom-right-radius: 0;\n\t\t\t}\n\t\t}\n\n\t\t&:last-child .ck-button {\n\t\t\t@mixin ck-rounded-corners {\n\t\t\t\tborder-top-left-radius: 0;\n\t\t\t\tborder-top-right-radius: 0;\n\t\t\t}\n\t\t}\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/editorui/editorui.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAWA,MACC,0CACD,CAEA,yDCJC,eDWD,CAPA,yJCAE,qCDOF,CAJC,oEERA,YAAa,CACb,2BAA2B,CCF3B,qCHYA,CAGD,+BACC,aAAc,CACd,oCAAqC,CACrC,4BA4BD,CA1BC,wCACC,eACD,CAEA,wCACC,gBACD,CAGA,4CACC,kCACD,CAGA,2CAKC,qCACD,CAGA,sDACC,kDACD,CAKA,gEACC,mDACD,CAIA,gEACC,gDACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n@import "../../../mixins/_disabled.css";\n@import "../../../mixins/_shadow.css";\n@import "../../../mixins/_focus.css";\n@import "../../mixins/_button.css";\n\n:root {\n\t--ck-color-editable-blur-selection: hsl(0, 0%, 85%);\n}\n\n.ck.ck-editor__editable:not(.ck-editor__nested-editable) {\n\t@mixin ck-rounded-corners;\n\n\t&.ck-focused {\n\t\t@mixin ck-focus-ring;\n\t\t@mixin ck-box-shadow var(--ck-inner-shadow);\n\t}\n}\n\n.ck.ck-editor__editable_inline {\n\toverflow: auto;\n\tpadding: 0 var(--ck-spacing-standard);\n\tborder: 1px solid transparent;\n\n\t&[dir="ltr"] {\n\t\ttext-align: left;\n\t}\n\n\t&[dir="rtl"] {\n\t\ttext-align: right;\n\t}\n\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/116 */\n\t& > *:first-child {\n\t\tmargin-top: var(--ck-spacing-large);\n\t}\n\n\t/* https://github.com/ckeditor/ckeditor5/issues/847 */\n\t& > *:last-child {\n\t\t/*\n\t\t * This value should match with the default margins of the block elements (like .media or .image)\n\t\t * to avoid a content jumping when the fake selection container shows up (See https://github.com/ckeditor/ckeditor5/issues/9825).\n\t\t */\n\t\tmargin-bottom: var(--ck-spacing-large);\n\t}\n\n\t/* https://github.com/ckeditor/ckeditor5/issues/6517 */\n\t&.ck-blurred ::selection {\n\t\tbackground: var(--ck-color-editable-blur-selection);\n\t}\n}\n\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/111 */\n.ck.ck-balloon-panel.ck-toolbar-container[class*="arrow_n"] {\n\t&::after {\n\t\tborder-bottom-color: var(--ck-color-base-foreground);\n\t}\n}\n\n.ck.ck-balloon-panel.ck-toolbar-container[class*="arrow_s"] {\n\t&::after {\n\t\tborder-top-color: var(--ck-color-base-foreground);\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A visual style of focused element's border.\n */\n@define-mixin ck-focus-ring {\n\t/* Disable native outline. */\n\toutline: none;\n\tborder: var(--ck-focus-ring)\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/label/label.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/label/label.css"],names:[],mappings:"AAKA,aACC,aACD,CAEA,mBACC,YACD,CCNA,aACC,eACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-label {\n\tdisplay: block;\n}\n\n.ck.ck-voice-label {\n\tdisplay: none;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-label {\n\tfont-weight: bold;\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/formheader/formheader.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/formheader/formheader.css"],names:[],mappings:"AAKA,oBACC,YAAa,CACb,kBAAmB,CACnB,gBAAiB,CACjB,kBAAmB,CACnB,6BACD,CCNA,MACC,4BACD,CAEA,oBACC,uDAAwD,CACxD,mCAAoC,CACpC,wCAAyC,CACzC,mDAKD,CAHC,4CACC,eACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-form__header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-form-header-height: 38px;\n}\n\n.ck.ck-form__header {\n\tpadding: var(--ck-spacing-small) var(--ck-spacing-large);\n\theight: var(--ck-form-header-height);\n\tline-height: var(--ck-form-header-height);\n\tborder-bottom: 1px solid var(--ck-color-base-border);\n\n\t& .ck-form__header__label {\n\t\tfont-weight: bold;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/inputtext/inputtext.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AASA,MACC,0BACD,CAEA,kBCFC,eDwCD,CAtCA,2ECEE,qCDoCF,CAtCA,kBAGC,2CAA4C,CAC5C,6CAA8C,CAC9C,6DAA8D,CAC9D,oCAAqC,CAGrC,4CAA6C,CAG7C,4DA0BD,CAxBC,wBEjBA,YAAa,CACb,2BAA2B,CCF3B,2CHqBA,CAEA,4BACC,sDAAuD,CACvD,oDAAqD,CACrD,yCAMD,CAJC,kCG5BD,oDH+BC,CAGD,2BACC,+CAAgD,CAChD,2CAKD,CAHC,iCGtCD,iDHwCC,CAIF,+BACC,IACC,0BACD,CAEA,IACC,yBACD,CAEA,IACC,0BACD,CAEA,IACC,yBACD,CACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n@import "../../../mixins/_focus.css";\n@import "../../../mixins/_shadow.css";\n\n:root {\n\t--ck-input-text-width: 18em;\n}\n\n.ck.ck-input-text {\n\t@mixin ck-rounded-corners;\n\n\tbackground: var(--ck-color-input-background);\n\tborder: 1px solid var(--ck-color-input-border);\n\tpadding: var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);\n\tmin-width: var(--ck-input-text-width);\n\n\t/* This is important to stay of the same height as surrounding buttons */\n\tmin-height: var(--ck-ui-component-min-height);\n\n\t/* Apply some smooth transition to the box-shadow and border. */\n\ttransition: box-shadow .1s ease-in-out, border .1s ease-in-out;\n\n\t&:focus {\n\t\t@mixin ck-focus-ring;\n\t\t@mixin ck-box-shadow var(--ck-focus-outer-shadow);\n\t}\n\n\t&[readonly] {\n\t\tborder: 1px solid var(--ck-color-input-disabled-border);\n\t\tbackground: var(--ck-color-input-disabled-background);\n\t\tcolor: var(--ck-color-input-disabled-text);\n\n\t\t&:focus {\n\t\t\t/* The read-only input should have a slightly less visible shadow when focused. */\n\t\t\t@mixin ck-box-shadow var(--ck-focus-disabled-outer-shadow);\n\t\t}\n\t}\n\n\t&.ck-error {\n\t\tborder-color: var(--ck-color-input-error-border);\n\t\tanimation: ck-text-input-shake .3s ease both;\n\n\t\t&:focus {\n\t\t\t@mixin ck-box-shadow var(--ck-focus-error-outer-shadow);\n\t\t}\n\t}\n}\n\n@keyframes ck-text-input-shake {\n\t20% {\n\t\ttransform: translateX(-2px);\n\t}\n\n\t40% {\n\t\ttransform: translateX(2px);\n\t}\n\n\t60% {\n\t\ttransform: translateX(-1px);\n\t}\n\n\t80% {\n\t\ttransform: translateX(1px);\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A visual style of focused element's border.\n */\n@define-mixin ck-focus-ring {\n\t/* Disable native outline. */\n\toutline: none;\n\tborder: var(--ck-focus-ring)\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/labeledfield/labeledfieldview.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/labeledfield/labeledfieldview.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAMC,mEACC,YAAa,CACb,iBACD,CAEA,uCACC,aAAc,CACd,iBACD,CCND,MACC,kEAAsE,CACtE,gFAAiF,CACjF,yEACD,CAEA,0BCHC,eD4GD,CAzGA,2FCCE,qCDwGF,CAtGC,mEACC,UAmCD,CAjCC,gFACC,KA+BD,CAhCA,0FAIE,MA4BF,CAhCA,0FAQE,OAwBF,CAhCA,gFAWC,mBAAoB,CACpB,oBAAqB,CAGrB,6DAA+D,CAE/D,yDAA0D,CAC1D,4CAA8C,CAC9C,kBAAoB,CACpB,eAAmB,CAGnB,sBAAuB,CACvB,eAAgB,CAEhB,cAAe,CAEf,+JAID,CAQA,mKACC,gCACD,CAGD,yDACC,mCAAoC,CACpC,kCAAmC,CAInC,kBAKD,CAHC,6FACC,gCACD,CAID,4OAEC,yCACD,CAIA,oUAGE,yFAYF,CAfA,oUAOE,kGAQF,CAfA,gTAWC,iEAAkE,CAElE,sBAAuB,CACvB,SACD,CAKA,8FACC,sBACD,CAGA,yIACC,SACD,CAGA,kMACC,8HACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-labeled-field-view {\n\t& > .ck.ck-labeled-field-view__input-wrapper {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n\n\t& .ck.ck-label {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\n@import "../../../mixins/_rounded.css";\n\n:root {\n\t--ck-labeled-field-view-transition: .1s cubic-bezier(0, 0, 0.24, 0.95);\n\t--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-spacing-medium);\n\t--ck-color-labeled-field-label-background: var(--ck-color-base-background);\n}\n\n.ck.ck-labeled-field-view {\n\t@mixin ck-rounded-corners;\n\n\t& > .ck.ck-labeled-field-view__input-wrapper {\n\t\twidth: 100%;\n\n\t\t& > .ck.ck-label {\n\t\t\ttop: 0px;\n\n\t\t\t@mixin ck-dir ltr {\n\t\t\t\tleft: 0px;\n\t\t\t}\n\n\t\t\t@mixin ck-dir rtl {\n\t\t\t\tright: 0px;\n\t\t\t}\n\n\t\t\tpointer-events: none;\n\t\t\ttransform-origin: 0 0;\n\n\t\t\t/* By default, display the label scaled down above the field. */\n\t\t\ttransform: translate(var(--ck-spacing-medium), -6px) scale(.75);\n\n\t\t\tbackground: var(--ck-color-labeled-field-label-background);\n\t\t\tpadding: 0 calc(.5 * var(--ck-font-size-tiny));\n\t\t\tline-height: initial;\n\t\t\tfont-weight: normal;\n\n\t\t\t/* Prevent overflow when the label is longer than the input */\n\t\t\ttext-overflow: ellipsis;\n\t\t\toverflow: hidden;\n\n\t\t\tmax-width: 100%;\n\n\t\t\ttransition:\n\t\t\t\ttransform var(--ck-labeled-field-view-transition),\n\t\t\t\tpadding var(--ck-labeled-field-view-transition),\n\t\t\t\tbackground var(--ck-labeled-field-view-transition);\n\t\t}\n\t}\n\n\t&.ck-error {\n\t\t& > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\tcolor: var(--ck-color-base-error);\n\t\t}\n\n\t\t& .ck-input:not([readonly]) + .ck.ck-label {\n\t\t\tcolor: var(--ck-color-base-error);\n\t\t}\n\t}\n\n\t& .ck-labeled-field-view__status {\n\t\tfont-size: var(--ck-font-size-small);\n\t\tmargin-top: var(--ck-spacing-small);\n\n\t\t/* Let the info wrap to the next line to avoid stretching the layout horizontally.\n\t\tThe status could be very long. */\n\t\twhite-space: normal;\n\n\t\t&.ck-labeled-field-view__status_error {\n\t\t\tcolor: var(--ck-color-base-error);\n\t\t}\n\t}\n\n\t/* Disabled fields and fields that have no focus should fade out. */\n\t&.ck-disabled > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,\n\t&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\tcolor: var(--ck-color-input-disabled-text);\n\t}\n\n\t/* Fields that are disabled or not focused and without a placeholder should have full-sized labels. */\n\t/* stylelint-disable-next-line no-descending-specificity */\n\t&.ck-disabled.ck-labeled-field-view_empty > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,\n\t&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t@mixin ck-dir ltr {\n\t\t\ttransform: translate(var(--ck-spacing-medium), calc(0.6 * var(--ck-font-size-base))) scale(1);\n\t\t}\n\n\t\t@mixin ck-dir rtl {\n\t\t\ttransform: translate(calc(-1 * var(--ck-spacing-medium)), calc(0.6 * var(--ck-font-size-base))) scale(1);\n\t\t}\n\n\t\t/* Compensate for the default translate position. */\n\t\tmax-width: calc(var(--ck-labeled-field-empty-unfocused-max-width));\n\n\t\tbackground: transparent;\n\t\tpadding: 0;\n\t}\n\n\t/*------ DropdownView integration ----------------------------------------------------------------------------------- */\n\n\t/* Make sure dropdown\' background color in any of dropdown\'s state does not collide with labeled field. */\n\t& > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown > .ck.ck-button {\n\t\tbackground: transparent;\n\t}\n\n\t/* When the dropdown is "empty", the labeled field label replaces its label. */\n\t&.ck-labeled-field-view_empty > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown > .ck-button > .ck-button__label {\n\t\topacity: 0;\n\t}\n\n\t/* Make sure the label of the empty, unfocused input does not cover the dropdown arrow. */\n\t&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown + .ck-label {\n\t\tmax-width: calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard));\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}',"",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/panel/balloonpanel.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/balloonpanel.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAKA,MAEC,8DACD,CAEA,qBACC,YAAa,CACb,iBAAkB,CAElB,yBAyCD,CAtCE,+GAEC,UAAW,CACX,iBACD,CAEA,wDACC,6CACD,CAEA,uDACC,uDACD,CAIA,4CACC,6CACD,CAEA,2CACC,uDACD,CAIA,4CACC,6CACD,CAEA,2CACC,uDACD,CAGD,8CACC,aACD,CC9CD,MACC,6BAA8B,CAC9B,8BAA+B,CAC/B,iCAAkC,CAClC,oEACD,CAEA,qBCJC,eD4ID,CAxIA,iFCAE,qCDwIF,CAxIA,qBENC,oCAA8B,CFU9B,eAAgB,CAEhB,2CAA4C,CAC5C,6CAiID,CA9HE,+GAEC,OAAQ,CACR,QAAS,CACT,kBACD,CAIA,uFAEC,oDAAoH,CAApH,kDAAoH,CAApH,qDAAoH,CAApH,kBACD,CAEA,4CACC,gDACD,CAEA,uFAHC,6BAA8E,CAA9E,8BAA8E,CAA9E,4BAMD,CAHA,2CACC,oDAAkF,CAClF,yCACD,CAIA,uFAEC,oDAAoH,CAApH,qBAAoH,CAApH,qDAAoH,CAApH,+CACD,CAEA,4CACC,6CAAkE,CAClE,uDACD,CAEA,uFAJC,6BAAkE,CAAlE,+BAAkE,CAAlE,8BAOD,CAHA,2CACC,iDAAkF,CAClF,4CACD,CAIA,yGAEC,QAAS,CACT,uDAA0D,CAC1D,2CACD,CAIA,2GAEC,+CAAkD,CAClD,2CACD,CAIA,2GAEC,gDAAmD,CACnD,2CACD,CAIA,yGAEC,QAAS,CACT,uDAA0D,CAC1D,8CACD,CAIA,2GAEC,+CAAkD,CAClD,8CACD,CAIA,2GAEC,gDAAmD,CACnD,8CACD,CAIA,6GAEC,SAAU,CACV,uDAA0D,CAC1D,8CACD,CAIA,6GAEC,QAAS,CACT,sDAAyD,CACzD,8CACD,CAIA,6GAEC,SAAU,CACV,uDAA0D,CAC1D,2CACD,CAIA,6GAEC,QAAS,CACT,sDAAyD,CACzD,2CACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t/* Make sure the balloon arrow does not float over its children. */\n\t--ck-balloon-panel-arrow-z-index: calc(var(--ck-z-default) - 3);\n}\n\n.ck.ck-balloon-panel {\n\tdisplay: none;\n\tposition: absolute;\n\n\tz-index: var(--ck-z-modal);\n\n\t&.ck-balloon-panel_with-arrow {\n\t\t&::before,\n\t\t&::after {\n\t\t\tcontent: "";\n\t\t\tposition: absolute;\n\t\t}\n\n\t\t&::before {\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\n\t\t}\n\n\t\t&::after {\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\n\t\t}\n\t}\n\n\t&[class*="arrow_n"] {\n\t\t&::before {\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\n\t\t}\n\n\t\t&::after {\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\n\t\t}\n\t}\n\n\t&[class*="arrow_s"] {\n\t\t&::before {\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\n\t\t}\n\n\t\t&::after {\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_visible {\n\t\tdisplay: block;\n\t}\n}\n','/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_rounded.css";\n@import "../../../mixins/_shadow.css";\n\n:root {\n\t--ck-balloon-arrow-offset: 2px;\n\t--ck-balloon-arrow-height: 10px;\n\t--ck-balloon-arrow-half-width: 8px;\n\t--ck-balloon-arrow-drop-shadow: 0 2px 2px var(--ck-color-shadow-drop);\n}\n\n.ck.ck-balloon-panel {\n\t@mixin ck-rounded-corners;\n\t@mixin ck-drop-shadow;\n\n\tmin-height: 15px;\n\n\tbackground: var(--ck-color-panel-background);\n\tborder: 1px solid var(--ck-color-panel-border);\n\n\t&.ck-balloon-panel_with-arrow {\n\t\t&::before,\n\t\t&::after {\n\t\t\twidth: 0;\n\t\t\theight: 0;\n\t\t\tborder-style: solid;\n\t\t}\n\t}\n\n\t&[class*="arrow_n"] {\n\t\t&::before,\n\t\t&::after {\n\t\t\tborder-width: 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width);\n\t\t}\n\n\t\t&::before {\n\t\t\tborder-color: transparent transparent var(--ck-color-panel-border) transparent;\n\t\t}\n\n\t\t&::after {\n\t\t\tborder-color: transparent transparent var(--ck-color-panel-background) transparent;\n\t\t\tmargin-top: var(--ck-balloon-arrow-offset);\n\t\t}\n\t}\n\n\t&[class*="arrow_s"] {\n\t\t&::before,\n\t\t&::after {\n\t\t\tborder-width: var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width);\n\t\t}\n\n\t\t&::before {\n\t\t\tborder-color: var(--ck-color-panel-border) transparent transparent;\n\t\t\tfilter: drop-shadow(var(--ck-balloon-arrow-drop-shadow));\n\t\t}\n\n\t\t&::after {\n\t\t\tborder-color: var(--ck-color-panel-background) transparent transparent transparent;\n\t\t\tmargin-bottom: var(--ck-balloon-arrow-offset);\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_n {\n\t\t&::before,\n\t\t&::after {\n\t\t\tleft: 50%;\n\t\t\tmargin-left: calc(-1 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_nw {\n\t\t&::before,\n\t\t&::after {\n\t\t\tleft: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_ne {\n\t\t&::before,\n\t\t&::after {\n\t\t\tright: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_s {\n\t\t&::before,\n\t\t&::after {\n\t\t\tleft: 50%;\n\t\t\tmargin-left: calc(-1 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_sw {\n\t\t&::before,\n\t\t&::after {\n\t\t\tleft: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_se {\n\t\t&::before,\n\t\t&::after {\n\t\t\tright: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_sme {\n\t\t&::before,\n\t\t&::after {\n\t\t\tright: 25%;\n\t\t\tmargin-right: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_smw {\n\t\t&::before,\n\t\t&::after {\n\t\t\tleft: 25%;\n\t\t\tmargin-left: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_nme {\n\t\t&::before,\n\t\t&::after {\n\t\t\tright: 25%;\n\t\t\tmargin-right: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n\n\t&.ck-balloon-panel_arrow_nmw {\n\t\t&::before,\n\t\t&::after {\n\t\t\tleft: 25%;\n\t\t\tmargin-left: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/panel/balloonrotator.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/balloonrotator.css"],names:[],mappings:"AAKA,oCACC,YAAa,CACb,kBAAmB,CACnB,sBACD,CAKA,6CACC,sBACD,CCXA,oCACC,6CAA8C,CAC9C,sDAAuD,CACvD,iCAgBD,CAbC,sCACC,oCAAqC,CACrC,kCAAmC,CACnC,qCACD,CAGA,iEACC,uCAAwC,CAGxC,mCACD,CAMA,2DACC,eACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-balloon-rotator__navigation {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Buttons inside a toolbar should be centered when rotator bar is wider.\n * See: https://github.com/ckeditor/ckeditor5-ui/issues/495\n */\n.ck .ck-balloon-rotator__content .ck-toolbar {\n\tjustify-content: center;\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-balloon-rotator__navigation {\n\tbackground: var(--ck-color-toolbar-background);\n\tborder-bottom: 1px solid var(--ck-color-toolbar-border);\n\tpadding: 0 var(--ck-spacing-small);\n\n\t/* Let's keep similar appearance to `ck-toolbar`. */\n\t& > * {\n\t\tmargin-right: var(--ck-spacing-small);\n\t\tmargin-top: var(--ck-spacing-small);\n\t\tmargin-bottom: var(--ck-spacing-small);\n\t}\n\n\t/* Gives counter more breath than buttons. */\n\t& .ck-balloon-rotator__counter {\n\t\tmargin-right: var(--ck-spacing-standard);\n\n\t\t/* We need to use smaller margin because of previous button's right margin. */\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n}\n\n.ck .ck-balloon-rotator__content {\n\n\t/* Disable default annotation shadow inside rotator with fake panels. */\n\t& .ck.ck-annotation-wrapper {\n\t\tbox-shadow: none;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/panel/fakepanel.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/fakepanel.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAKA,mBACC,iBAAkB,CAGlB,mCACD,CAEA,uBACC,iBACD,CAEA,mCACC,SACD,CAEA,oCACC,SACD,CCfA,MACC,6CAA8C,CAC9C,2CACD,CAGA,uBCJC,oCAA8B,CDO9B,eAAgB,CAEhB,2CAA4C,CAC5C,6CAA8C,CAC9C,qCAAsC,CAEtC,UAAW,CACX,WACD,CAEA,mCACC,0DAA2D,CAC3D,uDACD,CAEA,oCACC,kEAAqE,CACrE,+DACD,CACA,oCACC,kEAAqE,CACrE,+DACD,CAGA,yIAGC,4CACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-fake-panel {\n\tposition: absolute;\n\n\t/* Fake panels should be placed under main balloon content. */\n\tz-index: calc(var(--ck-z-modal) - 1);\n}\n\n.ck .ck-fake-panel div {\n\tposition: absolute;\n}\n\n.ck .ck-fake-panel div:nth-child( 1 ) {\n\tz-index: 2;\n}\n\n.ck .ck-fake-panel div:nth-child( 2 ) {\n\tz-index: 1;\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_shadow.css";\n\n:root {\n\t--ck-balloon-fake-panel-offset-horizontal: 6px;\n\t--ck-balloon-fake-panel-offset-vertical: 6px;\n}\n\n/* Let\'s use `.ck-balloon-panel` appearance. See: balloonpanel.css. */\n.ck .ck-fake-panel div {\n\t@mixin ck-drop-shadow;\n\n\tmin-height: 15px;\n\n\tbackground: var(--ck-color-panel-background);\n\tborder: 1px solid var(--ck-color-panel-border);\n\tborder-radius: var(--ck-border-radius);\n\n\twidth: 100%;\n\theight: 100%;\n}\n\n.ck .ck-fake-panel div:nth-child( 1 ) {\n\tmargin-left: var(--ck-balloon-fake-panel-offset-horizontal);\n\tmargin-top: var(--ck-balloon-fake-panel-offset-vertical);\n}\n\n.ck .ck-fake-panel div:nth-child( 2 ) {\n\tmargin-left: calc(var(--ck-balloon-fake-panel-offset-horizontal) * 2);\n\tmargin-top: calc(var(--ck-balloon-fake-panel-offset-vertical) * 2);\n}\n.ck .ck-fake-panel div:nth-child( 3 ) {\n\tmargin-left: calc(var(--ck-balloon-fake-panel-offset-horizontal) * 3);\n\tmargin-top: calc(var(--ck-balloon-fake-panel-offset-vertical) * 3);\n}\n\n/* If balloon is positioned above element, we need to move fake panel to the top. */\n.ck .ck-balloon-panel_arrow_s + .ck-fake-panel,\n.ck .ck-balloon-panel_arrow_se + .ck-fake-panel,\n.ck .ck-balloon-panel_arrow_sw + .ck-fake-panel {\n\t--ck-balloon-fake-panel-offset-vertical: -6px;\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/panel/stickypanel.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/stickypanel.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAMC,qDACC,yBAA0B,CAC1B,cAAe,CACf,KACD,CAEA,kEACC,QAAS,CACT,iBACD,CCPA,qDCCA,oCAA8B,CDE7B,sBAAuB,CACvB,wBAAyB,CACzB,yBACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-sticky-panel {\n\t& .ck-sticky-panel__content_sticky {\n\t\tz-index: var(--ck-z-modal); /* #315 */\n\t\tposition: fixed;\n\t\ttop: 0;\n\t}\n\n\t& .ck-sticky-panel__content_sticky_bottom-limit {\n\t\ttop: auto;\n\t\tposition: absolute;\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../../../mixins/_shadow.css";\n\n.ck.ck-sticky-panel {\n\t& .ck-sticky-panel__content_sticky {\n\t\t@mixin ck-drop-shadow;\n\n\t\tborder-width: 0 1px 1px;\n\t\tborder-top-left-radius: 0;\n\t\tborder-top-right-radius: 0;\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-ui/theme/components/toolbar/blocktoolbar.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/toolbar/blocktoolbar.css"],names:[],mappings:"AAKA,4BACC,iBAAkB,CAClB,2BACD,CCHA,MACC,oDAAqD,CACrD,yDACD,CAEA,4BACC,0CAA2C,CAC3C,sCACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-block-toolbar-button {\n\tposition: absolute;\n\tz-index: var(--ck-z-default);\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-color-block-toolbar-button: var(--ck-color-text);\n\t--ck-block-toolbar-button-size: var(--ck-font-size-normal);\n}\n\n.ck.ck-block-toolbar-button {\n\tcolor: var(--ck-color-block-toolbar-button);\n\tfont-size: var(--ck-block-toolbar-size);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-engine/theme/placeholder.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-engine/placeholder.css"],names:[],mappings:"AAMA,uCAEC,iBAWD,CATC,qDACC,iBAAkB,CAClB,MAAO,CACP,OAAQ,CACR,8BAA+B,CAG/B,mBACD,CAKA,wCACC,YACD,CClBA,qDACC,WAAY,CACZ,6CACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* See ckeditor/ckeditor5#936. */\n.ck.ck-placeholder,\n.ck .ck-placeholder {\n\tposition: relative;\n\n\t&::before {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tcontent: attr(data-placeholder);\n\n\t\t/* See ckeditor/ckeditor5#469. */\n\t\tpointer-events: none;\n\t}\n}\n\n/* See ckeditor/ckeditor5#1987. */\n.ck.ck-read-only .ck-placeholder {\n\t&::before {\n\t\tdisplay: none;\n\t}\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* See ckeditor/ckeditor5#936. */\n.ck.ck-placeholder, .ck .ck-placeholder {\n\t&::before {\n\t\tcursor: text;\n\t\tcolor: var(--ck-color-engine-placeholder-text);\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-editor-classic/theme/classiceditor.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-editor-classic/classiceditor.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAKA,cAIC,iBAMD,CAJC,2DAEC,yBACD,CCLC,gDCED,eDKC,CAPA,uICMA,qCAAsC,CDJpC,2BAA4B,CAC5B,4BAIF,CAPA,gDAMC,qBACD,CAEA,iFACC,uBAAwB,CCR1B,eDaC,CANA,yMCHA,qCAAsC,CDOpC,eAEF,CAKF,yCAEC,0CAA2C,CCpB3C,eD8BD,CAZA,yHCdE,qCAAsC,CDmBtC,wBAAyB,CACzB,yBAMF,CAHC,0DACC,wCACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-editor {\n\t/* All the elements within `.ck-editor` are positioned relatively to it.\n\t If any element needs to be positioned with respect to the <body>, etc.,\n\t it must land outside of the `.ck-editor` in DOM. */\n\tposition: relative;\n\n\t& .ck-editor__top .ck-sticky-panel .ck-toolbar {\n\t\t/* https://github.com/ckeditor/ckeditor5-editor-classic/issues/62 */\n\t\tz-index: var(--ck-z-modal);\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../mixins/_rounded.css";\n\n.ck.ck-editor__top {\n\t& .ck-sticky-panel {\n\t\t& .ck-toolbar {\n\t\t\t@mixin ck-rounded-corners {\n\t\t\t\tborder-bottom-left-radius: 0;\n\t\t\t\tborder-bottom-right-radius: 0;\n\t\t\t}\n\n\t\t\tborder-bottom-width: 0;\n\t\t}\n\n\t\t& .ck-sticky-panel__content_sticky .ck-toolbar {\n\t\t\tborder-bottom-width: 1px;\n\n\t\t\t@mixin ck-rounded-corners {\n\t\t\t\tborder-radius: 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/* Note: Use ck-editor__main to make sure these styles don\'t apply to other editor types */\n.ck.ck-editor__main > .ck-editor__editable {\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/113 */\n\tbackground: var(--ck-color-base-background);\n\n\t@mixin ck-rounded-corners {\n\t\tborder-top-left-radius: 0;\n\t\tborder-top-right-radius: 0;\n\t}\n\n\t&:not(.ck-focused) {\n\t\tborder-color: var(--ck-color-base-border);\n\t}\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n@define-mixin ck-rounded-corners {\n\tborder-radius: 0;\n\n\t@nest .ck-rounded-corners &,\n\t&.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t@mixin-content;\n\t}\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,'.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}',"",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-widget/theme/widgettypearound.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-widget/widgettypearound.css"],names:[],mappings:"AASC,+CACC,aAAc,CACd,iBAAkB,CAClB,eAAgB,CAChB,2BAwBD,CAtBC,mDACC,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,qCACD,CAEA,qFAEC,iDAAoD,CACpD,kBAAoB,CAEpB,0BACD,CAEA,oFAEC,oDAAuD,CACvD,mBAAqB,CAErB,yBACD,CAUA,mLACC,UAAW,CACX,aAAc,CACd,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,qCACD,CAMD,2EACC,YAAa,CACb,iBAAkB,CAClB,MAAO,CACP,OACD,CAOA,iFACC,gDAAqD,CACrD,iDACD,CAKA,wHACC,qDAA0D,CAC1D,aACD,CAKA,uHACC,wDAA6D,CAC7D,aACD,CAoBD,mOACC,YACD,CC3GA,MACC,wCAAyC,CACzC,wEAAyE,CACzE,8EAA+E,CAC/E,2FAA4F,CAC5F,wDAAyD,CACzD,uDAAwD,CACxD,yEACD,CAgBC,+CACC,8CAA+C,CAC/C,+CAAgD,CAChD,oDAAqD,CACrD,mBAAoB,CACpB,uMAAyM,CAb1M,SAAU,CACV,mBA0DA,CA1CC,mDACC,UAAW,CACX,UAAW,CACX,8BAA+B,CAC/B,6BAA8B,CAC9B,cAgBD,CAdC,qDACC,mBAAoB,CACpB,mBAAoB,CAEpB,SAAU,CACV,qDAAsD,CACtD,kBAAmB,CACnB,oBAAqB,CACrB,qBACD,CAEA,wDACC,kBACD,CAGD,qDAIC,6DAcD,CARE,kEACC,oDACD,CAEA,8DACC,wDACD,CAUF,uKAvED,SAAU,CACV,mBAwEC,CAOD,gGACC,0DACD,CAOA,uKAEC,2DAQD,CANC,mLACC,0DAA2D,CAC3D,2DAA4D,CAC5D,mBAAoB,CACpB,uEACD,CAOD,8GACC,gBACD,CAKA,mDACC,mBAAoB,CACpB,UAAW,CACX,mFAAoF,CAMpF,oCAAwC,CACxC,oCACD,CAOC,6JAEC,yBACD,CAUA,yKACC,iDACD,CAMA,uOAlJD,SAAU,CACV,mBAmJC,CASE,0jBACC,SACD,CASF,mPACC,SACD,CASF,uHACC,aAAc,CACd,iBACD,CAYG,iRAlMF,SAAU,CACV,mBAmME,CAQH,kIACC,qEAKD,CAHC,wIACC,WACD,CAGD,4CACC,GACC,oBACD,CACA,OACC,mBACD,CACD,CAEA,gDACC,OACC,mBACD,CACA,OACC,mBACD,CACD,CAEA,8CACC,GACC,6HACD,CACA,IACC,6HACD,CACA,GACC,+HACD,CACD,CAEA,kDACC,GACC,SACD,CACA,IACC,SACD,CACA,IACC,SACD,CACA,IACC,SACD,CACA,GACC,SACD,CACD",sourcesContent:['/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-widget {\n\t/*\n\t * Styles of the type around buttons\n\t */\n\t& .ck-widget__type-around__button {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\toverflow: hidden;\n\t\tz-index: var(--ck-z-default);\n\n\t\t& svg {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\tz-index: calc(var(--ck-z-default) + 2);\n\t\t}\n\n\t\t&.ck-widget__type-around__button_before {\n\t\t\t/* Place it in the middle of the outline */\n\t\t\ttop: calc(-0.5 * var(--ck-widget-outline-thickness));\n\t\t\tleft: min(10%, 30px);\n\n\t\t\ttransform: translateY(-50%);\n\t\t}\n\n\t\t&.ck-widget__type-around__button_after {\n\t\t\t/* Place it in the middle of the outline */\n\t\t\tbottom: calc(-0.5 * var(--ck-widget-outline-thickness));\n\t\t\tright: min(10%, 30px);\n\n\t\t\ttransform: translateY(50%);\n\t\t}\n\t}\n\n\t/*\n\t * Styles for the buttons when:\n\t * - the widget is selected,\n\t * - or the button is being hovered (regardless of the widget state).\n\t */\n\t&.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button,\n\t& > .ck-widget__type-around > .ck-widget__type-around__button:hover {\n\t\t&::after {\n\t\t\tcontent: "";\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 1px;\n\t\t\tleft: 1px;\n\t\t\tz-index: calc(var(--ck-z-default) + 1);\n\t\t}\n\t}\n\n\t/*\n\t * Styles for the horizontal "fake caret" which is displayed when the user navigates using the keyboard.\n\t */\n\t& > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t}\n\n\t/*\n\t * When the widget is hovered the "fake caret" would normally be narrower than the\n\t * extra outline displayed around the widget. Let\'s extend the "fake caret" to match\n\t * the full width of the widget.\n\t */\n\t&:hover > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tleft: calc( -1 * var(--ck-widget-outline-thickness) );\n\t\tright: calc( -1 * var(--ck-widget-outline-thickness) );\n\t}\n\n\t/*\n\t * Styles for the horizontal "fake caret" when it should be displayed before the widget (backward keyboard navigation).\n\t */\n\t&.ck-widget_type-around_show-fake-caret_before > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\ttop: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\n\t\tdisplay: block;\n\t}\n\n\t/*\n\t * Styles for the horizontal "fake caret" when it should be displayed after the widget (forward keyboard navigation).\n\t */\n\t&.ck-widget_type-around_show-fake-caret_after > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tbottom: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\n\t\tdisplay: block;\n\t}\n}\n\n/*\n * Integration with the read-only mode of the editor.\n */\n.ck.ck-editor__editable.ck-read-only .ck-widget__type-around {\n\tdisplay: none;\n}\n\n/*\n * Integration with the restricted editing mode (feature) of the editor.\n */\n.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around {\n\tdisplay: none;\n}\n\n/*\n * Integration with the #isEnabled property of the WidgetTypeAround plugin.\n */\n.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around {\n\tdisplay: none;\n}\n','/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-widget-type-around-button-size: 20px;\n\t--ck-color-widget-type-around-button-active: var(--ck-color-focus-border);\n\t--ck-color-widget-type-around-button-hover: var(--ck-color-widget-hover-border);\n\t--ck-color-widget-type-around-button-blurred-editable: var(--ck-color-widget-blurred-border);\n\t--ck-color-widget-type-around-button-radar-start-alpha: 0;\n\t--ck-color-widget-type-around-button-radar-end-alpha: .3;\n\t--ck-color-widget-type-around-button-icon: var(--ck-color-base-background);\n}\n\n@define-mixin ck-widget-type-around-button-visible {\n\topacity: 1;\n\tpointer-events: auto;\n}\n\n@define-mixin ck-widget-type-around-button-hidden {\n\topacity: 0;\n\tpointer-events: none;\n}\n\n.ck .ck-widget {\n\t/*\n\t * Styles of the type around buttons\n\t */\n\t& .ck-widget__type-around__button {\n\t\twidth: var(--ck-widget-type-around-button-size);\n\t\theight: var(--ck-widget-type-around-button-size);\n\t\tbackground: var(--ck-color-widget-type-around-button);\n\t\tborder-radius: 100px;\n\t\ttransition: opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve), background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n\n\t\t@mixin ck-widget-type-around-button-hidden;\n\n\t\t& svg {\n\t\t\twidth: 10px;\n\t\t\theight: 8px;\n\t\t\ttransform: translate(-50%,-50%);\n\t\t\ttransition: transform .5s ease;\n\t\t\tmargin-top: 1px;\n\n\t\t\t& * {\n\t\t\t\tstroke-dasharray: 10;\n\t\t\t\tstroke-dashoffset: 0;\n\n\t\t\t\tfill: none;\n\t\t\t\tstroke: var(--ck-color-widget-type-around-button-icon);\n\t\t\t\tstroke-width: 1.5px;\n\t\t\t\tstroke-linecap: round;\n\t\t\t\tstroke-linejoin: round;\n\t\t\t}\n\n\t\t\t& line {\n\t\t\t\tstroke-dasharray: 7;\n\t\t\t}\n\t\t}\n\n\t\t&:hover {\n\t\t\t/*\n\t\t\t * Display the "sonar" around the button when hovered.\n\t\t\t */\n\t\t\tanimation: ck-widget-type-around-button-sonar 1s ease infinite;\n\n\t\t\t/*\n\t\t\t * Animate active button\'s icon.\n\t\t\t */\n\t\t\t& svg {\n\t\t\t\t& polyline {\n\t\t\t\t\tanimation: ck-widget-type-around-arrow-dash 2s linear;\n\t\t\t\t}\n\n\t\t\t\t& line {\n\t\t\t\t\tanimation: ck-widget-type-around-arrow-tip-dash 2s linear;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/*\n\t * Show type around buttons when the widget gets selected or being hovered.\n\t */\n\t&.ck-widget_selected,\n\t&:hover {\n\t\t& > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\t\t@mixin ck-widget-type-around-button-visible;\n\t\t}\n\t}\n\n\t/*\n\t * Styles for the buttons when the widget is NOT selected (but the buttons are visible\n\t * and still can be hovered).\n\t */\n\t&:not(.ck-widget_selected) > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\tbackground: var(--ck-color-widget-type-around-button-hover);\n\t}\n\n\t/*\n\t * Styles for the buttons when:\n\t * - the widget is selected,\n\t * - or the button is being hovered (regardless of the widget state).\n\t */\n\t&.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button,\n\t& > .ck-widget__type-around > .ck-widget__type-around__button:hover {\n\t\tbackground: var(--ck-color-widget-type-around-button-active);\n\n\t\t&::after {\n\t\t\twidth: calc(var(--ck-widget-type-around-button-size) - 2px);\n\t\t\theight: calc(var(--ck-widget-type-around-button-size) - 2px);\n\t\t\tborder-radius: 100px;\n\t\t\tbackground: linear-gradient(135deg, hsla(0,0%,100%,0) 0%, hsla(0,0%,100%,.3) 100%);\n\t\t}\n\t}\n\n\t/*\n\t * Styles for the "before" button when the widget has a selection handle. Because some space\n\t * is consumed by the handle, the button must be moved slightly to the right to let it breathe.\n\t */\n\t&.ck-widget_with-selection-handle > .ck-widget__type-around > .ck-widget__type-around__button_before {\n\t\tmargin-left: 20px;\n\t}\n\n\t/*\n\t * Styles for the horizontal "fake caret" which is displayed when the user navigates using the keyboard.\n\t */\n\t& .ck-widget__type-around__fake-caret {\n\t\tpointer-events: none;\n\t\theight: 1px;\n\t\tanimation: ck-widget-type-around-fake-caret-pulse linear 1s infinite normal forwards;\n\n\t\t/*\n\t\t * The semi-transparent-outline+background combo improves the contrast\n\t\t * when the background underneath the fake caret is dark.\n\t\t */\n\t\toutline: solid 1px hsla(0, 0%, 100%, .5);\n\t\tbackground: var(--ck-color-base-text);\n\t}\n\n\t/*\n\t * Styles of the widget when the "fake caret" is blinking (e.g. upon keyboard navigation).\n\t * Despite the widget being physically selected in the model, its outline should disappear.\n\t */\n\t&.ck-widget_selected {\n\t\t&.ck-widget_type-around_show-fake-caret_before,\n\t\t&.ck-widget_type-around_show-fake-caret_after {\n\t\t\toutline-color: transparent;\n\t\t}\n\t}\n\n\t&.ck-widget_type-around_show-fake-caret_before,\n\t&.ck-widget_type-around_show-fake-caret_after {\n\t\t/*\n\t\t * When the "fake caret" is visible we simulate that the widget is not selected\n\t\t * (despite being physically selected), so the outline color should be for the\n\t\t * unselected widget.\n\t\t */\n\t\t&.ck-widget_selected:hover {\n\t\t\toutline-color: var(--ck-color-widget-hover-border);\n\t\t}\n\n\t\t/*\n\t\t * Styles of the type around buttons when the "fake caret" is blinking (e.g. upon keyboard navigation).\n\t\t * In this state, the type around buttons would collide with the fake carets so they should disappear.\n\t\t */\n\t\t& > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\t\t@mixin ck-widget-type-around-button-hidden;\n\t\t}\n\n\t\t/*\n\t\t * Fake horizontal caret integration with the selection handle. When the caret is visible, simply\n\t\t * hide the handle because it intersects with the caret (and does not make much sense anyway).\n\t\t */\n\t\t&.ck-widget_with-selection-handle {\n\t\t\t&.ck-widget_selected,\n\t\t\t&.ck-widget_selected:hover {\n\t\t\t\t& > .ck-widget__selection-handle {\n\t\t\t\t\topacity: 0\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/*\n\t\t * Fake horizontal caret integration with the resize UI. When the caret is visible, simply\n\t\t * hide the resize UI because it creates too much noise. It can be visible when the user\n\t\t * hovers the widget, though.\n\t\t */\n\t\t&.ck-widget_selected.ck-widget_with-resizer > .ck-widget__resizer {\n\t\t\topacity: 0\n\t\t}\n\t}\n}\n\n/*\n * Styles for the "before" button when the widget has a selection handle in an RTL environment.\n * The selection handler is aligned to the right side of the widget so there is no need to create\n * additional space for it next to the "before" button.\n */\n.ck[dir="rtl"] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around > .ck-widget__type-around__button_before {\n\tmargin-left: 0;\n\tmargin-right: 20px;\n}\n\n/*\n * Hide type around buttons when the widget is selected as a child of a selected\n * nested editable (e.g. mulit-cell table selection).\n *\n * See https://github.com/ckeditor/ckeditor5/issues/7263.\n */\n.ck-editor__nested-editable.ck-editor__editable_selected {\n\t& .ck-widget {\n\t\t&.ck-widget_selected,\n\t\t&:hover {\n\t\t\t& > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\t\t\t@mixin ck-widget-type-around-button-hidden;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/*\n * Styles for the buttons when the widget is selected but the user clicked outside of the editor (blurred the editor).\n */\n.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button:not(:hover) {\n\tbackground: var(--ck-color-widget-type-around-button-blurred-editable);\n\n\t& svg * {\n\t\tstroke: hsl(0,0%,60%);\n\t}\n}\n\n@keyframes ck-widget-type-around-arrow-dash {\n\t0% {\n\t\tstroke-dashoffset: 10;\n\t}\n\t20%, 100% {\n\t\tstroke-dashoffset: 0;\n\t}\n}\n\n@keyframes ck-widget-type-around-arrow-tip-dash {\n\t0%, 20% {\n\t\tstroke-dashoffset: 7;\n\t}\n\t40%, 100% {\n\t\tstroke-dashoffset: 0;\n\t}\n}\n\n@keyframes ck-widget-type-around-button-sonar {\n\t0% {\n\t\tbox-shadow: 0 0 0 0 hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-start-alpha));\n\t}\n\t50% {\n\t\tbox-shadow: 0 0 0 5px hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-end-alpha));\n\t}\n\t100% {\n\t\tbox-shadow: 0 0 0 5px hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-start-alpha));\n\t}\n}\n\n@keyframes ck-widget-type-around-fake-caret-pulse {\n\t0% {\n\t\topacity: 1;\n\t}\n\t49% {\n\t\topacity: 1;\n\t}\n\t50% {\n\t\topacity: 0;\n\t}\n\t99% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n'],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:0 var(--ck-spacing-small);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{top:calc(var(--ck-resizer-tooltip-height)*-1);left:50%;transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness));top:0}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-widget/theme/widget.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-widget/widget.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAKA,MACC,+CAAgD,CAChD,6CAAsD,CACtD,uCAAgD,CAEhD,kDAAmD,CACnD,gCAAiC,CACjC,kEACD,CAOA,8DAEC,iBAqBD,CAnBC,4EACC,iBAOD,CALC,qFAGC,aACD,CASD,iLACC,kBACD,CAGD,kBACC,qDAAsD,CACtD,0CAA2C,CAC3C,qDAAsD,CACtD,6CAA8C,CAC9C,kCAAmC,CACnC,aAAc,CACd,iCAAkC,CAClC,uCAAwC,CACxC,4CAoCD,CAlCC,8NAKC,iBACD,CAEA,0CACC,oCAAqC,CACrC,qCACD,CAEA,2CACC,oCAAqC,CACrC,sCACD,CAEA,8CACC,uCAAwC,CACxC,sCACD,CAEA,6CACC,uCAAwC,CACxC,qCACD,CAGA,8CACC,6CAAgD,CAChD,QAAS,CACT,yBACD,CCjFD,MACC,iCAAkC,CAClC,kCAAmC,CACnC,4CAA6C,CAC7C,wCAAyC,CAEzC,wCAAiD,CACjD,sCAAkD,CAClD,2EAA4E,CAC5E,yEACD,CAEA,eACC,gDAAiD,CACjD,mBAAoB,CACpB,yBAA0B,CAC1B,6GAUD,CARC,0EAEC,6EACD,CAEA,qBACC,iDACD,CAGD,gCACC,4BAWD,CAPC,yGC/BA,YAAa,CACb,2BAA2B,CCF3B,qCAA8B,CFqC7B,iEACD,CAIA,4EACC,WAAY,CACZ,qBAAsB,CAGtB,4BAA6B,CAC7B,SAAU,CAMV,6SAG6F,CAG7F,iEAAkE,CAGlE,2BAA4B,CAC5B,mDAAoD,CACpD,KAqBD,CAnBC,qFAEC,wCAAyC,CACzC,yCAA0C,CAC1C,oDASD,CANC,kHACC,SAAU,CAGV,+DACD,CAID,wHACC,SACD,CAID,kFACC,SAAU,CACV,oDACD,CAKC,oMACC,SAAU,CACV,6CAMD,CAHC,gRACC,SACD,CAOH,qFACC,SAAU,CACV,oDACD,CAGA,gDAEC,eAkBD,CAhBC,yEAOC,iCACD,CAGC,gOAEC,gDACD,CAOD,wIAEC,mDAQD,CALE,ghBAEC,gDACD,CAKH,yKAOC,yDACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-color-resizer: var(--ck-color-focus-border);\n\t--ck-color-resizer-tooltip-background: hsl(0, 0%, 15%);\n\t--ck-color-resizer-tooltip-text: hsl(0, 0%, 95%);\n\n\t--ck-resizer-border-radius: var(--ck-border-radius);\n\t--ck-resizer-tooltip-offset: 10px;\n\t--ck-resizer-tooltip-height: calc(var(--ck-spacing-small) * 2 + 10px);\n}\n\n.ck .ck-widget {\n\t/* This is neccessary for type around UI to be positioned properly. */\n\tposition: relative;\n}\n\n.ck .ck-widget.ck-widget_with-selection-handle {\n\t/* Make the widget wrapper a relative positioning container for the drag handle. */\n\tposition: relative;\n\n\t& .ck-widget__selection-handle {\n\t\tposition: absolute;\n\n\t\t& .ck-icon {\n\t\t\t/* Make sure the icon in not a subject to font-size or line-height to avoid\n\t\t\tunnecessary spacing around it. */\n\t\t\tdisplay: block;\n\t\t}\n\t}\n\n\t/* Show the selection handle on mouse hover over the widget, but not for nested widgets. */\n\t&:hover > .ck-widget__selection-handle {\n\t\tvisibility: visible;\n\t}\n\n\t/* Show the selection handle when the widget is selected, but not for nested widgets. */\n\t&.ck-widget_selected > .ck-widget__selection-handle {\n\t\tvisibility: visible;\n\t}\n}\n\n.ck .ck-size-view {\n\tbackground: var(--ck-color-resizer-tooltip-background);\n\tcolor: var(--ck-color-resizer-tooltip-text);\n\tborder: 1px solid var(--ck-color-resizer-tooltip-text);\n\tborder-radius: var(--ck-resizer-border-radius);\n\tfont-size: var(--ck-font-size-tiny);\n\tdisplay: block;\n\tpadding: 0 var(--ck-spacing-small);\n\theight: var(--ck-resizer-tooltip-height);\n\tline-height: var(--ck-resizer-tooltip-height);\n\n\t&.ck-orientation-top-left,\n\t&.ck-orientation-top-right,\n\t&.ck-orientation-bottom-right,\n\t&.ck-orientation-bottom-left,\n\t&.ck-orientation-above-center {\n\t\tposition: absolute;\n\t}\n\n\t&.ck-orientation-top-left {\n\t\ttop: var(--ck-resizer-tooltip-offset);\n\t\tleft: var(--ck-resizer-tooltip-offset);\n\t}\n\n\t&.ck-orientation-top-right {\n\t\ttop: var(--ck-resizer-tooltip-offset);\n\t\tright: var(--ck-resizer-tooltip-offset);\n\t}\n\n\t&.ck-orientation-bottom-right {\n\t\tbottom: var(--ck-resizer-tooltip-offset);\n\t\tright: var(--ck-resizer-tooltip-offset);\n\t}\n\n\t&.ck-orientation-bottom-left {\n\t\tbottom: var(--ck-resizer-tooltip-offset);\n\t\tleft: var(--ck-resizer-tooltip-offset);\n\t}\n\n\t/* Class applied if the widget is too small to contain the size label */\n\t&.ck-orientation-above-center {\n\t\ttop: calc(var(--ck-resizer-tooltip-height) * -1);\n\t\tleft: 50%;\n\t\ttransform: translate(-50%);\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "../mixins/_focus.css";\n@import "../mixins/_shadow.css";\n\n:root {\n\t--ck-widget-outline-thickness: 3px;\n\t--ck-widget-handler-icon-size: 16px;\n\t--ck-widget-handler-animation-duration: 200ms;\n\t--ck-widget-handler-animation-curve: ease;\n\n\t--ck-color-widget-blurred-border: hsl(0, 0%, 87%);\n\t--ck-color-widget-hover-border: hsl(43, 100%, 62%);\n\t--ck-color-widget-editable-focus-background: var(--ck-color-base-background);\n\t--ck-color-widget-drag-handler-icon-color: var(--ck-color-base-background);\n}\n\n.ck .ck-widget {\n\toutline-width: var(--ck-widget-outline-thickness);\n\toutline-style: solid;\n\toutline-color: transparent;\n\ttransition: outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n\n\t&.ck-widget_selected,\n\t&.ck-widget_selected:hover {\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border);\n\t}\n\n\t&:hover {\n\t\toutline-color: var(--ck-color-widget-hover-border);\n\t}\n}\n\n.ck .ck-editor__nested-editable {\n\tborder: 1px solid transparent;\n\n\t/* The :focus style is applied before .ck-editor__nested-editable_focused class is rendered in the view.\n\tThese styles show a different border for a blink of an eye, so `:focus` need to have same styles applied. */\n\t&.ck-editor__nested-editable_focused,\n\t&:focus {\n\t\t@mixin ck-focus-ring;\n\t\t@mixin ck-box-shadow var(--ck-inner-shadow);\n\n\t\tbackground-color: var(--ck-color-widget-editable-focus-background);\n\t}\n}\n\n.ck .ck-widget.ck-widget_with-selection-handle {\n\t& .ck-widget__selection-handle {\n\t\tpadding: 4px;\n\t\tbox-sizing: border-box;\n\n\t\t/* Background and opacity will be animated as the handler shows up or the widget gets selected. */\n\t\tbackground-color: transparent;\n\t\topacity: 0;\n\n\t\t/* Transition:\n\t\t   * background-color for the .ck-widget_selected state change,\n\t\t   * visibility for hiding the handler,\n\t\t   * opacity for the proper look of the icon when the handler disappears. */\n\t\ttransition:\n\t\t\tbackground-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),\n\t\t\tvisibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),\n\t\t\topacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n\n\t\t/* Make only top corners round. */\n\t\tborder-radius: var(--ck-border-radius) var(--ck-border-radius) 0 0;\n\n\t\t/* Place the drag handler outside the widget wrapper. */\n\t\ttransform: translateY(-100%);\n\t\tleft: calc(0px - var(--ck-widget-outline-thickness));\n\t\ttop: 0;\n\n\t\t& .ck-icon {\n\t\t\t/* Make sure the dimensions of the icon are independent of the fon-size of the content. */\n\t\t\twidth: var(--ck-widget-handler-icon-size);\n\t\t\theight: var(--ck-widget-handler-icon-size);\n\t\t\tcolor: var(--ck-color-widget-drag-handler-icon-color);\n\n\t\t\t/* The "selected" part of the icon is invisible by default */\n\t\t\t& .ck-icon__selected-indicator {\n\t\t\t\topacity: 0;\n\n\t\t\t\t/* Note: The animation is longer on purpose. Simply feels better. */\n\t\t\t\ttransition: opacity 300ms var(--ck-widget-handler-animation-curve);\n\t\t\t}\n\t\t}\n\n\t\t/* Advertise using the look of the icon that once clicked the handler, the widget will be selected. */\n\t\t&:hover .ck-icon .ck-icon__selected-indicator {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\t/* Show the selection handler on mouse hover over the widget, but not for nested widgets. */\n\t&:hover > .ck-widget__selection-handle {\n\t\topacity: 1;\n\t\tbackground-color: var(--ck-color-widget-hover-border);\n\t}\n\n\t/* Show the selection handler when the widget is selected, but not for nested widgets. */\n\t&.ck-widget_selected,\n\t&.ck-widget_selected:hover {\n\t\t& > .ck-widget__selection-handle {\n\t\t\topacity: 1;\n\t\t\tbackground-color: var(--ck-color-focus-border);\n\n\t\t\t/* When the widget is selected, notify the user using the proper look of the icon. */\n\t\t\t& .ck-icon .ck-icon__selected-indicator {\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/* In a RTL environment, align the selection handler to the right side of the widget */\n/* stylelint-disable-next-line no-descending-specificity */\n.ck[dir="rtl"] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle {\n\tleft: auto;\n\tright: calc(0px - var(--ck-widget-outline-thickness));\n}\n\n/* https://github.com/ckeditor/ckeditor5/issues/6415 */\n.ck.ck-editor__editable.ck-read-only .ck-widget {\n\t/* Prevent the :hover outline from showing up because of the used outline-color transition. */\n\ttransition: none;\n\n\t&:not(.ck-widget_selected) {\n\t\t/* Disable visual effects of hover/active widget when CKEditor is in readOnly mode.\n\t\t * See: https://github.com/ckeditor/ckeditor5/issues/1261\n\t\t *\n\t\t * Leave the unit because this custom property is used in calc() by other features.\n\t\t * See: https://github.com/ckeditor/ckeditor5/issues/6775\n\t\t */\n\t\t--ck-widget-outline-thickness: 0px;\n\t}\n\n\t&.ck-widget_with-selection-handle {\n\t\t& .ck-widget__selection-handle,\n\t\t& .ck-widget__selection-handle:hover {\n\t\t\tbackground: var(--ck-color-widget-blurred-border);\n\t\t}\n\t}\n}\n\n/* Style the widget when it\'s selected but the editable it belongs to lost focus. */\n/* stylelint-disable-next-line no-descending-specificity */\n.ck.ck-editor__editable.ck-blurred .ck-widget {\n\t&.ck-widget_selected,\n\t&.ck-widget_selected:hover {\n\t\toutline-color: var(--ck-color-widget-blurred-border);\n\n\t\t&.ck-widget_with-selection-handle {\n\t\t\t& > .ck-widget__selection-handle,\n\t\t\t& > .ck-widget__selection-handle:hover {\n\t\t\t\tbackground: var(--ck-color-widget-blurred-border);\n\t\t\t}\n\t\t}\n\t}\n}\n\n.ck.ck-editor__editable > .ck-widget.ck-widget_with-selection-handle:first-child,\n.ck.ck-editor__editable blockquote > .ck-widget.ck-widget_with-selection-handle:first-child {\n\t/* Do not crop selection handler if a widget is a first-child in the blockquote or in the root editable.\n\tIn fact, anything with overflow: hidden.\n\thttps://github.com/ckeditor/ckeditor5-block-quote/issues/28\n\thttps://github.com/ckeditor/ckeditor5-widget/issues/44\n\thttps://github.com/ckeditor/ckeditor5-widget/issues/66 */\n\tmargin-top: calc(1em + var(--ck-widget-handler-icon-size));\n}\n',"/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A visual style of focused element's border.\n */\n@define-mixin ck-focus-ring {\n\t/* Disable native outline. */\n\toutline: none;\n\tborder: var(--ck-focus-ring)\n}\n","/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * A helper to combine multiple shadows.\n */\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\n\tbox-shadow: $shadowA, $shadowB;\n}\n\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n@define-mixin ck-drop-shadow {\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\n}\n"],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,'.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);transform:translateX(-50%);border-left:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-bottom:0 solid transparent;border-right:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-top:calc(var(--ck-clipboard-drop-target-dot-height)) solid var(--ck-clipboard-drop-target-color)}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}',"",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-clipboard/theme/clipboard.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-clipboard/clipboard.css"],names:[],mappings:"AASC,8DACC,cAAe,CACf,iBAAkB,CAClB,mBAMD,CAJC,mEACC,iBAAkB,CAClB,OACD,CAWA,qJACC,YACD,CCzBF,MACC,yCAA0C,CAC1C,yCAA0C,CAC1C,6DACD,CAOE,mEACC,4DAA8D,CAC9D,yDAA2D,CAC3D,sDAAuD,CACvD,gDAAiD,CACjD,gBAkBD,CAfC,yEACC,UAAW,CACX,OAAQ,CACR,QAAS,CAET,aAAc,CACd,iBAAkB,CAClB,QAAS,CACT,yDAA2D,CAE3D,0BAA2B,CAG3B,iFAAmB,CAAnB,iCAAmB,CAAnB,kFAAmB,CAAnB,uGACD,CA2DF,kEACC,gGACD,CAKA,gDACC,OAAS,CACT,sBACD",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-editor__editable {\n\t/*\n\t * Vertical drop target (in text).\n\t */\n\t& .ck.ck-clipboard-drop-target-position {\n\t\tdisplay: inline;\n\t\tposition: relative;\n\t\tpointer-events: none;\n\n\t\t& span {\n\t\t\tposition: absolute;\n\t\t\twidth: 0;\n\t\t}\n\t}\n\n\t/*\n\t * Styles of the widget being dragged (its preview).\n\t */\n\t& .ck-widget:-webkit-drag {\n\t\t& > .ck-widget__selection-handle {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t& > .ck-widget__type-around {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-clipboard-drop-target-dot-width: 12px;\n\t--ck-clipboard-drop-target-dot-height: 8px;\n\t--ck-clipboard-drop-target-color: var(--ck-color-focus-border)\n}\n\n.ck.ck-editor__editable {\n\t/*\n\t * Vertical drop target (in text).\n\t */\n\t& .ck.ck-clipboard-drop-target-position {\n\t\t& span {\n\t\t\tbottom: calc(-.5 * var(--ck-clipboard-drop-target-dot-height));\n\t\t\ttop: calc(-.5 * var(--ck-clipboard-drop-target-dot-height));\n\t\t\tborder: 1px solid var(--ck-clipboard-drop-target-color);\n\t\t\tbackground: var(--ck-clipboard-drop-target-color);\n\t\t\tmargin-left: -1px;\n\n\t\t\t/* The triangle above the marker */\n\t\t\t&::after {\n\t\t\t\tcontent: "";\n\t\t\t\twidth: 0;\n\t\t\t\theight: 0;\n\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 50%;\n\t\t\t\ttop: calc(var(--ck-clipboard-drop-target-dot-height) * -.5);\n\n\t\t\t\ttransform: translateX(-50%);\n\t\t\t\tborder-color: var(--ck-clipboard-drop-target-color) transparent transparent transparent;\n\t\t\t\tborder-width: calc(var(--ck-clipboard-drop-target-dot-height)) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width));\n\t\t\t\tborder-style: solid;\n\t\t\t}\n\t\t}\n\t}\n\n\t/*\n\t// Horizontal drop target (between blocks).\n\t& .ck.ck-clipboard-drop-target-position {\n\t\tdisplay: block;\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 0;\n\t\tmargin: 0;\n\t\ttext-align: initial;\n\n\t\t& .ck-clipboard-drop-target__line {\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\theight: 0;\n\t\t\tborder: 1px solid var(--ck-clipboard-drop-target-color);\n\t\t\tmargin-top: -1px;\n\n\t\t\t&::before {\n\t\t\t\tcontent: "";\n\t\t\t\twidth: 0;\n\t\t\t\theight: 0;\n\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: calc(-1 * var(--ck-clipboard-drop-target-dot-size));\n\t\t\t\ttop: 0;\n\n\t\t\t\ttransform: translateY(-50%);\n\t\t\t\tborder-color: transparent transparent transparent var(--ck-clipboard-drop-target-color);\n\t\t\t\tborder-width: var(--ck-clipboard-drop-target-dot-size) 0 var(--ck-clipboard-drop-target-dot-size) calc(2 * var(--ck-clipboard-drop-target-dot-size));\n\t\t\t\tborder-style: solid;\n\t\t\t}\n\n\t\t\t&::after {\n\t\t\t\tcontent: "";\n\t\t\t\twidth: 0;\n\t\t\t\theight: 0;\n\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tright: calc(-1 * var(--ck-clipboard-drop-target-dot-size));\n\t\t\t\ttop: 0;\n\n\t\t\t\ttransform: translateY(-50%);\n\t\t\t\tborder-color: transparent var(--ck-clipboard-drop-target-color) transparent transparent;\n\t\t\t\tborder-width: var(--ck-clipboard-drop-target-dot-size) calc(2 * var(--ck-clipboard-drop-target-dot-size)) var(--ck-clipboard-drop-target-dot-size) 0;\n\t\t\t\tborder-style: solid;\n\t\t\t}\n\t\t}\n\t}\n\t*/\n\n\t/*\n\t * Styles of the widget that it a drop target.\n\t */\n\t& .ck-widget.ck-clipboard-drop-target-range {\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color) !important;\n\t}\n\n\t/*\n\t * Styles of the widget being dragged (its preview).\n\t */\n\t& .ck-widget:-webkit-drag {\n\t\tzoom: 0.6;\n\t\toutline: none !important;\n\t}\n}\n'],sourceRoot:""}]),e.a=s},function(t,e,n){var r=n(2),i=n.n(r),o=n(3),s=n.n(o)()(i.a);s.push([t.i,".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}","",{version:3,sources:["webpack://./node_modules/@ckeditor/ckeditor5-font/theme/fontcolor.css","webpack://./node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-font/fontcolor.css"],names:[],mappings:"AAKA,4CACC,YAAa,CACb,kBAAmB,CACnB,UACD,CAEA,8BACC,iBACD,CCNA,4CACC,qEAAyE,CACzE,2BAA4B,CAC5B,4BAeD,CAbC,wDACC,mDACD,CAEA,kEAEE,uCAMF,CARA,kEAME,sCAEF",sourcesContent:["/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-button.ck-color-table__remove-color {\n\tdisplay: flex;\n\talign-items: center;\n\twidth: 100%;\n}\n\nlabel.ck.ck-color-grid__label {\n\tfont-weight: unset;\n}\n",'/*\n * Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\n\n.ck .ck-button.ck-color-table__remove-color {\n\tpadding: calc(var(--ck-spacing-standard) / 2 ) var(--ck-spacing-standard);\n\tborder-bottom-left-radius: 0;\n\tborder-bottom-right-radius: 0;\n\n\t&:not(:focus) {\n\t\tborder-bottom: 1px solid var(--ck-color-base-border);\n\t}\n\n\t& .ck.ck-icon {\n\t\t@mixin ck-dir ltr {\n\t\t\tmargin-right: var(--ck-spacing-standard);\n\t\t}\n\n\t\t@mixin ck-dir rtl {\n\t\t\tmargin-left: var(--ck-spacing-standard);\n\t\t}\n\t}\n}\n\n'],sourceRoot:""}]),e.a=s},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){e.a=function(){return!1}},function(t,e,n){n.r(e);class r{constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}const i=new Array(256).fill().map((t,e)=>("0"+e.toString(16)).slice(-2));function o(){const t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0;return"e"+i[t>>0&255]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+i[e>>0&255]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+i[n>>0&255]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]+i[r>>0&255]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]}var s={get(t){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},a=(n(8),n(0));const c=Symbol("listeningTo"),u=Symbol("emitterId");var l={on(t,e,n={}){this.listenTo(this,t,e,n)},once(t,e,n){let r=!1;this.listenTo(this,t,function(t,...n){r||(r=!0,t.off(),e.call(this,t,...n))},n)},off(t,e){this.stopListening(this,t,e)},listenTo(t,e,n,r={}){let i,o;this[c]||(this[c]={});const s=this[c];d(t)||h(t);const a=d(t);(i=s[a])||(i=s[a]={emitter:t,callbacks:{}}),(o=i.callbacks[e])||(o=i.callbacks[e]=[]),o.push(n),function(t,e,n,r,i){e._addEventListener?e._addEventListener(n,r,i):t._addEventListener.call(e,n,r,i)}(this,t,e,n,r)},stopListening(t,e,n){const r=this[c];let i=t&&d(t);const o=r&&i&&r[i],s=o&&e&&o.callbacks[e];if(!(!r||t&&!o||e&&!s))if(n)b(this,t,e,n),-1!==s.indexOf(n)&&(1===s.length?delete o.callbacks[e]:b(this,t,e,n));else if(s){for(;n=s.pop();)b(this,t,e,n);delete o.callbacks[e]}else if(o){for(e in o.callbacks)this.stopListening(t,e);delete r[i]}else{for(i in r)this.stopListening(r[i].emitter);delete this[c]}},fire(t,...e){try{const n=t instanceof r?t:new r(this,t),i=n.name;let o=g(this,i);if(n.path.push(this),o){const t=[n,...e];o=Array.from(o);for(let e=0;e<o.length&&(o[e].callback.apply(this,t),n.off.called&&(delete n.off.called,this._removeEventListener(i,o[e].callback)),!n.stop.called);e++);}if(this._delegations){const t=this._delegations.get(i),r=this._delegations.get("*");t&&m(t,n,e),r&&m(r,n,e)}return n.return}catch(t){a.a.rethrowUnexpectedError(t,this)}},delegate(...t){return{to:(e,n)=>{this._delegations||(this._delegations=new Map),t.forEach(t=>{const r=this._delegations.get(t);r?r.set(e,n):this._delegations.set(t,new Map([[e,n]]))})}}},stopDelegating(t,e){if(this._delegations)if(t)if(e){const n=this._delegations.get(t);n&&n.delete(e)}else this._delegations.delete(t);else this._delegations.clear()},_addEventListener(t,e,n){!function(t,e){const n=f(t);if(n[e])return;let r=e,i=null;const o=[];for(;""!==r&&!n[r];)n[r]={callbacks:[],childEvents:[]},o.push(n[r]),i&&n[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(""!==r){for(const t of o)t.callbacks=n[r].callbacks.slice();n[r].childEvents.push(i)}}(this,t);const r=p(this,t),i=s.get(n.priority),o={callback:e,priority:i};for(const s of r){let t=!1;for(let e=0;e<s.length;e++)if(s[e].priority<i){s.splice(e,0,o),t=!0;break}t||s.push(o)}},_removeEventListener(t,e){const n=p(this,t);for(const r of n)for(let t=0;t<r.length;t++)r[t].callback==e&&(r.splice(t,1),t--)}};function h(t,e){t[u]||(t[u]=e||o())}function d(t){return t[u]}function f(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function p(t,e){const n=f(t)[e];if(!n)return[];let r=[n.callbacks];for(let i=0;i<n.childEvents.length;i++){const e=p(t,n.childEvents[i]);r=r.concat(e)}return r}function g(t,e){let n;return t._events&&(n=t._events[e])&&n.callbacks.length?n.callbacks:e.indexOf(":")>-1?g(t,e.substr(0,e.lastIndexOf(":"))):null}function m(t,e,n){for(let[i,o]of t){o?"function"==typeof o&&(o=o(e.name)):o=e.name;const t=new r(e.source,o);t.path=[...e.path],i.fire(t,...n)}}function b(t,e,n,r){e._removeEventListener?e._removeEventListener(n,r):t._removeEventListener.call(e,n,r)}var v=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},_=n(5),y=_.a.Symbol,w=Object.prototype,k=w.hasOwnProperty,C=w.toString,A=y?y.toStringTag:void 0,E=Object.prototype.toString,O=y?y.toStringTag:void 0,x=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":O&&O in Object(t)?function(t){var e=k.call(t,A),n=t[A];try{t[A]=void 0;var r=!0}catch(t){}var i=C.call(t);return r&&(e?t[A]=n:delete t[A]),i}(t):function(t){return E.call(t)}(t)},S=function(t){if(!v(t))return!1;var e=x(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},T=_.a["__core-js_shared__"],I=function(){var t=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),P=Function.prototype.toString,D=function(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""},N=/^\[object .+?Constructor\]$/,R=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!v(t)||function(t){return!!I&&I in t}(t))&&(S(t)?R:N).test(D(t))}(n)?n:void 0},M=function(){try{var t=j(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),F=function(t,e,n){"__proto__"==e&&M?M(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},L=function(t,e){return t===e||t!=t&&e!=e},B=Object.prototype.hasOwnProperty,V=function(t,e,n){var r=t[e];B.call(t,e)&&L(r,n)&&(void 0!==n||e in t)||F(t,e,n)},U=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?F(n,a,c):V(n,a,c)}return n},q=function(t){return t},z=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},K=Math.max,H=function(t){return function(){return t}},W=Date.now,G=function(t){var e=0,n=0;return function(){var r=W(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(M?function(t,e){return M(t,"toString",{configurable:!0,enumerable:!1,value:H(e),writable:!0})}:q),$=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Q=function(t){return null!=t&&$(t.length)&&!S(t)},Y=/^(?:0|[1-9]\d*)$/,J=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Y.test(t))&&t>-1&&t%1==0&&t<e},X=function(t){return function(t,e){return G(function(t,e,n){return e=K(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=K(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),z(t,this,a)}}(t,e,q),t+"")}(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&function(t,e,n){if(!v(n))return!1;var r=typeof e;return!!("number"==r?Q(n)&&J(e,n.length):"string"==r&&e in n)&&L(n[e],t)}(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})},Z=function(t){return null!=t&&"object"==typeof t},tt=function(t){return Z(t)&&"[object Arguments]"==x(t)},et=Object.prototype,nt=et.hasOwnProperty,rt=et.propertyIsEnumerable,it=tt(function(){return arguments}())?tt:function(t){return Z(t)&&nt.call(t,"callee")&&!rt.call(t,"callee")},ot=Array.isArray,st=n(6),at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1;var ct=function(t){return function(e){return t(e)}},ut=n(7),lt=ut.a&&ut.a.isTypedArray,ht=lt?ct(lt):function(t){return Z(t)&&$(t.length)&&!!at[x(t)]},dt=Object.prototype.hasOwnProperty,ft=function(t,e){var n=ot(t),r=!n&&it(t),i=!n&&!r&&Object(st.a)(t),o=!n&&!r&&!i&&ht(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var u in t)!e&&!dt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||J(u,c))||a.push(u);return a},pt=Object.prototype,gt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||pt)},mt=Object.prototype.hasOwnProperty,bt=function(t){return Q(t)?ft(t,!0):function(t){if(!v(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=gt(t),n=[];for(var r in t)("constructor"!=r||!e&&mt.call(t,r))&&n.push(r);return n}(t)},vt=X(function(t,e){U(e,bt(e),t)});const _t=Symbol("observableProperties"),yt=Symbol("boundObservables"),wt=Symbol("boundProperties"),kt=Symbol("decoratedMethods"),Ct=Symbol("decoratedOriginal"),At={set(t,e){if(v(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);Ot(this);const n=this[_t];if(t in this&&!n.has(t))throw new a.a("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>n.get(t),set(e){const r=n.get(t);let i=this.fire("set:"+t,t,e,r);void 0===i&&(i=e),r===i&&n.has(t)||(n.set(t,i),this.fire("change:"+t,t,i,r))}}),this[t]=e},bind(...t){if(!t.length||!Tt(t))throw new a.a("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new a.a("observable-bind-duplicate-properties",this);Ot(this);const e=this[wt];t.forEach(t=>{if(e.has(t))throw new a.a("observable-bind-rebind",this)});const n=new Map;return t.forEach(t=>{const r={property:t,to:[]};e.set(t,r),n.set(t,r)}),{to:xt,toMany:St,_observable:this,_bindProperties:t,_to:[],_bindings:n}},unbind(...t){if(!this[_t])return;const e=this[wt],n=this[yt];if(t.length){if(!Tt(t))throw new a.a("observable-unbind-wrong-properties",this);t.forEach(t=>{const r=e.get(t);if(!r)return;let i,o,s,a;r.to.forEach(t=>{i=t[0],o=t[1],s=n.get(i),a=s[o],a.delete(r),a.size||delete s[o],Object.keys(s).length||(n.delete(i),this.stopListening(i,"change"))}),e.delete(t)})}else n.forEach((t,e)=>{this.stopListening(e,"change")}),n.clear(),e.clear()},decorate(t){const e=this[t];if(!e)throw new a.a("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,n)=>{t.return=e.apply(this,n)}),this[t]=function(...e){return this.fire(t,e)},this[t][Ct]=e,this[kt]||(this[kt]=[]),this[kt].push(t)}};vt(At,l),At.stopListening=function(t,e,n){if(!t&&this[kt]){for(const t of this[kt])this[t]=this[t][Ct];delete this[kt]}l.stopListening.call(this,t,e,n)};var Et=At;function Ot(t){t[_t]||(Object.defineProperty(t,_t,{value:new Map}),Object.defineProperty(t,yt,{value:new Map}),Object.defineProperty(t,wt,{value:new Map}))}function xt(...t){const e=function(...t){if(!t.length)throw new a.a("observable-bind-to-parse-error",null);const e={to:[]};let n;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)n.properties.push(t);else{if("object"!=typeof t)throw new a.a("observable-bind-to-parse-error",null);n={observable:t,properties:[]},e.to.push(n)}}),e}(...t),n=Array.from(this._bindings.keys()),r=n.length;if(!e.callback&&e.to.length>1)throw new a.a("observable-bind-to-no-callback",this);if(r>1&&e.callback)throw new a.a("observable-bind-to-extra-callback",this);e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==r)throw new a.a("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),function(t,e){e.forEach(e=>{const n=t[yt];let r;n.get(e.observable)||t.listenTo(e.observable,"change",(i,o)=>{r=n.get(e.observable)[o],r&&r.forEach(e=>{It(t,e.property)})})})}(this._observable,this._to),function(t){let e;t._bindings.forEach((n,r)=>{t._to.forEach(i=>{e=i.properties[n.callback?0:t._bindProperties.indexOf(r)],n.to.push([i.observable,e]),function(t,e,n,r){const i=t[yt],o=i.get(n),s=o||{};s[r]||(s[r]=new Set),s[r].add(e),o||i.set(n,s)}(t._observable,n,i.observable,e)})})}(this),this._bindProperties.forEach(t=>{It(this._observable,t)})}function St(t,e,n){if(this._bindings.size>1)throw new a.a("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const n=t.map(t=>[t,e]);return Array.prototype.concat.apply([],n)}(t,e),n)}function Tt(t){return t.every(t=>"string"==typeof t)}function It(t,e){const n=t[wt].get(e);let r;n.callback?r=n.callback.apply(t,n.to.map(t=>t[0][t[1]])):(r=n.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=r:t.set(e,r)}function Pt(t,...e){e.forEach(e=>{Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(n=>{if(n in t.prototype)return;const r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t.prototype,n,r)})})}class Dt{constructor(t){this.editor=t,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Nt,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Nt),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function Nt(t){t.return=!1,t.stop()}Pt(Dt,Et);class Rt{constructor(t){this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this.affectsData=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"}),this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n&&this.affectsData?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",jt,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",jt),this.refresh())}execute(){}destroy(){this.stopListening()}}function jt(t){t.return=!1,t.stop()}Pt(Rt,Et);var Mt=function(t,e){return function(n){return t(e(n))}},Ft=Mt(Object.getPrototypeOf,Object),Lt=Function.prototype.toString,Bt=Object.prototype.hasOwnProperty,Vt=Lt.call(Object),Ut=function(t){if(!Z(t)||"[object Object]"!=x(t))return!1;var e=Ft(t);if(null===e)return!0;var n=Bt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==Vt},qt=function(t,e){for(var n=t.length;n--;)if(L(t[n][0],e))return n;return-1},zt=Array.prototype.splice;function Kt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kt.prototype.clear=function(){this.__data__=[],this.size=0},Kt.prototype.delete=function(t){var e=this.__data__,n=qt(e,t);return!(n<0||(n==e.length-1?e.pop():zt.call(e,n,1),--this.size,0))},Kt.prototype.get=function(t){var e=this.__data__,n=qt(e,t);return n<0?void 0:e[n][1]},Kt.prototype.has=function(t){return qt(this.__data__,t)>-1},Kt.prototype.set=function(t,e){var n=this.__data__,r=qt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var Ht=Kt,Wt=j(_.a,"Map"),Gt=j(Object,"create"),$t=Object.prototype.hasOwnProperty,Qt=Object.prototype.hasOwnProperty;function Yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yt.prototype.clear=function(){this.__data__=Gt?Gt(null):{},this.size=0},Yt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Yt.prototype.get=function(t){var e=this.__data__;if(Gt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return $t.call(e,t)?e[t]:void 0},Yt.prototype.has=function(t){var e=this.__data__;return Gt?void 0!==e[t]:Qt.call(e,t)},Yt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Gt&&void 0===e?"__lodash_hash_undefined__":e,this};var Jt=Yt,Xt=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function Zt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zt.prototype.clear=function(){this.size=0,this.__data__={hash:new Jt,map:new(Wt||Ht),string:new Jt}},Zt.prototype.delete=function(t){var e=Xt(this,t).delete(t);return this.size-=e?1:0,e},Zt.prototype.get=function(t){return Xt(this,t).get(t)},Zt.prototype.has=function(t){return Xt(this,t).has(t)},Zt.prototype.set=function(t,e){var n=Xt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var te=Zt;function ee(t){var e=this.__data__=new Ht(t);this.size=e.size}ee.prototype.clear=function(){this.__data__=new Ht,this.size=0},ee.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ee.prototype.get=function(t){return this.__data__.get(t)},ee.prototype.has=function(t){return this.__data__.has(t)},ee.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ht){var r=n.__data__;if(!Wt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(t,e),this.size=n.size,this};var ne=ee,re=Mt(Object.keys,Object),ie=Object.prototype.hasOwnProperty,oe=function(t){return Q(t)?ft(t):function(t){if(!gt(t))return re(t);var e=[];for(var n in Object(t))ie.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},se=n(10),ae=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},ce=function(){return[]},ue=Object.prototype.propertyIsEnumerable,le=Object.getOwnPropertySymbols,he=le?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s)&&(o[i++]=s)}return o}(le(t),function(e){return ue.call(t,e)}))}:ce,de=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},fe=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)de(e,he(t)),t=Ft(t);return e}:ce,pe=function(t,e,n){var r=e(t);return ot(t)?r:de(r,n(t))},ge=function(t){return pe(t,oe,he)},me=function(t){return pe(t,bt,fe)},be=j(_.a,"DataView"),ve=j(_.a,"Promise"),_e=j(_.a,"Set"),ye=j(_.a,"WeakMap"),we="[object Map]",ke="[object Promise]",Ce="[object Set]",Ae="[object WeakMap]",Ee="[object DataView]",Oe=D(be),xe=D(Wt),Se=D(ve),Te=D(_e),Ie=D(ye),Pe=x;(be&&Pe(new be(new ArrayBuffer(1)))!=Ee||Wt&&Pe(new Wt)!=we||ve&&Pe(ve.resolve())!=ke||_e&&Pe(new _e)!=Ce||ye&&Pe(new ye)!=Ae)&&(Pe=function(t){var e=x(t),n="[object Object]"==e?t.constructor:void 0,r=n?D(n):"";if(r)switch(r){case Oe:return Ee;case xe:return we;case Se:return ke;case Te:return Ce;case Ie:return Ae}return e});var De=Pe,Ne=Object.prototype.hasOwnProperty,Re=_.a.Uint8Array,je=function(t){var e=new t.constructor(t.byteLength);return new Re(e).set(new Re(t)),e},Me=/\w*$/,Fe=y?y.prototype:void 0,Le=Fe?Fe.valueOf:void 0,Be=function(t,e){var n=e?je(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Ve=Object.create,Ue=function(){function t(){}return function(e){if(!v(e))return{};if(Ve)return Ve(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),qe=function(t){return"function"!=typeof t.constructor||gt(t)?{}:Ue(Ft(t))},ze=ut.a&&ut.a.isMap,Ke=ze?ct(ze):function(t){return Z(t)&&"[object Map]"==De(t)},He=ut.a&&ut.a.isSet,We=He?ct(He):function(t){return Z(t)&&"[object Set]"==De(t)},Ge="[object Arguments]",$e="[object Function]",Qe="[object Object]",Ye={};Ye[Ge]=Ye["[object Array]"]=Ye["[object ArrayBuffer]"]=Ye["[object DataView]"]=Ye["[object Boolean]"]=Ye["[object Date]"]=Ye["[object Float32Array]"]=Ye["[object Float64Array]"]=Ye["[object Int8Array]"]=Ye["[object Int16Array]"]=Ye["[object Int32Array]"]=Ye["[object Map]"]=Ye["[object Number]"]=Ye[Qe]=Ye["[object RegExp]"]=Ye["[object Set]"]=Ye["[object String]"]=Ye["[object Symbol]"]=Ye["[object Uint8Array]"]=Ye["[object Uint8ClampedArray]"]=Ye["[object Uint16Array]"]=Ye["[object Uint32Array]"]=!0,Ye["[object Error]"]=Ye[$e]=Ye["[object WeakMap]"]=!1;var Je=function t(e,n,r,i,o,s){var a,c=1&n,u=2&n,l=4&n;if(r&&(a=o?r(e,i,o,s):r(e)),void 0!==a)return a;if(!v(e))return e;var h=ot(e);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ne.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!c)return ae(e,a)}else{var d=De(e),f=d==$e||"[object GeneratorFunction]"==d;if(Object(st.a)(e))return Object(se.a)(e,c);if(d==Qe||d==Ge||f&&!o){if(a=u||f?{}:qe(e),!c)return u?function(t,e){return U(t,fe(t),e)}(e,function(t,e){return t&&U(e,bt(e),t)}(a,e)):function(t,e){return U(t,he(t),e)}(e,function(t,e){return t&&U(e,oe(e),t)}(a,e))}else{if(!Ye[d])return o?e:{};a=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return je(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?je(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Be(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,Me.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Set]":return new r;case"[object Symbol]":return function(t){return Le?Object(Le.call(t)):{}}(t)}}(e,d,c)}}s||(s=new ne);var p=s.get(e);if(p)return p;s.set(e,a),We(e)?e.forEach(function(i){a.add(t(i,n,r,i,e,s))}):Ke(e)&&e.forEach(function(i,o){a.set(o,t(i,n,r,o,e,s))});var g=h?void 0:(l?u?me:ge:u?bt:oe)(e);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n););}(g||e,function(i,o){g&&(i=e[o=i]),V(a,o,t(i,n,r,o,e,s))}),a},Xe=function(t,e){return Je(t,5,e="function"==typeof e?e:void 0)},Ze=function(t){return Z(t)&&1===t.nodeType&&!Ut(t)};class tn{constructor(t,e){this._config={},e&&this.define(en(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,r=!1){if(Ut(e))return void this._setObjectToTarget(t,e,r);const i=e.split(".");e=i.pop();for(const o of i)Ut(t[o])||(t[o]={}),t=t[o];if(Ut(n))return Ut(t[e])||(t[e]={}),void this._setObjectToTarget(t=t[e],n,r);r&&void 0!==t[e]||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const r of n){if(!Ut(t[r])){t=null;break}t=t[r]}return t?en(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(r=>{this._setToTarget(t,r,e[r],n)})}}function en(t){return Xe(t,nn)}function nn(t){return Ze(t)?t:void 0}function rn(t){return!(!t||!t[Symbol.iterator])}class on{constructor(t={},e={}){const n=rn(t);if(n||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const r of t)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new a.a("collection-add-item-invalid-index",this);for(let n=0;n<t.length;n++){const r=t[n],i=this._getItemIdBeforeAdding(r),o=e+n;this._items.splice(o,0,r),this._itemMap.set(i,r),this.fire("add",r,o)}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new a.a("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){return this._itemMap.has("string"==typeof t?t:t[this._idProperty])}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,this._items.indexOf(e)}remove(t){const[e,n]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:n}),e}map(t,e){return this._items.map(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new a.a("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{this._setUpBindToBinding("function"==typeof t?e=>t(e):e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(n,r,i)=>{const o=e._bindToCollection==this,s=e._bindToInternalToExternalMap.get(r);if(o&&s)this._bindToExternalToInternalMap.set(r,s),this._bindToInternalToExternalMap.set(s,r);else{const n=t(r);if(!n)return void this._skippedIndexesFromExternal.push(i);let o=i;for(const t of this._skippedIndexesFromExternal)i>t&&o--;for(const t of e._skippedIndexesFromExternal)o>=t&&o++;this._bindToExternalToInternalMap.set(r,n),this._bindToInternalToExternalMap.set(n,r),this.add(n,o);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)o<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const r of e)n(0,r,e.getIndex(r));this.listenTo(e,"add",n),this.listenTo(e,"remove",(t,e,n)=>{const r=this._bindToExternalToInternalMap.get(e);r&&this.remove(r),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(n<e&&t.push(e-1),n>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let n;if(e in t){if(n=t[e],"string"!=typeof n)throw new a.a("collection-add-invalid-id",this);if(this.get(n))throw new a.a("collection-add-item-already-exists",this)}else t[e]=n=o();return n}_remove(t){let e,n,r,i=!1;const o=this._idProperty;if("string"==typeof t?(n=t,r=this._itemMap.get(n),i=!r,r&&(e=this._items.indexOf(r))):"number"==typeof t?(e=t,r=this._items[e],i=!r,r&&(n=r[o])):(r=t,n=r[o],e=this._items.indexOf(r),i=-1==e||!this._itemMap.get(n)),i)throw new a.a("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(n);const s=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(s),this.fire("remove",r,e),[r,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}Pt(on,l);class sn{constructor(t,e=[],n=[]){this._context=t,this._plugins=new Map,this._availablePlugins=new Map;for(const r of e)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,i]of n)this._contextPlugins.set(r,i),this._contextPlugins.set(i,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const t of this._plugins)"function"==typeof t[0]&&(yield t)}get(t){const e=this._plugins.get(t);if(!e){let e=t;throw"function"==typeof t&&(e=t.pluginName||t.name),new a.a("plugincollection-plugin-not-loaded",this._context,{plugin:e})}return e}has(t){return this._plugins.has(t)}init(t,e=[],n=[]){const r=this,i=this._context;!function t(e,n=new Set){e.forEach(e=>{c(e)&&(n.has(e)||(n.add(e),e.pluginName&&!r._availablePlugins.has(e.pluginName)&&r._availablePlugins.set(e.pluginName,e),e.requires&&t(e.requires,n)))})}(t),d(t);const o=[...function t(e,n=new Set){return e.map(t=>c(t)?t:r._availablePlugins.get(t)).reduce((e,r)=>n.has(r)?e:(n.add(r),r.requires&&(d(r.requires,r),t(r.requires,n).forEach(t=>e.add(t))),e.add(r)),new Set)}(t.filter(t=>!l(t,e)))];!function(t,e){for(const n of e){if("function"!=typeof n)throw new a.a("plugincollection-replace-plugin-invalid-type",null,{pluginItem:n});const e=n.pluginName;if(!e)throw new a.a("plugincollection-replace-plugin-missing-name",null,{pluginItem:n});if(n.requires&&n.requires.length)throw new a.a("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:e});const i=r._availablePlugins.get(e);if(!i)throw new a.a("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:e});const o=t.indexOf(i);if(-1===o){if(r._contextPlugins.has(i))return;throw new a.a("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:e})}if(i.requires&&i.requires.length)throw new a.a("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:e});t.splice(o,1,n),r._availablePlugins.set(e,n)}}(o,n);const s=function(t){return t.map(t=>{const e=r._contextPlugins.get(t)||new t(i);return r._add(t,e),e})}(o);return p(s,"init").then(()=>p(s,"afterInit")).then(()=>s);function c(t){return"function"==typeof t}function u(t){return c(t)&&t.isContextPlugin}function l(t,e){return e.some(e=>e===t||h(t)===e||h(e)===t)}function h(t){return c(t)?t.pluginName||t.name:t}function d(t,e=null){t.map(t=>c(t)?t:r._availablePlugins.get(t)||t).forEach(t=>{!function(t,e){if(!c(t)){if(e)throw new a.a("plugincollection-soft-required",i,{missingPlugin:t,requiredBy:h(e)});throw new a.a("plugincollection-plugin-not-found",i,{plugin:t})}}(t,e),function(t,e){if(u(e)&&!u(t))throw new a.a("plugincollection-context-required",i,{plugin:h(t),requiredBy:h(e)})}(t,e),f(t,e)})}function f(t,n){if(n&&l(t,e))throw new a.a("plugincollection-required",i,{plugin:h(t),requiredBy:h(n)})}function p(t,e){return t.reduce((t,n)=>n[e]?r._contextPlugins.has(n)?t:t.then(n[e].bind(n)):t,Promise.resolve())}}destroy(){const t=[];for(const[,e]of this)"function"!=typeof e.destroy||this._contextPlugins.has(e)||t.push(e.destroy());return Promise.all(t)}_add(t,e){this._plugins.set(t,e);const n=t.pluginName;if(n){if(this._plugins.has(n))throw new a.a("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:t});this._plugins.set(n,e)}}}function an(t){return Array.isArray(t)?t:[t]}Pt(sn,l),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});const cn=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function un(t){return cn.includes(t)?"rtl":"ltr"}class ln{constructor(t={}){this.uiLanguage=t.uiLanguage||"en",this.contentLanguage=t.contentLanguage||this.uiLanguage,this.uiLanguageDirection=un(this.uiLanguage),this.contentLanguageDirection=un(this.contentLanguage),this.t=(t,e)=>this._t(t,e)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){return e=an(e),"string"==typeof t&&(t={string:t}),function(t,e){return t.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)}(function(t,e,n=1){if("number"!=typeof n)throw new a.a("translation-service-quantity-not-a-number",null,{quantity:n});const r=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===r&&(t=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);const i=e.id||e.string;if(0===r||!function(t,e){return!!window.CKEDITOR_TRANSLATIONS[t]&&!!window.CKEDITOR_TRANSLATIONS[t].dictionary[e]}(t,i))return 1!==n?e.plural:e.string;const o=window.CKEDITOR_TRANSLATIONS[t].dictionary,s=window.CKEDITOR_TRANSLATIONS[t].getPluralForm||(t=>1===t?0:1);if("string"==typeof o[i])return o[i];const c=Number(s(n));return o[i][c]}(this.uiLanguage,t,t.plural?e[0]:1),e)}}class hn{constructor(t){this.config=new tn(t,this.constructor.defaultConfig);const e=this.constructor.builtinPlugins;this.config.define("plugins",e),this.plugins=new sn(this,e);const n=this.config.get("language")||{};this.locale=new ln({uiLanguage:"string"==typeof n?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new on,this._contextOwner=null}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if("function"!=typeof n)throw new a.a("context-initplugins-constructor-only",null,{Plugin:n});if(!0!==n.isContextPlugin)throw new a.a("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new a.a("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>n))})}}function dn(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)if(t[r]!=e[r])return r;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}Pt(class{constructor(t){this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}},Et);var fn=function(t){return Je(t,4)};class pn{constructor(t){this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new a.a("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),r=t.getAncestors(e);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),r=dn(e,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return e[r]<n[r]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e){this.fire("change:"+t,e),this.parent&&this.parent._fireChange(t,e)}toJSON(){const t=fn(this);return delete t.parent,t}is(t){return"node"===t||"view:node"===t}}Pt(pn,l);class gn extends pn{constructor(t,e){super(t),this._textData=e}is(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof gn&&(this===t||this.data===t.data)}_clone(){return new gn(this.document,this.data)}}class mn{constructor(t,e,n){if(this.textNode=t,e<0||e>t.data.length)throw new a.a("view-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.data.length)throw new a.a("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this.textNode:this.parent;for(;null!==n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}}function bn(t){return rn(t)?new Map(t):function(t){const e=new Map;for(const n in t)e.set(n,t[n]);return e}(t)}class vn{constructor(...t){this._patterns=[],this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const n=_n(e,t);if(n)return{element:e,pattern:t,match:n}}return null}matchAll(...t){const e=[];for(const n of t)for(const t of this._patterns){const r=_n(n,t);r&&e.push({element:n,pattern:t,match:r})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}}function _n(t,e){if("function"==typeof e)return e(t);const n={};return e.name&&(n.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!n.name)||e.attributes&&(n.attributes=function(t,e){const n=new Set(e.getAttributeKeys());return Ut(t)?(void 0!==t.style&&Object(a.b)("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&Object(a.b)("matcher-pattern-deprecated-attributes-class-key",t)):(n.delete("style"),n.delete("class")),yn(t,n,t=>e.getAttribute(t))}(e.attributes,t),!n.attributes)?null:!(e.classes&&(n.classes=function(t,e){return yn(t,e.getClassNames())}(e.classes,t),!n.classes))&&!(e.styles&&(n.styles=function(t,e){return yn(t,e.getStyleNames(!0),t=>e.getStyle(t))}(e.styles,t),!n.styles))&&n}function yn(t,e,n){const r=function(t){return Array.isArray(t)?t.map(t=>Ut(t)?(void 0!==t.key&&void 0!==t.value||Object(a.b)("matcher-pattern-missing-key-or-value",t),[t.key,t.value]):[t,!0]):Ut(t)?Object.entries(t):[[t,!0]]}(t),i=Array.from(e),o=[];return r.forEach(([t,e])=>{i.forEach(r=>{(function(t,e){return!0===t||t===e||t instanceof RegExp&&e.match(t)})(t,r)&&function(t,e,n){if(!0===t)return!0;const r=n(e);return t===r||t instanceof RegExp&&!!String(r).match(t)}(e,r,n)&&o.push(r)})}),!r.length||o.length<r.length?null:o}var wn=function(t){return"symbol"==typeof t||Z(t)&&"[object Symbol]"==x(t)},kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cn=/^\w*$/;function An(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(An.Cache||te),n}An.Cache=te;var En=An,On=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xn=/\\(\\)?/g,Sn=function(t){var e=En(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(On,function(t,n,r,i){e.push(r?i.replace(xn,"$1"):n||t)}),e},function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(),Tn=y?y.prototype:void 0,In=Tn?Tn.toString:void 0,Pn=function t(e){if("string"==typeof e)return e;if(ot(e))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(e,t)+"";if(wn(e))return In?In.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},Dn=function(t,e){return ot(t)?t:function(t,e){if(ot(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!wn(t))||Cn.test(t)||!kn.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:Sn(function(t){return null==t?"":Pn(t)}(t))},Nn=function(t){if("string"==typeof t||wn(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Rn=function(t,e){for(var n=0,r=(e=Dn(e,t)).length;null!=t&&n<r;)t=t[Nn(e[n++])];return n&&n==r?t:void 0},jn=function(t,e){return null==t||function(t,e){return null==(t=function(t,e){return e.length<2?t:Rn(t,function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}(e,0,-1))}(t,e=Dn(e,t)))||delete t[Nn(function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}(e))]}(t,e)},Mn=function(t,e,n){var r=null==t?void 0:Rn(t,e);return void 0===r?n:r},Fn=function(t,e,n){(void 0!==n&&!L(t[e],n)||void 0===n&&!(e in t))&&F(t,e,n)},Ln=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Bn=function t(e,n,r,i,o){e!==n&&function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var a=o[++r];if(!1===e(i[a],a,i))break}}(n,function(s,a){if(o||(o=new ne),v(s))!function(t,e,n,r,i,o,s){var a=Ln(t,n),c=Ln(e,n),u=s.get(c);if(u)Fn(t,n,u);else{var l=o?o(a,c,n+"",t,e,s):void 0,h=void 0===l;if(h){var d=ot(c),f=!d&&Object(st.a)(c),p=!d&&!f&&ht(c);l=c,d||f||p?ot(a)?l=a:function(t){return Z(t)&&Q(t)}(a)?l=ae(a):f?(h=!1,l=Object(se.a)(c,!0)):p?(h=!1,l=Be(c,!0)):l=[]:Ut(c)||it(c)?(l=a,it(a)?l=function(t){return U(t,bt(t))}(a):v(a)&&!S(a)||(l=qe(c))):h=!1}h&&(s.set(c,l),i(l,c,r,o,s),s.delete(c)),Fn(t,n,l)}}(e,n,a,r,t,i,o);else{var c=i?i(Ln(e,a),s,a+"",e,n,o):void 0;void 0===c&&(c=s),Fn(e,a,c)}},bt)},Vn=X(function(t,e,n){Bn(t,e,n)});class Un{constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){const t=Object.entries(this._styles);return!Array.from(t).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=Array.from(function(t){let e=null,n=0,r=0,i=null;const o=new Map;if(""===t)return o;";"!=t.charAt(t.length-1)&&(t+=";");for(let s=0;s<t.length;s++){const a=t.charAt(s);if(null===e)switch(a){case":":i||(i=t.substr(n,s-n),r=s+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(r,s-r);i&&o.set(i.trim(),e.trim()),i=null,n=s+1;break}}else a===e&&(e=null)}return o}(t).entries());for(const[n,r]of e)this._styleProcessor.toNormalizedForm(n,r,this._styles)}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(t,e){if(v(t))for(const[n,r]of Object.entries(t))this._styleProcessor.toNormalizedForm(n,r,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e=zn(t);jn(this._styles,e),delete this._styles[t],this._cleanEmptyObjectsOnPath(e)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!v(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([t])=>t)}clear(){this._styles={}}_getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const n=e.splice(0,e.length-1).join("."),r=Mn(this._styles,n);r&&!Array.from(Object.keys(r)).length&&this.remove(n)}}class qn{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(v(e))Kn(n,zn(t),e);else if(this._normalizers.has(t)){const r=this._normalizers.get(t),{path:i,value:o}=r(e);Kn(n,i,o)}else Kn(n,t,e)}getNormalized(t,e){if(!t)return Vn({},e);if(void 0!==e[t])return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if("string"==typeof n)return Mn(e,n);const r=n(t,e);if(r)return r}return Mn(e,zn(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);return void 0===n?[]:this._reducers.has(t)?this._reducers.get(t)(n):[[t,n]]}getStyleNames(t){const e=Array.from(this._consumables.keys()).filter(e=>{const n=this.getNormalized(e,t);return n&&"object"==typeof n?Object.keys(n).length:n}),n=new Set([...e,...Object.keys(t)]);return Array.from(n.values())}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function zn(t){return t.replace("-",".")}function Kn(t,e,n){let r=n;v(n)&&(r=Vn({},Mn(t,e),n)),function(t,e,n){null==t||function(t,e,n,r){if(!v(t))return t;for(var i=-1,o=(e=Dn(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var c=Nn(e[i]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var l=a[c];void 0===(u=void 0)&&(u=v(l)?l:J(e[i+1])?[]:{})}V(a,c,u),a=a[c]}}(t,e,n)}(t,e,r)}class Hn extends pn{constructor(t,e,n,r){if(super(t),this.name=e,this._attrs=function(t){t=bn(t);for(const[e,n]of t)null===n?t.delete(e):"string"!=typeof n&&t.set(e,String(n));return t}(n),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const t=this._attrs.get("class");Wn(this._classes,t),this._attrs.delete("class")}this._styles=new Un(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._isAllowedInsideAttributeElement=!1,this._unsafeAttributesToRender=[]}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}get isAllowedInsideAttributeElement(){return this._isAllowedInsideAttributeElement}is(t,e=null){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(t){if("class"==t)return this._classes.size>0?[...this._classes].join(" "):void 0;if("style"==t){const t=this._styles.toString();return""==t?void 0:t}return this._attrs.get(t)}hasAttribute(t){return"class"==t?this._classes.size>0:"style"==t?!this._styles.isEmpty:this._attrs.has(t)}isSimilar(t){if(!(t instanceof Hn))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this.isAllowedInsideAttributeElement!=t.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(const[e,n]of this._attrs)if(!t._attrs.has(e)||t._attrs.get(e)!==n)return!1;for(const e of this._classes)if(!t._classes.has(e))return!1;for(const e of this._styles.getStyleNames())if(!t._styles.has(e)||t._styles.getAsString(e)!==this._styles.getAsString(e))return!1;return!0}hasClass(...t){for(const e of t)if(!this._classes.has(e))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles.getNormalized(t)}getStyleNames(t=!1){return this._styles.getStyleNames(t)}hasStyle(...t){for(const e of t)if(!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new vn(...t);let n=this.parent;for(;n;){if(e.match(n))return n;n=n.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(","),e=this._styles.toString(),n=Array.from(this._attrs).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==n?"":" "+n)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const e=[];if(t)for(const r of this.getChildren())e.push(r._clone(t));const n=new this.constructor(this.document,this.name,this._attrs,e);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,n}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this);let n=0;const r=function(t,e){return"string"==typeof e?[new gn(t,e)]:(rn(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new gn(t,e):e instanceof mn?new gn(t,e.data):e))}(this.document,e);for(const i of r)null!==i.parent&&i._remove(),i.parent=this,i.document=this.document,this._children.splice(t,0,i),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_setAttribute(t,e){e=String(e),this._fireChange("attributes",this),"class"==t?Wn(this._classes,e):"style"==t?this._styles.setTo(e):this._attrs.set(t,e)}_removeAttribute(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this);for(const e of an(t))this._classes.add(e)}_removeClass(t){this._fireChange("attributes",this);for(const e of an(t))this._classes.delete(e)}_setStyle(t,e){this._fireChange("attributes",this),this._styles.set(t,e)}_removeStyle(t){this._fireChange("attributes",this);for(const e of an(t))this._styles.remove(e)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}function Wn(t,e){const n=e.split(/\s+/);t.clear(),n.forEach(e=>t.add(e))}class Gn extends Hn{constructor(t,e,n,r){super(t,e,n,r),this.getFillerOffset=$n}is(t,e=null){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}}function $n(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const n of t)if(!n.is("uiElement"))return null;return this.childCount}class Qn extends Gn{constructor(t,e,n,r){super(t,e,n,r),this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}is(t,e=null){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}destroy(){this.stopListening()}}Pt(Qn,Et);const Yn=Symbol("rootName");class Jn extends Qn{constructor(t,e){super(t,e),this.rootName="main"}is(t,e=null){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}get rootName(){return this.getCustomProperty(Yn)}set rootName(t){this._setCustomProperty(Yn,t)}set _name(t){this.name=t}}class Xn{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new a.a("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new a.a("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,this.position=Zn._createAt(t.startPosition?t.startPosition:t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(t){let e,n,r;do{r=this.position,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=r)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&t.offset===n.childCount)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};let r;if(n instanceof gn){if(t.isAtEnd)return this.position=Zn._createAfter(n),this._next();r=n.data[t.offset]}else r=n.getChild(t.offset);if(r instanceof Hn)return this.shallow?t.offset++:t=new Zn(r,0),this.position=t,this._formatReturnValue("elementStart",r,e,t,1);if(r instanceof gn){if(this.singleCharacters)return t=new Zn(r,0),this.position=t,this._next();{let n,i=r.data.length;return r==this._boundaryEndParent?(i=this.boundaries.end.offset,n=new mn(r,0,i),t=Zn._createAfter(n)):(n=new mn(r,0,r.data.length),t.offset++),this.position=t,this._formatReturnValue("text",n,e,t,i)}}if("string"==typeof r){let r;r=this.singleCharacters?1:(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const i=new mn(n,t.offset,r);return t.offset+=r,this.position=t,this._formatReturnValue("text",i,e,t,r)}return t=Zn._createAfter(n),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};let r;if(n instanceof gn){if(t.isAtStart)return this.position=Zn._createBefore(n),this._previous();r=n.data[t.offset-1]}else r=n.getChild(t.offset-1);if(r instanceof Hn)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",r,e,t,1)):(t=new Zn(r,r.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,e,t));if(r instanceof gn){if(this.singleCharacters)return t=new Zn(r,r.data.length),this.position=t,this._previous();{let n,i=r.data.length;if(r==this._boundaryStartParent){const e=this.boundaries.start.offset;n=new mn(r,e,r.data.length-e),i=n.data.length,t=Zn._createBefore(n)}else n=new mn(r,0,r.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",n,e,t,i)}}if("string"==typeof r){let r;r=this.singleCharacters?1:t.offset-(n===this._boundaryStartParent?this.boundaries.start.offset:0),t.offset-=r;const i=new mn(n,t.offset,r);return this.position=t,this._formatReturnValue("text",i,e,t,r)}return t=Zn._createBefore(n),this.position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,r,i){return e instanceof mn&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=Zn._createAfter(e.textNode):(r=Zn._createAfter(e.textNode),this.position=r)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=Zn._createBefore(e.textNode):(r=Zn._createBefore(e.textNode),this.position=r))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:r,length:i}}}}class Zn{constructor(t,e){this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof Qn);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=Zn._createAt(this),n=e.offset+t;return e.offset=n<0?0:n,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new Xn(e);return n.skip(t),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let r=0;for(;e[r]==n[r]&&e[r];)r++;return 0===r?null:e[r-1]}is(t){return"position"===t||"view:position"===t}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],n=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),n.push(t.offset);const r=dn(e,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return e[r]<n[r]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new Xn(t)}clone(){return new Zn(this.parent,this.offset)}static _createAt(t,e){if(t instanceof Zn)return new this(t.parent,t.offset);{const n=t;if("end"==e)e=n.is("$text")?n.data.length:n.childCount;else{if("before"==e)return this._createBefore(n);if("after"==e)return this._createAfter(n);if(0!==e&&!e)throw new a.a("view-createpositionat-offset-required",n)}return new Zn(n,e)}}static _createAfter(t){if(t.is("$textProxy"))return new Zn(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new a.a("view-position-after-root",t,{root:t});return new Zn(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new Zn(t.textNode,t.offsetInText);if(!t.parent)throw new a.a("view-position-before-root",t,{root:t});return new Zn(t.parent,t.index)}}class tr{constructor(t,e=null){this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new Xn({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(er,{direction:"backward"}),e=this.end.getLastMatchingPosition(er);return t.parent.is("$text")&&t.isAtStart&&(t=Zn._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=Zn._createAfter(e.parent)),new tr(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(er);if(t.isAfter(this.end)||t.isEqual(this.end))return new tr(t,t);let e=this.end.getLastMatchingPosition(er,{direction:"backward"});const n=t.nodeAfter,r=e.nodeBefore;return n&&n.is("$text")&&(t=new Zn(n,0)),r&&r.is("$text")&&(e=new Zn(r,r.data.length)),new tr(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&r}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new tr(this.start,t.start)),this.containsPosition(t.end)&&e.push(new tr(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new tr(e,n)}return null}getWalker(t={}){return t.boundaries=this,new Xn(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new tr(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Xn(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new Xn(t);yield e.position;for(const n of e)yield n.nextPosition}is(t){return"range"===t||"view:range"===t}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,e,n,r){return new this(new Zn(t,e),new Zn(n,r))}static _createFromPositionAndShift(t,e){const n=t,r=t.getShiftedBy(e);return e>0?new this(n,r):new this(r,n)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Zn._createBefore(t),e)}}function er(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}function nr(t){let e=0;for(const n of t)e++;return e}class rr{constructor(t=null,e,n){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(t,e,n)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const r of t._ranges)if(e.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=nr(this.getRanges());if(e!=nr(t.getRanges()))return!1;if(0==e)return!0;for(let n of this.getRanges()){n=n.getTrimmed();let e=!1;for(let r of t.getRanges())if(r=r.getTrimmed(),n.start.isEqual(r.start)&&n.end.isEqual(r.end)){e=!0;break}if(!e)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(t,e,n){if(null===t)this._setRanges([]),this._setFakeOptions(e);else if(t instanceof rr||t instanceof ir)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof tr)this._setRanges([t],e&&e.backward),this._setFakeOptions(e);else if(t instanceof Zn)this._setRanges([new tr(t)]),this._setFakeOptions(e);else if(t instanceof pn){const r=!!n&&!!n.backward;let i;if(void 0===e)throw new a.a("view-selection-setto-required-second-parameter",this);i="in"==e?tr._createIn(t):"on"==e?tr._createOn(t):new tr(Zn._createAt(t,e)),this._setRanges([i],r),this._setFakeOptions(n)}else{if(!rn(t))throw new a.a("view-selection-setto-not-selectable",this);this._setRanges(t,e&&e.backward),this._setFakeOptions(e)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new a.a("view-selection-setfocus-no-ranges",this);const n=Zn._createAt(t,e);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.pop(),"before"==n.compareWith(r)?this._addRange(new tr(n,r),!0):this._addRange(new tr(r,n)),this.fire("change")}is(t){return"selection"===t||"view:selection"===t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const n of t)this._addRange(n);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof tr))throw new a.a("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new a.a("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new tr(t.start,t.end))}}Pt(rr,l);class ir{constructor(t=null,e,n){this._selection=new rr,this._selection.delegate("change").to(this),this._selection.setTo(t,e,n)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}is(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t}_setTo(t,e,n){this._selection.setTo(t,e,n)}_setFocus(t,e){this._selection.setFocus(t,e)}}Pt(ir,l);class or extends r{constructor(t,e,n){super(t,e),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const sr=Symbol("bubbling contexts");var ar={fire(t,...e){try{const n=t instanceof r?t:new r(this,t),i=hr(this);if(!i.size)return;if(cr(n,"capturing",this),ur(i,"$capture",n,...e))return n.return;const o=n.startRange||this.selection.getFirstRange(),s=o?o.getContainedElement():null,a=!!s&&Boolean(lr(i,s));let c=s||function(t){if(!t)return null;const e=t.start.parent,n=t.end.parent,r=e.getPath(),i=n.getPath();return r.length>i.length?e:n}(o);if(cr(n,"atTarget",c),!a){if(ur(i,"$text",n,...e))return n.return;cr(n,"bubbling",c)}for(;c;){if(c.is("rootElement")){if(ur(i,"$root",n,...e))return n.return}else if(c.is("element")&&ur(i,c.name,n,...e))return n.return;if(ur(i,c,n,...e))return n.return;c=c.parent,cr(n,"bubbling",c)}return cr(n,"bubbling",this),ur(i,"$document",n,...e),n.return}catch(t){a.a.rethrowUnexpectedError(t,this)}},_addEventListener(t,e,n){const r=an(n.context||"$document"),i=hr(this);for(const o of r){let r=i.get(o);r||(r=Object.create(l),i.set(o,r)),this.listenTo(r,t,e,n)}},_removeEventListener(t,e){const n=hr(this);for(const r of n.values())this.stopListening(r,t,e)}};function cr(t,e,n){t instanceof or&&(t._eventPhase=e,t._currentTarget=n)}function ur(t,e,n,...r){const i="string"==typeof e?t.get(e):lr(t,e);return!!i&&(i.fire(n,...r),n.stop.called)}function lr(t,e){for(const[n,r]of t)if("function"==typeof n&&n(e))return r;return null}function hr(t){return t[sr]||(t[sr]=new Map),t[sr]}class dr{constructor(t){this.selection=new ir,this.roots=new on({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.map(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(e=n(t),e)break}while(e)}}Pt(dr,ar),Pt(dr,Et);class fr extends Hn{constructor(t,e,n,r){super(t,e,n,r),this.getFillerOffset=pr,this._priority=10,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new a.a("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}is(t,e=null){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}}function pr(){if(gr(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(gr(t)>1)return null;t=t.parent}return!t||gr(t)>1?null:this.childCount}function gr(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}fr.DEFAULT_PRIORITY=10;class mr extends Hn{constructor(t,e,n,r){super(t,e,n,r),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=br}is(t,e=null){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}_insertChild(t,e){if(e&&(e instanceof pn||Array.from(e).length>0))throw new a.a("view-emptyelement-cannot-add",[this,e])}}function br(){return null}const vr=navigator.userAgent.toLowerCase();var _r=Er(vr),yr=function(t){return t.indexOf("windows")>-1}(vr),wr=function(t){return!!t.match(/gecko\/\d+/)}(vr),kr=function(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome")}(vr),Cr=(function(t){t.match(/iphone|ipad/i)||Er(t)&&navigator}(vr),function(t){return t.indexOf("android")>-1}(vr)),Ar=function(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}(vr);function Er(t){return t.indexOf("macintosh")>-1}!function(){let t=!1;try{t=0==="\u0107".search(new RegExp("[\\p{L}]","u"))}catch(t){}}();const Or={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21e7"},xr={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Sr=function(){const t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++)t[String.fromCharCode(e).toLowerCase()]=e;for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;for(const e of"`-=[];',./\\")t[e]=e.charCodeAt(0);return t}(),Tr=Object.fromEntries(Object.entries(Sr).map(([t,e])=>[e,t.charAt(0).toUpperCase()+t.slice(1)]));function Ir(t){let e;if("string"==typeof t){if(e=Sr[t.toLowerCase()],!e)throw new a.a("keyboard-unknown-key",null,{key:t})}else e=t.keyCode+(t.altKey?Sr.alt:0)+(t.ctrlKey?Sr.ctrl:0)+(t.shiftKey?Sr.shift:0)+(t.metaKey?Sr.cmd:0);return e}function Pr(t){return"string"==typeof t&&(t=function(t){return t.split("+").map(t=>t.trim())}(t)),t.map(t=>"string"==typeof t?function(t){if(t.endsWith("!"))return Ir(t.slice(0,-1));const e=Ir(t);return _r&&e==Sr.ctrl?Sr.cmd:e}(t):t).reduce((t,e)=>e+t,0)}function Dr(t){let e=Pr(t);return Object.entries(_r?Or:xr).reduce((t,[n,r])=>(0!=(e&Sr[n])&&(e&=~Sr[n],t+=r),t),"")+(e?Tr[e]:"")}function Nr(t,e){const n="ltr"===e;switch(t){case Sr.arrowleft:return n?"left":"right";case Sr.arrowright:return n?"right":"left";case Sr.arrowup:return"up";case Sr.arrowdown:return"down"}}class Rr extends Hn{constructor(t,e,n,r){super(t,e,n,r),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=jr}is(t,e=null){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t}_insertChild(t,e){if(e&&(e instanceof pn||Array.from(e).length>0))throw new a.a("view-uielement-cannot-add",this)}render(t){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}}function jr(){return null}class Mr extends Hn{constructor(t,e,n,r){super(t,e,n,r),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=Fr}is(t,e=null){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t}_insertChild(t,e){if(e&&(e instanceof pn||Array.from(e).length>0))throw new a.a("view-rawelement-cannot-add",[this,e])}}function Fr(){return null}class Lr{constructor(t,e){this.document=t,this._children=[],e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return"documentFragment"===t||"view:documentFragment"===t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this);let n=0;const r=function(t,e){return"string"==typeof e?[new gn(t,e)]:(rn(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new gn(t,e):e instanceof mn?new gn(t,e.data):e))}(this.document,e);for(const i of r)null!==i.parent&&i._remove(),i.parent=this,this._children.splice(t,0,i),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_fireChange(t,e){this.fire("change:"+t,e)}}Pt(Lr,l);class Br{constructor(t){this.document=t,this._cloneGroups=new Map}setSelection(t,e,n){this.document.selection._setTo(t,e,n)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new Lr(this.document,t)}createText(t){return new gn(this.document,t)}createAttributeElement(t,e,n={}){const r=new fr(this.document,t,e);return"number"==typeof n.priority&&(r._priority=n.priority),n.id&&(r._id=n.id),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createContainerElement(t,e,n={}){const r=new Gn(this.document,t,e);return void 0!==n.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createEditableElement(t,e,n={}){const r=new Qn(this.document,t,e);return r._document=this.document,n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createEmptyElement(t,e,n={}){const r=new mr(this.document,t,e);return void 0!==n.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createUIElement(t,e,n,r={}){const i=new Rr(this.document,t,e);return n&&(i.render=n),void 0!==r.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),i}createRawElement(t,e,n,r={}){const i=new Mr(this.document,t,e);return i.render=n||(()=>{}),void 0!==r.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){Ut(t)&&void 0===n&&(n=e),n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof Zn?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new a.a("view-writer-break-non-container-element",this.document);if(!e.parent)throw new a.a("view-writer-break-root",this.document);if(t.isAtStart)return Zn._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(Zn._createAfter(e),n);const r=new tr(t,Zn._createAt(e,"end")),i=new Zn(n,0);this.move(r,i)}return Zn._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&0===n.childCount){const t=n.parent,e=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Zn(t,e))}const r=n.getChild(e-1),i=n.getChild(e);if(!r||!i)return t;if(r.is("$text")&&i.is("$text"))return Kr(r,i);if(r.is("attributeElement")&&i.is("attributeElement")&&r.isSimilar(i)){const t=r.childCount;return r._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new Zn(r,t))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!(e&&n&&e.is("containerElement")&&n.is("containerElement")))throw new a.a("view-writer-merge-containers-invalid-position",this.document);const r=e.getChild(e.childCount-1),i=Zn._createAt(r instanceof gn?r:e,"end");return this.move(tr._createIn(n),Zn._createAt(e,"end")),this.remove(tr._createOn(n)),i}insert(t,e){Hr(e=rn(e)?[...e]:[e],this.document);const n=e.reduce((t,e)=>{const n=t[t.length-1],r=!(e.is("uiElement")&&e.isAllowedInsideAttributeElement);return n&&n.breakAttributes==r?n.nodes.push(e):t.push({breakAttributes:r,nodes:[e]}),t},[]);let r=null,i=t;for(const{nodes:o,breakAttributes:s}of n){const t=this._insertNodes(i,o,s);r||(r=t.start),i=t.end}return r?new tr(r,i):new tr(t)}remove(t){const e=t instanceof tr?t:tr._createOn(t);if($r(e,this.document),e.isCollapsed)return new Lr(this.document);const{start:n,end:r}=this._breakAttributesRange(e,!0),i=n.parent._removeChildren(n.offset,r.offset-n.offset);for(const s of i)this._removeFromClonedElementsGroup(s);const o=this.mergeAttributes(n);return e.start=o,e.end=o.clone(),new Lr(this.document,i)}clear(t,e){$r(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of n){const n=r.item;let i;if(n.is("element")&&e.isSimilar(n))i=tr._createOn(n);else if(!r.nextPosition.isAfter(t.start)&&n.is("$textProxy")){const t=n.getAncestors().find(t=>t.is("element")&&e.isSimilar(t));t&&(i=tr._createIn(t))}i&&(i.end.isAfter(t.end)&&(i.end=t.end),i.start.isBefore(t.start)&&(i.start=t.start),this.remove(i))}}move(t,e){let n;if(e.isAfter(t.end)){const r=(e=this._breakAttributes(e,!0)).parent,i=r.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=r.childCount-i}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof fr))throw new a.a("view-writer-wrap-invalid-attribute",this.document);if($r(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!function(t){return Array.from(t.getChildren()).some(t=>!t.is("uiElement"))}(n.parent)&&(n=n.getLastMatchingPosition(t=>t.item.is("uiElement"))),n=this._wrapPosition(n,e);const r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new tr(n)}return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof fr))throw new a.a("view-writer-unwrap-invalid-attribute",this.document);if($r(t,this.document),t.isCollapsed)return t;const{start:n,end:r}=this._breakAttributesRange(t,!0),i=this._unwrapChildren(n.parent,n.offset,r.offset,e),o=this.mergeAttributes(i.start);o.isEqual(i.start)||i.end.offset--;const s=this.mergeAttributes(i.end);return new tr(o,s)}rename(t,e){const n=new Gn(this.document,t,e.getAttributes());return this.insert(Zn._createAfter(e),n),this.move(tr._createIn(e),Zn._createAt(n,0)),this.remove(tr._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return Zn._createAt(t,e)}createPositionAfter(t){return Zn._createAfter(t)}createPositionBefore(t){return Zn._createBefore(t)}createRange(t,e){return new tr(t,e)}createRangeOn(t){return tr._createOn(t)}createRangeIn(t){return tr._createIn(t)}createSelection(t,e,n){return new rr(t,e,n)}_insertNodes(t,e,n){let r,i;if(r=n?Vr(t):t.parent.is("$text")?t.parent.parent:t.parent,!r)throw new a.a("view-writer-invalid-position-container",this.document);i=n?this._breakAttributes(t,!0):t.parent.is("$text")?zr(t):t;const o=r._insertChild(i.offset,e);for(const a of e)this._addToClonedElementsGroup(a);const s=i.getShiftedBy(o),c=this.mergeAttributes(i);c.isEqual(i)||s.offset--;const u=this.mergeAttributes(s);return new tr(c,u)}_wrapChildren(t,e,n,r){let i=e;const o=[];for(;i<n;){const e=t.getChild(i),n=e.is("$text"),s=e.is("attributeElement"),a=e.isAllowedInsideAttributeElement;if(s&&this._wrapAttributeElement(r,e))o.push(new Zn(t,i));else if(n||a||s&&Ur(r,e)){const n=r._clone();e._remove(),n._appendChild(e),t._insertChild(i,n),this._addToClonedElementsGroup(n),o.push(new Zn(t,i))}else s&&this._wrapChildren(e,0,e.childCount,r);i++}let s=0;for(const a of o)a.offset-=s,a.offset!=e&&(this.mergeAttributes(a).isEqual(a)||(s++,n--));return tr._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,r){let i=e;const o=[];for(;i<n;){const e=t.getChild(i);if(e.is("attributeElement"))if(e.isSimilar(r)){const r=e.getChildren(),s=e.childCount;e._remove(),t._insertChild(i,r),this._removeFromClonedElementsGroup(e),o.push(new Zn(t,i),new Zn(t,i+s)),i+=s,n+=s-1}else this._unwrapAttributeElement(r,e)?(o.push(new Zn(t,i),new Zn(t,i+1)),i++):(this._unwrapChildren(e,0,e.childCount,r),i++);else i++}let s=0;for(const a of o)a.offset-=s,a.offset!=e&&a.offset!=n&&(this.mergeAttributes(a).isEqual(a)||(s++,n--));return tr._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:r}=this._breakAttributesRange(t,!0),i=this._wrapChildren(n.parent,n.offset,r.offset,e),o=this.mergeAttributes(i.start);o.isEqual(i.start)||i.end.offset--;const s=this.mergeAttributes(i.end);return new tr(o,s)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return qr(t.clone());t.parent.is("$text")&&(t=zr(t));const n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const r=new tr(t,t.getShiftedBy(1));this.wrap(r,e);const i=new Zn(n.parent,n.index);n._remove();const o=i.nodeBefore,s=i.nodeAfter;return o instanceof gn&&s instanceof gn?Kr(o,s):qr(i)}_wrapAttributeElement(t,e){if(!Qr(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&e.hasAttribute(n)&&e.getAttribute(n)!==t.getAttribute(n))return!1;for(const n of t.getStyleNames())if(e.hasStyle(n)&&e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())"class"!==n&&"style"!==n&&(e.hasAttribute(n)||this.setAttribute(n,t.getAttribute(n),e));for(const n of t.getStyleNames())e.hasStyle(n)||this.setStyle(n,t.getStyle(n),e);for(const n of t.getClassNames())e.hasClass(n)||this.addClass(n,e);return!0}_unwrapAttributeElement(t,e){if(!Qr(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&(!e.hasAttribute(n)||e.getAttribute(n)!==t.getAttribute(n)))return!1;if(!e.hasClass(...t.getClassNames()))return!1;for(const n of t.getStyleNames())if(!e.hasStyle(n)||e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())"class"!==n&&"style"!==n&&this.removeAttribute(n,e);return this.removeClass(Array.from(t.getClassNames()),e),this.removeStyle(Array.from(t.getStyleNames()),e),!0}_breakAttributesRange(t,e=!1){const n=t.start,r=t.end;if($r(t,this.document),t.isCollapsed){const n=this._breakAttributes(t.start,e);return new tr(n,n)}const i=this._breakAttributes(r,e),o=i.parent.childCount,s=this._breakAttributes(n,e);return i.offset+=i.parent.childCount-o,new tr(s,i)}_breakAttributes(t,e=!1){const n=t.offset,r=t.parent;if(t.parent.is("emptyElement"))throw new a.a("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new a.a("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new a.a("view-writer-cannot-break-raw-element",this.document);if(!e&&r.is("$text")&&Gr(r.parent))return t.clone();if(Gr(r))return t.clone();if(r.is("$text"))return this._breakAttributes(zr(t),e);if(n==r.childCount){const t=new Zn(r.parent,r.index+1);return this._breakAttributes(t,e)}if(0===n){const t=new Zn(r.parent,r.index);return this._breakAttributes(t,e)}{const t=r.index+1,i=r._clone();r.parent._insertChild(t,i),this._addToClonedElementsGroup(i);const o=r._removeChildren(n,r.childCount-n);i._appendChild(o);const s=new Zn(r.parent,t);return this._breakAttributes(s,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const r of t.getChildren())this._addToClonedElementsGroup(r);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const r of t.getChildren())this._removeFromClonedElementsGroup(r);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function Vr(t){let e=t.parent;for(;!Gr(e);){if(!e)return;e=e.parent}return e}function Ur(t,e){return t.priority<e.priority||!(t.priority>e.priority)&&t.getIdentity()<e.getIdentity()}function qr(t){const e=t.nodeBefore;if(e&&e.is("$text"))return new Zn(e,e.data.length);const n=t.nodeAfter;return n&&n.is("$text")?new Zn(n,0):t}function zr(t){if(t.offset==t.parent.data.length)return new Zn(t.parent.parent,t.parent.index+1);if(0===t.offset)return new Zn(t.parent.parent,t.parent.index);const e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new gn(t.root.document,e)),new Zn(t.parent.parent,t.parent.index+1)}function Kr(t,e){const n=t.data.length;return t._data+=e.data,e._remove(),new Zn(t,n)}function Hr(t,e){for(const n of t){if(!Wr.some(t=>n instanceof t))throw new a.a("view-writer-insert-invalid-node-type",e);n.is("$text")||Hr(n.getChildren(),e)}}const Wr=[gn,fr,Gn,mr,Mr,Rr];function Gr(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function $r(t,e){const n=Vr(t.start),r=Vr(t.end);if(!n||!r||n!==r)throw new a.a("view-writer-invalid-range-container",e)}function Qr(t,e){return null===t.id&&null===e.id}function Yr(t){return"[object Text]"==Object.prototype.toString.call(t)}const Jr=t=>t.createTextNode("\xa0"),Xr=t=>{const e=t.createElement("span");return e.dataset.ckeFiller=!0,e.innerHTML="\xa0",e},Zr=t=>{const e=t.createElement("br");return e.dataset.ckeFiller=!0,e},ti="\u2060".repeat(7);function ei(t){return Yr(t)&&t.data.substr(0,7)===ti}function ni(t){return 7==t.data.length&&ei(t)}function ri(t){return ei(t)?t.data.slice(7):t.data}function ii(t,e){if(e.keyCode==Sr.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(1==t.rangeCount&&t.getRangeAt(0).collapsed){const e=t.getRangeAt(0).startContainer,n=t.getRangeAt(0).startOffset;ei(e)&&n<=7&&t.collapse(e,0)}}}function oi(t,e,n,r=!1){n=n||function(t,e){return t===e},Array.isArray(t)||(t=Array.prototype.slice.call(t)),Array.isArray(e)||(e=Array.prototype.slice.call(e));const i=function(t,e,n){const r=si(t,e,n);if(-1===r)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const i=si(ai(t,r),ai(e,r),n);return{firstIndex:r,lastIndexOld:t.length-i,lastIndexNew:e.length-i}}(t,e,n);return r?function(t,e){const{firstIndex:n,lastIndexOld:r,lastIndexNew:i}=t;if(-1===n)return Array(e).fill("equal");let o=[];return n>0&&(o=o.concat(Array(n).fill("equal"))),i-n>0&&(o=o.concat(Array(i-n).fill("insert"))),r-n>0&&(o=o.concat(Array(r-n).fill("delete"))),i<e&&(o=o.concat(Array(e-i).fill("equal"))),o}(i,e.length):function(t,e){const n=[],{firstIndex:r,lastIndexOld:i,lastIndexNew:o}=e;return o-r>0&&n.push({index:r,type:"insert",values:t.slice(r,o)}),i-r>0&&n.push({index:r+(o-r),type:"delete",howMany:i-r}),n}(e,i)}function si(t,e,n){for(let r=0;r<Math.max(t.length,e.length);r++)if(void 0===t[r]||void 0===e[r]||!n(t[r],e[r]))return r;return-1}function ai(t,e){return t.slice(e).reverse()}function ci(t,e,n){n=n||function(t,e){return t===e};const r=t.length,i=e.length;if(r>200||i>200||r+i>300)return ci.fastDiff(t,e,n,!0);let o,s;if(i<r){const n=t;t=e,e=n,o="delete",s="insert"}else o="insert",s="delete";const a=t.length,c=e.length,u=c-a,l={},h={};function d(r){const i=(void 0!==h[r-1]?h[r-1]:-1)+1,u=void 0!==h[r+1]?h[r+1]:-1,d=i>u?-1:1;l[r+d]&&(l[r]=l[r+d].slice(0)),l[r]||(l[r]=[]),l[r].push(i>u?o:s);let f=Math.max(i,u),p=f-r;for(;p<a&&f<c&&n(t[p],e[f]);)p++,f++,l[r].push("equal");return f}let f,p=0;do{for(f=-p;f<u;f++)h[f]=d(f);for(f=u+p;f>u;f--)h[f]=d(f);h[u]=d(u),p++}while(h[u]!==c);return l[u].slice(1)}function ui(t,e,n){t.insertBefore(n,t.childNodes[e]||null)}function li(t){const e=t.parentNode;e&&e.removeChild(t)}function hi(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}ci.fastDiff=oi;var di=n(1),fi=n.n(di),pi=n(12);fi()(pi.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class gi{constructor(t,e){this.domDocuments=new Set,this.domConverter=t,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=e,this.set("isFocused",!1),this.set("isSelecting",!1),Ar&&!Cr&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new a.a("view-renderer-unknown-type",this);this.markedChildren.add(e)}}}render(){let t;const e=!(Ar&&!Cr&&this.isSelecting);for(const n of this.markedChildren)this._updateChildrenMappings(n);e?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller));for(const n of this.markedAttributes)this._updateAttrs(n);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:t});for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:t});if(e)if(t){const e=this.domConverter.viewPositionToDom(t),n=e.parent.ownerDocument;this._inlineFiller=ei(e.parent)?e.parent:mi(n,e.parent,e.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const e=this.domConverter.mapViewToDom(t);if(!e)return;const n=Array.from(this.domConverter.mapViewToDom(t).childNodes),r=Array.from(this.domConverter.viewChildrenToDom(t,e.ownerDocument,{withChildren:!1})),i=this._diffNodeLists(n,r),o=this._findReplaceActions(i,n,r);if(-1!==o.indexOf("replace")){const e={equal:0,insert:0,delete:0};for(const i of o)if("replace"===i){const i=e.equal+e.insert,o=e.equal+e.delete,s=t.getChild(i);!s||s.is("uiElement")||s.is("rawElement")||this._updateElementMappings(s,n[o]),li(r[i]),e.equal++}else e[i]++}}_updateElementMappings(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?Zn._createBefore(this.selection.getFirstPosition().parent):t}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&Yr(e.parent)&&ei(e.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!ei(t))throw new a.a("view-renderer-filler-was-lost",this);ni(t)?t.remove():t.data=t.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=t.parent,n=t.offset;return!(!this.domConverter.mapViewToDom(e.root)||!e.is("element")||!function(t){if("false"==t.getAttribute("contenteditable"))return!1;const e=t.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||"true"==e.getAttribute("contenteditable")}(e)||n===e.getFillerOffset()||t.nodeBefore instanceof gn||t.nodeAfter instanceof gn)}_updateText(t,e){const n=this.domConverter.findCorrespondingDomText(t),r=this.domConverter.viewToDom(t,n.ownerDocument),i=n.data;let o=r.data;const s=e.inlineFillerPosition;if(s&&s.parent==t.parent&&s.offset==t.index&&(o=ti+o),i!=o){const t=oi(i,o);for(const e of t)"insert"===e.type?n.insertData(e.index,e.values.join("")):n.deleteData(e.index,e.howMany)}}_updateAttrs(t){const e=this.domConverter.mapViewToDom(t);if(!e)return;const n=Array.from(e.attributes).map(t=>t.name),r=t.getAttributeKeys();for(const i of r)this.domConverter.setDomElementAttribute(e,i,t.getAttribute(i),t);for(const i of n)t.hasAttribute(i)||this.domConverter.removeDomElementAttribute(e,i)}_updateChildren(t,e){const n=this.domConverter.mapViewToDom(t);if(!n)return;const r=e.inlineFillerPosition,i=this.domConverter.mapViewToDom(t).childNodes,o=Array.from(this.domConverter.viewChildrenToDom(t,n.ownerDocument,{bind:!0}));r&&r.parent===t&&mi(n.ownerDocument,o,r.offset);const s=this._diffNodeLists(i,o);let a=0;const c=new Set;for(const u of s)"delete"===u?(c.add(i[a]),li(i[a])):"equal"===u&&a++;a=0;for(const u of s)"insert"===u?(ui(n,a,o[a]),a++):"equal"===u&&(this._markDescendantTextToSync(this.domConverter.domToView(o[a])),a++);for(const u of c)u.parentNode||this.domConverter.unbindDomElement(u)}_diffNodeLists(t,e){return ci(t=function(t,e){const n=Array.from(t);return 0!=n.length&&e?(n[n.length-1]==e&&n.pop(),n):n}(t,this._fakeSelectionContainer),e,vi.bind(null,this.domConverter))}_findReplaceActions(t,e,n){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;let r=[],i=[],o=[];const s={equal:0,insert:0,delete:0};for(const a of t)"insert"===a?o.push(n[s.equal+s.insert]):"delete"===a?i.push(e[s.equal+s.delete]):(r=r.concat(ci(i,o,bi).map(t=>"equal"===t?"replace":t)),r.push("equal"),i=[],o=[]),s[a]++;return r.concat(ci(i,o,bi).map(t=>"equal"===t?"replace":t))}_markDescendantTextToSync(t){if(t)if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const e of t.getChildren())this._markDescendantTextToSync(e)}_updateSelection(){if(Ar&&!Cr&&this.isSelecting&&!this.markedChildren.size)return;if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):(this._removeFakeSelection(),this._updateDomSelection(t)))}_updateFakeSelection(t){const e=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(t){const e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xa0",e}(e));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(t))return;n.parentElement&&n.parentElement==t||t.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"\xa0";const r=e.getSelection(),i=e.createRange();r.removeAllRanges(),i.selectNodeContents(n),r.addRange(i)}_updateDomSelection(t){const e=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);e.collapse(n.parent,n.offset),e.extend(r.parent,r.offset),wr&&function(t,e){const n=t.parent;if(n.nodeType!=Node.ELEMENT_NODE||t.offset!=n.childNodes.length-1)return;const r=n.childNodes[t.offset];r&&"BR"==r.tagName&&e.addRange(e.getRangeAt(0))}(r,e)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const e=t&&this.domConverter.domSelectionToView(t);return!(e&&this.selection.isEqual(e)||!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(t){const e=this._fakeSelectionContainer,n=t.ownerDocument.getSelection();return!e||e.parentElement!==t||n.anchorNode!==e&&!e.contains(n.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments)if(t.getSelection().rangeCount){const e=t.activeElement,n=this.domConverter.mapDomToView(e);e&&n&&t.getSelection().removeAllRanges()}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function mi(t,e,n){const r=e instanceof Array?e:e.childNodes,i=r[n];if(Yr(i))return i.data=ti+i.data,i;{const i=t.createTextNode(ti);return Array.isArray(e)?r.splice(n,0,i):ui(e,n,i),i}}function bi(t,e){return hi(t)&&hi(e)&&!Yr(t)&&!Yr(e)&&t.nodeType!==Node.COMMENT_NODE&&e.nodeType!==Node.COMMENT_NODE&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}function vi(t,e,n){return e===n||(Yr(e)&&Yr(n)?e.data===n.data:!(!t.isBlockFiller(e)||!t.isBlockFiller(n)))}Pt(gi,Et);var _i={window:window,document:document};function yi(t){let e=0;for(;t.previousSibling;)t=t.previousSibling,e++;return e}function wi(t){const e=[];for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}const ki=Zr(document),Ci=Jr(document),Ai=Xr(document),Ei="data-ck-unsafe-attribute-",Oi="data-ck-unsafe-element";class xi{constructor(t,e={}){this.document=t,this.renderingMode=e.renderingMode||"editing",this.blockFillerMode=e.blockFillerMode||("editing"===this.renderingMode?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new vn,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new rr(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const e of t.childNodes)this.unbindDomElement(e)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return"data"===this.renderingMode||!(t=t.toLowerCase()).startsWith("on")&&("srcdoc"!==t||!e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&("img"===n&&("src"===t||"srcset"===t)||"source"===n&&"srcset"===t||!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if("data"===this.renderingMode)return void(t.innerHTML=e);const n=(new DOMParser).parseFromString(e,"text/html"),r=n.createDocumentFragment(),i=n.body.childNodes;for(;i.length>0;)r.appendChild(i[0]);const o=n.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),s=[];let c;for(;c=o.nextNode();)s.push(c);for(const u of s){for(const e of u.getAttributeNames())this.setDomElementAttribute(u,e,u.getAttribute(e));const t=u.tagName.toLowerCase();this._shouldRenameElement(t)&&(Object(a.b)("domconverter-unsafe-element-detected",{unsafeElement:u}),u.replaceWith(this._createReplacementDomElement(t,u)))}for(;t.firstChild;)t.firstChild.remove();t.append(r)}viewToDom(t,e,n={}){if(t.is("$text")){const n=this._processDataFromViewText(t);return e.createTextNode(n)}{if(this.mapViewToDom(t))return this.mapViewToDom(t);let r;if(t.is("documentFragment"))r=e.createDocumentFragment(),n.bind&&this.bindDocumentFragments(r,t);else{if(t.is("uiElement"))return r="$comment"===t.name?e.createComment(t.getCustomProperty("$rawContent")):t.render(e,this),n.bind&&this.bindElements(r,t),r;this._shouldRenameElement(t.name)?(Object(a.b)("domconverter-unsafe-element-detected",{unsafeElement:t}),r=this._createReplacementDomElement(t.name)):r=t.hasAttribute("xmlns")?e.createElementNS(t.getAttribute("xmlns"),t.name):e.createElement(t.name),t.is("rawElement")&&t.render(r,this),n.bind&&this.bindElements(r,t);for(const e of t.getAttributeKeys())this.setDomElementAttribute(r,e,t.getAttribute(e),t)}if(!1!==n.withChildren)for(const i of this.viewChildrenToDom(t,e,n))r.appendChild(i);return r}}setDomElementAttribute(t,e,n,r=null){const i=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(e);i||Object(a.b)("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),t.hasAttribute(e)&&!i?t.removeAttribute(e):t.hasAttribute(Ei+e)&&i&&t.removeAttribute(Ei+e),t.setAttribute(i?e:Ei+e,n)}removeDomElementAttribute(t,e){e!=Oi&&(t.removeAttribute(e),t.removeAttribute(Ei+e))}*viewChildrenToDom(t,e,n={}){const r=t.getFillerOffset&&t.getFillerOffset();let i=0;for(const o of t.getChildren())r===i&&(yield this._getBlockFiller(e)),yield this.viewToDom(o,e,n),i++;r===i&&(yield this._getBlockFiller(e))}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),r=document.createRange();return r.setStart(e.parent,e.offset),r.setEnd(n.parent,n.offset),r}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let r=t.offset;return ei(n)&&(r+=7),{parent:n,offset:r}}{let n,r,i;if(0===t.offset){if(n=this.mapViewToDom(e),!n)return null;i=n.childNodes[0]}else{const e=t.nodeBefore;if(r=e.is("$text")?this.findCorrespondingDomText(e):this.mapViewToDom(t.nodeBefore),!r)return null;n=r.parentNode,i=r.nextSibling}return Yr(i)&&ei(i)?{parent:i,offset:7}:{parent:n,offset:r?yi(r)+1:0}}}domToView(t,e={}){if(this.isBlockFiller(t))return null;const n=this.getHostViewElement(t);if(n)return n;if(this.isComment(t)&&e.skipComments)return null;if(Yr(t)){if(ni(t))return null;{const e=this._processDataFromDomText(t);return""===e?null:new gn(this.document,e)}}{if(this.mapDomToView(t))return this.mapDomToView(t);let n;if(this.isDocumentFragment(t))n=new Lr(this.document),e.bind&&this.bindDocumentFragments(t,n);else{n=this._createViewElement(t,e),e.bind&&this.bindElements(t,n);const r=t.attributes;if(r)for(let t=r.length-1;t>=0;t--)n._setAttribute(r[t].name,r[t].value);if(this._isViewElementWithRawContent(n,e)||this.isComment(t)){const e=this.isComment(t)?t.data:t.innerHTML;return n._setCustomProperty("$rawContent",e),this._encounteredRawContentDomNodes.add(t),n}}if(!1!==e.withChildren)for(const r of this.domChildrenToView(t,e))n._appendChild(r);return n}}*domChildrenToView(t,e={}){for(let n=0;n<t.childNodes.length;n++){const r=this.domToView(t.childNodes[n],e);null!==r&&(yield r)}}domSelectionToView(t){if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;Yr(e)&&(e=e.parentNode);const n=this.fakeSelectionToView(e);if(n)return n}const e=this.isDomSelectionBackward(t),n=[];for(let r=0;r<t.rangeCount;r++){const e=t.getRangeAt(r),i=this.domRangeToView(e);i&&n.push(i)}return new rr(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new tr(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,yi(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return Zn._createBefore(n);if(Yr(t)){if(ni(t))return this.domPositionToView(t.parentNode,yi(t));const n=this.findCorrespondingViewText(t);let r=e;return n?(ei(t)&&(r-=7,r=r<0?0:r),new Zn(n,r)):null}if(0===e){const e=this.mapDomToView(t);if(e)return new Zn(e,0)}else{const n=t.childNodes[e-1],r=Yr(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(r&&r.parent)return new Zn(r.parent,r.index+1)}return null}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(ni(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const t=this.mapDomToView(n);if(t)return t.nextSibling instanceof gn?t.nextSibling:null}else{const e=this.mapDomToView(t.parentNode);if(e){const t=e.getChild(0);return t instanceof gn?t:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:t,scrollY:n}=_i.window,r=[];Si(e,t=>{const{scrollLeft:e,scrollTop:n}=t;r.push([e,n])}),e.focus(),Si(e,t=>{const[e,n]=r.shift();t.scrollLeft=e,t.scrollTop=n}),_i.window.scrollTo(t,n)}}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(t){return t&&t.nodeType==Node.COMMENT_NODE}isBlockFiller(t){return"br"==this.blockFillerMode?t.isEqualNode(ki):!("BR"!==t.tagName||!Ti(t,this.blockElements)||1!==t.parentNode.childNodes.length)||t.isEqualNode(Ai)||function(t,e){return t.isEqualNode(Ci)&&Ti(t,e)&&1===t.parentNode.childNodes.length}(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=wi(t);for(e.pop();e.length;){const t=e.pop(),n=this._domToViewMapping.get(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return n}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}_getBlockFiller(t){switch(this.blockFillerMode){case"nbsp":return Jr(t);case"markedNbsp":return Xr(t);case"br":return Zr(t)}}_isDomSelectionPositionCorrect(t,e){if(Yr(t)&&ei(t)&&e<7)return!1;if(this.isElement(t)&&ei(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!n||!n.is("uiElement")&&!n.is("rawElement")}_processDataFromViewText(t){let e=t.data;if(t.getAncestors().some(t=>this.preElements.includes(t.name)))return e;if(" "==e.charAt(0)){const n=this._getTouchingInlineViewNode(t,!1);!(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n))&&n||(e="\xa0"+e.substr(1))}if(" "==e.charAt(e.length-1)){const n=this._getTouchingInlineViewNode(t,!0),r=n&&n.is("$textProxy")&&" "==n.data.charAt(0);" "!=e.charAt(e.length-2)&&n&&!r||(e=e.substr(0,e.length-1)+"\xa0")}return e.replace(/ {2}/g," \xa0")}_nodeEndsWithSpace(t){if(t.getAncestors().some(t=>this.preElements.includes(t.name)))return!1;const e=this._processDataFromViewText(t);return" "==e.charAt(e.length-1)}_processDataFromDomText(t){let e=t.data;if(function(t,e){return wi(t).some(t=>t.tagName&&e.includes(t.tagName.toLowerCase()))}(t,this.preElements))return ri(t);e=e.replace(/[ \n\t\r]{1,}/g," ");const n=this._getTouchingInlineDomNode(t,!1),r=this._getTouchingInlineDomNode(t,!0),i=this._checkShouldLeftTrimDomText(t,n),o=this._checkShouldRightTrimDomText(t,r);i&&(e=e.replace(/^ /,"")),o&&(e=e.replace(/ $/,"")),e=ri(new Text(e)),e=e.replace(/ \u00A0/g,"  ");const s=r&&this.isElement(r)&&"BR"!=r.tagName,a=r&&Yr(r)&&" "==r.data.charAt(0);return(/( |\u00A0)\u00A0$/.test(e)||!r||s||a)&&(e=e.replace(/\u00A0$/," ")),(i||n&&this.isElement(n)&&"BR"!=n.tagName)&&(e=e.replace(/^\u00A0/," ")),e}_checkShouldLeftTrimDomText(t,e){return!e||(this.isElement(e)?"BR"===e.tagName:!this._encounteredRawContentDomNodes.has(t.previousSibling)&&/[^\S\u00A0]/.test(e.data.charAt(e.data.length-1)))}_checkShouldRightTrimDomText(t,e){return!e&&!ei(t)}_getTouchingInlineViewNode(t,e){const n=new Xn({startPosition:e?Zn._createAfter(t):Zn._createBefore(t),direction:e?"forward":"backward"});for(const r of n){if(r.item.is("element")&&this.inlineObjectElements.includes(r.item.name))return r.item;if(r.item.is("containerElement"))return null;if(r.item.is("element","br"))return null;if(r.item.is("$textProxy"))return r.item}return null}_getTouchingInlineDomNode(t,e){if(!t.parentNode)return null;const n=e?"firstChild":"lastChild",r=e?"nextSibling":"previousSibling";let i=!0;do{if(!i&&t[n]?t=t[n]:t[r]?(t=t[r],i=!1):(t=t.parentNode,i=!0),!t||this._isBlockElement(t))return null}while(!Yr(t)&&"BR"!=t.tagName&&!this._isInlineObjectElement(t));return t}_isBlockElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isInlineObjectElement(t){return this.isElement(t)&&this.inlineObjectElements.includes(t.tagName.toLowerCase())}_createViewElement(t,e){if(this.isComment(t))return new Rr(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new Hn(this.document,n)}_isViewElementWithRawContent(t,e){return!1!==e.withChildren&&this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){return"editing"==this.renderingMode&&"script"==t.toLowerCase()}_createReplacementDomElement(t,e=null){const n=document.createElement("span");if(n.setAttribute(Oi,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const t of e.getAttributeNames())n.setAttribute(t,e.getAttribute(t))}return n}}function Si(t,e){for(;t&&t!=_i.document;)e(t),t=t.parentNode}function Ti(t,e){const n=t.parentNode;return n&&n.tagName&&e.includes(n.tagName.toLowerCase())}function Ii(t){const e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e}var Pi=vt({},l,{listenTo(t,e,n,r={}){if(hi(t)||Ii(t)){const i={capture:!!r.useCapture,passive:!!r.usePassive},o=this._getProxyEmitter(t,i)||new Di(t,i);this.listenTo(o,e,n,r)}else l.listenTo.call(this,t,e,n,r)},stopListening(t,e,n){if(hi(t)||Ii(t)){const r=this._getAllProxyEmitters(t);for(const t of r)this.stopListening(t,e,n)}else l.stopListening.call(this,t,e,n)},_getProxyEmitter(t,e){return function(t,e){return t[c]&&t[c][e]?t[c][e].emitter:null}(this,Ni(t,e))},_getAllProxyEmitters(t){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(e=>this._getProxyEmitter(t,e)).filter(t=>!!t)}});class Di{constructor(t,e){h(this,Ni(t,e)),this._domNode=t,this._options=e}}function Ni(t,e){let n=function(t){return t["data-ck-expando"]||(t["data-ck-expando"]=o())}(t);for(const r of Object.keys(e).sort())e[r]&&(n+="-"+r);return n}vt(Di.prototype,l,{attach(t){if(this._domListeners&&this._domListeners[t])return;const e=this._createDomListener(t);this._domNode.addEventListener(t,e,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=e},detach(t){let e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()},_addEventListener(t,e,n){this.attach(t),l._addEventListener.call(this,t,e,n)},_removeEventListener(t,e){l._removeEventListener.call(this,t,e),this.detach(t)},_createDomListener(t){const e=e=>{this.fire(t,e)};return e.removeListener=()=>{this._domNode.removeEventListener(t,e,this._options),delete this._domListeners[t]},e}});class Ri{constructor(t){this.view=t,this.document=t.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&3===t.nodeType&&(t=t.parentNode),!(!t||1!==t.nodeType)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}function ji(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new te;++e<n;)this.add(t[e])}Pt(Ri,Pi),ji.prototype.add=ji.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ji.prototype.has=function(t){return this.__data__.has(t)};var Mi=ji,Fi=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Li=function(t,e){return t.has(e)},Bi=function(t,e,n,r,i,o){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(t),l=o.get(e);if(u&&l)return u==e&&l==t;var h=-1,d=!0,f=2&n?new Mi:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var p=t[h],g=e[h];if(r)var m=s?r(g,p,h,e,t,o):r(p,g,h,t,e,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!Fi(e,function(t,e){if(!Li(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)})){d=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d},Vi=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},Ui=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},qi=y?y.prototype:void 0,zi=qi?qi.valueOf:void 0,Ki=Object.prototype.hasOwnProperty,Hi="[object Arguments]",Wi="[object Array]",Gi="[object Object]",$i=Object.prototype.hasOwnProperty,Qi=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Z(e)&&!Z(n)?e!=e&&n!=n:function(t,e,n,r,i,o){var s=ot(t),a=ot(e),c=s?Wi:De(t),u=a?Wi:De(e),l=(c=c==Hi?Gi:c)==Gi,h=(u=u==Hi?Gi:u)==Gi,d=c==u;if(d&&Object(st.a)(t)){if(!Object(st.a)(e))return!1;s=!0,l=!1}if(d&&!l)return o||(o=new ne),s||ht(t)?Bi(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Re(t),new Re(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return L(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Vi;case"[object Set]":if(a||(a=Ui),t.size!=e.size&&!(1&r))return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var u=Bi(a(t),a(e),r,i,o,s);return s.delete(t),u;case"[object Symbol]":if(zi)return zi.call(t)==zi.call(e)}return!1}(t,e,c,n,r,i,o);if(!(1&n)){var f=l&&$i.call(t,"__wrapped__"),p=h&&$i.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return o||(o=new ne),i(g,m,n,r,o)}}return!!d&&(o||(o=new ne),function(t,e,n,r,i,o){var s=1&n,a=ge(t),c=a.length;if(c!=ge(e).length&&!s)return!1;for(var u=c;u--;){var l=a[u];if(!(s?l in e:Ki.call(e,l)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++u<c;){var g=t[l=a[u]],m=e[l];if(r)var b=s?r(m,g,l,e,t,o):r(g,m,l,t,e,o);if(!(void 0===b?g===m||i(g,m,n,r,o):b)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var v=t.constructor,_=e.constructor;v==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}(e,n,r,i,t,o))},Yi=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?Qi(t,e,void 0,n):!!r};class Ji extends Ri{constructor(t){super(t),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=t.domConverter,this.renderer=t._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0===t.length)return;const e=this.domConverter,n=new Map,r=new Set;for(const c of t)if("childList"===c.type){const t=e.mapDomToView(c.target);if(t&&(t.is("uiElement")||t.is("rawElement")))continue;t&&!this._isBogusBrMutation(c)&&r.add(t)}for(const c of t){const t=e.mapDomToView(c.target);if((!t||!t.is("uiElement")&&!t.is("rawElement"))&&"characterData"===c.type){const t=e.findCorrespondingViewText(c.target);t&&!r.has(t.parent)?n.set(t,{type:"text",oldText:t.data,newText:ri(c.target),node:t}):!t&&ei(c.target)&&r.add(e.mapDomToView(c.target.parentNode))}}const i=[];for(const c of n.values())this.renderer.markToSync("text",c.node),i.push(c);for(const c of r){const t=e.mapViewToDom(c),n=Array.from(c.getChildren()),r=Array.from(e.domChildrenToView(t,{withChildren:!1}));Yi(n,r,a)||(this.renderer.markToSync("children",c),i.push({type:"children",oldChildren:n,newChildren:r,node:c}))}const o=t[0].target.ownerDocument.getSelection();let s=null;if(o&&o.anchorNode){const t=e.domPositionToView(o.anchorNode,o.anchorOffset),n=e.domPositionToView(o.focusNode,o.focusOffset);t&&n&&(s=new rr(t),s.setFocus(n))}function a(t,e){if(!Array.isArray(t))return t===e||!(!t.is("$text")||!e.is("$text"))&&t.data===e.data}i.length&&(this.document.fire("mutations",i,s),this.view.forceRender())}_isBogusBrMutation(t){let e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}}class Xi{constructor(t,e,n){this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,vt(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Zi extends Ri{constructor(t){super(t),this.useCapture=!1}observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(e=>{this.listenTo(t,e,(t,e)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(e.target)&&this.onDomEvent(e)},{useCapture:this.useCapture})})}fire(t,e,n){this.isEnabled&&this.document.fire(t,new Xi(this.view,e,n))}}class to extends Zi{constructor(t){super(t),this.domEventType=["keydown","keyup"]}onDomEvent(t){this.fire(t.type,t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return Ir(this)}})}}var eo=function(){return _.a.Date.now()},no=/\s/,ro=/^\s+/,io=/^[-+]0x[0-9a-f]+$/i,oo=/^0b[01]+$/i,so=/^0o[0-7]+$/i,ao=parseInt,co=function(t){if("number"==typeof t)return t;if(wn(t))return NaN;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&no.test(t.charAt(e)););return e}(t)+1).replace(ro,""):t}(t);var n=oo.test(t);return n||so.test(t)?ao(t.slice(2),n?2:8):io.test(t)?NaN:+t},uo=Math.max,lo=Math.min,ho=function(t,e,n){var r,i,o,s,a,c,u=0,l=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function p(t){return u=t,a=setTimeout(m,e),l?f(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||h&&t-u>=o}function m(){var t=eo();if(g(t))return b(t);a=setTimeout(m,function(t){var n=e-(t-c);return h?lo(n,o-(t-u)):n}(t))}function b(t){return a=void 0,d&&r?f(t):(r=i=void 0,s)}function _(){var t=eo(),n=g(t);if(r=arguments,i=this,c=t,n){if(void 0===a)return p(c);if(h)return clearTimeout(a),a=setTimeout(m,e),f(c)}return void 0===a&&(a=setTimeout(m,e)),s}return e=co(e)||0,v(n)&&(l=!!n.leading,o=(h="maxWait"in n)?uo(co(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),_.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=c=i=a=void 0},_.flush=function(){return void 0===a?s:b(eo())},_};class fo extends Ri{constructor(t){super(t),this._fireSelectionChangeDoneDebounced=ho(t=>this.document.fire("selectionChangeDone",t),200)}observe(){const t=this.document;t.on("arrowKey",(e,n)=>{t.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),t.on("arrowKey",(e,n)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const e=this.document.selection,n=new rr(e.getRanges(),{backward:e.isBackward,fake:!1});t!=Sr.arrowleft&&t!=Sr.arrowup||n.setTo(n.getFirstPosition()),t!=Sr.arrowright&&t!=Sr.arrowdown||n.setTo(n.getLastPosition());const r={oldSelection:e,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}class po extends Ri{constructor(t){super(t),this.mutationObserver=t.getObserver(Ji),this.selection=this.document.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=ho(t=>this.document.fire("selectionChangeDone",t),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=ho(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(t){const e=t.ownerDocument,n=()=>{this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel()};this.listenTo(t,"selectstart",()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},{priority:"highest"}),this.listenTo(t,"keydown",n,{priority:"highest"}),this.listenTo(t,"keyup",n,{priority:"highest"}),this._documents.has(e)||(this.listenTo(e,"mouseup",n,{priority:"highest"}),this.listenTo(e,"selectionchange",(t,n)=>{this._handleSelectionChange(n,e),this._documentIsSelectingInactivityTimeoutDebounced()}),this._documents.add(e))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_handleSelectionChange(t,e){if(!this.isEnabled)return;const n=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const r=this.domConverter.domSelectionToView(n);if(0!=r.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(r)&&this.domConverter.isDomSelectionCorrect(n)||++this._loopbackCounter>60))if(this.selection.isSimilar(r))this.view.forceRender();else{const t={oldSelection:this.selection,newSelection:r,domSelection:n};this.document.fire("selectionChange",t),this._fireSelectionChangeDoneDebounced(t)}}else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class go extends Zi{constructor(t){super(t),this.domEventType=["focus","blur"],this.useCapture=!0;const e=this.document;e.on("focus",()=>{e.isFocused=!0,this._renderTimeoutId=setTimeout(()=>t.change(()=>{}),50)}),e.on("blur",(n,r)=>{const i=e.selection.editableElement;null!==i&&i!==r.target||(e.isFocused=!1,t.change(()=>{}))})}onDomEvent(t){this.fire(t.type,t)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class mo extends Zi{constructor(t){super(t),this.domEventType=["compositionstart","compositionupdate","compositionend"];const e=this.document;e.on("compositionstart",()=>{e.isComposing=!0}),e.on("compositionend",()=>{e.isComposing=!1})}onDomEvent(t){this.fire(t.type,t)}}class bo extends Zi{constructor(t){super(t),this.domEventType=["beforeinput"]}onDomEvent(t){this.fire(t.type,t)}}class vo{constructor(){this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}var _o=function(t){return"string"==typeof t||!ot(t)&&Z(t)&&"[object String]"==x(t)};function yo(t){return"[object Range]"==Object.prototype.toString.apply(t)}function wo(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}const ko=["top","right","bottom","left","width","height"];class Co{constructor(t){const e=yo(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Ze(t)||e)if(e){const e=Co.getDomRangeRects(t);Ao(this,Co.getBoundingRect(e))}else Ao(this,t.getBoundingClientRect());else if(Ii(t)){const{innerWidth:e,innerHeight:n}=t;Ao(this,{top:0,right:e,bottom:n,left:0,width:e,height:n})}else Ao(this,t)}clone(){return new Co(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new Co(e)}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(!Eo(t)){let n=t.parentNode||t.commonAncestorContainer;for(;n&&!Eo(n);){const t=new Co(n),r=e.getIntersection(t);if(!r)return null;r.getArea()<e.getArea()&&(e=r),n=n.parentNode}}return e}isEqual(t){for(const e of ko)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!(!e||!e.isEqual(t))}excludeScrollbarsAndBorders(){const t=this._source;let e,n,r;if(Ii(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,r=t.getComputedStyle(t.document.documentElement).direction;else{const i=wo(this._source);e=t.offsetWidth-t.clientWidth-i.left-i.right,n=t.offsetHeight-t.clientHeight-i.top-i.bottom,r=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=i.left,this.top+=i.top,this.right-=i.right,this.bottom-=i.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===r?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const r of n)e.push(new Co(r));else{let n=t.startContainer;Yr(n)&&(n=n.parentNode);const r=new Co(n.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};let n=0;for(const r of t)n++,e.left=Math.min(e.left,r.left),e.top=Math.min(e.top,r.top),e.right=Math.max(e.right,r.right),e.bottom=Math.max(e.bottom,r.bottom);return 0==n?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Co(e))}}function Ao(t,e){for(const n of ko)t[n]=e[n]}function Eo(t){return!!Ze(t)&&t===t.ownerDocument.body}class Oo{constructor(t,e){Oo._observerInstance||Oo._createObserver(),this._element=t,this._callback=e,Oo._addElementCallback(t,e),Oo._observerInstance.observe(t)}destroy(){Oo._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){Oo._elementCallbacks||(Oo._elementCallbacks=new Map);let n=Oo._elementCallbacks.get(t);n||(n=new Set,Oo._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=Oo._getElementCallbacks(t);n&&(n.delete(e),n.size||(Oo._elementCallbacks.delete(t),Oo._observerInstance.unobserve(t))),Oo._elementCallbacks&&!Oo._elementCallbacks.size&&(Oo._observerInstance=null,Oo._elementCallbacks=null)}static _getElementCallbacks(t){return Oo._elementCallbacks?Oo._elementCallbacks.get(t):null}static _createObserver(){let t;t="function"==typeof _i.window.ResizeObserver?_i.window.ResizeObserver:xo,Oo._observerInstance=new t(t=>{for(const e of t){const t=Oo._getElementCallbacks(e.target);if(t)for(const n of t)n(e)}})}}Oo._observerInstance=null,Oo._elementCallbacks=null;class xo{constructor(t){this._callback=t,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(t){this._elements.add(t),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}unobserve(t){this._elements.delete(t),this._previousRects.delete(t),this._elements.size||this._stopPeriodicCheck()}_startPeriodicCheck(){const t=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(t,100)};this.listenTo(_i.window,"resize",()=>{this._checkElementRectsAndExecuteCallback()}),this._periodicCheckTimeout=setTimeout(t,100)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const t=[];for(const e of this._elements)this._hasRectChanged(e)&&t.push({target:e,contentRect:this._previousRects.get(e)});t.length&&this._callback(t)}_hasRectChanged(t){if(!t.ownerDocument.body.contains(t))return!1;const e=new Co(t),n=this._previousRects.get(t),r=!n||!n.isEqual(e);return this._previousRects.set(t,e),r}}function So(t){return e=>e+t}function To(t){const e=t.next();return e.done?null:e.value}Pt(xo,Pi);class Io{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(t){if(this._elements.has(t))throw new a.a("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>this._focus(t),{useCapture:!0}),this.listenTo(t,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(t),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}destroy(){this.stopListening()}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}Pt(Io,Pi),Pt(Io,Et);class Po{constructor(){this._listener=Object.create(Pi)}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this._listener.fire("_keydown:"+Ir(e),e)})}set(t,e,n={}){const r=Pr(t);this._listener.listenTo(this._listener,"_keydown:"+r,(t,n)=>{e(n,()=>{n.preventDefault(),n.stopPropagation(),t.stop()}),t.return=!0},{priority:n.priority})}press(t){return!!this._listener.fire("_keydown:"+Ir(t),t)}destroy(){this._listener.stopListening()}}class Do extends Ri{constructor(t){super(t),this.document.on("keydown",(t,e)=>{if(this.isEnabled&&function(t){return t==Sr.arrowright||t==Sr.arrowleft||t==Sr.arrowup||t==Sr.arrowdown}(e.keyCode)){const n=new or(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(n,e),n.stop.called&&t.stop()}})}observe(){}}function No({target:t,viewportOffset:e=0}){const n=Vo(t);let r=n,i=null;for(;r;){let o;o=Uo(r==n?t:i),jo(o,()=>qo(t,r));const s=qo(t,r);if(Ro(r,s,e),r.parent!=r){if(i=r.frameElement,r=r.parent,!i)return}else r=null}}function Ro(t,e,n){const r=e.clone().moveBy(0,n),i=e.clone().moveBy(0,-n),o=new Co(t).excludeScrollbarsAndBorders();if(![i,r].every(t=>o.contains(t))){let{scrollX:s,scrollY:a}=t;Fo(i,o)?a-=o.top-e.top+n:Mo(r,o)&&(a+=e.bottom-o.bottom+n),Lo(e,o)?s-=o.left-e.left+n:Bo(e,o)&&(s+=e.right-o.right+n),t.scrollTo(s,a)}}function jo(t,e){const n=Vo(t);let r,i;for(;t!=n.document.body;)i=e(),r=new Co(t).excludeScrollbarsAndBorders(),r.contains(i)||(Fo(i,r)?t.scrollTop-=r.top-i.top:Mo(i,r)&&(t.scrollTop+=i.bottom-r.bottom),Lo(i,r)?t.scrollLeft-=r.left-i.left:Bo(i,r)&&(t.scrollLeft+=i.right-r.right)),t=t.parentNode}function Mo(t,e){return t.bottom>e.bottom}function Fo(t,e){return t.top<e.top}function Lo(t,e){return t.left<e.left}function Bo(t,e){return t.right>e.right}function Vo(t){return yo(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function Uo(t){if(yo(t)){let e=t.commonAncestorContainer;return Yr(e)&&(e=e.parentNode),e}return t.parentNode}function qo(t,e){const n=Vo(t),r=new Co(t);if(n===e)return r;{let t=n;for(;t!=e;){const e=new Co(t.frameElement).excludeScrollbarsAndBorders();r.moveBy(e.left,e.top),t=t.parent}}return r}Object.assign({},{scrollViewportToShowTarget:No,scrollAncestorsToShowTarget:function(t){jo(Uo(t),()=>new Co(t))}});class zo{constructor(t){this.document=new dr(t),this.domConverter=new xi(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new gi(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Br(this.document),this.addObserver(Ji),this.addObserver(po),this.addObserver(go),this.addObserver(to),this.addObserver(fo),this.addObserver(mo),this.addObserver(Do),Cr&&this.addObserver(bo),function(t){t.document.on("arrowKey",ii,{priority:"low"})}(this),function(t){t.document.on("arrowKey",(e,n)=>function(t,e,n){if(e.keyCode==Sr.arrowright){const t=e.domTarget.ownerDocument.defaultView.getSelection(),r=1==t.rangeCount&&t.getRangeAt(0).collapsed;if(r||e.shiftKey){const e=n.domPositionToView(t.focusNode,t.focusOffset);if(null===e)return;let i=!1;const o=e.getLastMatchingPosition(t=>(t.item.is("uiElement")&&(i=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement"))));if(i){const e=n.viewPositionToDom(o);r?t.collapse(e.parent,e.offset):t.extend(e.parent,e.offset)}}}}(0,n,t.domConverter),{priority:"low"})}(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(t,e="main"){const n=this.document.getRoot(e);n._name=t.tagName.toLowerCase();const r={};for(const{name:o,value:s}of Array.from(t.attributes))r[o]=s,"class"===o?this._writer.addClass(s.split(" "),n):this._writer.setAttribute(o,s,n);this._initialDomRootAttributes.set(t,r);const i=()=>{this._writer.setAttribute("contenteditable",!n.isReadOnly,n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};i(),this.domRoots.set(e,t),this.domConverter.bindElements(t,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(t.ownerDocument),n.on("change:children",(t,e)=>this._renderer.markToSync("children",e)),n.on("change:attributes",(t,e)=>this._renderer.markToSync("attributes",e)),n.on("change:text",(t,e)=>this._renderer.markToSync("text",e)),n.on("change:isReadOnly",()=>this.change(i)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const o of this._observers.values())o.observe(t,e)}detachDomRoot(t){const e=this.domRoots.get(t);Array.from(e.attributes).forEach(({name:t})=>e.removeAttribute(t));const n=this._initialDomRootAttributes.get(e);for(const r in n)e.setAttribute(r,n[r]);this.domRoots.delete(t),this.domConverter.unbindDomElement(e)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);for(const[n,r]of this.domRoots)e.observe(r,n);return e.enable(),e}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection(){const t=this.document.selection.getFirstRange();t&&No({target:this.domConverter.viewRangeToDom(t),viewportOffset:20})}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new a.a("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const e=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e}catch(t){a.a.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,e){return Zn._createAt(t,e)}createPositionAfter(t){return Zn._createAfter(t)}createPositionBefore(t){return Zn._createBefore(t)}createRange(t,e){return new tr(t,e)}createRangeOn(t){return tr._createOn(t)}createRangeIn(t){return tr._createIn(t)}createSelection(t,e,n){return new rr(t,e,n)}_disableRendering(t){this._renderingDisabled=t,0==t&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}Pt(zo,Et);class Ko{constructor(t){this.parent=null,this._attrs=bn(t)}get index(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new a.a("model-node-not-found-in-parent",this);return t}get startOffset(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new a.a("model-node-not-found-in-parent",this);return t}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),r=t.getAncestors(e);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),r=dn(e,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return e[r]<n[r]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}is(t){return"node"===t||"model:node"===t}_clone(){return new Ko(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=bn(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}class Ho extends Ko{constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}is(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new Ho(this.data,this.getAttributes())}static fromJSON(t){return new Ho(t.data,t.attributes)}}class Wo{constructor(t,e,n){if(this.textNode=t,e<0||e>t.offsetSize)throw new a.a("model-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.offsetSize)throw new a.a("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}is(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class Go{constructor(t){this._nodes=[],t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((t,e)=>t+e.offsetSize,0)}getNode(t){return this._nodes[t]||null}getNodeIndex(t){const e=this._nodes.indexOf(t);return-1==e?null:e}getNodeStartOffset(t){const e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce((t,e)=>t+e.offsetSize,0)}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new a.a("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){let e=0;for(const n of this._nodes){if(t>=e&&t<e+n.offsetSize)return this.getNodeIndex(n);e+=n.offsetSize}if(e!=t)throw new a.a("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.length}_insertNodes(t,e){for(const n of e)if(!(n instanceof Ko))throw new a.a("model-nodelist-insertnodes-not-node",this);this._nodes.splice(t,0,...e)}_removeNodes(t,e=1){return this._nodes.splice(t,e)}toJSON(){return this._nodes.map(t=>t.toJSON())}}class $o extends Ko{constructor(t,e,n){super(e),this.name=t,this._children=new Go,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(t,e=null){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}findAncestor(t,e={includeSelf:!1}){let n=e.includeSelf?this:this.parent;for(;n;){if(n.name===t)return n;n=n.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?Array.from(this._children).map(t=>t._clone(!0)):null;return new $o(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){return"string"==typeof t?[new Ho(t)]:(rn(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new Ho(t):t instanceof Wo?new Ho(t.data,t.getAttributes()):t))}(e);for(const r of n)null!==r.parent&&r._remove(),r.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const r of n)r.parent=null;return n}static fromJSON(t){let e=null;if(t.children){e=[];for(const n of t.children)e.push(n.name?$o.fromJSON(n):Ho.fromJSON(n))}return new $o(t.name,t.attributes,e)}}class Qo{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new a.a("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new a.a("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,this.position=t.startPosition?t.startPosition.clone():Jo._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(t){let e,n,r,i;do{r=this.position,i=this._visitedParent,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=r,this._visitedParent=i)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};const r=e.parent,i=Xo(e,r),o=i||Zo(e,r,i);if(o instanceof $o)return this.shallow?e.offset++:(e.path.push(0),this._visitedParent=o),this.position=e,Yo("elementStart",o,t,e,1);if(o instanceof Ho){let r;if(this.singleCharacters)r=1;else{let t=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),r=t-e.offset}const i=new Wo(o,e.offset-o.startOffset,r);return e.offset+=r,this.position=e,Yo("text",i,t,e,r)}return e.path.pop(),e.offset++,this.position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Yo("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};const r=e.parent,i=Xo(e,r),o=i||ts(e,r,i);if(o instanceof $o)return e.offset--,this.shallow?(this.position=e,Yo("elementStart",o,t,e,1)):(e.path.push(o.maxOffset),this.position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():Yo("elementEnd",o,t,e));if(o instanceof Ho){let r;if(this.singleCharacters)r=1;else{let t=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),r=e.offset-t}const i=new Wo(o,e.offset-o.startOffset-r,r);return e.offset-=r,this.position=e,Yo("text",i,t,e,r)}return e.path.pop(),this.position=e,this._visitedParent=n.parent,Yo("elementStart",n,t,e,1)}}function Yo(t,e,n,r,i){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:r,length:i}}}class Jo{constructor(t,e,n="toNone"){if(!t.is("element")&&!t.is("documentFragment"))throw new a.a("model-position-root-invalid",t);if(!(e instanceof Array)||0===e.length)throw new a.a("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChild(t.offsetToIndex(this.path[e])),!t)throw new a.a("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new a.a("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Xo(this,this.parent)}get nodeAfter(){const t=this.parent;return Zo(this,t,Xo(this,t))}get nodeBefore(){const t=this.parent;return ts(this,t,Xo(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=dn(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new Qo(e);return n.skip(t),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=dn(this.path,t.path),n="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n)}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let r=0;for(;e[r]==n[r]&&e[r];)r++;return 0===r?null:e[r-1]}getShiftedBy(t){const e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){let e=null,n=null;switch(this.compareWith(t)){case"same":return!0;case"before":e=Jo._createAt(this),n=Jo._createAt(t);break;case"after":e=Jo._createAt(t),n=Jo._createAt(this);break;default:return!1}let r=e.parent;for(;e.path.length+n.path.length;){if(e.isEqual(n))return!0;if(e.path.length>n.path.length){if(e.offset!==r.maxOffset)return!1;e.path=e.path.slice(0,-1),r=r.parent,e.offset++}else{if(0!==n.offset)return!1;n.path=n.path.slice(0,-1)}}}is(t){return"position"===t||"model:position"===t}hasSameParentAs(t){return this.root===t.root&&"same"==dn(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Jo._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let n;return e.containsPosition(this)||e.start.isEqual(this)?(n=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(n=n._getTransformedByDeletion(t.deletionPosition,1))):n=this.isEqual(t.deletionPosition)?Jo._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),n}_getTransformedByDeletion(t,e){const n=Jo._createAt(this);if(this.root!=t.root)return n;if("same"==dn(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;n.offset-=e}}else if("prefix"==dn(t.getParentPath(),this.getParentPath())){const r=t.path.length-1;if(t.offset<=this.path[r]){if(t.offset+e>this.path[r])return null;n.path[r]-=e}}return n}_getTransformedByInsertion(t,e){const n=Jo._createAt(this);if(this.root!=t.root)return n;if("same"==dn(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=e);else if("prefix"==dn(t.getParentPath(),this.getParentPath())){const r=t.path.length-1;t.offset<=this.path[r]&&(n.path[r]+=e)}return n}_getTransformedByMove(t,e,n){if(e=e._getTransformedByDeletion(t,n),t.isEqual(e))return Jo._createAt(this);const r=this._getTransformedByDeletion(t,n);return null===r||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):r._getTransformedByInsertion(e,n)}_getCombined(t,e){const n=t.path.length-1,r=Jo._createAt(e);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-t.offset,r.path=[...r.path,...this.path.slice(n+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,n="toNone"){if(t instanceof Jo)return new Jo(t.root,t.path,t.stickiness);{const r=t;if("end"==e)e=r.maxOffset;else{if("before"==e)return this._createBefore(r,n);if("after"==e)return this._createAfter(r,n);if(0!==e&&!e)throw new a.a("model-createpositionat-offset-required",[this,t])}if(!r.is("element")&&!r.is("documentFragment"))throw new a.a("model-position-parent-incorrect",[this,t]);const i=r.getPath();return i.push(e),new this(r.root,i,n)}}static _createAfter(t,e){if(!t.parent)throw new a.a("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new a.a("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const n=new Jo(e.graveyard,t.path);return n.stickiness=t.stickiness,n}if(!e.getRoot(t.root))throw new a.a("model-position-fromjson-no-root",e,{rootName:t.root});return new Jo(e.getRoot(t.root),t.path,t.stickiness)}}function Xo(t,e){const n=e.getChild(e.offsetToIndex(t.offset));return n&&n.is("$text")&&n.startOffset<t.offset?n:null}function Zo(t,e,n){return null!==n?null:e.getChild(e.offsetToIndex(t.offset))}function ts(t,e,n){return null!==n?null:e.getChild(e.offsetToIndex(t.offset)-1)}class es{constructor(t,e=null){this.start=Jo._createAt(t),this.end=Jo._createAt(e||t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Qo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==dn(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&r}containsItem(t){const e=Jo._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}is(t){return"range"===t||"model:range"===t}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new es(this.start,t.start)),this.containsPosition(t.end)&&e.push(new es(t.end,this.end))):e.push(new es(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new es(e,n)}return null}getJoined(t,e=!1){let n=this.isIntersecting(t);if(n||(n=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!n)return null;let r=this.start,i=this.end;return t.start.isBefore(r)&&(r=t.start),t.end.isAfter(i)&&(i=t.end),new es(r,i)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,n=Jo._createAt(this.start);let r=n.parent;for(;n.path.length>e+1;){const e=r.maxOffset-n.offset;0!==e&&t.push(new es(n,n.getShiftedBy(e))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){const e=this.end.path[n.path.length-1],r=e-n.offset;0!==r&&t.push(new es(n,n.getShiftedBy(r))),n.offset=e,n.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new Qo(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Qo(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new Qo(t);yield e.position;for(const n of e)yield n.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new es(this.start,this.end)]}getTransformedByOperations(t){const e=[new es(this.start,this.end)];for(const n of t)for(let t=0;t<e.length;t++){const r=e[t].getTransformedByOperation(n);e.splice(t,1,...r),t+=r.length-1}for(let n=0;n<e.length;n++){const t=e[n];for(let r=n+1;r<e.length;r++){const n=e[r];(t.containsRange(n)||n.containsRange(t)||t.isEqual(n))&&e.splice(r,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),e.root!=n.root&&(n=this.end.getShiftedBy(-1)),new es(e,n)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new es(this.start);let e=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return e.root!=n.root&&(n=this.end.getShiftedBy(-1)),e.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(e=Jo._createAt(n),e.offset=0):(t.deletionPosition.isEqual(e)||(n=t.deletionPosition),e=t.targetPosition),new es(e,n)):new es(e,n)}_getTransformedByInsertion(t,e,n=!1){if(n&&this.containsPosition(t))return[new es(this.start,t),new es(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const n=new es(this.start,this.end);return n.start=n.start._getTransformedByInsertion(t,e),n.end=n.end._getTransformedByInsertion(t,e),[n]}}_getTransformedByMove(t,e,n,r=!1){if(this.isCollapsed){const r=this.start._getTransformedByMove(t,e,n);return[new es(r)]}const i=es._createFromPositionAndShift(t,n),o=e._getTransformedByDeletion(t,n);if(this.containsPosition(e)&&!r&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const r=this.start._getTransformedByMove(t,e,n),i=this.end._getTransformedByMove(t,e,n);return[new es(r,i)]}let s;const a=this.getDifference(i);let c=null;const u=this.getIntersection(i);if(1==a.length?c=new es(a[0].start._getTransformedByDeletion(t,n),a[0].end._getTransformedByDeletion(t,n)):2==a.length&&(c=new es(this.start,this.end._getTransformedByDeletion(t,n))),s=c?c._getTransformedByInsertion(o,n,null!==u||r):[],u){const t=new es(u.start._getCombined(i.start,o),u.end._getCombined(i.start,o));2==s.length?s.splice(1,0,t):s.push(t)}return s}_getTransformedByDeletion(t,e){let n=this.start._getTransformedByDeletion(t,e),r=this.end._getTransformedByDeletion(t,e);return null==n&&null==r?null:(null==n&&(n=t),null==r&&(r=t),new es(n,r))}static _createFromPositionAndShift(t,e){const n=t,r=t.getShiftedBy(e);return e>0?new this(n,r):new this(r,n)}static _createIn(t){return new this(Jo._createAt(t,0),Jo._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Jo._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new a.a("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const n=t.indexOf(e),r=new this(e.start,e.end);if(n>0)for(let i=n-1;t[i].end.isEqual(r.start);i++)r.start=Jo._createAt(t[i].start);for(let i=n+1;i<t.length&&t[i].start.isEqual(r.end);i++)r.end=Jo._createAt(t[i].end);return r}static fromJSON(t,e){return new this(Jo.fromJSON(t.start,e),Jo.fromJSON(t.end,e))}}class ns{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(t,e)=>{if(e.viewPosition)return;const n=this._modelToViewMapping.get(e.modelPosition.parent);e.viewPosition=this.findPositionIn(n,e.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,e)=>{if(e.modelPosition)return;const n=this.findMappedViewAncestor(e.viewPosition),r=this._viewToModelMapping.get(n),i=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=Jo._createAt(r,i)},{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}unbindViewElement(t){const e=this.toModelElement(t);if(this._viewToModelMapping.delete(t),this._elementToMarkerNames.has(t))for(const n of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(n);this._modelToViewMapping.get(e)==t&&this._modelToViewMapping.delete(e)}unbindModelElement(t){const e=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping.delete(e)}bindElementToMarker(t,e){const n=this._markerNameToElements.get(e)||new Set;n.add(t);const r=this._elementToMarkerNames.get(t)||new Set;r.add(e),this._markerNameToElements.set(e,n),this._elementToMarkerNames.set(t,r)}unbindElementFromMarkerName(t,e){const n=this._markerNameToElements.get(e);n&&(n.delete(t),0==n.size&&this._markerNameToElements.delete(e));const r=this._elementToMarkerNames.get(t);r&&(r.delete(e),0==r.size&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new es(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new tr(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(t,e={isPhantom:!1}){const n={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(t){const e=this._markerNameToElements.get(t);if(!e)return null;const n=new Set;for(const r of e)if(r.is("attributeElement"))for(const t of r.getElementsWithSameId())n.add(t);else n.add(r);return n}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}findMappedViewAncestor(t){let e=t.parent;for(;!this._viewToModelMapping.has(e);)e=e.parent;return e}_toModelOffset(t,e,n){if(n!=t)return this._toModelOffset(t.parent,t.index,n)+this._toModelOffset(t,e,t);if(t.is("$text"))return e;let r=0;for(let i=0;i<e;i++)r+=this.getModelLength(t.getChild(i));return r}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{let e=0;for(const n of t.getChildren())e+=this.getModelLength(n);return e}}findPositionIn(t,e){let n,r=0,i=0,o=0;if(t.is("$text"))return new Zn(t,e);for(;i<e;)n=t.getChild(o),r=this.getModelLength(n),i+=r,o++;return i==e?this._moveViewPositionToTextNode(new Zn(t,o)):this.findPositionIn(n,e-(i-r))}_moveViewPositionToTextNode(t){const e=t.nodeBefore,n=t.nodeAfter;return e instanceof gn?new Zn(e,e.data.length):n instanceof gn?new Zn(n,0):t}}Pt(ns,l);class rs{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(t,e){e=is(e),t instanceof Wo&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=is(e),t instanceof Wo&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0)}test(t,e){e=is(e),t instanceof Wo&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(void 0===n)return null;const r=n.get(e);return void 0===r?null:r}revert(t,e){e=is(e),t instanceof Wo&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return!1===n?(this._consumable.get(t).set(e,!0),!0):!0!==n&&null}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const r=n.get(t.endOffset);r&&(e=r.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t.startOffset,t.endOffset,t.parent)),e}_addSymbolForTextProxy(t,e,n){const r=Symbol("textProxySymbol");let i,o;return i=this._textProxyRegistry.get(t),i||(i=new Map,this._textProxyRegistry.set(t,i)),o=i.get(e),o||(o=new Map,i.set(e,o)),o.set(n,r),r}}function is(t){const e=t.split(":");return"addMarker"==e[0]||"removeMarker"==e[0]?t:e.length>1?e[0]+":"+e[1]:e[0]}class os{constructor(t){this.conversionApi=Object.assign({dispatcher:this},t),this._reconversionEventsMapping=new Map}convertChanges(t,e,n){for(const i of t.getMarkersToRemove())this.convertMarkerRemove(i.name,i.range,n);const r=this._mapChangesWithAutomaticReconversion(t);for(const i of r)"insert"===i.type?this.convertInsert(es._createFromPositionAndShift(i.position,i.length),n):"remove"===i.type?this.convertRemove(i.position,i.length,i.name,n):"reconvert"===i.type?this.reconvertElement(i.element,n):this.convertAttribute(i.range,i.attributeKey,i.attributeOldValue,i.attributeNewValue,n);for(const i of this.conversionApi.mapper.flushUnboundMarkerNames()){const t=e.get(i).getRange();this.convertMarkerRemove(i,t,n),this.convertMarkerAdd(i,t,n)}for(const i of t.getMarkersToAdd())this.convertMarkerAdd(i.name,i.range,n)}convertInsert(t,e){this.conversionApi.writer=e,this.conversionApi.consumable=this._createInsertConsumable(t);for(const n of Array.from(t).map(as))this._convertInsertWithAttributes(n);this._clearConversionApi()}convertRemove(t,e,n,r){this.conversionApi.writer=r,this.fire("remove:"+n,{position:t,length:e},this.conversionApi),this._clearConversionApi()}convertAttribute(t,e,n,r,i){this.conversionApi.writer=i,this.conversionApi.consumable=this._createConsumableForRange(t,"attribute:"+e);for(const o of t){const t=o.item,i=es._createFromPositionAndShift(o.previousPosition,o.length);this._testAndFire("attribute:"+e,{item:t,range:i,attributeKey:e,attributeOldValue:n,attributeNewValue:r})}this._clearConversionApi()}reconvertElement(t,e){const n=es._createOn(t);this.conversionApi.writer=e,this.conversionApi.consumable=this._createInsertConsumable(n);const r=this.conversionApi.mapper,i=r.toViewElement(t);e.remove(i),this._convertInsertWithAttributes({item:t,range:n});const o=r.toViewElement(t);for(const s of es._createIn(t)){const{item:t}=s,n=cs(t,r);n?n.root!==o.root&&e.move(e.createRangeOn(n),r.toViewPosition(Jo._createBefore(t))):this._convertInsertWithAttributes(as(s))}r.unbindViewElement(i),this._clearConversionApi()}convertSelection(t,e,n){const r=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(t,r),this.fire("selection",{selection:t},this.conversionApi),t.isCollapsed){for(const e of r){const n=e.getRange();if(!ss(t.getFirstPosition(),e,this.conversionApi.mapper))continue;const r={item:t,markerName:e.name,markerRange:n};this.conversionApi.consumable.test(t,"addMarker:"+e.name)&&this.fire("addMarker:"+e.name,r,this.conversionApi)}for(const e of t.getAttributeKeys()){const n={item:t,range:t.getFirstRange(),attributeKey:e,attributeOldValue:null,attributeNewValue:t.getAttribute(e)};this.conversionApi.consumable.test(t,"attribute:"+n.attributeKey)&&this.fire("attribute:"+n.attributeKey+":$text",n,this.conversionApi)}this._clearConversionApi()}else this._clearConversionApi()}convertMarkerAdd(t,e,n){if("$graveyard"==e.root.rootName)return;this.conversionApi.writer=n;const r="addMarker:"+t,i=new rs;if(i.add(e,r),this.conversionApi.consumable=i,this.fire(r,{markerName:t,markerRange:e},this.conversionApi),i.test(e,r)){this.conversionApi.consumable=this._createConsumableForRange(e,r);for(const n of e.getItems()){if(!this.conversionApi.consumable.test(n,r))continue;const i={item:n,range:es._createOn(n),markerName:t,markerRange:e};this.fire(r,i,this.conversionApi)}this._clearConversionApi()}else this._clearConversionApi()}convertMarkerRemove(t,e,n){"$graveyard"!=e.root.rootName&&(this.conversionApi.writer=n,this.fire("removeMarker:"+t,{markerName:t,markerRange:e},this.conversionApi),this._clearConversionApi())}_mapReconversionTriggerEvent(t,e){this._reconversionEventsMapping.set(e,t)}_createInsertConsumable(t){const e=new rs;for(const n of t){const t=n.item;e.add(t,"insert");for(const n of t.getAttributeKeys())e.add(t,"attribute:"+n)}return e}_createConsumableForRange(t,e){const n=new rs;for(const r of t.getItems())n.add(r,e);return n}_createSelectionConsumable(t,e){const n=new rs;n.add(t,"selection");for(const r of e)n.add(t,"addMarker:"+r.name);for(const r of t.getAttributeKeys())n.add(t,"attribute:"+r);return n}_testAndFire(t,e){this.conversionApi.consumable.test(e.item,t)&&this.fire(function(t,e){return`${t}:${e.item.name||"$text"}`}(t,e),e,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}_convertInsertWithAttributes(t){this._testAndFire("insert",t);for(const e of t.item.getAttributeKeys())t.attributeKey=e,t.attributeOldValue=null,t.attributeNewValue=t.item.getAttribute(e),this._testAndFire("attribute:"+e,t)}_mapChangesWithAutomaticReconversion(t){const e=new Set,n=[];for(const r of t.getChanges()){const t=r.position||r.range.start,i=t.parent;if(Xo(t,i)){n.push(r);continue}const o="attribute"===r.type?Zo(t,i,null):i;if(o.is("$text")){n.push(r);continue}let s;if(s="attribute"===r.type?`attribute:${r.attributeKey}:${o.name}`:`${r.type}:${r.name}`,this._isReconvertTriggerEvent(s,o.name)){if(e.has(o))continue;e.add(o),n.push({type:"reconvert",element:o})}else n.push(r)}return n}_isReconvertTriggerEvent(t,e){return this._reconversionEventsMapping.get(t)===e}}function ss(t,e,n){const r=e.getRange(),i=Array.from(t.getAncestors());return i.shift(),i.reverse(),!i.some(t=>{if(r.containsItem(t))return!!n.toViewElement(t).getCustomProperty("addHighlight")})}function as(t){return{item:t.item,range:es._createFromPositionAndShift(t.previousPosition,t.length)}}function cs(t,e){if(t.is("textProxy")){const n=e.toViewPosition(Jo._createBefore(t)).parent;return n.is("$text")?n:null}return e.toViewElement(t)}Pt(os,l);class us{constructor(t,e,n){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,t&&this.setTo(t,e,n)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const r of t._ranges)if(e.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new es(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new es(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new es(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(t,e,n){if(null===t)this._setRanges([]);else if(t instanceof us)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof es)this._setRanges([t],!!e&&!!e.backward);else if(t instanceof Jo)this._setRanges([new es(t)]);else if(t instanceof Ko){const r=!!n&&!!n.backward;let i;if("in"==e)i=es._createIn(t);else if("on"==e)i=es._createOn(t);else{if(void 0===e)throw new a.a("model-selection-setto-required-second-parameter",[this,t]);i=new es(Jo._createAt(t,e))}this._setRanges([i],r)}else{if(!rn(t))throw new a.a("model-selection-setto-not-selectable",[this,t]);this._setRanges(t,e&&!!e.backward)}}_setRanges(t,e=!1){const n=(t=Array.from(t)).some(e=>{if(!(e instanceof es))throw new a.a("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});if(t.length!==this._ranges.length||n){this._removeAllRanges();for(const e of t)this._pushRange(e);this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0})}}setFocus(t,e){if(null===this.anchor)throw new a.a("model-selection-setfocus-no-ranges",[this,t]);const n=Jo._createAt(t,e);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(r)?(this._pushRange(new es(n,r)),this._lastRangeBackward=!0):(this._pushRange(new es(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}is(t){return"selection"===t||"model:selection"===t}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const n=ds(e.start,t);n&&fs(n,e)&&(yield n);for(const i of e.getWalker()){const n=i.item;"elementEnd"==i.type&&hs(n,t,e)&&(yield n)}const r=ds(e.end,t);r&&!e.end.isTouching(Jo._createAt(r,0))&&fs(r,e)&&(yield r)}}containsEntireContent(t=this.anchor.root){const e=Jo._createAt(t,0),n=Jo._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new es(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new a.a("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function ls(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&t.parent)}function hs(t,e,n){return ls(t,e)&&fs(t,n)}function ds(t,e){const n=t.parent.root.document.model.schema,r=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const o=r.find(t=>!i&&(i=n.isLimit(t),!i&&ls(t,e)));return r.forEach(t=>e.add(t)),o}function fs(t,e){const n=function(t){const e=t.root.document.model.schema;let n=t.parent;for(;n;){if(e.isBlock(n))return n;n=n.parent}}(t);return!n||!e.containsRange(es._createOn(n),!0)}Pt(us,l);class ps extends es{constructor(t,e){super(t,e),gs.call(this)}detach(){this.stopListening()}is(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t}toRange(){return new es(this.start,this.end)}static fromRange(t){return new ps(t.start,t.end)}}function gs(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&ms.call(this,n)},{priority:"low"})}function ms(t){const e=this.getTransformedByOperation(t),n=es._createFromRanges(e),r=!n.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let o=null;if(r){"$graveyard"==n.root.rootName&&(o="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",e,{deletionPosition:o})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:o})}Pt(ps,l);const bs="selection:";class vs{constructor(t){this._selection=new _s(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}is(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(t,e,n){this._selection.setTo(t,e,n)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return bs+t}static _isStoreAttributeKey(t){return t.startsWith(bs)}}Pt(vs,l);class _s extends us{constructor(t){super(),this.markers=new on({idProperty:"name"}),this._model=t.model,this._document=t,this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this.listenTo(this._model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{for(const t of this.getRanges())if(!this._document._validateSelectionRange(t))throw new a.a("document-selection-wrong-position",this,{range:t})}),this.listenTo(this._model.markers,"update",(t,e,n,r)=>{this._updateMarker(e,r)}),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const n=t.document.differ;for(const r of n.getChanges()){if("insert"!=r.type)continue;const n=r.position.parent;r.length===n.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(n.getAttributeKeys()).filter(t=>t.startsWith(bs));for(const r of e)t.removeAttribute(r,n)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(t,e,n){super.setTo(t,e,n),this._updateAttributes(!0),this._updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this._updateMarkers()}setAttribute(t,e){this._setAttribute(t,e)&&this.fire("change:attribute",{attributeKeys:[t],directChange:!0})}removeAttribute(t){this._removeAttribute(t)&&this.fire("change:attribute",{attributeKeys:[t],directChange:!0})}overrideGravity(){const t=o();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new a.a("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this._updateMarkers()}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=ps.fromRange(t);return e.on("change:range",(t,n,r)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}_updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const r of this._model.markers){const e=r.name.split(":",1)[0];if(!this._observedMarkers.has(e))continue;const n=r.getRange();for(const i of this.getRanges())n.containsRange(i,!i.isCollapsed)&&t.push(r)}const n=Array.from(this.markers);for(const r of t)this.markers.has(r)||(this.markers.add(r),e=!0);for(const r of Array.from(this.markers))t.includes(r)||(this.markers.remove(r),e=!0);e&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(t,e){const n=t.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let r=!1;const i=Array.from(this.markers),o=this.markers.has(t);if(e){let n=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){n=!0;break}n&&!o?(this.markers.add(t),r=!0):!n&&o&&(this.markers.remove(t),r=!0)}else o&&(this.markers.remove(t),r=!0);r&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(t){const e=bn(this._getSurroundingAttributes()),n=bn(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[i,o]of this._attributePriority)"low"==o&&(this._attrs.delete(i),this._attributePriority.delete(i));this._setAttributesTo(e);const r=[];for(const[i,o]of this.getAttributes())n.has(i)&&n.get(i)===o||r.push(i);for(const[i]of n)this.hasAttribute(i)||r.push(i);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(t,e,n=!0){const r=n?"normal":"low";return("low"!=r||"normal"!=this._attributePriority.get(t))&&super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,r),!0)}_removeAttribute(t,e=!0){const n=e?"normal":"low";return!("low"==n&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,n),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[n,r]of this.getAttributes())t.get(n)!==r&&this._removeAttribute(n,!1);for(const[n,r]of t)this._setAttribute(n,r,!1)&&e.add(n);return e}*_getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(bs)){const n=e.substr(bs.length);yield[n,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;let n=null;if(this.isCollapsed){const r=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(n=ys(r)),n||(n=ys(i)),!this.isGravityOverridden&&!n){let t=r;for(;t&&!e.isInline(t)&&!n;)t=t.previousSibling,n=ys(t)}if(!n){let t=i;for(;t&&!e.isInline(t)&&!n;)t=t.nextSibling,n=ys(t)}n||(n=this._getStoredAttributes())}else{const t=this.getFirstRange();for(const r of t){if(r.item.is("element")&&e.isObject(r.item))break;if("text"==r.type){n=r.item.getAttributes();break}}}return n}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function ys(t){return t instanceof Wo||t instanceof Ho?t.getAttributes():null}class ws{constructor(t){this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}var ks=function(t){return Je(t,5)};class Cs extends ws{elementToElement(t){return this.add(function(t){return(t=ks(t)).view=Os(t.view,"container"),e=>{if(e.on("insert:"+t.model,function(t){return(e,n,r)=>{const i=t(n.item,r);if(!i)return;if(!r.consumable.consume(n.item,"insert"))return;const o=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,i),r.writer.insert(o,i)}}(t.view),{priority:t.converterPriority||"normal"}),t.triggerBy){if(t.triggerBy.attributes)for(const n of t.triggerBy.attributes)e._mapReconversionTriggerEvent(t.model,`attribute:${n}:${t.model}`);if(t.triggerBy.children)for(const n of t.triggerBy.children)e._mapReconversionTriggerEvent(t.model,"insert:"+n),e._mapReconversionTriggerEvent(t.model,"remove:"+n)}}}(t))}attributeToElement(t){return this.add(function(t){let e="attribute:"+((t=ks(t)).model.key?t.model.key:t.model);if(t.model.name&&(e+=":"+t.model.name),t.model.values)for(const r of t.model.values)t.view[r]=Os(t.view[r],"attribute");else t.view=Os(t.view,"attribute");const n=xs(t);return r=>{r.on(e,function(t){return(e,n,r)=>{const i=t(n.attributeOldValue,r),o=t(n.attributeNewValue,r);if(!i&&!o)return;if(!r.consumable.consume(n.item,e.name))return;const s=r.writer;if(n.item instanceof us||n.item instanceof vs)s.wrap(s.document.selection.getFirstRange(),o);else{let t=r.mapper.toViewRange(n.range);null!==n.attributeOldValue&&i&&(t=s.unwrap(t,i)),null!==n.attributeNewValue&&o&&s.wrap(t,o)}}}(n),{priority:t.converterPriority||"normal"})}}(t))}attributeToAttribute(t){return this.add(function(t){let e="attribute:"+((t=ks(t)).model.key?t.model.key:t.model);if(t.model.name&&(e+=":"+t.model.name),t.model.values)for(const r of t.model.values)t.view[r]=Ss(t.view[r]);else t.view=Ss(t.view);const n=xs(t);return r=>{r.on(e,function(t){return(e,n,r)=>{const i=t(n.attributeOldValue,r),o=t(n.attributeNewValue,r);if(!i&&!o)return;if(!r.consumable.consume(n.item,e.name))return;const s=r.mapper.toViewElement(n.item),c=r.writer;if(!s)throw new a.a("conversion-attribute-to-attribute-on-text",[n,r]);if(null!==n.attributeOldValue&&i)if("class"==i.key){const t=an(i.value);for(const e of t)c.removeClass(e,s)}else if("style"==i.key){const t=Object.keys(i.value);for(const e of t)c.removeStyle(e,s)}else c.removeAttribute(i.key,s);if(null!==n.attributeNewValue&&o)if("class"==o.key){const t=an(o.value);for(const e of t)c.addClass(e,s)}else if("style"==o.key){const t=Object.keys(o.value);for(const e of t)c.setStyle(e,o.value[e],s)}else c.setAttribute(o.key,o.value,s)}}(n),{priority:t.converterPriority||"normal"})}}(t))}markerToElement(t){return this.add(function(t){return(t=ks(t)).view=Os(t.view,"ui"),e=>{e.on("addMarker:"+t.model,function(t){return(e,n,r)=>{n.isOpening=!0;const i=t(n,r);n.isOpening=!1;const o=t(n,r);if(!i||!o)return;const s=n.markerRange;if(s.isCollapsed&&!r.consumable.consume(s,e.name))return;for(const t of s)if(!r.consumable.consume(t.item,e.name))return;const a=r.mapper,c=r.writer;c.insert(a.toViewPosition(s.start),i),r.mapper.bindElementToMarker(i,n.markerName),s.isCollapsed||(c.insert(a.toViewPosition(s.end),o),r.mapper.bindElementToMarker(o,n.markerName)),e.stop()}}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(t,e,n)=>{const r=n.mapper.markerNameToElements(e.markerName);if(r){for(const t of r)n.mapper.unbindElementFromMarkerName(t,e.markerName),n.writer.clear(n.writer.createRangeOn(t),t);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}},{priority:t.converterPriority||"normal"})}}(t))}markerToHighlight(t){return this.add(function(t){return e=>{e.on("addMarker:"+t.model,function(t){return(e,n,r)=>{if(!n.item)return;if(!(n.item instanceof us||n.item instanceof vs||n.item.is("$textProxy")))return;const i=Ts(t,n,r);if(!i)return;if(!r.consumable.consume(n.item,e.name))return;const o=r.writer,s=As(o,i),a=o.document.selection;if(n.item instanceof us||n.item instanceof vs)o.wrap(a.getFirstRange(),s,a);else{const t=r.mapper.toViewRange(n.range),e=o.wrap(t,s);for(const i of e.getItems())if(i.is("attributeElement")&&i.isSimilar(s)){r.mapper.bindElementToMarker(i,n.markerName);break}}}}(t.view),{priority:t.converterPriority||"normal"}),e.on("addMarker:"+t.model,function(t){return(e,n,r)=>{if(!n.item)return;if(!(n.item instanceof $o))return;const i=Ts(t,n,r);if(!i)return;if(!r.consumable.test(n.item,e.name))return;const o=r.mapper.toViewElement(n.item);if(o&&o.getCustomProperty("addHighlight")){r.consumable.consume(n.item,e.name);for(const t of es._createIn(n.item))r.consumable.consume(t.item,e.name);o.getCustomProperty("addHighlight")(o,i,r.writer),r.mapper.bindElementToMarker(o,n.markerName)}}}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,function(t){return(e,n,r)=>{if(n.markerRange.isCollapsed)return;const i=Ts(t,n,r);if(!i)return;const o=As(r.writer,i),s=r.mapper.markerNameToElements(n.markerName);if(s){for(const t of s)r.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("attributeElement")?r.writer.unwrap(r.writer.createRangeOn(t),o):t.getCustomProperty("removeHighlight")(t,i.id,r.writer);r.writer.clearClonedElementsGroup(n.markerName),e.stop()}}}(t.view),{priority:t.converterPriority||"normal"})}}(t))}markerToData(t){return this.add(function(t){const e=(t=ks(t)).model;return t.view||(t.view=n=>({group:e,name:n.substr(t.model.length+1)})),n=>{n.on("addMarker:"+e,function(t){return(e,n,r)=>{const i=t(n.markerName,r);if(!i)return;const o=n.markerRange;r.consumable.consume(o,e.name)&&(Es(o,!1,r,n,i),Es(o,!0,r,n,i),e.stop())}}(t.view),{priority:t.converterPriority||"normal"}),n.on("removeMarker:"+e,function(t){return(e,n,r)=>{const i=t(n.markerName,r);if(!i)return;const o=r.mapper.markerNameToElements(n.markerName);if(o){for(const t of o)r.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("containerElement")?(s(`data-${i.group}-start-before`,t),s(`data-${i.group}-start-after`,t),s(`data-${i.group}-end-before`,t),s(`data-${i.group}-end-after`,t)):r.writer.clear(r.writer.createRangeOn(t),t);r.writer.clearClonedElementsGroup(n.markerName),e.stop()}function s(t,e){if(e.hasAttribute(t)){const n=new Set(e.getAttribute(t).split(","));n.delete(i.name),0==n.size?r.writer.removeAttribute(t,e):r.writer.setAttribute(t,Array.from(n).join(","),e)}}}}(t.view),{priority:t.converterPriority||"normal"})}}(t))}}function As(t,e){const n=t.createAttributeElement("span",e.attributes);return e.classes&&n._addClass(e.classes),"number"==typeof e.priority&&(n._priority=e.priority),n._id=e.id,n}function Es(t,e,n,r,i){const o=e?t.start:t.end,s=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(s||a){let t,o;e&&s||!e&&!a?(t=s,o=!0):(t=a,o=!1);const c=n.mapper.toViewElement(t);if(c)return void function(t,e,n,r,i,o){const s=`data-${o.group}-${e?"start":"end"}-${n?"before":"after"}`,a=t.hasAttribute(s)?t.getAttribute(s).split(","):[];a.unshift(o.name),r.writer.setAttribute(s,a.join(","),t),r.mapper.bindElementToMarker(t,i.markerName)}(c,e,o,n,r,i)}!function(t,e,n,r,i){const o=n.writer.createUIElement(`${i.group}-${e?"start":"end"}`,i.name?{name:i.name}:null);n.writer.insert(t,o),n.mapper.bindElementToMarker(o,r.markerName)}(n.mapper.toViewPosition(o),e,n,r,i)}function Os(t,e){return"function"==typeof t?t:(n,r)=>function(t,e,n){let r;"string"==typeof t&&(t={name:t});const i=e.writer,o=Object.assign({},t.attributes);if(r="container"==n?i.createContainerElement(t.name,o):"attribute"==n?i.createAttributeElement(t.name,o,{priority:t.priority||fr.DEFAULT_PRIORITY}):i.createUIElement(t.name,o),t.styles){const e=Object.keys(t.styles);for(const n of e)i.setStyle(n,t.styles[n],r)}if(t.classes){const e=t.classes;if("string"==typeof e)i.addClass(e,r);else for(const t of e)i.addClass(t,r)}return r}(t,r,e)}function xs(t){return t.model.values?(e,n)=>{const r=t.view[e];return r?r(e,n):null}:t.view}function Ss(t){return"string"==typeof t?e=>({key:t,value:e}):"object"==typeof t?t.value?()=>t:e=>({key:t.key,value:e}):t}function Ts(t,e,n){const r="function"==typeof t?t(e,n):t;return r?(r.priority||(r.priority=10),r.id||(r.id=e.markerName),r):null}function Is(t){const{schema:e,document:n}=t.model;for(const r of n.getRootNames()){const i=n.getRoot(r);if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return t.insertElement("paragraph",i),!0}return!1}function Ps(t,e,n){const r=n.createContext(t);return!!n.checkChild(r,"paragraph")&&!!n.checkChild(r.push("paragraph"),e)}function Ds(t,e){const n=e.createElement("paragraph");return e.insert(n,t),e.createPositionAt(n,0)}class Ns extends ws{elementToElement(t){return this.add(Rs(t))}elementToAttribute(t){return this.add(function(t){Fs(t=ks(t));const e=Ls(t,!1),n=js(t.view),r=n?"element:"+n:"element";return n=>{n.on(r,e,{priority:t.converterPriority||"low"})}}(t))}attributeToAttribute(t){return this.add(function(t){let e=null;("string"==typeof(t=ks(t)).view||t.view.key)&&(e=function(t){"string"==typeof t.view&&(t.view={key:t.view});const e=t.view.key;let n;return n="class"==e||"style"==e?{["class"==e?"classes":"styles"]:t.view.value}:{attributes:{[e]:void 0===t.view.value?/[\s\S]*/:t.view.value}},t.view.name&&(n.name=t.view.name),t.view=n,e}(t)),Fs(t,e);const n=Ls(t,!0);return e=>{e.on("element",n,{priority:t.converterPriority||"low"})}}(t))}elementToMarker(t){return this.add(function(t){return function(t){const e=t.model;t.model=(t,n)=>{const r="string"==typeof e?e:e(t,n);return n.writer.createElement("$marker",{"data-name":r})}}(t=ks(t)),Rs(t)}(t))}dataToMarker(t){return this.add(function(t){(t=ks(t)).model||(t.model=e=>e?t.view+":"+e:t.view);const e=Ms(Bs(t,"start")),n=Ms(Bs(t,"end"));return r=>{r.on("element:"+t.view+"-start",e,{priority:t.converterPriority||"normal"}),r.on("element:"+t.view+"-end",n,{priority:t.converterPriority||"normal"});const i=s.get("low"),o=s.get("highest"),a=s.get(t.converterPriority)/o;r.on("element",function(t){return(e,n,r)=>{const i="data-"+t.view;function o(e,i){for(const o of i){const i=t.model(o,r),s=r.writer.createElement("$marker",{"data-name":i});r.writer.insert(s,e),n.modelCursor=n.modelCursor.isEqual(e)?n.modelCursor.getShiftedBy(1):n.modelCursor._getTransformedByInsertion(e,1),n.modelRange=n.modelRange._getTransformedByInsertion(e,1)[0]}}(r.consumable.test(n.viewItem,{attributes:i+"-end-after"})||r.consumable.test(n.viewItem,{attributes:i+"-start-after"})||r.consumable.test(n.viewItem,{attributes:i+"-end-before"})||r.consumable.test(n.viewItem,{attributes:i+"-start-before"}))&&(n.modelRange||Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor)),r.consumable.consume(n.viewItem,{attributes:i+"-end-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-end-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-start-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-end-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-end-before").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-start-before").split(",")))}}(t),{priority:i+a})}}(t))}}function Rs(t){const e=Ms(t=ks(t)),n=js(t.view),r=n?"element:"+n:"element";return n=>{n.on(r,e,{priority:t.converterPriority||"normal"})}}function js(t){return"string"==typeof t?t:"object"==typeof t&&"string"==typeof t.name?t.name:null}function Ms(t){const e=new vn(t.view);return(n,r,i)=>{const o=e.match(r.viewItem);if(!o)return;const s=o.match;if(s.name=!0,!i.consumable.test(r.viewItem,s))return;const a=function(t,e,n){return t instanceof Function?t(e,n):n.writer.createElement(t)}(t.model,r.viewItem,i);a&&i.safeInsert(a,r.modelCursor)&&(i.consumable.consume(r.viewItem,s),i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r))}}function Fs(t,e=null){const n=null===e||(t=>t.getAttribute(e));t.model={key:"object"!=typeof t.model?t.model:t.model.key,value:"object"!=typeof t.model||void 0===t.model.value?n:t.model.value}}function Ls(t,e){const n=new vn(t.view);return(r,i,o)=>{const s=n.match(i.viewItem);if(!s)return;if(function(t,e){const n="function"==typeof t?t(e):t;return!("object"==typeof n&&!js(n)||n.classes||n.attributes||n.styles)}(t.view,i.viewItem)?s.match.name=!0:delete s.match.name,!o.consumable.test(i.viewItem,s.match))return;const a=t.model.key,c="function"==typeof t.model.value?t.model.value(i.viewItem,o):t.model.value;null!==c&&(i.modelRange||Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor)),function(t,e,n,r){let i=!1;for(const o of Array.from(t.getItems({shallow:n})))r.schema.checkAttribute(o,e.key)&&(i=!0,o.hasAttribute(e.key)||r.writer.setAttribute(e.key,e.value,o));return i}(i.modelRange,{key:a,value:c},e,o)&&o.consumable.consume(i.viewItem,s.match))}}function Bs(t,e){const n={};return n.view=t.view+"-"+e,n.model=(e,n)=>{const r=e.getAttribute("name"),i=t.model(r,n);return n.writer.createElement("$marker",{"data-name":i})},n}class Vs{constructor(t,e){this.model=t,this.view=new zo(e),this.mapper=new ns,this.downcastDispatcher=new os({mapper:this.mapper,schema:t.schema});const n=this.model.document,r=n.selection,i=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(t=>{this.downcastDispatcher.convertChanges(n.differ,i,t),this.downcastDispatcher.convertSelection(r,i,t)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(t,e){return(n,r)=>{const i=r.newSelection,o=[];for(const t of i.getRanges())o.push(e.toModelRange(t));const s=t.createSelection(o,{backward:i.isBackward});s.isEqual(t.document.selection)||t.change(t=>{t.setSelection(s)})}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",(t,e,n)=>{if(!n.consumable.consume(e.item,"insert"))return;const r=n.writer,i=n.mapper.toViewPosition(e.range.start),o=r.createText(e.item.data);r.insert(i,o)},{priority:"lowest"}),this.downcastDispatcher.on("remove",(t,e,n)=>{const r=n.mapper.toViewPosition(e.position),i=e.position.getShiftedBy(e.length),o=n.mapper.toViewPosition(i,{isPhantom:!0}),s=n.writer.createRange(r,o),a=n.writer.remove(s.getTrimmed());for(const c of n.writer.createRangeIn(a).getItems())n.mapper.unbindViewElement(c)},{priority:"low"}),this.downcastDispatcher.on("selection",(t,e,n)=>{const r=n.writer,i=r.document.selection;for(const o of i.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&n.writer.mergeAttributes(o.start);r.setSelection(null)},{priority:"high"}),this.downcastDispatcher.on("selection",(t,e,n)=>{const r=e.selection;if(r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=[];for(const o of r.getRanges()){const t=n.mapper.toViewRange(o);i.push(t)}n.writer.setSelection(i,{backward:r.isBackward})},{priority:"low"}),this.downcastDispatcher.on("selection",(t,e,n)=>{const r=e.selection;if(!r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=n.writer,o=r.getFirstPosition(),s=n.mapper.toViewPosition(o),a=i.breakAttributes(s);i.setSelection(a)},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(t=>{if("$graveyard"==t.rootName)return null;const e=new Jn(this.view.document,t.name);return e.rootName=t.rootName,this.mapper.bindElements(t,e),e})}destroy(){this.view.destroy(),this.stopListening()}}Pt(Vs,Et);class Us{constructor(){this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new a.a("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class qs{constructor(){this._consumables=new Map}add(t,e){let n;t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?n=this._consumables.get(t):(n=new zs(t),this._consumables.set(t,n)),n.add(e))}test(t,e){const n=this._consumables.get(t);return void 0===n?null:t.is("$text")||t.is("documentFragment")?n:n.test(e)}consume(t,e){return!!this.test(t,e)&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0)}revert(t,e){const n=this._consumables.get(t);void 0!==n&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(e))}static consumablesFromElement(t){const e={element:t,name:!0,attributes:[],classes:[],styles:[]},n=t.getAttributeKeys();for(const o of n)"style"!=o&&"class"!=o&&e.attributes.push(o);const r=t.getClassNames();for(const o of r)e.classes.push(o);const i=t.getStyleNames();for(const o of i)e.styles.push(o);return e}static createFrom(t,e){if(e||(e=new qs(t)),t.is("$text"))return e.add(t),e;t.is("element")&&e.add(t,qs.consumablesFromElement(t)),t.is("documentFragment")&&e.add(t);for(const n of t.getChildren())e=qs.createFrom(n,e);return e}}class zs{constructor(t){this.element=t,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(t){t.name&&(this._canConsumeName=!0);for(const e in this._consumables)e in t&&this._add(e,t[e])}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const e in this._consumables)if(e in t){const n=this._test(e,t[e]);if(!0!==n)return n}return!0}consume(t){t.name&&(this._canConsumeName=!1);for(const e in this._consumables)e in t&&this._consume(e,t[e])}revert(t){t.name&&(this._canConsumeName=!0);for(const e in this._consumables)e in t&&this._revert(e,t[e])}_add(t,e){const n=ot(e)?e:[e],r=this._consumables[t];for(const i of n){if("attributes"===t&&("class"===i||"style"===i))throw new a.a("viewconsumable-invalid-attribute",this);if(r.set(i,!0),"styles"===t)for(const t of this.element.document.stylesProcessor.getRelatedStyles(i))r.set(t,!0)}}_test(t,e){const n=ot(e)?e:[e],r=this._consumables[t];for(const i of n)if("attributes"!==t||"class"!==i&&"style"!==i){const t=r.get(i);if(void 0===t)return null;if(!t)return!1}else{const t="class"==i?"classes":"styles",e=this._test(t,[...this._consumables[t].keys()]);if(!0!==e)return e}return!0}_consume(t,e){const n=ot(e)?e:[e],r=this._consumables[t];for(const i of n)if("attributes"!==t||"class"!==i&&"style"!==i){if(r.set(i,!1),"styles"==t)for(const t of this.element.document.stylesProcessor.getRelatedStyles(i))r.set(t,!1)}else{const t="class"==i?"classes":"styles";this._consume(t,[...this._consumables[t].keys()])}}_revert(t,e){const n=ot(e)?e:[e],r=this._consumables[t];for(const i of n)if("attributes"!==t||"class"!==i&&"style"!==i)!1===r.get(i)&&r.set(i,!0);else{const t="class"==i?"classes":"styles";this._revert(t,[...this._consumables[t].keys()])}}}class Ks{constructor(){this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,e)=>{e[0]=new Hs(e[0])},{priority:"highest"}),this.on("checkChild",(t,e)=>{e[0]=new Hs(e[0]),e[1]=this.getDefinition(e[1])},{priority:"highest"})}register(t,e){if(this._sourceDefinitions[t])throw new a.a("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache()}extend(t,e){if(!this._sourceDefinitions[t])throw new a.a("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let e;return e="string"==typeof t?t:t.is&&(t.is("$text")||t.is("$textProxy"))?"$text":t.name,this.getDefinitions()[e]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const e=this.getDefinition(t);return!(!e||!e.isBlock)}isLimit(t){const e=this.getDefinition(t);return!(!e||!e.isLimit&&!e.isObject)}isObject(t){const e=this.getDefinition(t);return!!e&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent)}isInline(t){const e=this.getDefinition(t);return!(!e||!e.isInline)}isSelectable(t){const e=this.getDefinition(t);return!(!e||!e.isSelectable&&!e.isObject)}isContent(t){const e=this.getDefinition(t);return!(!e||!e.isContent&&!e.isObject)}checkChild(t,e){return!!e&&this._checkContextMatch(e,t)}checkAttribute(t,e){const n=this.getDefinition(t.last);return!!n&&n.allowAttributes.includes(e)}checkMerge(t,e=null){if(t instanceof Jo){const e=t.nodeBefore,n=t.nodeAfter;if(!(e instanceof $o))throw new a.a("schema-check-merge-no-element-before",this);if(!(n instanceof $o))throw new a.a("schema-check-merge-no-element-after",this);return this.checkMerge(e,n)}for(const n of e.getChildren())if(!this.checkChild(t,n))return!1;return!0}addChildCheck(t){this.on("checkChild",(e,[n,r])=>{if(!r)return;const i=t(n,r);"boolean"==typeof i&&(e.stop(),e.return=i)},{priority:"high"})}addAttributeCheck(t){this.on("checkAttribute",(e,[n,r])=>{const i=t(n,r);"boolean"==typeof i&&(e.stop(),e.return=i)},{priority:"high"})}setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e)}getAttributeProperties(t){return this._attributeProperties[t]||{}}getLimitElement(t){let e;for(e=t instanceof Jo?t.parent:(t instanceof es?[t]:Array.from(t.getRanges())).reduce((t,e)=>{const n=e.getCommonAncestor();return t?t.getCommonAncestor(n,{includeSelf:!0}):n},null);!this.isLimit(e)&&e.parent;)e=e.parent;return e}checkAttributeInSelection(t,e){if(t.isCollapsed){const n=[...t.getFirstPosition().getAncestors(),new Ho("",t.getAttributes())];return this.checkAttribute(n,e)}{const n=t.getRanges();for(const t of n)for(const n of t)if(this.checkAttribute(n.item,e))return!0}return!1}*getValidRanges(t,e){t=function*(t){for(const e of t)yield*e.getMinimalFlatRanges()}(t);for(const n of t)yield*this._getValidRangesForRange(n,e)}getNearestSelectionRange(t,e="both"){if(this.checkChild(t,"$text"))return new es(t);let n,r;const i=t.getAncestors().reverse().find(t=>this.isLimit(t))||t.root;"both"!=e&&"backward"!=e||(n=new Qo({boundaries:es._createIn(i),startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(r=new Qo({boundaries:es._createIn(i),startPosition:t}));for(const o of function*(t,e){let n=!1;for(;!n;){if(n=!0,t){const e=t.next();e.done||(n=!1,yield{walker:t,value:e.value})}if(e){const t=e.next();t.done||(n=!1,yield{walker:e,value:t.value})}}}(n,r)){const t=o.value;if(t.type==(o.walker==n?"elementEnd":"elementStart")&&this.isObject(t.item))return es._createOn(t.item);if(this.checkChild(t.nextPosition,"$text"))return new es(t.nextPosition)}return null}findAllowedParent(t,e){let n=t.parent;for(;n;){if(this.checkChild(n,e))return n;if(this.isLimit(n))return null;n=n.parent}return null}removeDisallowedAttributes(t,e){for(const n of t)if(n.is("$text"))ia(this,n,e);else{const t=es._createIn(n).getPositions();for(const n of t)ia(this,n.nodeBefore||n.parent,e)}}createContext(t){return new Hs(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},e=this._sourceDefinitions,n=Object.keys(e);for(const r of n)t[r]=Ws(e[r],r);for(const r of n)Gs(t,r);for(const r of n)$s(t,r);for(const r of n)Qs(t,r);for(const r of n)Ys(t,r),Js(t,r);for(const r of n)Xs(t,r),Zs(t,r),ta(t,r);this._compiledDefinitions=t}_checkContextMatch(t,e,n=e.length-1){const r=e.getItem(n);if(t.allowIn.includes(r.name)){if(0==n)return!0;{const t=this.getDefinition(r);return this._checkContextMatch(t,e,n-1)}}return!1}*_getValidRangesForRange(t,e){let n=t.start,r=t.start;for(const i of t.getItems({shallow:!0}))i.is("element")&&(yield*this._getValidRangesForRange(es._createIn(i),e)),this.checkAttribute(i,e)||(n.isEqual(r)||(yield new es(n,r)),n=Jo._createAfter(i)),r=Jo._createAfter(i);n.isEqual(r)||(yield new es(n,r))}}Pt(Ks,Et);class Hs{constructor(t){if(t instanceof Hs)return t;"string"==typeof t?t=[t]:Array.isArray(t)||(t=t.getAncestors({includeSelf:!0})),this._items=t.map(ra)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new Hs([t]);return e._items=[...this._items,...e._items],e}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function Ws(t,e){const n={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(t,e){for(const n of t){const t=Object.keys(n).filter(t=>t.startsWith("is"));for(const r of t)e[r]=n[r]}}(t,n),ea(t,n,"allowIn"),ea(t,n,"allowContentOf"),ea(t,n,"allowWhere"),ea(t,n,"allowAttributes"),ea(t,n,"allowAttributesOf"),ea(t,n,"allowChildren"),ea(t,n,"inheritTypesFrom"),function(t,e){for(const n of t){const t=n.inheritAllFrom;t&&(e.allowContentOf.push(t),e.allowWhere.push(t),e.allowAttributesOf.push(t),e.inheritTypesFrom.push(t))}}(t,n),n}function Gs(t,e){const n=t[e];for(const r of n.allowChildren){const n=t[r];n&&n.allowIn.push(e)}n.allowChildren.length=0}function $s(t,e){for(const n of t[e].allowContentOf)t[n]&&na(t,n).forEach(t=>{t.allowIn.push(e)});delete t[e].allowContentOf}function Qs(t,e){for(const n of t[e].allowWhere){const r=t[n];r&&t[e].allowIn.push(...r.allowIn)}delete t[e].allowWhere}function Ys(t,e){for(const n of t[e].allowAttributesOf){const r=t[n];r&&t[e].allowAttributes.push(...r.allowAttributes)}delete t[e].allowAttributesOf}function Js(t,e){const n=t[e];for(const r of n.inheritTypesFrom){const e=t[r];if(e){const t=Object.keys(e).filter(t=>t.startsWith("is"));for(const r of t)r in n||(n[r]=e[r])}}delete n.inheritTypesFrom}function Xs(t,e){const n=t[e],r=n.allowIn.filter(e=>t[e]);n.allowIn=Array.from(new Set(r))}function Zs(t,e){const n=t[e];for(const r of n.allowIn)t[r].allowChildren.push(e)}function ta(t,e){const n=t[e];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function ea(t,e,n){for(const r of t)"string"==typeof r[n]?e[n].push(r[n]):Array.isArray(r[n])&&e[n].push(...r[n])}function na(t,e){const n=t[e];return function(t){return Object.keys(t).map(e=>t[e])}(t).filter(t=>t.allowIn.includes(n.name))}function ra(t){return"string"==typeof t||t.is("documentFragment")?{name:"string"==typeof t?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute:e=>t.getAttribute(e)}}function ia(t,e,n){for(const r of e.getAttributeKeys())t.checkAttribute(e,r)||n.removeAttribute(r,e)}class oa{constructor(t={}){this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(t,e,n=["$root"]){this.fire("viewCleanup",t),this._modelCursor=function(t,e){let n;for(const r of new Hs(t)){const t={};for(const e of r.getAttributeKeys())t[e]=r.getAttribute(e);const i=e.createElement(r.name,t);n&&e.append(i,n),n=Jo._createAt(i,0)}return n}(n,e),this.conversionApi.writer=e,this.conversionApi.consumable=qs.createFrom(t),this.conversionApi.store={};const{modelRange:r}=this._convertItem(t,this._modelCursor),i=e.createDocumentFragment();if(r){this._removeEmptyElements();for(const t of Array.from(this._modelCursor.parent.getChildren()))e.append(t,i);i.markers=function(t,e){const n=new Set,r=new Map,i=es._createIn(t).getItems();for(const o of i)"$marker"==o.name&&n.add(o);for(const o of n){const t=o.getAttribute("data-name"),n=e.createPositionBefore(o);r.has(t)?r.get(t).end=n.clone():r.set(t,new es(n.clone())),e.remove(o)}return r}(i,e)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,i}_convertItem(t,e){const n=Object.assign({viewItem:t,modelCursor:e,modelRange:null});if(t.is("element")?this.fire("element:"+t.name,n,this.conversionApi):t.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof es))throw new a.a("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(t,e){let n=e.is("position")?e:Jo._createAt(e,0);const r=new es(n);for(const i of Array.from(t.getChildren())){const t=this._convertItem(i,n);t.modelRange instanceof es&&(r.end=t.modelRange.end,n=t.modelCursor)}return{modelRange:r,modelCursor:n}}_safeInsert(t,e){const n=this._splitToAllowedParent(t,e);return!!n&&(this.conversionApi.writer.insert(t,n.position),!0)}_updateConversionResult(t,e){const n=this._getSplitParts(t),r=this.conversionApi.writer;e.modelRange||(e.modelRange=r.createRange(r.createPositionBefore(t),r.createPositionAfter(n[n.length-1])));const i=this._cursorParents.get(t);e.modelCursor=i?r.createPositionAt(i,0):e.modelRange.end}_splitToAllowedParent(t,e){const{schema:n,writer:r}=this.conversionApi;let i=n.findAllowedParent(e,t);if(i){if(i===e.parent)return{position:e};this._modelCursor.parent.getAncestors().includes(i)&&(i=null)}if(!i)return Ps(e,t,n)?{position:Ds(e,r)}:null;const o=this.conversionApi.writer.split(e,i),s=[];for(const c of o.range.getWalker())if("elementEnd"==c.type)s.push(c.item);else{const t=s.pop();this._registerSplitPair(t,c.item)}const a=o.range.end.parent;return this._cursorParents.set(t,a),{position:o.position,cursorParent:a}}_registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);const n=this._splitParts.get(t);this._splitParts.set(e,n),n.push(e)}_getSplitParts(t){let e;return e=this._splitParts.has(t)?this._splitParts.get(t):[t],e}_removeEmptyElements(){let t=!1;for(const e of this._splitParts.keys())e.isEmpty&&(this.conversionApi.writer.remove(e),this._splitParts.delete(e),t=!0);t&&this._removeEmptyElements()}}Pt(oa,l);class sa{getHtml(t){const e=document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML}}class aa{constructor(t){this.domParser=new DOMParser,this.domConverter=new xi(t,{renderingMode:"data"}),this.htmlWriter=new sa}toData(t){const e=this.domConverter.viewToDom(t,document);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e)}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode="marked"==t?"markedNbsp":"nbsp"}_toDom(t){const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment();let r=e.firstChild;for(;!r.isSameNode(e.documentElement);){const t=r;r=r.nextSibling,t.nodeType==Node.COMMENT_NODE&&n.appendChild(t)}const i=e.body.childNodes;for(;i.length>0;)n.appendChild(i[0]);return n}}class ca{constructor(t,e){this.model=t,this.mapper=new ns,this.downcastDispatcher=new os({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",(t,e,n)=>{if(!n.consumable.consume(e.item,"insert"))return;const r=n.writer,i=n.mapper.toViewPosition(e.range.start),o=r.createText(e.item.data);r.insert(i,o)},{priority:"lowest"}),this.upcastDispatcher=new oa({schema:t.schema}),this.viewDocument=new dr(e),this.stylesProcessor=e,this.htmlProcessor=new aa(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Br(this.viewDocument),this.upcastDispatcher.on("text",(t,e,{schema:n,consumable:r,writer:i})=>{let o=e.modelCursor;if(!r.test(e.viewItem))return;if(!n.checkChild(o,"$text")){if(!Ps(o,"$text",n))return;o=Ds(o,i)}r.consume(e.viewItem);const s=i.createText(e.viewItem.data);i.insert(s,o),e.modelRange=i.createRange(o,o.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end},{priority:"lowest"}),this.upcastDispatcher.on("element",(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:r}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=r}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:r}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=r}},{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.decorate("get"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange("transparent",Is)},{priority:"lowest"})}get(t={}){const{rootName:e="main",trim:n="empty"}=t;if(!this._checkIfRootsExists([e]))throw new a.a("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(e);return"empty"!==n||this.model.hasContent(r,{ignoreWhitespaces:!0})?this.stringify(r,t):""}stringify(t,e={}){const n=this.toView(t,e);return this.processor.toData(n)}toView(t,e={}){const n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const i=es._createIn(t),o=new Lr(n);this.mapper.bindElements(t,o),this.downcastDispatcher.conversionApi.options=e,this.downcastDispatcher.convertInsert(i,r);const s=t.is("documentFragment")?Array.from(t.markers):function(t){const e=[],n=t.root.document;if(!n)return[];const r=es._createIn(t);for(const i of n.model.markers){const t=i.getRange(),n=t.isCollapsed,o=t.start.isEqual(r.start)||t.end.isEqual(r.end);if(n&&o)e.push([i.name,t]);else{const n=r.getIntersection(t);n&&e.push([i.name,n])}}return e.sort(([t,e],[n,r])=>{if("after"!==e.end.compareWith(r.start))return 1;if("before"!==e.start.compareWith(r.end))return-1;switch(e.start.compareWith(r.start)){case"before":return 1;case"after":return-1;default:switch(e.end.compareWith(r.end)){case"before":return 1;case"after":return-1;default:return n.localeCompare(t)}}})}(t);for(const[a,c]of s)this.downcastDispatcher.convertMarkerAdd(a,c,r);return delete this.downcastDispatcher.conversionApi.options,o}init(t){if(this.model.document.version)throw new a.a("datacontroller-init-document-not-empty",this);let e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new a.a("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",t=>{for(const n of Object.keys(e)){const r=this.model.document.getRoot(n);t.insert(this.parse(e[n],r),r,0)}}),Promise.resolve()}set(t,e={}){let n={};if("string"==typeof t?n.main=t:n=t,!this._checkIfRootsExists(Object.keys(n)))throw new a.a("datacontroller-set-non-existent-root",this);this.model.enqueueChange(e.batchType||"default",t=>{t.setSelection(null),t.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const e of Object.keys(n)){const r=this.model.document.getRoot(e);t.remove(t.createRangeIn(r)),t.insert(this.parse(n[e],r),r,0)}})}parse(t,e="$root"){const n=this.processor.toView(t);return this.toModel(n,e)}toModel(t,e="$root"){return this.model.change(n=>this.upcastDispatcher.convert(t,n,e))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const e of t)if(!this.model.document.getRootNames().includes(e))return!1;return!0}}Pt(ca,Et);class ua{constructor(t,e){this._helpers=new Map,this._downcast=an(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=an(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new a.a("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new a.a("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of la(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of la(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of la(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new a.a("conversion-group-exists",this);const r=n?new Cs(e):new Ns(e);this._helpers.set(t,r)}}function*la(t){if(t.model.values)for(const e of t.model.values){const n={key:t.model.key,value:e},r=t.view[e],i=t.upcastAlso?t.upcastAlso[e]:void 0;yield*ha(n,r,i)}else yield*ha(t.model,t.view,t.upcastAlso)}function*ha(t,e,n){if(yield{model:t,view:e},n)for(const r of an(n))yield{model:t,view:r}}class da{constructor(t="default"){this.operations=[],this.type=t}get baseVersion(){for(const t of this.operations)if(null!==t.baseVersion)return t.baseVersion;return null}addOperation(t){return t.batch=this,this.operations.push(t),t}}class fa{constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t){return new this(t.baseVersion)}}class pa{constructor(t){this.markers=new Map,this._children=new Go,t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return"documentFragment"===t||"model:documentFragment"===t}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const n of t)e.push(n.name?$o.fromJSON(n):Ho.fromJSON(n));return new pa(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){return"string"==typeof t?[new Ho(t)]:(rn(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new Ho(t):t instanceof Wo?new Ho(t.data,t.getAttributes()):t))}(e);for(const r of n)null!==r.parent&&r._remove(),r.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const r of n)r.parent=null;return n}}function ga(t,e){const n=(e=va(e)).reduce((t,e)=>t+e.offsetSize,0),r=t.parent;ya(t);const i=t.index;return r._insertChild(i,e),_a(r,i+e.length),_a(r,i),new es(t,t.getShiftedBy(n))}function ma(t){if(!t.isFlat)throw new a.a("operation-utils-remove-range-not-flat",this);const e=t.start.parent;ya(t.start),ya(t.end);const n=e._removeChildren(t.start.index,t.end.index-t.start.index);return _a(e,t.start.index),n}function ba(t,e){if(!t.isFlat)throw new a.a("operation-utils-move-range-not-flat",this);const n=ma(t);return ga(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),n)}function va(t){const e=[];t instanceof Array||(t=[t]);for(let n=0;n<t.length;n++)if("string"==typeof t[n])e.push(new Ho(t[n]));else if(t[n]instanceof Wo)e.push(new Ho(t[n].data,t[n].getAttributes()));else if(t[n]instanceof pa||t[n]instanceof Go)for(const r of t[n])e.push(r);else t[n]instanceof Ko&&e.push(t[n]);for(let n=1;n<e.length;n++){const t=e[n],r=e[n-1];t instanceof Ho&&r instanceof Ho&&wa(t,r)&&(e.splice(n-1,2,new Ho(r.data+t.data,r.getAttributes())),n--)}return e}function _a(t,e){const n=t.getChild(e-1),r=t.getChild(e);if(n&&r&&n.is("$text")&&r.is("$text")&&wa(n,r)){const i=new Ho(n.data+r.data,n.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function ya(t){const e=t.textNode,n=t.parent;if(e){const r=t.offset-e.startOffset,i=e.index;n._removeChildren(i,1);const o=new Ho(e.data.substr(0,r),e.getAttributes()),s=new Ho(e.data.substr(r),e.getAttributes());n._insertChild(i,[o,s])}}function wa(t,e){const n=t.getAttributes(),r=e.getAttributes();for(const i of n){if(i[1]!==e.getAttribute(i[0]))return!1;r.next()}return r.next().done}var ka=function(t,e){return Qi(t,e)};class Ca extends fa{constructor(t,e,n,r,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===r?null:r}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new Ca(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ca(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new a.a("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!ka(t.getAttribute(this.key),this.oldValue))throw new a.a("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new a.a("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){ka(this.oldValue,this.newValue)||function(t,e,n){ya(t.start),ya(t.end);for(const r of t.getItems({shallow:!0})){const t=r.is("$textProxy")?r.textNode:r;null!==n?t._setAttribute(e,n):t._removeAttribute(e),_a(t.parent,t.index)}_a(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Ca(es.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Aa extends fa{constructor(t,e){super(null),this.sourcePosition=t.clone(),this.howMany=e}get type(){return"detach"}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new a.a("detach-operation-on-document-node",this)}_execute(){ma(es._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Ea extends fa{constructor(t,e,n,r){super(r),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>t.maxOffset)throw new a.a("move-operation-nodes-do-not-exist",this);if(t===e&&n<r&&r<n+this.howMany)throw new a.a("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==dn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=n&&this.targetPosition.path[t]<n+this.howMany)throw new a.a("move-operation-node-into-itself",this)}}_execute(){ba(es._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const n=Jo.fromJSON(t.sourcePosition,e),r=Jo.fromJSON(t.targetPosition,e);return new this(n,t.howMany,r,t.baseVersion)}}class Oa extends fa{constructor(t,e,n){super(n),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new Go(va(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const t=new Go([...this.nodes].map(t=>t._clone(!0))),e=new Oa(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=new Jo(this.position.root.document.graveyard,[0]);return new Ea(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new a.a("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new Go([...t].map(t=>t._clone(!0))),ga(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const n=[];for(const i of t.nodes)n.push(i.name?$o.fromJSON(i):Ho.fromJSON(i));const r=new Oa(Jo.fromJSON(t.position,e),n,t.baseVersion);return r.shouldReceiveAttributes=t.shouldReceiveAttributes,r}}class xa extends fa{constructor(t,e,n,r,i,o){super(o),this.name=t,this.oldRange=e?e.clone():null,this.newRange=n?n.clone():null,this.affectsData=i,this._markers=r}get type(){return"marker"}clone(){return new xa(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new xa(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this._markers[this.newRange?"_set":"_remove"](this.name,this.newRange,!0,this.affectsData)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new xa(t.name,t.oldRange?es.fromJSON(t.oldRange,e):null,t.newRange?es.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class Sa extends fa{constructor(t,e,n,r){super(r),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=n}get type(){return"rename"}clone(){return new Sa(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Sa(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof $o))throw new a.a("rename-operation-wrong-position",this);if(t.name!==this.oldName)throw new a.a("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new Sa(Jo.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class Ta extends fa{constructor(t,e,n,r,i){super(i),this.root=t,this.key=e,this.oldValue=n,this.newValue=r}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new Ta(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ta(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new a.a("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new a.a("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new a.a("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new a.a("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Ta(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Ia extends fa{constructor(t,e,n,r,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new Jo(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new es(this.sourcePosition,t)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),n=new Jo(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new Pa(t,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new a.a("merge-operation-source-position-invalid",this);if(!e.parent)throw new a.a("merge-operation-target-position-invalid",this);if(this.howMany!=t.maxOffset)throw new a.a("merge-operation-how-many-invalid",this)}_execute(){const t=this.sourcePosition.parent;ba(es._createIn(t),this.targetPosition),ba(es._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const n=Jo.fromJSON(t.sourcePosition,e),r=Jo.fromJSON(t.targetPosition,e),i=Jo.fromJSON(t.graveyardPosition,e);return new this(n,t.howMany,r,i,t.baseVersion)}}class Pa extends fa{constructor(t,e,n,r,i){super(i),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=n,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Jo(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new es(this.splitPosition,t)}clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=new Jo(this.splitPosition.root.document.graveyard,[0]);return new Ia(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent;if(!t||t.maxOffset<this.splitPosition.offset)throw new a.a("split-operation-position-invalid",this);if(!t.parent)throw new a.a("split-operation-split-in-root",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new a.a("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new a.a("split-operation-graveyard-position-invalid",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)ba(es._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();ga(this.insertionPosition,e)}ba(new es(Jo._createAt(t,this.splitPosition.offset),Jo._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new Jo(t.root,e,"toPrevious")}static fromJSON(t,e){const n=Jo.fromJSON(t.splitPosition,e),r=Jo.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?Jo.fromJSON(t.graveyardPosition,e):null;return new this(n,t.howMany,r,i,t.baseVersion)}}class Da extends $o{constructor(t,e,n="main"){super(e),this._document=t,this.rootName=n}get document(){return this._document}is(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t}toJSON(){return this.rootName}}class Na{constructor(t,e){this.model=t,this.batch=e}createText(t,e){return new Ho(t,e)}createElement(t,e){return new $o(t,e)}createDocumentFragment(){return new pa}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof Ho&&""==t.data)return;const r=Jo._createAt(e,n);if(t.parent){if(La(t.root,r.root))return void this.move(es._createOn(t),r);if(t.root.document)throw new a.a("model-writer-insert-forbidden-move",this);this.remove(t)}const i=new Oa(r,t,r.root.document?r.root.document.version:null);if(t instanceof Ho&&(i.shouldReceiveAttributes=!0),this.batch.addOperation(i),this.model.applyOperation(i),t instanceof pa)for(const[o,s]of t.markers){const t=Jo._createAt(s.root,0),e={range:new es(s.start._getCombined(t,r),s.end._getCombined(t,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(o)?this.updateMarker(o,e):this.addMarker(o,e)}}insertText(t,e,n,r){e instanceof pa||e instanceof $o||e instanceof Jo?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,r)}insertElement(t,e,n,r){e instanceof pa||e instanceof $o||e instanceof Jo?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,r)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof pa||e instanceof $o?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof pa||e instanceof $o?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof es){const r=n.getMinimalFlatRanges();for(const n of r)Ra(this,t,e,n)}else ja(this,t,e,n)}setAttributes(t,e){for(const[n,r]of bn(t))this.setAttribute(n,r,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof es){const n=e.getMinimalFlatRanges();for(const e of n)Ra(this,t,null,e)}else ja(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=t=>{for(const e of t.getAttributeKeys())this.removeAttribute(e,t)};if(t instanceof es)for(const n of t.getItems())e(n);else e(t)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof es))throw new a.a("writer-move-invalid-range",this);if(!t.isFlat)throw new a.a("writer-move-range-not-flat",this);const r=Jo._createAt(e,n);if(r.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!La(t.root,r.root))throw new a.a("writer-move-different-document",this);const i=new Ea(t.start,t.end.offset-t.start.offset,r,t.root.document?t.root.document.version:null);this.batch.addOperation(i),this.model.applyOperation(i)}remove(t){this._assertWriterUsedCorrectly();const e=(t instanceof es?t:es._createOn(t)).getMinimalFlatRanges().reverse();for(const n of e)this._addOperationForAffectedMarkers("move",n),Fa(n.start,n.end.offset-n.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof $o))throw new a.a("writer-merge-no-element-before",this);if(!(n instanceof $o))throw new a.a("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(t,e,n){return this.model.createSelection(t,e,n)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(es._createIn(n),Jo._createAt(e,"end")),this.remove(n)}_merge(t){const e=Jo._createAt(t.nodeBefore,"end"),n=Jo._createAt(t.nodeAfter,0),r=new Jo(t.root.document.graveyard,[0]),i=new Ia(n,t.nodeAfter.maxOffset,e,r,t.root.document.version);this.batch.addOperation(i),this.model.applyOperation(i)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof $o))throw new a.a("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,r=new Sa(Jo._createBefore(t),t.name,e,n);this.batch.addOperation(r),this.model.applyOperation(r)}split(t,e){this._assertWriterUsedCorrectly();let n,r,i=t.parent;if(!i.parent)throw new a.a("writer-split-element-no-parent",this);if(e||(e=i.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new a.a("writer-split-invalid-limit-element",this);do{const e=i.root.document?i.root.document.version:null,o=i.maxOffset-t.offset,s=Pa.getInsertionPosition(t),a=new Pa(t,o,s,null,e);this.batch.addOperation(a),this.model.applyOperation(a),n||r||(n=i,r=t.parent.nextSibling),i=(t=this.createPositionAfter(t.parent)).parent}while(i!==e);return{position:t,range:new es(Jo._createAt(n,"end"),Jo._createAt(r,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new a.a("writer-wrap-range-not-flat",this);const n=e instanceof $o?e:new $o(e);if(n.childCount>0)throw new a.a("writer-wrap-element-not-empty",this);if(null!==n.parent)throw new a.a("writer-wrap-element-attached",this);this.insert(n,t.start);const r=new es(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(r,Jo._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new a.a("writer-unwrap-element-no-parent",this);this.move(es._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new a.a("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,r=e.range,i=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new a.a("writer-addmarker-marker-exists",this);if(!r)throw new a.a("writer-addmarker-no-range",this);return n?(Ma(this,t,null,r,i),this.model.markers.get(t)):this.model.markers._set(t,r,n,i)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n="string"==typeof t?t:t.name,r=this.model.markers.get(n);if(!r)throw new a.a("writer-updatemarker-marker-not-exists",this);if(!e)return void this.model.markers._refresh(r);const i="boolean"==typeof e.usingOperation,o="boolean"==typeof e.affectsData,s=o?e.affectsData:r.affectsData;if(!i&&!e.range&&!o)throw new a.a("writer-updatemarker-wrong-options",this);const c=r.getRange(),u=e.range?e.range:c;i&&e.usingOperation!==r.managedUsingOperations?e.usingOperation?Ma(this,n,null,u,s):(Ma(this,n,c,null,s),this.model.markers._set(n,u,void 0,s)):r.managedUsingOperations?Ma(this,n,c,u,s):this.model.markers._set(n,u,void 0,s)}removeMarker(t){this._assertWriterUsedCorrectly();const e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new a.a("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);n.managedUsingOperations?Ma(this,e,n.getRange(),null,n.affectsData):this.model.markers._remove(e)}setSelection(t,e,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(t,e,n)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._setSelectionAttribute(t,e);else for(const[n,r]of bn(t))this._setSelectionAttribute(n,r)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const r=vs._getStoreAttributeKey(t);this.setAttribute(r,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=vs._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new a.a("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const r=n.getRange();let i=!1;if("move"===t)i=e.containsPosition(r.start)||e.start.isEqual(r.start)||e.containsPosition(r.end)||e.end.isEqual(r.end);else{const t=e.nodeAfter,n=r.end.parent==t&&0==r.end.offset,o=r.end.nodeAfter==t,s=r.start.nodeAfter==t;i=r.start.parent==e.nodeBefore&&r.start.isAtEnd||n||o||s}i&&this.updateMarker(n.name,{range:r})}}}function Ra(t,e,n,r){const i=t.model,o=i.document;let s,a,c,u=r.start;for(const h of r.getWalker({shallow:!0}))c=h.item.getAttribute(e),s&&a!=c&&(a!=n&&l(),u=s),s=h.nextPosition,a=c;function l(){const r=new es(u,s),c=new Ca(r,e,a,n,r.root.document?o.version:null);t.batch.addOperation(c),i.applyOperation(c)}s instanceof Jo&&s!=u&&a!=n&&l()}function ja(t,e,n,r){const i=t.model,o=i.document,s=r.getAttribute(e);let a,c;s!=n&&(r.root===r?c=new Ta(r,e,s,n,r.document?o.version:null):(a=new es(Jo._createBefore(r),t.createPositionAfter(r)),c=new Ca(a,e,s,n,a.root.document?o.version:null)),t.batch.addOperation(c),i.applyOperation(c))}function Ma(t,e,n,r,i){const o=t.model,s=new xa(e,n,r,o.markers,i,o.document.version);t.batch.addOperation(s),o.applyOperation(s)}function Fa(t,e,n,r){let i;if(t.root.document){const n=r.document,o=new Jo(n.graveyard,[0]);i=new Ea(t,e,o,n.version)}else i=new Aa(t,e);n.addOperation(i),r.applyOperation(i)}function La(t,e){return t===e||t instanceof Da&&e instanceof Da}class Ba{constructor(t){this._markerCollection=t,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize);const e=es._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const t=n.getRange();this.bufferMarkerChange(n.name,t,t,n.affectsData)}this._cachedChanges=null}bufferOperation(t){switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const e of t.range.getItems({shallow:!0}))this._isInInsertedElement(e.parent)||this._markAttribute(e);break;case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const e=this._isInInsertedElement(t.sourcePosition.parent),n=this._isInInsertedElement(t.targetPosition.parent);e||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),n||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const e=es._createFromPositionAndShift(t.position,1);for(const t of this._markerCollection.getMarkersIntersectingRange(e)){const e=t.getRange();this.bufferMarkerChange(t.name,e,e,t.affectsData)}break}case"split":{const e=t.splitPosition.parent;this._isInInsertedElement(e)||this._markRemove(e,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const e=t.sourcePosition.parent;this._isInInsertedElement(e.parent)||this._markRemove(e.parent,e.startOffset,1),this._markInsert(t.graveyardPosition.parent,t.graveyardPosition.offset,1);const n=t.targetPosition.parent;this._isInInsertedElement(n)||this._markInsert(n,t.targetPosition.offset,e.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n,r){const i=this._changedMarkers.get(t);i?(i.newRange=n,i.affectsData=r,null==i.oldRange&&null==i.newRange&&this._changedMarkers.delete(t)):this._changedMarkers.set(t,{oldRange:e,newRange:n,affectsData:r})}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.oldRange&&t.push({name:e,range:n.oldRange});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.newRange&&t.push({name:e,range:n.newRange});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(t=>({name:t[0],data:{oldRange:t[1].oldRange,newRange:t[1].newRange}}))}hasDataChanges(){for(const[,t]of this._changedMarkers)if(t.affectsData)return!0;return this._changesInElement.size>0}getChanges(t={includeChangesInGraveyard:!1}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const n of this._changesInElement.keys()){const t=this._changesInElement.get(n).sort((t,e)=>t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1),r=this._elementSnapshots.get(n),i=Va(n.getChildren()),o=Ua(r.length,t);let s=0,a=0;for(const c of o)if("i"===c)e.push(this._getInsertDiff(n,s,i[s].name)),s++;else if("r"===c)e.push(this._getRemoveDiff(n,s,r[a].name)),a++;else if("a"===c){const t=i[s].attributes,o=r[a].attributes;let c;if("$text"==i[s].name)c=new es(Jo._createAt(n,s),Jo._createAt(n,s+1));else{const t=n.offsetToIndex(s);c=new es(Jo._createAt(n,s),Jo._createAt(n.getChild(t),0))}e.push(...this._getAttributesDiff(c,o,t)),s++,a++}else s++,a++}e.sort((t,e)=>t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1);for(let n=1,r=0;n<e.length;n++){const t=e[r],i=e[n],o="remove"==t.type&&"remove"==i.type&&"$text"==t.name&&"$text"==i.name&&t.position.isEqual(i.position),s="insert"==t.type&&"insert"==i.type&&"$text"==t.name&&"$text"==i.name&&t.position.parent==i.position.parent&&t.position.offset+t.length==i.position.offset,a="attribute"==t.type&&"attribute"==i.type&&t.position.parent==i.position.parent&&t.range.isFlat&&i.range.isFlat&&t.position.offset+t.length==i.position.offset&&t.attributeKey==i.attributeKey&&t.attributeOldValue==i.attributeOldValue&&t.attributeNewValue==i.attributeNewValue;o||s||a?(t.length++,a&&(t.range.end=t.range.end.getShiftedBy(1)),e[n]=null):r=n}e=e.filter(t=>t);for(const n of e)delete n.changeCount,"attribute"==n.type&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e.slice(),this._cachedChanges=e.filter(qa),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(t,e,n){const r={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,r)}_markRemove(t,e,n){const r={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,r),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshot(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let r=0;r<n.length;r++)n[r].howMany<1&&(n.splice(r,1),r--)}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshot(t){this._elementSnapshots.has(t)||this._elementSnapshots.set(t,Va(t.getChildren()))}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const r=t.offset+t.howMany,i=n.offset+n.howMany;if("insert"==t.type&&("insert"==n.type&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<i&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==n.type&&t.offset<n.offset&&(n.offset+=t.howMany),"attribute"==n.type))if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<i){const i=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:r,howMany:i-n.howMany,count:this._changeCount++})}if("remove"==t.type){if("insert"==n.type)if(r<=n.offset)n.offset-=t.howMany;else if(r<=i)if(t.offset<n.offset){const e=r-n.offset;n.offset=t.offset,n.howMany-=e,t.nodesToHandle-=e}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<i){const e=i-t.offset;n.howMany-=e,t.nodesToHandle-=e}if("remove"==n.type&&(r<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),"attribute"==n.type)if(r<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const e=r-n.offset;n.offset=t.offset,n.howMany-=e}else if(t.offset<i)if(r<=i){const r=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:t.offset,howMany:r-n.howMany-t.nodesToHandle,count:this._changeCount++})}else n.howMany-=i-t.offset}if("attribute"==t.type){if("insert"==n.type)if(t.offset<n.offset&&r>n.offset){if(r>i){const t={type:"attribute",offset:i,howMany:r-i,count:this._changeCount++};this._handleChange(t,e),e.push(t)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<i&&(r>i?(t.nodesToHandle=r-i,t.offset=i):t.nodesToHandle=0);if("remove"==n.type&&t.offset<n.offset&&r>n.offset){const i={type:"attribute",offset:n.offset,howMany:r-n.offset,count:this._changeCount++};this._handleChange(i,e),e.push(i),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}"attribute"==n.type&&(t.offset>=n.offset&&r<=i?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&r>=i&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n){return{type:"insert",position:Jo._createAt(t,e),name:n,length:1,changeCount:this._changeCount++}}_getRemoveDiff(t,e,n){return{type:"remove",position:Jo._createAt(t,e),name:n,length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const r=[];n=new Map(n);for(const[i,o]of e){const e=n.has(i)?n.get(i):null;e!==o&&r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:i,attributeOldValue:o,attributeNewValue:e,changeCount:this._changeCount++}),n.delete(i)}for(const[i,o]of n)r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:i,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return r}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),r=t.startOffset;if(n)for(const i of n)if("insert"==i.type&&r>=i.offset&&r<i.offset+i.howMany)return!0;return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const r=new es(Jo._createAt(t,e),Jo._createAt(t,e+n));for(const i of r.getItems({shallow:!0}))i.is("element")&&(this._elementSnapshots.delete(i),this._changesInElement.delete(i),this._removeAllNestedChanges(i,0,i.maxOffset))}}function Va(t){const e=[];for(const n of t)if(n.is("$text"))for(let t=0;t<n.data.length;t++)e.push({name:"$text",attributes:new Map(n.getAttributes())});else e.push({name:n.name,attributes:new Map(n.getAttributes())});return e}function Ua(t,e){const n=[];let r=0,i=0;for(const o of e){if(o.offset>r){for(let t=0;t<o.offset-r;t++)n.push("e");i+=o.offset-r}if("insert"==o.type){for(let t=0;t<o.howMany;t++)n.push("i");r=o.offset+o.howMany}else if("remove"==o.type){for(let t=0;t<o.howMany;t++)n.push("r");r=o.offset,i+=o.howMany}else n.push(..."a".repeat(o.howMany).split("")),r=o.offset+o.howMany,i+=o.howMany}if(i<t)for(let o=0;o<t-i-r;o++)n.push("e");return n}function qa(t){return!(t.position&&"$graveyard"==t.position.root.rootName||t.range&&"$graveyard"==t.range.root.rootName)}class za{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}addOperation(t){this._operations.includes(t)||this._operations.push(t)}getOperations(t=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY){const n=[];for(const r of this._operations)r.baseVersion>=t&&r.baseVersion<e&&n.push(r);return n}getOperation(t){for(const e of this._operations)if(e.baseVersion==t)return e}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}}function Ka(t,e){return function(t){return!!t&&1==t.length&&/[\ud800-\udbff]/.test(t)}(t.charAt(e-1))&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}(t.charAt(e))}function Ha(t,e){return function(t){return!!t&&1==t.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}(t.charAt(e))}const Wa="$graveyard";class Ga{constructor(t){this.model=t,this.version=0,this.history=new za(this),this.selection=new vs(this),this.roots=new on({idProperty:"rootName"}),this.differ=new Ba(t.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Wa),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];if(n.isDocumentOperation&&n.baseVersion!==this.version)throw new a.a("model-document-applyoperation-wrong-version",this,{operation:n})},{priority:"highest"}),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&this.differ.bufferOperation(n)},{priority:"high"}),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&(this.version++,this.history.addOperation(n))},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(t,e,n,r)=>{this.differ.bufferMarkerChange(e.name,n,r,e.affectsData),null===n&&e.on("change",(t,n)=>{this.differ.bufferMarkerChange(e.name,n,e.getRange(),e.affectsData)})})}get graveyard(){return this.getRoot(Wa)}createRoot(t="$root",e="main"){if(this.roots.get(e))throw new a.a("model-document-createroot-name-exists",this,{name:e});const n=new Da(this,t,e);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(){return Array.from(this.roots,t=>t.rootName).filter(t=>t!=Wa)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=fn(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const t of this.roots)if(t!==this.graveyard)return t;return this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),e=this.model,n=e.schema,r=e.createPositionFromPath(t,[0]);return n.getNearestSelectionRange(r)||e.createRange(r)}_validateSelectionRange(t){return $a(t.start)&&$a(t.end)}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(this.selection.refresh(),e=n(t),e)break}while(e)}}function $a(t){const e=t.textNode;if(e){const n=e.data,r=t.offset-e.startOffset;return!Ka(n,r)&&!Ha(n,r)}return!0}Pt(Ga,l);class Qa{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(t){return this._markers.has(t instanceof Ya?t.name:t)}get(t){return this._markers.get(t)||null}_set(t,e,n=!1,r=!1){const i=t instanceof Ya?t.name:t;if(i.includes(","))throw new a.a("markercollection-incorrect-marker-name",this);const o=this._markers.get(i);if(o){const t=o.getRange();let s=!1;return t.isEqual(e)||(o._attachLiveRange(ps.fromRange(e)),s=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,s=!0),"boolean"==typeof r&&r!=o.affectsData&&(o._affectsData=r,s=!0),s&&this.fire("update:"+i,o,t,e),o}const s=ps.fromRange(e),c=new Ya(i,s,n,r);return this._markers.set(i,c),this.fire("update:"+i,c,null,e),c}_remove(t){const e=t instanceof Ya?t.name:t,n=this._markers.get(e);return!!n&&(this._markers.delete(e),this.fire("update:"+e,n,n.getRange(),null),this._destroyMarker(n),!0)}_refresh(t){const e=t instanceof Ya?t.name:t,n=this._markers.get(e);if(!n)throw new a.a("markercollection-refresh-marker-not-exists",this);const r=n.getRange();this.fire("update:"+e,n,r,r,n.managedUsingOperations,n.affectsData)}*getMarkersAtPosition(t){for(const e of this)e.getRange().containsPosition(t)&&(yield e)}*getMarkersIntersectingRange(t){for(const e of this)null!==e.getRange().getIntersection(t)&&(yield e)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const e of this._markers.values())e.name.startsWith(t+":")&&(yield e)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}Pt(Qa,l);class Ya{constructor(t,e,n,r){this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new a.a("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new a.a("marker-destroyed",this);return this._affectsData}getStart(){if(!this._liveRange)throw new a.a("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new a.a("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new a.a("marker-destroyed",this);return this._liveRange.toRange()}is(t){return"marker"===t||"model:marker"===t}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Pt(Ya,l);class Ja extends fa{get type(){return"noop"}clone(){return new Ja(this.baseVersion)}getReversed(){return new Ja(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}const Xa={};Xa[Ca.className]=Ca,Xa[Oa.className]=Oa,Xa[xa.className]=xa,Xa[Ea.className]=Ea,Xa[Ja.className]=Ja,Xa[fa.className]=fa,Xa[Sa.className]=Sa,Xa[Ta.className]=Ta,Xa[Pa.className]=Pa,Xa[Ia.className]=Ia;class Za extends Jo{constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new a.a("model-liveposition-root-not-rootelement",t);tc.call(this)}detach(){this.stopListening()}is(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t}toPosition(){return new Jo(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}function tc(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&ec.call(this,n)},{priority:"low"})}function ec(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}Pt(Za,l);class nc{constructor(t,e,n){this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){if(this._lastNode=t,this.position.parent!=t||!this.position.isAtEnd)throw new a.a("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this.nodeToSelect?es._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new es(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(this.schema.isObject(t))return void this._handleObject(t);let e=this._checkAndAutoParagraphToAllowedPosition(t);e||(e=this._checkAndSplitToAllowedPosition(t),e)?(this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t):this._handleDisallowedNode(t)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=Za.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleObject(t){this._checkAndSplitToAllowedPosition(t)?this._appendToFragment(t):this._tryAutoparagraphing(t)}_handleDisallowedNode(t){t.is("element")?this.handleNodes(t.getChildren()):this._tryAutoparagraphing(t)}_appendToFragment(t){if(!this.schema.checkChild(this.position,t))throw new a.a("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.nodeToSelect=this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?t:null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=Za.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Za.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof $o))return;if(!this._canMergeLeft(t))return;const e=Za._createBefore(t);e.stickiness="toNext";const n=Za.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=Za._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Za._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof $o))return;if(!this._canMergeRight(t))return;const e=Za._createAfter(t);if(e.stickiness="toNext",!this.position.isEqual(e))throw new a.a("insertcontent-invalid-insertion-position",this);this.position=Jo._createAt(e.nodeBefore,"end");const n=Za.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=Za._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Za._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof $o&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof $o&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_tryAutoparagraphing(t){const e=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,e)&&this.schema.checkChild(e,t)&&(e._appendChild(t),this._handleNode(e))}_checkAndAutoParagraphToAllowedPosition(t){if(this.schema.checkChild(this.position.parent,t))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",t))return!1;this._insertPartialFragment();const e=this.writer.createElement("paragraph");return this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0),!0}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const t=this.position.parent;this.position=this.writer.createPositionBefore(t),t.isEmpty&&t.parent===e&&this.writer.remove(t)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const t=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function rc(t,e,n={}){if(e.isCollapsed)return;const r=e.getFirstRange();if("$graveyard"==r.root.rootName)return;const i=t.schema;t.change(t=>{if(!n.doNotResetEntireContent&&function(t,e){const n=t.getLimitElement(e);if(!e.containsEntireContent(n))return!1;const r=e.getFirstRange();return r.start.parent!=r.end.parent&&t.checkChild(n,"paragraph")}(i,e))return void function(t,e){const n=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(n)),ac(t,t.createPositionAt(n,0),e)}(t,e);const[o,s]=function(t){const e=t.root.document.model,n=t.start;let r=t.end;if(e.hasContent(t,{ignoreMarkers:!0})){const n=function(t){const e=t.parent,n=e.root.document.model.schema,r=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const i of r){if(n.isLimit(i))return null;if(n.isBlock(i))return i}}(r);if(n&&r.isTouching(e.createPositionAt(n,0))){const n=e.createSelection(t);e.modifySelection(n,{direction:"backward"});const i=n.getLastPosition(),o=e.createRange(i,r);e.hasContent(o,{ignoreMarkers:!0})||(r=i)}}return[Za.fromPosition(n,"toPrevious"),Za.fromPosition(r,"toNext")]}(r);o.isTouching(s)||t.remove(t.createRange(o,s)),n.leaveUnmerged||(function(t,e,n){const r=t.model;if(!sc(t.model.schema,e,n))return;const[i,o]=function(t,e){const n=t.getAncestors(),r=e.getAncestors();let i=0;for(;n[i]&&n[i]==r[i];)i++;return[n[i],r[i]]}(e,n);i&&o&&(!r.hasContent(i,{ignoreMarkers:!0})&&r.hasContent(o,{ignoreMarkers:!0})?oc(t,e,n,i.parent):ic(t,e,n,i.parent))}(t,o,s),i.removeDisallowedAttributes(o.parent.getChildren(),t)),cc(t,e,o),!n.doNotAutoparagraph&&function(t,e){const n=t.checkChild(e,"$text"),r=t.checkChild(e,"paragraph");return!n&&r}(i,o)&&ac(t,o,e),o.detach(),s.detach()})}function ic(t,e,n,r){const i=e.parent,o=n.parent;if(i!=r&&o!=r){for(e=t.createPositionAfter(i),(n=t.createPositionBefore(o)).isEqual(e)||t.insert(o,e),t.merge(e);n.parent.isEmpty;){const e=n.parent;n=t.createPositionBefore(e),t.remove(e)}sc(t.model.schema,e,n)&&ic(t,e,n,r)}}function oc(t,e,n,r){const i=e.parent,o=n.parent;if(i!=r&&o!=r){for(e=t.createPositionAfter(i),(n=t.createPositionBefore(o)).isEqual(e)||t.insert(i,n);e.parent.isEmpty;){const n=e.parent;e=t.createPositionBefore(n),t.remove(n)}n=t.createPositionBefore(o),function(t,e){const n=e.nodeBefore,r=e.nodeAfter;n.name!=r.name&&t.rename(n,r.name),t.clearAttributes(n),t.setAttributes(Object.fromEntries(r.getAttributes()),n),t.merge(e)}(t,n),sc(t.model.schema,e,n)&&oc(t,e,n,r)}}function sc(t,e,n){const r=e.parent,i=n.parent;return r!=i&&!t.isLimit(r)&&!t.isLimit(i)&&function(t,e,n){const r=new es(t,e);for(const i of r.getWalker())if(n.isLimit(i.item))return!1;return!0}(e,n,t)}function ac(t,e,n){const r=t.createElement("paragraph");t.insert(r,e),cc(t,n,t.createPositionAt(r,0))}function cc(t,e,n){e instanceof vs?t.setSelection(n):e.setTo(n)}const uc=' ,.?!:;"-()';function lc(t,e){const{isForward:n,walker:r,unit:i,schema:o}=t,{type:s,item:a,nextPosition:c}=e;if("text"==s)return"word"===t.unit?function(t,e){let n=t.position.textNode;if(n){let r=t.position.offset-n.startOffset;for(;!dc(n.data,r,e)&&!fc(n,r,e);){t.next();const i=e?t.position.nodeAfter:t.position.nodeBefore;if(i&&i.is("$text")){const r=i.data.charAt(e?0:i.data.length-1);uc.includes(r)||(t.next(),n=t.position.textNode)}r=t.position.offset-n.startOffset}}return t.position}(r,n):function(t,e){const n=t.position.textNode;if(n){const r=n.data;let i=t.position.offset-n.startOffset;for(;Ka(r,i)||"character"==e&&Ha(r,i);)t.next(),i=t.position.offset-n.startOffset}return t.position}(r,i);if(s==(n?"elementStart":"elementEnd")){if(o.isSelectable(a))return Jo._createAt(a,n?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(a))return void r.skip(()=>!0);if(o.checkChild(c,"$text"))return c}}function hc(t,e){const n=Jo._createAt(t.root,e?"end":0);return e?new es(t,n):new es(n,t)}function dc(t,e,n){return uc.includes(t.charAt(e+(n?0:-1)))}function fc(t,e,n){return e===(n?t.endOffset:0)}function pc(t,e){const n=[];Array.from(t.getItems({direction:"backward"})).map(t=>e.createRangeOn(t)).filter(e=>(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end))).forEach(t=>{n.push(t.start.parent),e.remove(t)}),n.forEach(t=>{let n=t;for(;n.parent&&n.isEmpty;){const t=e.createRangeOn(n);n=n.parent,e.remove(t)}})}function gc(t,e){return t.isCollapsed?function(t,e){const n=t.start,r=e.getNearestSelectionRange(n);if(!r){const t=n.getAncestors().reverse().find(t=>e.isObject(t));return t?es._createOn(t):null}if(!r.isCollapsed)return r;const i=r.start;return n.isEqual(i)?null:new es(i)}(t,e):function(t,e){const{start:n,end:r}=t,i=e.checkChild(n,"$text"),o=e.checkChild(r,"$text"),s=e.getLimitElement(n),a=e.getLimitElement(r);if(s===a){if(i&&o)return null;if(function(t,e,n){const r=t.nodeAfter&&!n.isLimit(t.nodeAfter)||n.checkChild(t,"$text"),i=e.nodeBefore&&!n.isLimit(e.nodeBefore)||n.checkChild(e,"$text");return r||i}(n,r,e)){const t=n.nodeAfter&&e.isSelectable(n.nodeAfter)?null:e.getNearestSelectionRange(n,"forward"),i=r.nodeBefore&&e.isSelectable(r.nodeBefore)?null:e.getNearestSelectionRange(r,"backward");return new es(t?t.start:n,i?i.end:r)}}const c=s&&!s.is("rootElement"),u=a&&!a.is("rootElement");if(c||u){const t=n.nodeAfter&&r.nodeBefore&&n.nodeAfter.parent===r.nodeBefore.parent,i=c&&(!t||!bc(n.nodeAfter,e)),o=u&&(!t||!bc(r.nodeBefore,e));let l=n,h=r;return i&&(l=Jo._createBefore(mc(s,e))),o&&(h=Jo._createAfter(mc(a,e))),new es(l,h)}return null}(t,e)}function mc(t,e){let n=t,r=n;for(;e.isLimit(r)&&r.parent;)n=r,r=r.parent;return n}function bc(t,e){return t&&e.isSelectable(t)}class vc{constructor(){this.markers=new Qa,this.document=new Ga(this),this.schema=new Ks,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,e)=>{e[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((t,e)=>{if("$marker"===e.name)return!0}),function(t){t.document.registerPostFixer(e=>function(t,e){const n=e.document.selection,r=e.schema,i=[];let o=!1;for(const s of n.getRanges()){const t=gc(s,r);t&&!t.isEqual(s)?(i.push(t),o=!0):i.push(s)}o&&t.setSelection(function(t){const e=[...t],n=new Set;let r=1;for(;r<e.length;){const t=e[r],i=e.slice(0,r);for(const[o,s]of i.entries())if(!n.has(o))if(t.isEqual(s))n.add(o);else if(t.isIntersecting(s)){n.add(o),n.add(r);const i=t.getJoined(s);e.push(i)}r++}return e.filter((t,e)=>!n.has(e))}(i),{backward:n.isBackward})}(e,t))}(this),this.document.registerPostFixer(Is)}change(t){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new da,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(t){a.a.rethrowUnexpectedError(t,this)}}enqueueChange(t,e){try{"string"==typeof t?t=new da(t):"function"==typeof t&&(e=t,t=new da),this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(t){a.a.rethrowUnexpectedError(t,this)}}applyOperation(t){t._execute()}insertContent(t,e,n){return function(t,e,n,r){return t.change(i=>{let o;o=n?n instanceof us||n instanceof vs?n:i.createSelection(n,r):t.document.selection,o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0});const s=new nc(t,i,o.anchor);let a;a=e.is("documentFragment")?e.getChildren():[e],s.handleNodes(a);const c=s.getSelectionRange();c&&(o instanceof vs?i.setSelection(c):o.setTo(c));const u=s.getAffectedRange()||t.createRange(o.anchor);return s.destroy(),u})}(this,t,e,n)}deleteContent(t,e){rc(this,t,e)}modifySelection(t,e){!function(t,e,n={}){const r=t.schema,i="backward"!=n.direction,o=n.unit?n.unit:"character",s=new Qo({boundaries:hc(e.focus,i),singleCharacters:!0,direction:i?"forward":"backward"}),a={walker:s,schema:r,isForward:i,unit:o};let c;for(;c=s.next();){if(c.done)return;const n=lc(a,c.value);if(n)return void(e instanceof vs?t.change(t=>{t.setSelectionFocus(n)}):e.setFocus(n))}}(this,t,e)}getSelectedContent(t){return function(t,e){return t.change(t=>{const n=t.createDocumentFragment(),r=e.getFirstRange();if(!r||r.isCollapsed)return n;const i=r.start.root,o=r.start.getCommonPath(r.end),s=i.getNodeByPath(o);let a;a=r.start.parent==r.end.parent?r:t.createRange(t.createPositionAt(s,r.start.path[o.length]),t.createPositionAt(s,r.end.path[o.length]+1));const c=a.end.offset-a.start.offset;for(const e of a.getItems({shallow:!0}))e.is("$textProxy")?t.appendText(e.data,e.getAttributes(),n):t.append(t.cloneElement(e,!0),n);if(a!=r){const e=r._getTransformedByMove(a.start,t.createPositionAt(n,0),c)[0],i=t.createRange(t.createPositionAt(n,0),e.start);pc(t.createRange(e.end,t.createPositionAt(n,"end")),t),pc(i,t)}return n})}(this,t)}hasContent(t,e={}){const n=t instanceof $o?es._createIn(t):t;if(n.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:i=!1}=e;if(!i)for(const o of this.markers.getMarkersIntersectingRange(n))if(o.affectsData)return!0;for(const o of n.getItems())if(this.schema.isContent(o)){if(!o.is("$textProxy"))return!0;if(!r)return!0;if(-1!==o.data.search(/\S/))return!0}return!1}createPositionFromPath(t,e,n){return new Jo(t,e,n)}createPositionAt(t,e){return Jo._createAt(t,e)}createPositionAfter(t){return Jo._createAfter(t)}createPositionBefore(t){return Jo._createBefore(t)}createRange(t,e){return new es(t,e)}createRangeIn(t){return es._createIn(t)}createRangeOn(t){return es._createOn(t)}createSelection(t,e,n){return new us(t,e,n)}createBatch(t){return new da(t)}createOperationFromJSON(t){return class{static fromJSON(t,e){return Xa[t.__className].fromJSON(t,e)}}.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){this._currentWriter=new Na(this,this._pendingChanges[0].batch);const e=this._pendingChanges[0].callback(this._currentWriter);t.push(e),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),t}}Pt(vc,Et);class _c extends Po{constructor(t){super(),this.editor=t}set(t,e,n={}){if("string"==typeof e){const t=e;e=(e,n)=>{this.editor.execute(t),n()}}super.set(t,e,n)}}class yc{constructor(t={}){this._context=t.context||new hn({language:t.language||this.constructor.defaultConfig&&this.constructor.defaultConfig.language}),this._context._addEditor(this,!t.context);const e=Array.from(this.constructor.builtinPlugins||[]);this.config=new tn(t,this.constructor.defaultConfig),this.config.define("plugins",e),this.config.define(this._context._getEditorConfig()),this.plugins=new sn(this,e,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new Us,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.set("isReadOnly",!1),this.model=new vc;const n=new qn;this.data=new ca(this.model,n),this.editing=new Vs(this.model,n),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new ua([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new _c(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const t=this.config,e=t.get("plugins"),n=t.get("removePlugins")||[],r=t.get("extraPlugins")||[],i=t.get("substitutePlugins")||[];return this.plugins.init(e.concat(r),n,i)}destroy(){let t=Promise.resolve();return"initializing"==this.state&&(t=new Promise(t=>this.once("ready",t))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(...t){try{return this.commands.execute(...t)}catch(t){a.a.rethrowUnexpectedError(t,this)}}focus(){this.editing.view.focus()}}Pt(yc,Et);class wc{constructor(t){this.editor=t,this._components=new Map}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(kc(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new a.a("componentfactory-item-missing",this,{name:t});return this._components.get(kc(t)).callback(this.editor.locale)}has(t){return this._components.has(kc(t))}}function kc(t){return String(t).toLowerCase()}class Cc{constructor(t){this.editor=t,this.componentFactory=new wc(t),this.focusTracker=new Io,this.set("viewportOffset",this._readViewportOffsetFromConfig()),this._editableElementsMap=new Map,this.listenTo(t.editing.view.document,"layoutChanged",()=>this.update())}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null;this._editableElementsMap=new Map}setEditableElement(t,e){this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const t=this.editor,e=t.config.get("ui.viewportOffset");if(e)return e;const n=t.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}}Pt(Cc,Et);var Ac={setData(t){this.data.set(t)},getData(t){return this.data.get(t)}},Ec={updateSourceElement(){if(!this.sourceElement)throw new a.a("editor-missing-sourceelement",this);!function(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e}(this.sourceElement,this.data.get())}};Symbol;class Oc extends on{constructor(t=[]){super(t,{idProperty:"viewUid"}),this.on("add",(t,e,n)=>{this._renderViewIntoCollectionParent(e,n)}),this.on("remove",(t,e)=>{e.element&&this._parentElement&&e.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const e of this)this._renderViewIntoCollectionParent(e)}delegate(...t){if(!t.length||!function(t){return t.every(t=>"string"==typeof t)}(t))throw new a.a("ui-viewcollection-delegate-wrong-events",this);return{to:e=>{for(const n of this)for(const r of t)n.delegate(r).to(e);this.on("add",(n,r)=>{for(const i of t)r.delegate(i).to(e)}),this.on("remove",(n,r)=>{for(const i of t)r.stopDelegating(i,e)})}}}_renderViewIntoCollectionParent(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e])}}var xc=n(13);fi()(xc.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class Sc{constructor(t){this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new on,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,n)=>{n.locale=t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Tc.bind(this,this)}createCollection(t){const e=new Oc(t);return this._viewCollections.add(e),e}registerChild(t){rn(t)||(t=[t]);for(const e of t)this._unboundChildren.add(e)}deregisterChild(t){rn(t)||(t=[t]);for(const e of t)this._unboundChildren.remove(e)}setTemplate(t){this.template=new Tc(t)}extendTemplate(t){Tc.extend(this.template,t)}render(){if(this.isRendered)throw new a.a("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}Pt(Sc,Pi),Pt(Sc,Et);class Tc{constructor(t){Object.assign(this,Bc(Lc(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new a.a("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){yield*function*t(e){if(e.children)for(const n of e.children)Hc(n)?yield n:Wc(n)&&(yield*t(n))}(this)}static bind(t,e){return{to:(n,r)=>new Pc({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:r}),if:(n,r,i)=>new Dc({observable:t,emitter:e,attribute:n,valueIfTrue:r,callback:i})}}static extend(t,e){if(t._isRendered)throw new a.a("template-extend-render",[this,t]);zc(t,Bc(Lc(e)))}_renderNode(t){let e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text,e)throw new a.a("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),Nc(this.text)?this._bindToObservable({schema:this.text,updater:jc(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){let e,n,r,i;if(!this.attributes)return;const o=t.node,s=t.revertData;for(e in this.attributes)if(r=o.getAttribute(e),n=this.attributes[e],s&&(s.attributes[e]=r),i=v(n[0])&&n[0].ns?n[0].ns:null,Nc(n)){const a=i?n[0].value:n;s&&$c(e)&&a.unshift(r),this._bindToObservable({schema:a,updater:Mc(o,e,i),data:t})}else"style"==e&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],t):(s&&r&&$c(e)&&n.unshift(r),n=n.map(t=>t&&t.value||t).reduce((t,e)=>t.concat(e),[]).reduce(Uc,""),Kc(n)||o.setAttributeNS(i,e,n))}_renderStyleAttribute(t,e){const n=e.node;for(const r in t){const i=t[r];Nc(i)?this._bindToObservable({schema:[i],updater:Fc(n,r),data:e}):n.style[r]=i}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,r=t.isApplying;let i=0;for(const o of this.children)if(Gc(o)){if(!r){o.setParent(e);for(const t of o)n.appendChild(t.element)}}else if(Hc(o))r||(o.isRendered||o.render(),n.appendChild(o.element));else if(hi(o))n.appendChild(o);else if(r){const e={children:[],bindings:[],attributes:{}};t.revertData.children.push(e),o._renderNode({node:n.childNodes[i++],isApplying:!0,revertData:e})}else n.appendChild(o.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(const e in this.eventListeners){const n=this.eventListeners[e].map(n=>{const[r,i]=e.split("@");return n.activateDomEventListener(r,i,t)});t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const r=n.revertData;Rc(t,e,n);const i=t.filter(t=>!Kc(t)).filter(t=>t.observable).map(r=>r.activateAttributeListener(t,e,n));r&&r.bindings.push(i)}_revertTemplateFromNode(t,e){for(const n of e.bindings)for(const t of n)t();if(e.text)t.textContent=e.text;else{for(const n in e.attributes){const r=e.attributes[n];null===r?t.removeAttribute(n):t.setAttribute(n,r)}for(let n=0;n<e.children.length;++n)this._revertTemplateFromNode(t.childNodes[n],e.children[n])}}}Pt(Tc,l);class Ic{constructor(t){Object.assign(this,t)}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const r=()=>Rc(t,e,n);return this.emitter.listenTo(this.observable,"change:"+this.attribute,r),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,r)}}}class Pc extends Ic{activateDomEventListener(t,e,n){const r=(t,n)=>{e&&!n.target.matches(e)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,t,r),()=>{this.emitter.stopListening(n.node,t,r)}}}class Dc extends Ic{getValue(t){return!Kc(super.getValue(t))&&(this.valueIfTrue||!0)}}function Nc(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(Nc):t instanceof Ic)}function Rc(t,e,{node:n}){let r=function(t,e){return t.map(t=>t instanceof Ic?t.getValue(e):t)}(t,n);r=1==t.length&&t[0]instanceof Dc?r[0]:r.reduce(Uc,""),Kc(r)?e.remove():e.set(r)}function jc(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}function Mc(t,e,n){return{set(r){t.setAttributeNS(n,e,r)},remove(){t.removeAttributeNS(n,e)}}}function Fc(t,e){return{set(n){t.style[e]=n},remove(){t.style[e]=null}}}function Lc(t){return Xe(t,t=>{if(t&&(t instanceof Ic||Wc(t)||Hc(t)||Gc(t)))return t})}function Bc(t){if("string"==typeof t?t=function(t){return{text:[t]}}(t):t.text&&function(t){t.text=an(t.text)}(t),t.on&&(t.eventListeners=function(t){for(const e in t)Vc(t,e);return t}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(const e in t)t[e].value&&(t[e].value=an(t[e].value)),Vc(t,e)}(t.attributes);const e=[];if(t.children)if(Gc(t.children))e.push(t.children);else for(const n of t.children)Wc(n)||Hc(n)||hi(n)?e.push(n):e.push(new Tc(n));t.children=e}return t}function Vc(t,e){t[e]=an(t[e])}function Uc(t,e){return Kc(e)?t:Kc(t)?e:`${t} ${e}`}function qc(t,e){for(const n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function zc(t,e){if(e.attributes&&(t.attributes||(t.attributes={}),qc(t.attributes,e.attributes)),e.eventListeners&&(t.eventListeners||(t.eventListeners={}),qc(t.eventListeners,e.eventListeners)),e.text&&t.text.push(...e.text),e.children&&e.children.length){if(t.children.length!=e.children.length)throw new a.a("ui-template-extend-children-mismatch",t);let n=0;for(const r of e.children)zc(t.children[n++],r)}}function Kc(t){return!t&&0!==t}function Hc(t){return t instanceof Sc}function Wc(t){return t instanceof Tc}function Gc(t){return t instanceof Oc}function $c(t){return"class"==t||"style"==t}class Qc extends Oc{constructor(t,e=[]){super(e),this.locale=t}attachToDom(){this._bodyCollectionContainer=new Tc({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let t=document.querySelector(".ck-body-wrapper");t||(t=function(t,e,n={},r=[]){const i=n&&n.xmlns,o=i?t.createElementNS(i,e):t.createElement(e);for(const s in n)o.setAttribute(s,n[s]);!_o(r)&&rn(r)||(r=[r]);for(let s of r)_o(s)&&(s=t.createTextNode(s)),o.appendChild(s);return o}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(t)),t.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const t=document.querySelector(".ck-body-wrapper");t&&0==t.childElementCount&&t.remove()}}var Yc=n(14);fi()(Yc.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class Jc extends Sc{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),e=t.getAttribute("viewBox");for(e&&(this.viewBox=e),this.element.innerHTML="";t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}var Xc=n(15);fi()(Xc.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class Zc extends Sc{constructor(t){super(t),this.set("text",""),this.set("position","s");const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",e.to("position",t=>"ck-tooltip_"+t),e.if("text","ck-hidden",t=>!t.trim())]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:e.to("text")}]}]})}}var tu=n(16);fi()(tu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class eu extends Sc{constructor(t){super(t);const e=this.bindTemplate,n=o();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(n),this.iconView=new Jc,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",e.to("class"),e.if("isEnabled","ck-disabled",t=>!t),e.if("isVisible","ck-hidden",t=>!t),e.to("isOn",t=>t?"ck-on":"ck-off"),e.if("withText","ck-button_with-text"),e.if("withKeystroke","ck-button_with-keystroke")],type:e.to("type",t=>t||"button"),tabindex:e.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+n,"aria-disabled":e.if("isEnabled",!0,t=>!t),"aria-pressed":e.to("isOn",t=>!!this.isToggleable&&String(t))},children:this.children,on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(t=>{this.isEnabled?this.fire("execute"):t.preventDefault()})}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createTooltipView(){const t=new Zc;return t.bind("text").to(this,"_tooltipString"),t.bind("position").to(this,"tooltipPosition"),t}_createLabelView(t){const e=new Sc;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:this.bindTemplate.to("labelStyle"),id:"ck-editor__aria-label_"+t},children:[{text:this.bindTemplate.to("label")}]}),e}_createKeystrokeView(){const t=new Sc;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>Dr(t))}]}),t}_getTooltipString(t,e,n){return t?"string"==typeof t?t:(n&&(n=Dr(n)),t instanceof Function?t(e,n):`${e}${n?` (${n})`:""}`):""}}var nu=n(17);fi()(nu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class ru extends eu{constructor(t){super(t),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new Sc;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}function iu(t){return"string"==typeof t?{model:t,label:t,hasBorder:!1,view:{name:"span",styles:{color:t}}}:{model:t.color,label:t.label||t.color,hasBorder:void 0!==t.hasBorder&&t.hasBorder,view:{name:"span",styles:{color:""+t.color}}}}class ou extends eu{constructor(t){super(t);const e=this.bindTemplate;this.set("color"),this.set("hasBorder"),this.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:e.to("color")},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class su{constructor(t){if(Object.assign(this,t),t.actions&&t.keystrokeHandler)for(const e in t.actions){let n=t.actions[e];"string"==typeof n&&(n=[n]);for(const r of n)t.keystrokeHandler.set(r,(t,n)=>{this[e](),n()})}}get first(){return this.focusables.find(au)||null}get last(){return this.focusables.filter(au).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,n)=>{const r=e.element===this.focusTracker.focusedElement;return r&&(t=n),r}),t)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(t){t&&t.focus()}_getFocusableItem(t){const e=this.current,n=this.focusables.length;if(!n)return null;if(null===e)return this[1===t?"first":"last"];let r=(e+n+t)%n;do{const e=this.focusables.get(r);if(au(e))return e;r=(r+n+t)%n}while(r!==e);return null}}function au(t){return!(!t.focus||"none"==_i.window.getComputedStyle(t.element).display)}var cu=n(18);fi()(cu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class uu extends Sc{constructor(t,e){super(t);const n=e&&e.colorDefinitions||[],r={};e&&e.columns&&(r.gridTemplateColumns=`repeat( ${e.columns}, 1fr)`),this.set("selectedColor"),this.items=this.createCollection(),this.focusTracker=new Io,this.keystrokes=new Po,this._focusCycler=new su({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.items.on("add",(t,e)=>{e.isOn=e.color===this.selectedColor}),n.forEach(t=>{const e=new ou;e.set({color:t.color,label:t.label,tooltip:!0,hasBorder:t.options.hasBorder}),e.on("execute",()=>{this.fire("execute",{value:t.color,hasBorder:t.options.hasBorder,label:t.label})}),this.items.add(e)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",(t,e,n)=>{for(const r of this.items)r.isOn=r.color===n})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}class lu extends eu{constructor(t){super(t),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Jc;return t.content='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}var hu=n(19);fi()(hu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class du extends Sc{constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",t=>"ck-dropdown__panel_"+t),e.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:e.to(t=>t.preventDefault())}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const t=this.children.last;"function"==typeof t.focusLast?t.focusLast():t.focus()}}}var fu=n(20);function pu({element:t,target:e,positions:n,limiter:r,fitInViewport:i,viewportOffsetConfig:o}){S(e)&&(e=e()),S(r)&&(r=r());const s=function(t){return t&&t.parentNode?t.offsetParent===_i.document.body?null:t.offsetParent:null}(t),a=new Co(t);let c;const u={targetRect:new Co(e),elementRect:a,positionedElementAncestor:s};if(r||i){const t=r&&new Co(r).getVisible(),e=i&&function(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const e=new Co(_i.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e}(o);Object.assign(u,{limiterRect:t,viewportRect:e}),c=function(t,e){const{elementRect:n}=e,r=n.getArea(),i=t.map(t=>new mu(t,e)).filter(t=>!!t.name);let o=0,s=null;for(const a of i){const{_limiterIntersectionArea:t,_viewportIntersectionArea:e}=a;if(t===r)return a;const n=Math.pow(e,2)+Math.pow(t,2);n>o&&(o=n,s=a)}return s}(n,u)||new mu(n[0],u)}else c=new mu(n[0],u);return c}function gu(t){const{scrollX:e,scrollY:n}=_i.window;return t.clone().moveBy(e,n)}fi()(fu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class mu{constructor(t,e){const n=t(e.targetRect,e.elementRect,e.viewportRect);if(!n)return;const{left:r,top:i,name:o,config:s}=n;Object.assign(this,{name:o,config:s}),this._positioningFunctionCorrdinates={left:r,top:i},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get _limiterIntersectionArea(){const t=this._options.limiterRect;if(t){const e=this._options.viewportRect;if(!e)return t.getIntersectionArea(this._rect);{const n=t.getIntersection(e);if(n)return n.getIntersectionArea(this._rect)}}return 0}get _viewportIntersectionArea(){const t=this._options.viewportRect;return t?t.getIntersectionArea(this._rect):0}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left,this._positioningFunctionCorrdinates.top)),this._cachedRect}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=gu(this._rect),this._options.positionedElementAncestor&&function(t,e){const n=gu(new Co(e)),r=wo(e);let i=0,o=0;i-=n.left,o-=n.top,i+=e.scrollLeft,o+=e.scrollTop,i-=r.left,o-=r.top,t.moveBy(i,o)}(this._cachedAbsoluteRect,this._options.positionedElementAncestor)),this._cachedAbsoluteRect}}class bu extends Sc{constructor(t,e,n){super(t);const r=this.bindTemplate;this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("id"),this.set("panelPosition","auto"),this.keystrokes=new Po,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",t=>!t)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[e,n]}),e.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",()=>{this.isOpen&&(this.panelView.position="auto"===this.panelPosition?bu._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelPosition)}),this.keystrokes.listenTo(this.element);const t=(t,e)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,e())};this.keystrokes.set("arrowdown",(t,e)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,e())}),this.keystrokes.set("arrowright",(t,e)=>{this.isOpen&&e()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:e,southEast:n,southWest:r,northEast:i,northWest:o,southMiddleEast:s,southMiddleWest:a,northMiddleEast:c,northMiddleWest:u}=bu.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[n,r,s,a,t,i,o,c,u,e]:[r,n,a,s,t,o,i,u,c,e]}}bu.defaultPanelPositions={south:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),southMiddleEast:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"}),southMiddleWest:(t,e)=>({top:t.bottom,left:t.left-3*(e.width-t.width)/4,name:"smw"}),north:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),northMiddleEast:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"}),northMiddleWest:(t,e)=>({top:t.top-e.height,left:t.left-3*(e.width-t.width)/4,name:"nmw"})},bu._getOptimalPosition=pu;class vu extends Sc{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class _u extends Sc{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function yu(t){return t.bindTemplate.to(e=>{e.target===t.element&&e.preventDefault()})}function wu(t){return Array.isArray(t)?{items:t,removeItems:[]}:t?Object.assign({items:[],removeItems:[]},t):{items:[],removeItems:[]}}var ku=n(21);fi()(ku.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class Cu extends Sc{constructor(t,e){super(t);const n=this.bindTemplate,r=this.t;this.options=e||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Io,this.keystrokes=new Po,this.set("class"),this.set("isCompact",!1),this.itemsView=new Au(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const i="rtl"===t.uiLanguageDirection;this._focusCycler=new su({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[i?"arrowright":"arrowleft","arrowup"],focusNext:[i?"arrowleft":"arrowright","arrowdown"]}});const o=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&o.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:o,role:"toolbar","aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")}},children:this.children,on:{mousedown:yu(this)}}),this._behavior=this.options.shouldGroupWhenFull?new Ou(this):new Eu(this)}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,e){const n=wu(t),r=n.items.filter((t,r,i)=>"|"===t||-1===n.removeItems.indexOf(t)&&("-"===t?!this.options.shouldGroupWhenFull||(Object(a.b)("toolbarview-line-break-ignored-when-grouping-items",i),!1):!!e.has(t)||(Object(a.b)("toolbarview-item-unavailable",{name:t}),!1))),i=this._cleanSeparators(r).map(t=>"|"===t?new vu:"-"===t?new _u:e.create(t));this.items.addMany(i)}_cleanSeparators(t){const e=t=>"-"!==t&&"|"!==t,n=t.length,r=t.findIndex(e),i=n-t.slice().reverse().findIndex(e);return t.slice(r,i).filter((t,n,r)=>!!e(t)||!(n>0&&r[n-1]===t))}}class Au extends Sc{constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Eu{constructor(t){const e=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using(t=>t),t.focusables.bindTo(t.items).using(t=>t),t.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class Ou{constructor(t){this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,t.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),t.children.on("add",this._updateFocusCycleableItems.bind(this)),t.children.on("remove",this._updateFocusCycleableItems.bind(this)),t.items.on("change",(t,e)=>{const n=e.index;for(const r of e.removed)n>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=n;r<n+e.added.length;r++){const t=e.added[r-n];r>this.ungroupedItems.length?this.groupedItems.add(t,r-this.ungroupedItems.length):this.ungroupedItems.add(t,r)}this._updateGrouping()}),t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!this.viewElement.offsetParent)return void(this.shouldUpdateGroupingOnNextResize=!0);const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new Co(t.lastChild),r=new Co(t);if(!this.cachedPadding){const n=_i.window.getComputedStyle(t);this.cachedPadding=Number.parseInt(n["ltr"===e?"paddingRight":"paddingLeft"])}return"ltr"===e?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new Oo(this.viewElement,e=>{t&&t===e.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new vu),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=Iu(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===t.uiLanguageDirection?"sw":"se",function(t,e){const n=t.locale,r=n.t,i=t.toolbarView=new Cu(n);i.set("ariaLabel",r("Dropdown toolbar")),t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),[].map(t=>i.items.add(t)),t.panelView.children.add(i),i.items.delegate("execute").to(t)}(n),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:"rtl"===t.uiLanguageDirection?"se":"sw",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'}),n.toolbarView.items.bindTo(this.groupedItems).using(t=>t),n}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}var xu=n(22);fi()(xu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});var Su=n(23),Tu=(fi()(Su.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),n(24));function Iu(t,e=lu){const n=new e(t),r=new du(t),i=new bu(t,n,r);return n.bind("isEnabled").to(i),n instanceof lu?n.bind("isOn").to(i,"isOpen"):n.arrowView.bind("isOn").to(i,"isOpen"),function(t){(function(t){t.on("render",()=>{!function({emitter:t,activator:e,callback:n,contextElements:r}){t.listenTo(document,"mousedown",(t,i)=>{if(!e())return;const o="function"==typeof i.composedPath?i.composedPath():[];for(const e of r)if(e.contains(i.target)||o.includes(e))return;n()})}({emitter:t,activator:()=>t.isOpen,callback:()=>{t.isOpen=!1},contextElements:[t.element]})})})(t),function(t){t.on("execute",e=>{e.source instanceof ru||(t.isOpen=!1)})}(t),function(t){t.keystrokes.set("arrowdown",(e,n)=>{t.isOpen&&(t.panelView.focus(),n())}),t.keystrokes.set("arrowup",(e,n)=>{t.isOpen&&(t.panelView.focusLast(),n())})}(t)}(i),i}fi()(Tu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});var Pu=n(25);fi()(Pu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class Du extends Sc{constructor(t){super(t),this.body=new Qc(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}var Nu=n(26);fi()(Nu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class Ru extends Sc{constructor(t){super(t),this.set("text"),this.set("for"),this.id="ck-editor__label_"+o();const e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:e.to("for")},children:[{text:e.to("text")}]})}}class ju extends Du{constructor(t){super(t),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,e=new Ru;return e.text=t("Rich Text Editor"),e.extendTemplate({attributes:{class:"ck-voice-label"}}),e}}class Mu extends Sc{constructor(t,e,n){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=e}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const t=this._editingView;function e(e){t.change(n=>{const r=t.document.getRoot(e.name);n.addClass(e.isFocused?"ck-focused":"ck-blurred",r),n.removeClass(e.isFocused?"ck-blurred":"ck-focused",r)})}t.isRenderingInProgress?function n(r){t.once("change:isRenderingInProgress",(t,i,o)=>{o?n(r):e(r)})}(this):e(this)}}class Fu extends Mu{constructor(t,e,n){super(t,e,n),this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView,e=this.t;t.change(n=>{const r=t.document.getRoot(this.name);n.setAttribute("aria-label",e("Rich Text Editor, %0",this.name),r)})}}var Lu=n(27);fi()(Lu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});var Bu=n(28);fi()(Bu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});var Vu=n(29);fi()(Vu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),Pt(class{constructor(t,e){e&&vt(this,e),t&&this.set(t)}},Et);var Uu=n(30);fi()(Uu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});const qu=So("px"),zu=_i.document.body;class Ku extends Sc{constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",t=>"ck-balloon-panel_"+t),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",qu),left:e.to("left",qu)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){this.show();const e=Ku.defaultPositions,n=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthMiddleWest,e.southArrowNorthMiddleEast,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthMiddleWest,e.northArrowSouthMiddleEast,e.northArrowSouthWest,e.northArrowSouthEast,e.viewportStickyNorth],limiter:zu,fitInViewport:!0},t),r=Ku._getOptimalPosition(n),i=parseInt(r.left),o=parseInt(r.top),{name:s,config:a={}}=r,{withArrow:c=!0}=a;Object.assign(this,{top:o,left:i,position:s,withArrow:c})}pin(t){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){this.attachTo(t);const e=Hu(t.target),n=t.limiter?Hu(t.limiter):zu;this.listenTo(_i.document,"scroll",(r,i)=>{const o=i.target,s=e&&o.contains(e),a=n&&o.contains(n);!s&&!a&&e&&n||this.attachTo(t)},{useCapture:!0}),this.listenTo(_i.window,"resize",()=>{this.attachTo(t)})}_stopPinning(){this.stopListening(_i.document,"scroll"),this.stopListening(_i.window,"resize")}}function Hu(t){return Ze(t)?t:yo(t)?t.commonAncestorContainer:"function"==typeof t?Hu(t()):null}Ku.arrowHorizontalOffset=25,Ku.arrowVerticalOffset=10,Ku.stickyVerticalOffset=20,Ku._getOptimalPosition=pu,Ku.defaultPositions=function({horizontalOffset:t=Ku.arrowHorizontalOffset,verticalOffset:e=Ku.arrowVerticalOffset,stickyVerticalOffset:n=Ku.stickyVerticalOffset,config:r}={}){return{northWestArrowSouthWest:(e,n)=>Object.assign({top:i(e,n),left:e.left-t,name:"arrow_sw"},r&&{config:r}),northWestArrowSouthMiddleWest:(e,n)=>Object.assign({top:i(e,n),left:e.left-.25*n.width-t,name:"arrow_smw"},r&&{config:r}),northWestArrowSouth:(t,e)=>Object.assign({top:i(t,e),left:t.left-e.width/2,name:"arrow_s"},r&&{config:r}),northWestArrowSouthMiddleEast:(e,n)=>Object.assign({top:i(e,n),left:e.left-.75*n.width+t,name:"arrow_sme"},r&&{config:r}),northWestArrowSouthEast:(e,n)=>Object.assign({top:i(e,n),left:e.left-n.width+t,name:"arrow_se"},r&&{config:r}),northArrowSouthWest:(e,n)=>Object.assign({top:i(e,n),left:e.left+e.width/2-t,name:"arrow_sw"},r&&{config:r}),northArrowSouthMiddleWest:(e,n)=>Object.assign({top:i(e,n),left:e.left+e.width/2-.25*n.width-t,name:"arrow_smw"},r&&{config:r}),northArrowSouth:(t,e)=>Object.assign({top:i(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s"},r&&{config:r}),northArrowSouthMiddleEast:(e,n)=>Object.assign({top:i(e,n),left:e.left+e.width/2-.75*n.width+t,name:"arrow_sme"},r&&{config:r}),northArrowSouthEast:(e,n)=>Object.assign({top:i(e,n),left:e.left+e.width/2-n.width+t,name:"arrow_se"},r&&{config:r}),northEastArrowSouthWest:(e,n)=>Object.assign({top:i(e,n),left:e.right-t,name:"arrow_sw"},r&&{config:r}),northEastArrowSouthMiddleWest:(e,n)=>Object.assign({top:i(e,n),left:e.right-.25*n.width-t,name:"arrow_smw"},r&&{config:r}),northEastArrowSouth:(t,e)=>Object.assign({top:i(t,e),left:t.right-e.width/2,name:"arrow_s"},r&&{config:r}),northEastArrowSouthMiddleEast:(e,n)=>Object.assign({top:i(e,n),left:e.right-.75*n.width+t,name:"arrow_sme"},r&&{config:r}),northEastArrowSouthEast:(e,n)=>Object.assign({top:i(e,n),left:e.right-n.width+t,name:"arrow_se"},r&&{config:r}),southWestArrowNorthWest:(e,n)=>Object.assign({top:o(e),left:e.left-t,name:"arrow_nw"},r&&{config:r}),southWestArrowNorthMiddleWest:(e,n)=>Object.assign({top:o(e),left:e.left-.25*n.width-t,name:"arrow_nmw"},r&&{config:r}),southWestArrowNorth:(t,e)=>Object.assign({top:o(t),left:t.left-e.width/2,name:"arrow_n"},r&&{config:r}),southWestArrowNorthMiddleEast:(e,n)=>Object.assign({top:o(e),left:e.left-.75*n.width+t,name:"arrow_nme"},r&&{config:r}),southWestArrowNorthEast:(e,n)=>Object.assign({top:o(e),left:e.left-n.width+t,name:"arrow_ne"},r&&{config:r}),southArrowNorthWest:(e,n)=>Object.assign({top:o(e),left:e.left+e.width/2-t,name:"arrow_nw"},r&&{config:r}),southArrowNorthMiddleWest:(e,n)=>Object.assign({top:o(e),left:e.left+e.width/2-.25*n.width-t,name:"arrow_nmw"},r&&{config:r}),southArrowNorth:(t,e)=>Object.assign({top:o(t),left:t.left+t.width/2-e.width/2,name:"arrow_n"},r&&{config:r}),southArrowNorthMiddleEast:(e,n)=>Object.assign({top:o(e),left:e.left+e.width/2-.75*n.width+t,name:"arrow_nme"},r&&{config:r}),southArrowNorthEast:(e,n)=>Object.assign({top:o(e),left:e.left+e.width/2-n.width+t,name:"arrow_ne"},r&&{config:r}),southEastArrowNorthWest:(e,n)=>Object.assign({top:o(e),left:e.right-t,name:"arrow_nw"},r&&{config:r}),southEastArrowNorthMiddleWest:(e,n)=>Object.assign({top:o(e),left:e.right-.25*n.width-t,name:"arrow_nmw"},r&&{config:r}),southEastArrowNorth:(t,e)=>Object.assign({top:o(t),left:t.right-e.width/2,name:"arrow_n"},r&&{config:r}),southEastArrowNorthMiddleEast:(e,n)=>Object.assign({top:o(e),left:e.right-.75*n.width+t,name:"arrow_nme"},r&&{config:r}),southEastArrowNorthEast:(e,n)=>Object.assign({top:o(e),left:e.right-n.width+t,name:"arrow_ne"},r&&{config:r}),viewportStickyNorth:(t,e,i)=>t.getIntersection(i)?{top:i.top+n,left:t.left+t.width/2-e.width/2,name:"arrowless",config:Object.assign({withArrow:!1},r)}:null};function i(t,n){return t.top-n.height-e}function o(t){return t.bottom+e}}();var Wu=n(31),Gu=(fi()(Wu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),n(32));fi()(Gu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),So("px");var $u=n(33);fi()($u.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});const Qu=So("px");class Yu extends Sc{constructor(t){super(t);const e=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new Tc({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:e.to("isSticky",t=>t?"block":"none"),height:e.to("isSticky",t=>t?Qu(this._panelRect.height):null)}}}).render(),this._contentPanel=new Tc({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",e.if("isSticky","ck-sticky-panel__content_sticky"),e.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:e.to("isSticky",t=>t?Qu(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:e.to("_hasViewportTopOffset",t=>t?Qu(this.viewportTopOffset):null),bottom:e.to("_isStickyToTheLimiter",t=>t?Qu(this.limiterBottomOffset):null),marginLeft:e.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(_i.window,"scroll",()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,"change:isActive",()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){const t=this._panelRect=this._contentPanel.getBoundingClientRect();let e;this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<t.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Qu(-_i.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}So("px");var Ju=n(34);fi()(Ju.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),So("px"),So("px");var Xu=n(35);fi()(Xu.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});const Zu=new WeakMap;function tl(t,e){const n=Zu.get(t),r=[];let i=!1;for(const[o,s]of n)s.isDirectHost&&(r.push(o),el(e,o,s)&&(i=!0));for(const[o,s]of n){if(s.isDirectHost)continue;const t=nl(o);t&&(r.includes(t)||(s.hostElement=t,el(e,o,s)&&(i=!0)))}return i}function el(t,e,n){const{text:r,isDirectHost:i,hostElement:o}=n;let s=!1;return o.getAttribute("data-placeholder")!==r&&(t.setAttribute("data-placeholder",r,o),s=!0),(i||1==e.childCount)&&function(t,e){if(!t.isAttached())return!1;if(Array.from(t.getChildren()).some(t=>!t.is("uiElement")))return!1;if(e)return!0;const n=t.document;if(!n.isFocused)return!0;const r=n.selection.anchor;return r&&r.parent!==t}(o,n.keepOnFocus)?function(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0)}(t,o)&&(s=!0):function(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0)}(t,o)&&(s=!0),s}function nl(t){if(t.childCount){const e=t.getChild(0);if(e.is("element")&&!e.is("uiElement"))return e}return null}const rl=new Map;function il(t,e,n){let r=rl.get(t);r||(r=new Map,rl.set(t,r)),r.set(e,n)}function ol(t){return[t]}function sl(t,e,n={}){const r=function(t,e){const n=rl.get(t);return n&&n.has(e)?n.get(e):ol}(t.constructor,e.constructor);try{return r(t=t.clone(),e,n)}catch(t){throw t}}function al(t,e,n){t=t.slice(),e=e.slice();const r=new cl(n.document,n.useRelations,n.forceWeakRemove);r.setOriginalOperations(t),r.setOriginalOperations(e);const i=r.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:i};const o=new WeakMap;for(const c of t)o.set(c,0);const s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};let a=0;for(;a<t.length;){const n=t[a],i=o.get(n);if(i==e.length){a++;continue}const s=e[i],c=sl(n,s,r.getContext(n,s,!0)),u=sl(s,n,r.getContext(s,n,!1));r.updateRelation(n,s),r.setOriginalOperations(c,n),r.setOriginalOperations(u,s);for(const t of c)o.set(t,i+u.length);t.splice(a,1,...c),e.splice(i,1,...u)}if(n.padWithNoOps){const n=t.length-s.originalOperationsACount,r=e.length-s.originalOperationsBCount;ll(t,r-n),ll(e,n-r)}return ul(t,s.nextBaseVersionB),ul(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:i}}class cl{constructor(t,e,n=!1){this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const r of t)this.originalOperations.set(r,n||r)}updateRelation(t,e){switch(t.constructor){case Ea:switch(e.constructor){case Ia:t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter");break;case Ea:t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter")}break;case Pa:switch(e.constructor){case Ia:t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");break;case Ea:if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=es._createFromPositionAndShift(e.sourcePosition,e.howMany);t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)&&this._setRelation(t,e,{howMany:n.end.offset-t.splitPosition.offset,offset:t.splitPosition.offset-n.start.offset})}}break;case Ia:switch(e.constructor){case Ia:t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement");break;case Pa:t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource")}break;case xa:{const n=t.newRange;if(!n)return;switch(e.constructor){case Ea:{const r=es._createFromPositionAndShift(e.sourcePosition,e.howMany),i=r.containsPosition(n.start)||r.start.isEqual(n.start),o=r.containsPosition(n.end)||r.end.isEqual(n.end);!i&&!o||r.containsRange(n)||this._setRelation(t,e,{side:i?"left":"right",path:i?n.start.path.slice():n.end.path.slice()});break}case Ia:{const r=n.start.isEqual(e.targetPosition),i=n.start.isEqual(e.deletionPosition),o=n.end.isEqual(e.deletionPosition),s=n.end.isEqual(e.sourcePosition);(r||i||o||s)&&this._setRelation(t,e,{wasInLeftElement:r,wasStartBeforeMergedElement:i,wasEndBeforeMergedElement:o,wasInRightElement:s});break}}break}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),r=this._history.getUndoneOperation(n);if(!r)return null;const i=this.originalOperations.get(t),o=this._relations.get(i);return o&&o.get(r)||null}_setRelation(t,e,n){const r=this.originalOperations.get(t),i=this.originalOperations.get(e);let o=this._relations.get(r);o||(o=new Map,this._relations.set(r,o)),o.set(i,n)}}function ul(t,e){for(const n of t)n.baseVersion=e++}function ll(t,e){for(let n=0;n<e;n++)t.push(new Ja(0))}function hl(t,e,n){const r=t.nodes.getNode(0).getAttribute(e);if(r==n)return null;const i=new es(t.position,t.position.getShiftedBy(t.howMany));return new Ca(i,e,r,n,0)}function dl(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function fl(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=new Ea(i.start,i.end.offset-i.start.offset,e,0);n.push(o);for(let e=r+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return n}il(Ca,Ca,(t,e,n)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const r=t.range.getDifference(e.range).map(e=>new Ca(e,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&n.aIsStrong&&r.push(new Ca(i,e.key,e.newValue,t.newValue,0)),0==r.length?[new Ja(0)]:r}return[t]}),il(Ca,Oa,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const n=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new Ca(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const r=hl(e,t.key,t.oldValue);r&&n.unshift(r)}return n}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),il(Ca,Ia,(t,e)=>{const n=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&n.push(es._createFromPositionAndShift(e.graveyardPosition,1));const r=t.range._getTransformedByMergeOperation(e);return r.isCollapsed||n.push(r),n.map(e=>new Ca(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),il(Ca,Ea,(t,e)=>function(t,e){const n=es._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=null,i=[];n.containsRange(t,!0)?r=t:t.start.hasSameParentAs(n.start)?(i=t.getDifference(n),r=t.getIntersection(n)):i=[t];const o=[];for(let s of i){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);const t=e.getMovedRangeStart(),n=s.start.hasSameParentAs(t);s=s._getTransformedByInsertion(t,e.howMany,n),o.push(...s)}return r&&o.push(r._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}(t.range,e).map(e=>new Ca(e,t.key,t.oldValue,t.newValue,t.baseVersion))),il(Ca,Pa,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const n=t.clone();return n.range=new es(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,n]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),il(Oa,Ca,(t,e)=>{const n=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const r=hl(t,e.key,e.newValue);r&&n.push(r)}return n}),il(Oa,Oa,(t,e,n)=>(t.position.isEqual(e.position)&&n.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),il(Oa,Ea,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),il(Oa,Pa,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),il(Oa,Ia,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),il(xa,Oa,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),il(xa,xa,(t,e,n)=>{if(t.name==e.name){if(!n.aIsStrong)return[new Ja(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),il(xa,Ia,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),il(xa,Ea,(t,e,n)=>{if(t.oldRange&&(t.oldRange=es._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){if(n.abRelation){const r=es._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if("left"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.start))return t.newRange.start.path=n.abRelation.path,t.newRange.end=r.end,[t];if("right"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.end))return t.newRange.start=r.start,t.newRange.end.path=n.abRelation.path,[t]}t.newRange=es._createFromRanges(t.newRange._getTransformedByMoveOperation(e))}return[t]}),il(xa,Pa,(t,e,n)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(n.abRelation){const r=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?t.newRange.start=Jo._createAt(e.insertionPosition):t.newRange.start.isEqual(e.splitPosition)&&!n.abRelation.wasInLeftElement&&(t.newRange.start=Jo._createAt(e.moveTargetPosition)),t.newRange.end=t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasInRightElement?Jo._createAt(e.moveTargetPosition):t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?Jo._createAt(e.insertionPosition):r.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),il(Ia,Oa,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),il(Ia,Ia,(t,e,n)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(n.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),t.sourcePosition=new Jo(e.graveyardPosition.root,n),t.howMany=0,[t]}return[new Ja(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){const r="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName,o=r&&!i;if(i&&!r||!o&&n.aIsStrong){const n=e.targetPosition._getTransformedByMergeOperation(e),r=t.targetPosition._getTransformedByMergeOperation(e);return[new Ea(n,t.howMany,r,0)]}return[new Ja(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&n.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),il(Ia,Ea,(t,e,n)=>{const r=es._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!n.bWasUndone&&!n.forceWeakRemove&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.sourcePosition)?[new Ja(0)]:(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),il(Ia,Pa,(t,e,n)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){const r=0!=e.howMany,i=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(r||i||"mergeTargetNotMoved"==n.abRelation)return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t]}if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==n.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),il(Ea,Oa,(t,e)=>{const n=es._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=n.start,t.howMany=n.end.offset-n.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),il(Ea,Ea,(t,e,n)=>{const r=es._createFromPositionAndShift(t.sourcePosition,t.howMany),i=es._createFromPositionAndShift(e.sourcePosition,e.howMany);let o,s=n.aIsStrong,a=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?a=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(a=!1),o=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),dl(t,e)&&dl(e,t))return[e.getReversed()];if(r.containsPosition(e.targetPosition)&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),fl([r],o);if(i.containsPosition(t.targetPosition)&&i.containsRange(r,!0))return r.start=r.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),r.end=r.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),fl([r],o);const c=dn(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==c||"extension"==c)return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),fl([r],o);"remove"!=t.type||"remove"==e.type||n.aWasUndone||n.forceWeakRemove?"remove"==t.type||"remove"!=e.type||n.bWasUndone||n.forceWeakRemove||(s=!1):s=!0;const u=[],l=r.getDifference(i);for(const d of l){d.start=d.start._getTransformedByDeletion(e.sourcePosition,e.howMany),d.end=d.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const t="same"==dn(d.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=d._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,t);u.push(...n)}const h=r.getIntersection(i);return null!==h&&s&&(h.start=h.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),h.end=h.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===u.length?u.push(h):1==u.length?i.start.isBefore(r.start)||i.start.isEqual(r.start)?u.unshift(h):u.push(h):u.splice(1,0,h)),0===u.length?[new Ja(t.baseVersion)]:fl(u,o)}),il(Ea,Pa,(t,e,n)=>{let r=t.targetPosition.clone();t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(r=t.targetPosition._getTransformedBySplitOperation(e));const i=es._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.howMany++,t.targetPosition=r,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new es(e.splitPosition,i.end);return t=t._getTransformedBySplitOperation(e),fl([new es(i.start,e.splitPosition),t],r)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==n.abRelation&&(r=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==n.abRelation&&(r=t.targetPosition);const o=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const r=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&r&&!n.aWasUndone&&o.push(es._createFromPositionAndShift(e.insertionPosition,1))}return fl(o,r)}),il(Ea,Ia,(t,e,n)=>{const r=es._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.sourcePosition))if("remove"!=t.type||n.forceWeakRemove){if(1==t.howMany)return n.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Ja(0)]}else if(!n.aWasUndone){const n=[];let r=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);t.howMany>1&&(n.push(new Ea(t.sourcePosition,t.howMany-1,t.targetPosition,0)),r=r._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),s=new Ea(r,1,o,0),a=s.getMovedRangeStart().path.slice();a.push(0);const c=new Jo(s.targetPosition.root,a);i=i._getTransformedByMove(r,o,1);const u=new Ea(i,e.howMany,c,0);return n.push(s),n.push(u),n}const i=es._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),il(Sa,Oa,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),il(Sa,Ia,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),il(Sa,Ea,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),il(Sa,Sa,(t,e,n)=>{if(t.position.isEqual(e.position)){if(!n.aIsStrong)return[new Ja(0)];t.oldName=e.newName}return[t]}),il(Sa,Pa,(t,e)=>{if("same"==dn(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new Sa(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),il(Ta,Ta,(t,e,n)=>{if(t.root===e.root&&t.key===e.key){if(!n.aIsStrong||t.newValue===e.newValue)return[new Ja(0)];t.oldValue=e.newValue}return[t]}),il(Pa,Oa,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),il(Pa,Ia,(t,e,n)=>{if(!t.graveyardPosition&&!n.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const r=new Jo(e.graveyardPosition.root,n),i=Pa.getInsertionPosition(new Jo(e.graveyardPosition.root,n)),o=new Pa(r,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Pa.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Pa.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),il(Pa,Ea,(t,e,n)=>{const r=es._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=r.start.isEqual(t.graveyardPosition)||r.containsPosition(t.graveyardPosition);if(!n.bWasUndone&&i){const n=t.splitPosition._getTransformedByMoveOperation(e),r=t.graveyardPosition._getTransformedByMoveOperation(e),i=r.path.slice();i.push(0);const o=new Jo(r.root,i);return[new Ea(n,t.howMany,o,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&("insertAtSource"==n.baRelation||"splitBefore"==n.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Pa.getInsertionPosition(t.splitPosition),[t];if(i&&n.abRelation&&n.abRelation.howMany){const{howMany:e,offset:r}=n.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(r),[t]}return t.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.splitPosition)?(t.howMany-=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Pa.getInsertionPosition(t.splitPosition),[t]):(e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.insertionPosition=t.graveyardPosition?t.insertionPosition._getTransformedByMoveOperation(e):Pa.getInsertionPosition(t.splitPosition),[t])}),il(Pa,Pa,(t,e,n)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Ja(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Ja(0)];if("splitBefore"==n.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const r="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName,o=r&&!i;if(i&&!r||!o&&n.aIsStrong){const n=[];return e.howMany&&n.push(new Ea(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&n.push(new Ea(t.splitPosition,t.howMany,t.moveTargetPosition,0)),n}return[new Ja(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.baRelation){const n=e.insertionPosition.path.slice();n.push(0);const r=new Jo(e.insertionPosition.root,n);return[t,new Ea(t.insertionPosition,1,r,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Pa.getInsertionPosition(t.splitPosition),[t]});class pl extends Zi{constructor(t){super(t),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(t){this.fire(t.type,t)}}new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);class gl extends Cc{constructor(t,e){super(t),this.view=e,this._toolbarConfig=wu(t.config.get("toolbar")),this._elementReplacer=new vo}get element(){return this.view.element}init(t){const e=this.view,n=this.editor.editing.view,r=e.editable,i=n.document.getRoot();r.name=i.rootName,e.render();const o=r.element;this.setEditableElement(r.name,o),this.focusTracker.add(o),e.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(o),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.detachDomRoot(t.editable.name),t.destroy(),super.destroy()}_initToolbar(){const t=this.editor,e=this.view,n=t.editing.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),function({origin:t,originKeystrokeHandler:e,originFocusTracker:n,toolbar:r,beforeFocus:i,afterBlur:o}){n.add(r.element),e.set("Alt+F10",(t,e)=>{n.isFocused&&!r.focusTracker.isFocused&&(i&&i(),r.focus(),e())}),r.keystrokes.set("Esc",(e,n)=>{r.focusTracker.isFocused&&(t.focus(),o&&o(),n())})}({origin:n,originFocusTracker:this.focusTracker,originKeystrokeHandler:t.keystrokes,toolbar:e.toolbar})}_initPlaceholder(){const t=this.editor,e=t.editing.view,n=e.document.getRoot(),r=t.sourceElement,i=t.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&function(t){const{view:e,element:n,text:r,isDirectHost:i=!0,keepOnFocus:o=!1}=t,s=e.document;Zu.has(s)||(Zu.set(s,new Map),s.registerPostFixer(t=>tl(s,t))),Zu.get(s).set(n,{text:r,isDirectHost:i,keepOnFocus:o,hostElement:i?n:null}),e.change(t=>tl(s,t))}({view:e,element:n,text:i,isDirectHost:!1,keepOnFocus:!0})}}var ml=n(36);fi()(ml.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class bl extends ju{constructor(t,e,n={}){super(t),this.stickyPanel=new Yu(t),this.toolbar=new Cu(t,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),this.editable=new Fu(t,e)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class vl extends yc{constructor(t,e){super(e),Ze(t)&&(this.sourceElement=t),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=new bl(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n});this.ui=new gl(this,r),function(t){if(!S(t.updateSourceElement))throw new a.a("attachtoform-missing-elementapi-interface",t);const e=t.sourceElement;if(e&&"textarea"===e.tagName.toLowerCase()&&e.form){let n;const r=e.form,i=()=>t.updateSourceElement();S(r.submit)&&(n=r.submit,r.submit=()=>{i(),n.apply(r)}),r.addEventListener("submit",i),t.on("destroy",()=>{r.removeEventListener("submit",i),n&&(r.submit=n)})}}(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,e={}){return new Promise(n=>{const r=new this(t,e);n(r.initPlugins().then(()=>r.ui.init(Ze(t)?t:null)).then(()=>{if(!Ze(t)&&e.initialData)throw new a.a("editor-create-initial-data",null);const n=void 0!==e.initialData?e.initialData:function(t){return Ze(t)?function(t){return t instanceof HTMLTextAreaElement?t.value:t.innerHTML}(t):t}(t);return r.data.init(n)}).then(()=>r.fire("ready")).then(()=>r))})}}Pt(vl,Ac),Pt(vl,Ec);class _l extends Rt{constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document.selection,r=void 0===t.forceValue?!this.value:t.forceValue;e.change(t=>{if(n.isCollapsed)r?t.setSelectionAttribute(this.attributeKey,!0):t.removeSelectionAttribute(this.attributeKey);else{const i=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of i)r?t.setAttribute(this.attributeKey,r,e):t.removeAttribute(this.attributeKey,e)}})}_getValueFromFirstAllowedNode(){const t=this.editor.model,e=t.schema,n=t.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const r of n.getRanges())for(const t of r.getItems())if(e.checkAttribute(t,this.attributeKey))return t.hasAttribute(this.attributeKey);return!1}}const yl="bold";class wl extends Dt{static get pluginName(){return"BoldEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:yl}),t.model.schema.setAttributeProperties(yl,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:yl,view:"strong",upcastAlso:["b",t=>{const e=t.getStyle("font-weight");return e?"bold"==e||Number(e)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),t.commands.add(yl,new _l(t,yl)),t.keystrokes.set("CTRL+B",yl)}}const kl="bold";class Cl extends Dt{static get pluginName(){return"BoldUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(kl,n=>{const r=t.commands.get(kl),i=new eu(n);return i.set({label:e("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",()=>{t.execute(kl),t.editing.view.focus()}),i})}}class Al{constructor(t){this.files=function(t){const e=Array.from(t.files||[]),n=Array.from(t.items||[]);return e.length?e:n.filter(t=>"file"===t.kind).map(t=>t.getAsFile())}(t),this._native=t}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}class El extends Zi{constructor(t){super(t);const e=this.document;function n(t){return(n,i)=>{i.preventDefault();const o=i.dropRange?[i.dropRange]:null,s=new r(e,t);e.fire(s,{dataTransfer:i.dataTransfer,method:n.name,targetRanges:o,target:i.target}),s.stop.called&&i.stopPropagation()}}this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(e,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"dragover",n("dragging"),{priority:"low"})}onDomEvent(t){const e={dataTransfer:new Al(t.clipboardData?t.clipboardData:t.dataTransfer)};"drop"!=t.type&&"dragover"!=t.type||(e.dropRange=function(t,e){const n=e.target.ownerDocument,r=e.clientX,i=e.clientY;let o;return n.caretRangeFromPoint&&n.caretRangeFromPoint(r,i)?o=n.caretRangeFromPoint(r,i):e.rangeParent&&(o=n.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o?t.domConverter.domRangeToView(o):null}(this.view,t)),this.fire(t.type,t,e)}}const Ol=["figcaption","li"];function xl(t){let e="";if(t.is("$text")||t.is("$textProxy"))e=t.data;else if(t.is("element","img")&&t.hasAttribute("alt"))e=t.getAttribute("alt");else if(t.is("element","br"))e="\n";else{let n=null;for(const r of t.getChildren()){const t=xl(r);n&&(n.is("containerElement")||r.is("containerElement"))&&(Ol.includes(n.name)||Ol.includes(r.name)?e+="\n":e+="\n\n"),e+=t,n=r}}return e}class Sl extends Dt{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(El),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,i=n.document;this.listenTo(i,"clipboardInput",e=>{t.isReadOnly&&e.stop()},{priority:"highest"}),this.listenTo(i,"clipboardInput",(t,e)=>{const i=e.dataTransfer;let o=e.content||"";o||(i.getData("text/html")?o=function(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>1==e.length?" ":e).replace(/<!--[\s\S]*?-->/g,"")}(i.getData("text/html")):i.getData("text/plain")&&(o=function(t){return((t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||t.includes("<br>"))&&(t=`<p>${t}</p>`),t}(i.getData("text/plain"))),o=this.editor.data.htmlProcessor.toView(o));const s=new r(this,"inputTransformation");this.fire(s,{content:o,dataTransfer:i,targetRanges:e.targetRanges,method:e.method}),s.stop.called&&t.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(t,n)=>{if(n.content.isEmpty)return;const r=this.editor.data.toModel(n.content,"$clipboardHolder");0!=r.childCount&&(t.stop(),e.change(()=>{this.fire("contentInsertion",{content:r,method:n.method,dataTransfer:n.dataTransfer,targetRanges:n.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(t,n)=>{n.resultRange=e.insertContent(n.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,n=t.editing.view.document;function r(r,i){const o=i.dataTransfer;i.preventDefault();const s=t.data.toView(t.model.getSelectedContent(e.selection));n.fire("clipboardOutput",{dataTransfer:o,content:s,method:r.name})}this.listenTo(n,"copy",r,{priority:"low"}),this.listenTo(n,"cut",(e,n)=>{t.isReadOnly?n.preventDefault():r(e,n)},{priority:"low"}),this.listenTo(n,"clipboardOutput",(n,r)=>{r.content.isEmpty||(r.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(r.content)),r.dataTransfer.setData("text/plain",xl(r.content))),"cut"==r.method&&t.model.deleteContent(e.selection)},{priority:"low"})}}function*Tl(t,e){for(const n of e)n&&t.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}class Il extends Rt{execute(){const t=this.editor.model,e=t.document;t.change(n=>{!function(t,e,n,r){const i=n.isCollapsed,o=n.getFirstRange(),s=o.start.parent,a=o.end.parent;if(r.isLimit(s)||r.isLimit(a))i||s!=a||t.deleteContent(n);else if(i){const t=Tl(e.model.schema,n.getAttributes());Pl(e,o.start),e.setSelectionAttribute(t)}else{const r=!(o.start.isAtStart&&o.end.isAtEnd),i=s==a;t.deleteContent(n,{leaveUnmerged:r}),r&&(i?Pl(e,n.focus):e.setSelection(a,0))}}(this.editor.model,n,e.selection,t.schema),this.fire("afterExecute",{writer:n})})}}function Pl(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0)}class Dl extends Ri{constructor(t){super(t);const e=this.document;e.on("keydown",(t,n)=>{if(this.isEnabled&&n.keyCode==Sr.enter){const r=new or(e,"enter",e.selection.getFirstRange());e.fire(r,new Xi(e,n.domEvent,{isSoft:n.shiftKey})),r.stop.called&&t.stop()}})}observe(){}}class Nl extends Dt{static get pluginName(){return"Enter"}init(){const t=this.editor,e=t.editing.view,n=e.document;e.addObserver(Dl),t.commands.add("enter",new Il(t)),this.listenTo(n,"enter",(n,r)=>{r.preventDefault(),r.isSoft||(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"})}}class Rl{constructor(t,e=20){this.model=t,this.size=0,this.limit=e,this.isLocked=!1,this._changeCallback=(t,e)=>{"transparent"!=e.type&&e!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch()),this._batch}input(t){this.size+=t,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t){this.isLocked&&!t||(this._batch=null,this.size=0)}}class jl extends Rt{constructor(t,e){super(t),this.direction=e,this._buffer=new Rl(t.model,t.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(t={}){const e=this.editor.model,n=e.document;e.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const i=r.createSelection(t.selection||n.selection),o=t.sequence||1,s=i.isCollapsed;if(i.isCollapsed&&e.modifySelection(i,{direction:this.direction,unit:t.unit}),this._shouldEntireContentBeReplacedWithParagraph(o))return void this._replaceEntireContentWithParagraph(r);if(this._shouldReplaceFirstBlockWithParagraph(i,o))return void this.editor.execute("paragraph",{selection:i});if(i.isCollapsed)return;let a=0;i.getFirstRange().getMinimalFlatRanges().forEach(t=>{a+=nr(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),e.deleteContent(i,{doNotResetEntireContent:s,direction:this.direction}),this._buffer.input(a),r.setSelection(i),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const e=this.editor.model,n=e.document.selection,r=e.schema.getLimitElement(n);if(!n.isCollapsed||!n.containsEntireContent(r))return!1;if(!e.schema.checkChild(r,"paragraph"))return!1;const i=r.getChild(0);return!i||"paragraph"!==i.name}_replaceEntireContentWithParagraph(t){const e=this.editor.model,n=e.schema.getLimitElement(e.document.selection),r=t.createElement("paragraph");t.remove(t.createRangeIn(n)),t.insert(r,n),t.setSelection(r,0)}_shouldReplaceFirstBlockWithParagraph(t,e){const n=this.editor.model;if(e>1||"backward"!=this.direction)return!1;if(!t.isCollapsed)return!1;const r=t.getFirstPosition(),i=n.schema.getLimitElement(r),o=i.getChild(0);return r.parent==o&&!!t.containsEntireContent(o)&&!!n.schema.checkChild(i,"paragraph")&&"paragraph"!=o.name}}function Ml(t){if(t.newChildren.length-t.oldChildren.length!=1)return;const e=function(t,e){const n=[];let r,i=0;return t.forEach(t=>{"equal"==t?(o(),i++):"insert"==t?(s("insert")?r.values.push(e[i]):(o(),r={type:"insert",index:i,values:[e[i]]}),i++):s("delete")?r.howMany++:(o(),r={type:"delete",index:i,howMany:1})}),o(),n;function o(){r&&(n.push(r),r=null)}function s(t){return r&&r.type==t}}(ci(t.oldChildren,t.newChildren,Fl),t.newChildren);if(e.length>1)return;const n=e[0];return n.values[0]&&n.values[0].is("$text")?n:void 0}function Fl(t,e){return t&&t.is("$text")&&e&&e.is("$text")?t.data===e.data:t===e}function Ll(t,e){return t.shiftKey&&t.keyCode===Sr.delete&&!e.selection.isCollapsed}class Bl extends Ri{constructor(t){super(t);const e=t.document;let n=0;function r(t,n,r){const i=new or(e,"delete",e.selection.getFirstRange());e.fire(i,new Xi(e,n,r)),i.stop.called&&t.stop()}e.on("keyup",(t,e)=>{e.keyCode!=Sr.delete&&e.keyCode!=Sr.backspace||(n=0)}),e.on("keydown",(t,i)=>{if(yr&&Ll(i,e))return;const o={};if(i.keyCode==Sr.delete)o.direction="forward",o.unit="character";else{if(i.keyCode!=Sr.backspace)return;o.direction="backward",o.unit="codePoint"}o.unit=(_r?i.altKey:i.ctrlKey)?"word":o.unit,o.sequence=++n,r(t,i.domEvent,o)}),Cr&&e.on("beforeinput",(e,n)=>{if("deleteContentBackward"!=n.domEvent.inputType)return;const i={unit:"codepoint",direction:"backward",sequence:1},o=n.domTarget.ownerDocument.defaultView.getSelection();o.anchorNode==o.focusNode&&o.anchorOffset+1!=o.focusOffset&&(i.selectionToRemove=t.domConverter.domSelectionToView(o)),r(e,n.domEvent,i)})}observe(){}}class Vl extends Dt{static get pluginName(){return"Delete"}init(){const t=this.editor,e=t.editing.view,n=e.document,r=t.model.document;e.addObserver(Bl),this._undoOnBackspace=!1;const i=new jl(t,"forward");if(t.commands.add("deleteForward",i),t.commands.add("forwardDelete",i),t.commands.add("delete",new jl(t,"backward")),this.listenTo(n,"delete",(n,r)=>{const i={unit:r.unit,sequence:r.sequence};if(r.selectionToRemove){const e=t.model.createSelection(),n=[];for(const i of r.selectionToRemove.getRanges())n.push(t.editing.mapper.toModelRange(i));e.setTo(n),i.selection=e}t.execute("forward"==r.direction?"deleteForward":"delete",i),r.preventDefault(),e.scrollToTheSelection()},{priority:"low"}),Cr){let t=null;this.listenTo(n,"delete",(e,n)=>{const r=n.domTarget.ownerDocument.defaultView.getSelection();t={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}},{priority:"lowest"}),this.listenTo(n,"keyup",(e,n)=>{if(t){const e=n.domTarget.ownerDocument.defaultView.getSelection();e.collapse(t.anchorNode,t.anchorOffset),e.extend(t.focusNode,t.focusOffset),t=null}})}this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(e,n)=>{this._undoOnBackspace&&"backward"==n.direction&&1==n.sequence&&"codePoint"==n.unit&&(this._undoOnBackspace=!1,t.execute("undo"),n.preventDefault(),e.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}function Ul(t,e){return t&&e&&t.priority==e.priority&&zl(t.classes)==zl(e.classes)}function ql(t,e){return t.priority>e.priority||!(t.priority<e.priority)&&zl(t.classes)>zl(e.classes)}function zl(t){return Array.isArray(t)?t.sort().join(","):t}Pt(class{constructor(){this._stack=[]}add(t,e){const n=this._stack,r=n[0];this._insertDescriptor(t);const i=n[0];r===i||Ul(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:e})}remove(t,e){const n=this._stack,r=n[0];this._removeDescriptor(t);const i=n[0];r===i||Ul(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:e})}_insertDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t.id);if(Ul(t,e[n]))return;n>-1&&e.splice(n,1);let r=0;for(;e[r]&&ql(e[r],t);)r++;e.splice(r,0,t)}_removeDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t);n>-1&&e.splice(n,1)}},l);const Kl="ck-widget_selected";function Hl(t){return!!t.is("element")&&!!t.getCustomProperty("widget")}function Wl(t){const e=t.getCustomProperty("widgetLabel");return e?"function"==typeof e?e():e:""}const Gl="widget-type-around";function $l(t,e,n){return t&&Hl(t)&&!n.isInline(e)}function Ql(t){return t.getAttribute(Gl)}const Yl=[Ir("arrowUp"),Ir("arrowRight"),Ir("arrowDown"),Ir("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let Bd=112;Bd<=135;Bd++)Yl.push(Bd);function Jl(t){return!(!t.ctrlKey&&!t.metaKey)||Yl.includes(t.keyCode)}var Xl=n(37);fi()(Xl.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});const Zl=["before","after"],th=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,eh="ck-widget__type-around_disabled";class nh extends Dt{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Nl,Vl]}constructor(t){super(t),this._currentFakeCaretModelElement=null}init(){const t=this.editor,e=t.editing.view;this.on("change:isEnabled",(n,r,i)=>{e.change(t=>{for(const n of e.document.roots)i?t.removeClass(eh,n):t.addClass(eh,n)}),i||t.model.change(t=>{t.removeSelectionAttribute(Gl)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableDeleteContentIntegration()}destroy(){this._currentFakeCaretModelElement=null}_insertParagraph(t,e){const n=this.editor,r=n.editing.view;n.execute("insertParagraph",{position:n.model.createPositionAt(t,e)}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(t,e,n,r){this.listenTo(t,e,(...t)=>{this.isEnabled&&n(...t)},r)}_insertParagraphAccordingToFakeCaretPosition(){const t=this.editor.model.document.selection,e=Ql(t);if(!e)return!1;const n=t.getSelectedElement();return this._insertParagraph(n,e),!0}_enableTypeAroundUIInjection(){const t=this.editor,e=t.model.schema,n=t.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",(t,n,i)=>{const o=i.mapper.toViewElement(n.item);$l(o,n.item,e)&&function(t,e,n){const r=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(t){const n=this.toDomElement(t);return function(t,e){for(const n of Zl){const r=new Tc({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+n],title:e[n]},children:[t.ownerDocument.importNode(th,!0)]});t.appendChild(r.render())}}(n,e),function(t){const e=new Tc({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(e.render())}(n),n});t.insert(t.createPositionAt(n,"end"),r)}(i.writer,r,o)},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,e=t.model,n=e.document.selection,r=e.schema;function i(t){return"ck-widget_type-around_show-fake-caret_"+t}this._listenToIfEnabled(t.editing.view.document,"arrowKey",(t,e)=>{this._handleArrowKeyPress(t,e)},{context:[Hl,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(e,n)=>{n.directChange&&t.model.change(t=>{t.removeSelectionAttribute(Gl)})}),this._listenToIfEnabled(e.document,"change:data",()=>{const e=n.getSelectedElement();e&&$l(t.editing.mapper.toViewElement(e),e,r)||t.model.change(t=>{t.removeSelectionAttribute(Gl)})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(t,e,n)=>{const o=n.writer;if(this._currentFakeCaretModelElement){const t=n.mapper.toViewElement(this._currentFakeCaretModelElement);t&&(o.removeClass(Zl.map(i),t),this._currentFakeCaretModelElement=null)}const s=e.selection.getSelectedElement();if(!s)return;const a=n.mapper.toViewElement(s);if(!$l(a,s,r))return;const c=Ql(e.selection);c&&(o.addClass(i(c),a),this._currentFakeCaretModelElement=s)}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(e,n,r)=>{r||t.model.change(t=>{t.removeSelectionAttribute(Gl)})})}_handleArrowKeyPress(t,e){const n=this.editor,r=n.model,i=r.document.selection,o=r.schema,s=n.editing.view,a=function(t,e){const n=Nr(t,e);return"down"===n||"right"===n}(e.keyCode,n.locale.contentLanguageDirection),c=s.document.selection.getSelectedElement();let u;$l(c,n.editing.mapper.toModelElement(c),o)?u=this._handleArrowKeyPressOnSelectedWidget(a):i.isCollapsed?u=this._handleArrowKeyPressWhenSelectionNextToAWidget(a):e.shiftKey||(u=this._handleArrowKeyPressWhenNonCollapsedSelection(a)),u&&(e.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const e=this.editor.model,n=Ql(e.document.selection);return e.change(e=>n?n!==(t?"after":"before")&&(e.removeSelectionAttribute(Gl),!0):(e.setSelectionAttribute(Gl,t?"after":"before"),!0))}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const e=this.editor,n=e.model,r=n.schema,i=e.plugins.get("Widget"),o=i._getObjectElementNextToSelection(t);return!!$l(e.editing.mapper.toViewElement(o),o,r)&&(n.change(e=>{i._setSelectionOverElement(o),e.setSelectionAttribute(Gl,t?"before":"after")}),!0)}_handleArrowKeyPressWhenNonCollapsedSelection(t){const e=this.editor,n=e.model,r=n.schema,i=e.editing.mapper,o=n.document.selection,s=t?o.getLastPosition().nodeBefore:o.getFirstPosition().nodeAfter;return!!$l(i.toViewElement(s),s,r)&&(n.change(e=>{e.setSelection(s,"on"),e.setSelectionAttribute(Gl,t?"after":"before")}),!0)}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,e=t.editing.view;this._listenToIfEnabled(e.document,"mousedown",(n,r)=>{const i=function(t){return t.closest(".ck-widget__type-around__button")}(r.domTarget);if(!i)return;const o=function(t){return t.classList.contains("ck-widget__type-around__button_before")?"before":"after"}(i),s=function(t,e){const n=t.closest(".ck-widget");return e.mapDomToView(n)}(i,e.domConverter),a=t.editing.mapper.toModelElement(s);this._insertParagraph(a,o),r.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,e=t.model.document.selection;this._listenToIfEnabled(t.editing.view.document,"enter",(n,r)=>{if("atTarget"!=n.eventPhase)return;const i=e.getSelectedElement(),o=t.editing.mapper.toViewElement(i),s=t.model.schema;let a;this._insertParagraphAccordingToFakeCaretPosition()?a=!0:$l(o,i,s)&&(this._insertParagraph(i,r.isSoft?"before":"after"),a=!0),a&&(r.preventDefault(),n.stop())},{context:Hl})}_enableInsertingParagraphsOnTypingKeystroke(){const t=[Sr.enter,Sr.delete,Sr.backspace];this._listenToIfEnabled(this.editor.editing.view.document,"keydown",(e,n)=>{t.includes(n.keyCode)||Jl(n)||this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const t=this.editor,e=t.model,n=e.schema;this._listenToIfEnabled(t.editing.view.document,"delete",(r,i)=>{if("atTarget"!=r.eventPhase)return;const o=Ql(e.document.selection);if(!o)return;const s=i.direction,a=e.document.selection.getSelectedElement(),c="forward"==s;if("before"===o===c)t.execute("delete",{selection:e.createSelection(a,"on")});else{const r=n.getNearestSelectionRange(e.createPositionAt(a,o),s);if(r)if(r.isCollapsed){const i=e.createSelection(r.start);if(e.modifySelection(i,{direction:s}),i.focus.isEqual(r.start)){const t=function(t,e){let n=e;for(const r of e.getAncestors({parentFirst:!0})){if(r.childCount>1||t.isLimit(r))break;n=r}return n}(n,r.start.parent);e.deleteContent(e.createSelection(t,"on"),{doNotAutoparagraph:!0})}else e.change(e=>{e.setSelection(r),t.execute(c?"deleteForward":"delete")})}else e.change(e=>{e.setSelection(r),t.execute(c?"deleteForward":"delete")})}i.preventDefault(),r.stop()},{context:Hl})}_enableInsertContentIntegration(){const t=this.editor.model,e=t.document.selection;this._listenToIfEnabled(this.editor.model,"insertContent",(n,[r,i])=>{if(i&&!i.is("documentSelection"))return;const o=Ql(e);return o?(n.stop(),t.change(n=>{const i=e.getSelectedElement(),s=t.createPositionAt(i,o),a=n.createSelection(s),c=t.insertContent(r,a);return n.setSelection(a),c})):void 0},{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor.model.document.selection;this._listenToIfEnabled(this.editor.model,"deleteContent",(e,[n])=>{n&&!n.is("documentSelection")||Ql(t)&&e.stop()},{priority:"high"})}}function rh(t,e,n){const r=t.schema,i=t.createRangeIn(e.root),o="forward"==n?"elementStart":"elementEnd";for(const{previousPosition:s,item:a,type:c}of i.getWalker({startPosition:e,direction:n})){if(r.isLimit(a)&&!r.isInline(a))return s;if(c==o&&r.isBlock(a))return null}return null}function ih(t,e,n){const r="backward"==n?e.end:e.start;if(t.checkChild(r,"$text"))return r;for(const{nextPosition:i}of e.getWalker({direction:n}))if(t.checkChild(i,"$text"))return i;return null}var oh=n(38);fi()(oh.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class sh extends Dt{static get pluginName(){return"Widget"}static get requires(){return[nh,Vl]}init(){const t=this.editor,e=t.editing.view,n=e.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(e,n,r)=>{const i=r.writer,o=n.selection;if(o.isCollapsed)return;const s=o.getSelectedElement();if(!s)return;const a=t.editing.mapper.toViewElement(s);Hl(a)&&r.consumable.consume(o,"selection")&&i.setSelection(i.createRangeOn(a),{fake:!0,label:Wl(a)})}),this.editor.editing.downcastDispatcher.on("selection",(t,e,n)=>{this._clearPreviouslySelectedWidgets(n.writer);const r=n.writer,i=r.document.selection;let o=null;for(const s of i.getRanges())for(const t of s){const e=t.item;Hl(e)&&!ah(e,o)&&(r.addClass(Kl,e),this._previouslySelected.add(e),o=e)}},{priority:"low"}),e.addObserver(pl),this.listenTo(n,"mousedown",(...t)=>this._onMousedown(...t)),this.listenTo(n,"arrowKey",(...t)=>{this._handleSelectionChangeOnArrowKeyPress(...t)},{context:[Hl,"$text"]}),this.listenTo(n,"arrowKey",(...t)=>{this._preventDefaultOnArrowKeyPress(...t)},{context:"$root"}),this.listenTo(n,"arrowKey",function(t){const e=t.model;return(n,r)=>{const i=r.keyCode==Sr.arrowdown,o=r.shiftKey,s=e.document.selection;if(r.keyCode!=Sr.arrowup&&!i)return;const a=i;if(o&&function(t,e){return!t.isCollapsed&&t.isBackward==e}(s,a))return;const c=function(t,e,n){const r=t.model;if(n){const t=e.isCollapsed?e.focus:e.getLastPosition(),n=rh(r,t,"forward");if(!n)return null;const i=r.createRange(t,n),o=ih(r.schema,i,"backward");return o?r.createRange(t,o):null}{const t=e.isCollapsed?e.focus:e.getFirstPosition(),n=rh(r,t,"backward");if(!n)return null;const i=r.createRange(n,t),o=ih(r.schema,i,"forward");return o?r.createRange(o,t):null}}(t,s,a);if(c){if(c.isCollapsed){if(s.isCollapsed)return;if(o)return}(c.isCollapsed||function(t,e,n){const r=t.model,i=t.view.domConverter;if(n){const t=r.createSelection(e.start);r.modifySelection(t),t.focus.isAtEnd||e.start.isEqual(t.focus)||(e=r.createRange(t.focus,e.end))}const o=t.mapper.toViewRange(e),s=i.viewRangeToDom(o),a=Co.getDomRangeRects(s);let c;for(const u of a)if(void 0!==c){if(Math.round(u.top)>=c)return!1;c=Math.max(c,Math.round(u.bottom))}else c=Math.round(u.bottom);return!0}(t,c,a))&&(e.change(t=>{const n=a?c.end:c.start;if(o){const r=e.createSelection(s.anchor);r.setFocus(n),t.setSelection(r)}else t.setSelection(n)}),n.stop(),r.preventDefault(),r.stopPropagation())}}}(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(t,e)=>{this._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop())},{context:"$root"})}_onMousedown(t,e){const n=this.editor,r=n.editing.view,i=r.document;let o=e.target;if(function(t){for(;t;){if(t.is("editableElement")&&!t.is("rootElement"))return!0;if(Hl(t))return!1;t=t.parent}return!1}(o)){if((kr||wr)&&e.domEvent.detail>=3){const t=n.editing.mapper,r=o.is("attributeElement")?o.findAncestor(t=>!t.is("attributeElement")):o,i=t.toModelElement(r);e.preventDefault(),this.editor.model.change(t=>{t.setSelection(i,"in")})}return}if(!Hl(o)&&(o=o.findAncestor(Hl),!o))return;Cr&&e.preventDefault(),i.isFocused||r.focus();const s=n.editing.mapper.toModelElement(o);this._setSelectionOverElement(s)}_handleSelectionChangeOnArrowKeyPress(t,e){const n=e.keyCode,r=this.editor.model,i=r.schema,o=r.document.selection,s=o.getSelectedElement(),a=Nr(n,this.editor.locale.contentLanguageDirection),c="down"==a||"right"==a,u="up"==a||"down"==a;if(s&&i.isObject(s)){const n=c?o.getLastPosition():o.getFirstPosition(),s=i.getNearestSelectionRange(n,c?"forward":"backward");return void(s&&(r.change(t=>{t.setSelection(s)}),e.preventDefault(),t.stop()))}if(!o.isCollapsed&&!e.shiftKey){const n=o.getFirstPosition(),s=o.getLastPosition(),a=n.nodeAfter,u=s.nodeBefore;return void((a&&i.isObject(a)||u&&i.isObject(u))&&(r.change(t=>{t.setSelection(c?s:n)}),e.preventDefault(),t.stop()))}if(!o.isCollapsed)return;const l=this._getObjectElementNextToSelection(c);if(l&&i.isObject(l)){if(i.isInline(l)&&u)return;this._setSelectionOverElement(l),e.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,e){const n=this.editor.model,r=n.schema,i=n.document.selection.getSelectedElement();i&&r.isObject(i)&&(e.preventDefault(),t.stop())}_handleDelete(t){if(this.editor.isReadOnly)return;const e=this.editor.model.document.selection;if(!e.isCollapsed)return;const n=this._getObjectElementNextToSelection(t);return n?(this.editor.model.change(t=>{let r=e.anchor.parent;for(;r.isEmpty;){const e=r;r=e.parent,t.remove(e)}this._setSelectionOverElement(n)}),!0):void 0}_setSelectionOverElement(t){this.editor.model.change(e=>{e.setSelection(e.createRangeOn(t))})}_getObjectElementNextToSelection(t){const e=this.editor.model,n=e.schema,r=e.document.selection,i=e.createSelection(r);if(e.modifySelection(i,{direction:t?"forward":"backward"}),i.isEqual(r))return null;const o=t?i.focus.nodeBefore:i.focus.nodeAfter;return o&&n.isObject(o)?o:null}_clearPreviouslySelectedWidgets(t){for(const e of this._previouslySelected)t.removeClass(Kl,e);this._previouslySelected.clear()}}function ah(t,e){return!!e&&Array.from(t.getAncestors()).includes(e)}var ch=n(39);fi()(ch.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class uh extends Dt{static get pluginName(){return"DragDrop"}static get requires(){return[Sl,sh]}init(){const t=this.editor,e=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=function(t,e,n){var r=!0,i=!0;return v(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ho(t,40,{leading:r,maxWait:40,trailing:i})}(t=>this._updateDropMarker(t)),this._removeDropMarkerDelayed=dh(()=>this._removeDropMarker(),40),this._clearDraggableAttributesDelayed=dh(()=>this._clearDraggableAttributes(),40),e.addObserver(El),e.addObserver(pl),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(t,e,n)=>{n||this._finalizeDragging(!1)}),Cr&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,e=t.model,n=e.document,r=t.editing.view,i=r.document;this.listenTo(i,"dragstart",(r,s)=>{const a=n.selection;if(s.target&&s.target.is("editableElement"))return void s.preventDefault();const c=s.target?fh(s.target):null;if(c){const n=t.editing.mapper.toModelElement(c);this._draggedRange=ps.fromRange(e.createRangeOn(n)),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!i.selection.isCollapsed){const t=i.selection.getSelectedElement();t&&Hl(t)||(this._draggedRange=ps.fromRange(a.getFirstRange()))}if(!this._draggedRange)return void s.preventDefault();this._draggingUid=o(),s.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",s.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const u=e.createSelection(this._draggedRange.toRange()),l=t.data.toView(e.getSelectedContent(u));i.fire("clipboardOutput",{dataTransfer:s.dataTransfer,content:l,method:r.name}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(i,"dragend",(t,e)=>{this._finalizeDragging(!e.dataTransfer.isCanceled&&"move"==e.dataTransfer.dropEffect)},{priority:"low"}),this.listenTo(i,"dragenter",()=>{this.isEnabled&&r.focus()}),this.listenTo(i,"dragleave",()=>{this._removeDropMarkerDelayed()}),this.listenTo(i,"dragging",(e,n)=>{if(!this.isEnabled)return void(n.dataTransfer.dropEffect="none");this._removeDropMarkerDelayed.cancel();const r=lh(t,n.targetRanges,n.target);this._draggedRange||(n.dataTransfer.dropEffect="copy"),wr||("copy"==n.dataTransfer.effectAllowed?n.dataTransfer.dropEffect="copy":["all","copyMove"].includes(n.dataTransfer.effectAllowed)&&(n.dataTransfer.dropEffect="move")),r&&this._updateDropMarkerThrottled(r)},{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor;this.listenTo(t.editing.view.document,"clipboardInput",(e,n)=>{if("drop"!=n.method)return;const r=lh(t,n.targetRanges,n.target);return this._removeDropMarker(),r?(this._draggedRange&&this._draggingUid!=n.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),"move"==hh(n.dataTransfer)&&this._draggedRange&&this._draggedRange.containsRange(r,!0)?(this._finalizeDragging(!1),void e.stop()):void(n.targetRanges=[t.editing.mapper.toViewRange(r)])):(this._finalizeDragging(!1),void e.stop())},{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(Sl);t.on("contentInsertion",(t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n=e.targetRanges.map(t=>this.editor.editing.mapper.toModelRange(t));this.editor.model.change(t=>t.setSelection(n))},{priority:"high"}),t.on("contentInsertion",(t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n="move"==hh(e.dataTransfer);this._finalizeDragging((!e.resultRange||!e.resultRange.isCollapsed)&&n)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,e=t.editing.view,n=e.document;this.listenTo(n,"mousedown",(r,i)=>{if(Cr||!i)return;this._clearDraggableAttributesDelayed.cancel();let o=fh(i.target);if(Ar&&!t.isReadOnly&&!o&&!n.selection.isCollapsed){const t=n.selection.getSelectedElement();t&&Hl(t)||(o=n.selection.editableElement)}o&&(e.change(t=>{t.setAttribute("draggable","true",o)}),this._draggableElement=t.editing.mapper.toModelElement(o))}),this.listenTo(n,"mouseup",()=>{Cr||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(e=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&e.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_setupDropMarker(){const t=this.editor;t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(e,{writer:n})=>{if(t.model.schema.checkChild(e.markerRange.start,"$text"))return n.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const e=this.toDomElement(t);return e.innerHTML="&NoBreak;<span></span>&NoBreak;",e})}})}_updateDropMarker(t){const e=this.editor,n=e.model.markers;e.model.change(e=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(t)||e.updateMarker("drop-target",{range:t}):e.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_removeDropMarker(){const t=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),t.markers.has("drop-target")&&t.change(t=>{t.removeMarker("drop-target")})}_finalizeDragging(t){const e=this.editor,n=e.model;this._removeDropMarker(),this._clearDraggableAttributes(),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(t&&this.isEnabled&&n.deleteContent(n.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function lh(t,e,n){const r=t.model,i=t.editing.mapper;let o=null;const s=e?e[0].start:null;if(n.is("uiElement")&&(n=n.parent),o=function(t,e){const n=t.model,r=t.editing.mapper;if(Hl(e))return n.createRangeOn(r.toModelElement(e));if(!e.is("editableElement")){const t=e.findAncestor(t=>Hl(t)||t.is("editableElement"));if(Hl(t))return n.createRangeOn(r.toModelElement(t))}return null}(t,n),o)return o;const a=function(t,e){const n=t.editing.mapper,r=t.editing.view,i=n.toModelElement(e);if(i)return i;const o=r.createPositionBefore(e),s=n.findMappedViewAncestor(o);return n.toModelElement(s)}(t,n),c=s?i.toModelPosition(s):null;return c?(o=function(t,e,n){const r=t.model;if(!r.schema.checkChild(n,"$block"))return null;const i=r.createPositionAt(n,0),o=e.path.slice(0,i.path.length),s=r.createPositionFromPath(e.root,o).nodeAfter;return s&&r.schema.isObject(s)?r.createRangeOn(s):null}(t,c,a),o||(o=r.schema.getNearestSelectionRange(c,wr?"forward":"backward"),o||function(t,e){const n=t.model;for(;e;){if(n.schema.isObject(e))return n.createRangeOn(e);e=e.parent}}(t,c.parent))):function(t,e){const n=t.model,r=n.schema,i=n.createPositionAt(e,0);return r.getNearestSelectionRange(i,"forward")}(t,a)}function hh(t){return wr?t.dropEffect:["all","copyMove"].includes(t.effectAllowed)?"move":"copy"}function dh(t,e){let n;function r(...i){r.cancel(),n=setTimeout(()=>t(...i),e)}return r.cancel=()=>{clearTimeout(n)},r}function fh(t){if(t.is("editableElement"))return null;if(t.hasClass("ck-widget__selection-handle"))return t.findAncestor(Hl);if(Hl(t))return t;const e=t.findAncestor(t=>Hl(t)||t.is("editableElement"));return Hl(e)?e:null}class ph extends Dt{static get pluginName(){return"PastePlainText"}static get requires(){return[Sl]}init(){const t=this.editor,e=t.model,n=t.editing.view,r=n.document,i=e.document.selection;let o=!1;n.addObserver(El),this.listenTo(r,"keydown",(t,e)=>{o=e.shiftKey}),t.plugins.get(Sl).on("contentInsertion",(t,n)=>{(o||function(t,e){if(t.childCount>1)return!1;const n=t.getChild(0);return!e.isObject(n)&&0==[...n.getAttributeKeys()].length}(n.content,e.schema))&&e.change(t=>{const r=Array.from(i.getAttributes()).filter(([t])=>e.schema.getAttributeProperties(t).isFormatting);i.isCollapsed||e.deleteContent(i,{doNotAutoparagraph:!0}),r.push(...i.getAttributes());const o=t.createRangeIn(n.content);for(const e of o.getItems())e.is("$textProxy")&&t.setAttributes(r,e)})})}}class gh extends Dt{static get pluginName(){return"Clipboard"}static get requires(){return[Sl,uh,ph]}}class mh extends Rt{execute(){const t=this.editor.model,e=t.document;t.change(n=>{!function(t,e,n){const r=n.isCollapsed,i=n.getFirstRange(),o=i.end.parent,s=i.start.parent==o;if(r){const r=Tl(t.schema,n.getAttributes());bh(t,e,i.end),e.removeSelectionAttribute(n.getAttributeKeys()),e.setSelectionAttribute(r)}else{const r=!(i.start.isAtStart&&i.end.isAtEnd);t.deleteContent(n,{leaveUnmerged:r}),s?bh(t,e,n.focus):r&&e.setSelection(o,0)}}(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model;this.isEnabled=function(t,e){if(e.rangeCount>1)return!1;const n=e.anchor;if(!n||!t.checkChild(n,"softBreak"))return!1;const r=e.getFirstRange(),i=r.start.parent,o=r.end.parent;return!vh(i,t)&&!vh(o,t)||i===o}(t.schema,t.document.selection)}}function bh(t,e,n){const r=e.createElement("softBreak");t.insertContent(r,n),e.setSelection(r,"after")}function vh(t,e){return!t.is("rootElement")&&(e.isLimit(t)||vh(t.parent,e))}class _h extends Dt{static get pluginName(){return"ShiftEnter"}init(){const t=this.editor,e=t.conversion,n=t.editing.view,r=n.document;t.model.schema.register("softBreak",{allowWhere:"$text",isInline:!0}),e.for("upcast").elementToElement({model:"softBreak",view:"br"}),e.for("downcast").elementToElement({model:"softBreak",view:(t,{writer:e})=>e.createEmptyElement("br")}),n.addObserver(Dl),t.commands.add("shiftEnter",new mh(t)),this.listenTo(r,"enter",(e,r)=>{r.preventDefault(),r.isSoft&&(t.execute("shiftEnter"),n.scrollToTheSelection())},{priority:"low"})}}class yh extends Rt{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!wh(t.schema,n))do{if(n=n.parent,!n)return}while(!wh(t.schema,n));t.change(t=>{t.setSelection(n,"in")})}}function wh(t,e){return t.isLimit(e)&&(t.checkChild(e,"$text")||t.checkChild(e,"paragraph"))}const kh=Pr("Ctrl+A");class Ch extends Dt{static get pluginName(){return"SelectAllEditing"}init(){const t=this.editor,e=t.editing.view.document;t.commands.add("selectAll",new yh(t)),this.listenTo(e,"keydown",(e,n)=>{Ir(n)===kh&&(t.execute("selectAll"),n.preventDefault())})}}class Ah extends Dt{static get pluginName(){return"SelectAllUI"}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",e=>{const n=t.commands.get("selectAll"),r=new eu(e);return r.set({label:(0,e.t)("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),r})}}class Eh extends Dt{static get requires(){return[Ch,Ah]}static get pluginName(){return"SelectAll"}}class Oh extends Rt{constructor(t,e){super(t),this._buffer=new Rl(t.model,e),this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const e=this.editor.model,n=e.document,r=t.text||"",i=r.length,o=t.range?e.createSelection(t.range):n.selection,s=t.resultRange;e.enqueueChange(this._buffer.batch,t=>{this._buffer.lock(),this._batches.add(this._buffer.batch),e.deleteContent(o),r&&e.insertContent(t.createText(r,n.selection.getAttributes()),o),s?t.setSelection(s):o.is("documentSelection")||t.setSelection(o),this._buffer.unlock(),this._buffer.input(i)})}}class xh{constructor(t){this.editor=t,this.editing=this.editor.editing}handle(t,e){if(function(t){if(0==t.length)return!1;for(const e of t)if("children"===e.type&&!Ml(e))return!0;return!1}(t))this._handleContainerChildrenMutations(t,e);else for(const n of t)this._handleTextMutation(n,e),this._handleTextNodeInsertion(n)}_handleContainerChildrenMutations(t,e){const n=function(t){const e=t.map(t=>t.node).reduce((t,e)=>t.getCommonAncestor(e,{includeSelf:!0}));if(e)return e.getAncestors({includeSelf:!0,parentFirst:!0}).find(t=>t.is("containerElement")||t.is("rootElement"))}(t);if(!n)return;const r=this.editor.editing.view.domConverter.mapViewToDom(n),i=new xi(this.editor.editing.view.document),o=this.editor.data.toModel(i.domToView(r)).getChild(0),s=this.editor.editing.mapper.toModelElement(n);if(!s)return;const a=Array.from(o.getChildren()),c=Array.from(s.getChildren()),u=a[a.length-1],l=c[c.length-1],h=u&&u.is("element","softBreak"),d=l&&!l.is("element","softBreak");h&&d&&a.pop();const f=this.editor.model.schema;if(!Sh(a,f)||!Sh(c,f))return;const p=a.map(t=>t.is("$text")?t.data:"@").join("").replace(/\u00A0/g," "),g=c.map(t=>t.is("$text")?t.data:"@").join("").replace(/\u00A0/g," ");if(g===p)return;const m=ci(g,p),{firstChangeAt:b,insertions:v,deletions:_}=Th(m);let y=null;e&&(y=this.editing.mapper.toModelRange(e.getFirstRange()));const w=p.substr(b,v),k=this.editor.model.createRange(this.editor.model.createPositionAt(s,b),this.editor.model.createPositionAt(s,b+_));this.editor.execute("input",{text:w,range:k,resultRange:y})}_handleTextMutation(t,e){if("text"!=t.type)return;const n=t.newText.replace(/\u00A0/g," "),r=t.oldText.replace(/\u00A0/g," ");if(r===n)return;const i=ci(r,n),{firstChangeAt:o,insertions:s,deletions:a}=Th(i);let c=null;e&&(c=this.editing.mapper.toModelRange(e.getFirstRange()));const u=this.editing.view.createPositionAt(t.node,o),l=this.editing.mapper.toModelPosition(u),h=this.editor.model.createRange(l,l.getShiftedBy(a)),d=n.substr(o,s);this.editor.execute("input",{text:d,range:h,resultRange:c})}_handleTextNodeInsertion(t){if("children"!=t.type)return;const e=Ml(t),n=this.editing.view.createPositionAt(t.node,e.index),r=this.editing.mapper.toModelPosition(n);this.editor.execute("input",{text:e.values[0].data.replace(/\u00A0/g," "),range:this.editor.model.createRange(r)})}}function Sh(t,e){return t.every(t=>e.isInline(t))}function Th(t){let e=null,n=null;for(let o=0;o<t.length;o++)"equal"!=t[o]&&(e=null===e?o:e,n=o);let r=0,i=0;for(let o=e;o<=n;o++)"insert"!=t[o]&&r++,"delete"!=t[o]&&i++;return{insertions:i,deletions:r,firstChangeAt:e}}class Ih extends Dt{static get pluginName(){return"Input"}init(){const t=this.editor,e=new Oh(t,t.config.get("typing.undoStep")||20);t.commands.add("input",e),function(t){let e=null;const n=t.model,r=t.editing.view,i=t.commands.get("input");function o(t){if(yr&&Ll(t,r.document))return;const o=n.document,a=r.document.isComposing,c=e&&e.isEqual(o.selection);e=null,i.isEnabled&&(Jl(t)||o.selection.isCollapsed||a&&229===t.keyCode||!a&&229===t.keyCode&&c||s())}function s(){const t=i.buffer;t.lock();const e=t.batch;i._batches.add(e),n.enqueueChange(e,()=>{n.deleteContent(n.document.selection)}),t.unlock()}r.document.on(Cr?"beforeinput":"keydown",(t,e)=>o(e),{priority:"lowest"}),r.document.on("compositionstart",function(){const t=n.document,e=1!==t.selection.rangeCount||t.selection.getFirstRange().isFlat;t.selection.isCollapsed||e||s()},{priority:"lowest"}),r.document.on("compositionend",()=>{e=n.createSelection(n.document.selection)},{priority:"lowest"})}(t),function(t){t.editing.view.document.on("mutations",(e,n,r)=>{new xh(t).handle(n,r)})}(t)}isInput(t){return this.editor.commands.get("input")._batches.has(t)}}class Ph extends Dt{static get requires(){return[Ih,Vl]}static get pluginName(){return"Typing"}}function Dh(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}Pt(class{constructor(t,e){this.model=t,this.testCallback=e,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))}),this._startListening()}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(e,{directChange:n})=>{n&&(t.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this.hasMatch=!1))}),this.listenTo(t,"change:data",(t,e)=>{"transparent"!=e.type&&this._evaluateTextBeforeSelection("data",{batch:e})})}_evaluateTextBeforeSelection(t,e={}){const n=this.model,r=n.document.selection,i=n.createRange(n.createPositionAt(r.focus.parent,0),r.focus),{text:o,range:s}=function(t,e){let n=t.start;return{text:Array.from(t.getItems()).reduce((t,r)=>r.is("$text")||r.is("$textProxy")?t+r.data:(n=e.createPositionAfter(r),""),""),range:e.createRange(n,t.end)}}(i,n),a=this.testCallback(o);if(!a&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!a,a){const n=Object.assign(e,{text:o,range:s});"object"==typeof a&&Object.assign(n,a),this.fire("matched:"+t,n)}}},Et),RegExp(/[\\^$.*+?()[\]{}|]/g.source),Dh('"'),Dh("'"),Dh("'"),Dh('"'),Dh('"'),Dh("'");class Nh extends Rt{constructor(t){super(t),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(t.data,"set",(t,e)=>{e[1]=Object.assign({},e[1]);const n=e[1];n.batchType||(n.batchType="transparent")},{priority:"high"}),this.listenTo(t.data,"set",(t,e)=>{"transparent"===e[1].batchType&&this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}addBatch(t){const e=this.editor.model.document.selection,n={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,e,n){const r=this.editor.model,i=r.document,o=[],s=t.map(t=>t.getTransformedByOperations(n)),a=s.flat();for(const c of s){const t=c.filter(t=>t.root!=i.graveyard).filter(t=>!jh(t,a));t.length&&(Rh(t),o.push(t[0]))}o.length&&r.change(t=>{t.setSelection(o,{backward:e})})}_undo(t,e){const n=this.editor.model,r=n.document;this._createdBatches.add(e);const i=t.operations.slice().filter(t=>t.isDocumentOperation);i.reverse();for(const o of i){const t=Array.from(r.history.getOperations(o.baseVersion+1)),i=al([o.getReversed()],t,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const s of i)e.addOperation(s),n.applyOperation(s),r.history.setOperationAsUndone(o,s)}}}function Rh(t){t.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let e=1;e<t.length;e++){const n=t[e-1].getJoined(t[e],!0);n&&(e--,t.splice(e,2,n))}}function jh(t,e){return e.some(e=>e!==t&&e.containsRange(t,!0))}class Mh extends Nh{execute(t=null){const e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],r=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(r,()=>{this._undo(n.batch,r);const t=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,t),this.fire("revert",n.batch,r)}),this.refresh()}}class Fh extends Nh{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(e,()=>{const n=this.editor.model.document.history.getOperations(t.batch.operations[t.batch.operations.length-1].baseVersion+1);this._restoreSelection(t.selection.ranges,t.selection.isBackward,n),this._undo(t.batch,e)}),this.refresh()}}class Lh extends Dt{static get pluginName(){return"UndoEditing"}constructor(t){super(t),this._batchRegistry=new WeakSet}init(){const t=this.editor;this._undoCommand=new Mh(t),this._redoCommand=new Fh(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(t,e)=>{const n=e[0];if(!n.isDocumentOperation)return;const r=n.batch,i=this._redoCommand._createdBatches.has(r),o=this._undoCommand._createdBatches.has(r);this._batchRegistry.has(r)||"transparent"==r.type&&!i&&!o||(i?this._undoCommand.addBatch(r):o||(this._undoCommand.addBatch(r),this._redoCommand.clearStack()),this._batchRegistry.add(r))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,e,n)=>{this._redoCommand.addBatch(n)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo")}}var Bh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Vh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class Uh extends Dt{static get pluginName(){return"UndoUI"}init(){const t=this.editor,e=t.locale,n=t.t,r="ltr"==e.uiLanguageDirection?Bh:Vh,i="ltr"==e.uiLanguageDirection?Vh:Bh;this._addButton("undo",n("Undo"),"CTRL+Z",r),this._addButton("redo",n("Redo"),"CTRL+Y",i)}_addButton(t,e,n,r){const i=this.editor;i.ui.componentFactory.add(t,o=>{const s=i.commands.get(t),a=new eu(o);return a.set({label:e,icon:r,keystroke:n,tooltip:!0}),a.bind("isEnabled").to(s,"isEnabled"),this.listenTo(a,"execute",()=>{i.execute(t),i.editing.view.focus()}),a})}}class qh extends Dt{static get requires(){return[Lh,Uh]}static get pluginName(){return"Undo"}}class zh extends Rt{constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=e.selection.getAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document.selection,r=t.value;e.change(t=>{if(n.isCollapsed)r?t.setSelectionAttribute(this.attributeKey,r):t.removeSelectionAttribute(this.attributeKey);else{const i=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of i)r?t.setAttribute(this.attributeKey,r,e):t.removeAttribute(this.attributeKey,e)}})}}class Kh extends on{constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",0===this.length)})}add(t,e){this.find(e=>e.color===t.color)||super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}Pt(Kh,Et);var Hh=n(40);fi()(Hh.a,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0});class Wh extends Sc{constructor(t,{colors:e,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o}){super(t),this.items=this.createCollection(),this.colorDefinitions=e,this.focusTracker=new Io,this.keystrokes=new Po,this.set("selectedColor"),this.removeButtonLabel=r,this.columns=n,this.documentColors=new Kh,this.documentColorsCount=o,this._focusCycler=new su({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this._documentColorsLabel=i,this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items}),this.items.add(this._removeColorButton())}updateDocumentColors(t,e){const n=t.document,r=this.documentColorsCount;this.documentColors.clear();for(const i of n.getRootNames()){const o=n.getRoot(i),s=t.createRangeIn(o);for(const t of s.getItems())if(t.is("$textProxy")&&t.hasAttribute(e)&&(this._addColorToDocumentColors(t.getAttribute(e)),this.documentColors.length>=r))return}}updateSelectedColors(){const t=this.documentColorsGrid,e=this.selectedColor;this.staticColorsGrid.selectedColor=e,t&&(t.selectedColor=e)}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount)){const t=Tc.bind(this.documentColors,this.documentColors),e=new Ru(this.locale);e.text=this._documentColorsLabel,e.extendTemplate({attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]}}),this.items.add(e),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_removeColorButton(){const t=new eu;return t.set({withText:!0,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',tooltip:!0,label:this.removeButtonLabel}),t.class="ck-color-table__remove-color",t.on("execute",()=>{this.fire("execute",{value:null})}),t}_createStaticColorsGrid(){const t=new uu(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return t.delegate("execute").to(this),t}_createDocumentColorsGrid(){const t=Tc.bind(this.documentColors,this.documentColors),e=new uu(this.locale,{columns:this.columns});return e.delegate("execute").to(this),e.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}}),e.items.bindTo(this.documentColors).using(t=>{const e=new ou;return e.set({color:t.color,hasBorder:t.options&&t.options.hasBorder}),t.label&&e.set({label:t.label,tooltip:!0}),e.on("execute",()=>{this.fire("execute",{value:t.color})}),e}),this.documentColors.on("change:isEmpty",(t,n,r)=>{r&&(e.selectedColor=null)}),e}_addColorToDocumentColors(t){const e=this.colorDefinitions.find(e=>e.color===t);this.documentColors.add(e?Object.assign({},e):{color:t,label:t,options:{hasBorder:!1}})}}const Gh="fontColor";function $h(t){return e=>function(t){return t.replace(/\s/g,"")}(e.getStyle(t))}function Qh(t){return(e,{writer:n})=>n.createAttributeElement("span",{style:`${t}:${e}`},{priority:7})}class Yh extends zh{constructor(t){super(t,Gh)}}class Jh extends Dt{static get pluginName(){return"FontColorEditing"}constructor(t){super(t),t.config.define(Gh,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Gh,value:$h("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Gh,value:t=>t.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:Gh,view:Qh("color")}),t.commands.add(Gh,new Yh(t)),t.model.schema.extend("$text",{allowAttributes:Gh}),t.model.schema.setAttributeProperties(Gh,{isFormatting:!0,copyOnEnter:!0})}}class Xh extends Dt{constructor(t,{commandName:e,icon:n,componentName:r,dropdownLabel:i}){super(t),this.commandName=e,this.componentName=r,this.icon=n,this.dropdownLabel=i,this.columns=t.config.get(this.componentName+".columns"),this.colorTableView=void 0}init(){const t=this.editor,e=t.locale,n=e.t,r=t.commands.get(this.commandName),i=function(t,e){const n=t.t,r={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return e.map(t=>{const e=r[t.label];return e&&e!=t.label&&(t.label=e),t})}(e,function(t){return t.map(iu).filter(t=>!!t)}(t.config.get(this.componentName).colors)),o=t.config.get(this.componentName+".documentColors");t.ui.componentFactory.add(this.componentName,e=>{const s=Iu(e);return this.colorTableView=function({dropdownView:t,colors:e,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o}){const s=new Wh(t.locale,{colors:e,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o});return t.colorTableView=s,t.panelView.children.add(s),s.delegate("execute").to(t,"execute"),s}({dropdownView:s,colors:i.map(t=>({label:t.label,color:t.model,options:{hasBorder:t.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),documentColorsLabel:0!==o?n("Document colors"):void 0,documentColorsCount:void 0===o?this.columns:o}),this.colorTableView.bind("selectedColor").to(r,"value"),s.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),s.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),s.bind("isEnabled").to(r),s.on("execute",(e,n)=>{t.execute(this.commandName,n),t.editing.view.focus()}),s.on("change:isOpen",(e,n,r)=>{s.colorTableView.appendGrids(),r&&(0!==o&&this.colorTableView.updateDocumentColors(t.model,this.componentName),this.colorTableView.updateSelectedColors())}),s})}}class Zh extends Xh{constructor(t){super(t,{commandName:Gh,componentName:Gh,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:(0,t.locale.t)("Font Color")})}static get pluginName(){return"FontColorUI"}}const td="italic";class ed extends Dt{static get pluginName(){return"ItalicEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:td}),t.model.schema.setAttributeProperties(td,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:td,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(td,new _l(t,td)),t.keystrokes.set("CTRL+I",td)}}const nd="italic";class rd extends Dt{static get pluginName(){return"ItalicUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(nd,n=>{const r=t.commands.get(nd),i=new eu(n);return i.set({label:e("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",()=>{t.execute(nd),t.editing.view.focus()}),i})}}class id extends Rt{constructor(t,e){super(t),this.type=e}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=Array.from(e.document.selection.getSelectedBlocks()).filter(t=>sd(t,e.schema)),r=void 0!==t.forceValue?!t.forceValue:this.value;e.change(t=>{if(r){let e=n[n.length-1].nextSibling,r=Number.POSITIVE_INFINITY,i=[];for(;e&&"listItem"==e.name&&0!==e.getAttribute("listIndent");){const t=e.getAttribute("listIndent");t<r&&(r=t),i.push({element:e,listIndent:t-r}),e=e.nextSibling}i=i.reverse();for(const n of i)t.setAttribute("listIndent",n.listIndent,n.element)}if(!r){let t=Number.POSITIVE_INFINITY;for(const e of n)e.is("element","listItem")&&e.getAttribute("listIndent")<t&&(t=e.getAttribute("listIndent"));t=0===t?1:t,od(n,!0,t),od(n,!1,t)}for(const e of n.reverse())r&&"listItem"==e.name?t.rename(e,"paragraph"):r||"listItem"==e.name?r||"listItem"!=e.name||e.getAttribute("listType")==this.type||t.setAttribute("listType",this.type,e):(t.setAttributes({listType:this.type,listIndent:0},e),t.rename(e,"listItem"));this.fire("_executeCleanup",n)})}_getValue(){const t=To(this.editor.model.document.selection.getSelectedBlocks());return!!t&&t.is("element","listItem")&&t.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.schema,e=To(this.editor.model.document.selection.getSelectedBlocks());return!!e&&sd(e,t)}}function od(t,e,n){const r=e?t[0]:t[t.length-1];if(r.is("element","listItem")){let i=r[e?"previousSibling":"nextSibling"],o=r.getAttribute("listIndent");for(;i&&i.is("element","listItem")&&i.getAttribute("listIndent")>=n;)o>i.getAttribute("listIndent")&&(o=i.getAttribute("listIndent")),i.getAttribute("listIndent")==o&&t[e?"unshift":"push"](i),i=i[e?"previousSibling":"nextSibling"]}}function sd(t,e){return e.checkChild(t.parent,"listItem")&&!e.isObject(t)}class ad extends Rt{constructor(t,e){super(t),this._indentBy="forward"==e?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;let e=Array.from(t.document.selection.getSelectedBlocks());t.change(t=>{const n=e[e.length-1];let r=n.nextSibling;for(;r&&"listItem"==r.name&&r.getAttribute("listIndent")>n.getAttribute("listIndent");)e.push(r),r=r.nextSibling;this._indentBy<0&&(e=e.reverse());for(const i of e){const e=i.getAttribute("listIndent")+this._indentBy;e<0?t.rename(i,"paragraph"):t.setAttribute("listIndent",e,i)}this.fire("_executeCleanup",e)})}_checkEnabled(){const t=To(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("element","listItem"))return!1;if(this._indentBy>0){const e=t.getAttribute("listIndent"),n=t.getAttribute("listType");let r=t.previousSibling;for(;r&&r.is("element","listItem")&&r.getAttribute("listIndent")>=e;){if(r.getAttribute("listIndent")==e)return r.getAttribute("listType")==n;r=r.previousSibling}return!1}return!0}}function cd(t,e,n,r){const i=e.parent,o=n.mapper,s=n.writer;let a=o.toViewPosition(r.createPositionBefore(t));const c=hd(t.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:t.getAttribute("listIndent")}),u=t.previousSibling;if(c&&c.getAttribute("listIndent")==t.getAttribute("listIndent")){const t=o.toViewElement(c);a=s.breakContainer(s.createPositionAfter(t))}else if(u&&"listItem"==u.name){a=o.toViewPosition(r.createPositionAt(u,"end"));const t=o.findMappedViewAncestor(a),e=function(t){for(const e of t.getChildren())if("ul"==e.name||"ol"==e.name)return e;return null}(t);a=e?s.createPositionBefore(e):s.createPositionAt(t,"end")}else a=o.toViewPosition(r.createPositionBefore(t));if(a=ld(a),s.insert(a,i),u&&"listItem"==u.name){const t=o.toViewElement(u),n=s.createRange(s.createPositionAt(t,0),a).getWalker({ignoreElementEnd:!0});for(const r of n)if(r.item.is("element","li")){const t=s.breakContainer(s.createPositionBefore(r.item)),i=r.item.parent,o=s.createPositionAt(e,"end");ud(s,o.nodeBefore,o.nodeAfter),s.move(s.createRangeOn(i),o),n.position=t}}else{const n=i.nextSibling;if(n&&(n.is("element","ul")||n.is("element","ol"))){let r=null;for(const e of n.getChildren()){const n=o.toModelElement(e);if(!(n&&n.getAttribute("listIndent")>t.getAttribute("listIndent")))break;r=e}r&&(s.breakContainer(s.createPositionAfter(r)),s.move(s.createRangeOn(r.parent),s.createPositionAt(e,"end")))}}ud(s,i,i.nextSibling),ud(s,i.previousSibling,i)}function ud(t,e,n){return!e||!n||"ul"!=e.name&&"ol"!=e.name||e.name!=n.name||e.getAttribute("class")!==n.getAttribute("class")?null:t.mergeContainers(t.createPositionAfter(e))}function ld(t){return t.getLastMatchingPosition(t=>t.item.is("uiElement"))}function hd(t,e){const n=!!e.sameIndent,r=!!e.smallerIndent,i=e.listIndent;let o=t;for(;o&&"listItem"==o.name;){const t=o.getAttribute("listIndent");if(n&&i==t||r&&i>t)return o;o="forward"===e.direction?o.nextSibling:o.previousSibling}return null}function dd(t,e,n,r){t.ui.componentFactory.add(e,i=>{const o=t.commands.get(e),s=new eu(i);return s.set({label:n,icon:r,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>{t.execute(e),t.editing.view.focus()}),s})}function fd(){const t=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||t?0:$n.call(this)}function pd(t){return(e,n,r)=>{const i=r.consumable;if(!i.test(n.item,"insert")||!i.test(n.item,"attribute:listType")||!i.test(n.item,"attribute:listIndent"))return;i.consume(n.item,"insert"),i.consume(n.item,"attribute:listType"),i.consume(n.item,"attribute:listIndent");const o=n.item;cd(o,function(t,e){const n=e.mapper,r=e.writer,i="numbered"==t.getAttribute("listType")?"ol":"ul",o=function(t){const e=t.createContainerElement("li");return e.getFillerOffset=fd,e}(r),s=r.createContainerElement(i,null);return r.insert(r.createPositionAt(s,0),o),n.bindElements(t,o),o}(o,r),r,t)}}function gd(t,e,n){if(!n.consumable.consume(e.item,"attribute:listType"))return;const r=n.mapper.toViewElement(e.item),i=n.writer;i.breakContainer(i.createPositionBefore(r)),i.breakContainer(i.createPositionAfter(r)),i.rename("numbered"==e.attributeNewValue?"ol":"ul",r.parent)}function md(t,e,n){const r=n.mapper.toViewElement(e.item).parent,i=n.writer;ud(i,r,r.nextSibling),ud(i,r.previousSibling,r);for(const o of e.item.getChildren())n.consumable.consume(o,"insert")}function bd(t,e,n){if("listItem"!=e.item.name){let t=n.mapper.toViewPosition(e.range.start);const r=n.writer,i=[];for(;("ul"==t.parent.name||"ol"==t.parent.name)&&(t=r.breakContainer(t),"li"==t.parent.name);){const e=t,n=r.createPositionAt(t.parent,"end");if(!e.isEqual(n)){const t=r.remove(r.createRange(e,n));i.push(t)}t=r.createPositionAfter(t.parent)}if(i.length>0){for(let e=0;e<i.length;e++){const n=t.nodeBefore;if(t=r.insert(t,i[e]).end,e>0){const e=ud(r,n,n.nextSibling);e&&e.parent==n&&t.offset--}}ud(r,t.nodeBefore,t.nodeAfter)}}}function vd(t,e,n){const r=n.mapper.toViewPosition(e.position);ud(n.writer,r.nodeBefore,r.nodeAfter)}function _d(t,e,n){if(n.consumable.consume(e.viewItem,{name:!0})){const t=n.writer,r=t.createElement("listItem"),i=function(t){let e=0,n=t.parent;for(;n;){if(n.is("element","li"))e++;else{const t=n.previousSibling;t&&t.is("element","li")&&e++}n=n.parent}return e}(e.viewItem);if(t.setAttribute("listIndent",i,r),t.setAttribute("listType",e.viewItem.parent&&"ol"==e.viewItem.parent.name?"numbered":"bulleted",r),!n.safeInsert(r,e.modelCursor))return;const o=function(t,e,n){const{writer:r,schema:i}=n;let o=r.createPositionAfter(t);for(const s of e)if("ul"==s.name||"ol"==s.name)o=n.convertItem(s,o).modelCursor;else{const e=n.convertItem(s,r.createPositionAt(t,"end")),a=e.modelRange.start.nodeAfter;a&&a.is("element")&&!i.checkChild(t,a.name)&&(t=e.modelCursor.parent.is("element","listItem")?e.modelCursor.parent:Ad(e.modelCursor),o=r.createPositionAfter(t))}return o}(r,e.viewItem.getChildren(),n);e.modelRange=t.createRange(e.modelCursor,o),n.updateConversionResult(r,e)}}function yd(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){const t=Array.from(e.viewItem.getChildren());for(const e of t)!e.is("element","li")&&!Od(e)&&e._remove()}}function wd(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){if(0===e.viewItem.childCount)return;const t=[...e.viewItem.getChildren()];let n=!1;for(const e of t)n&&!Od(e)&&e._remove(),Od(e)&&(n=!0)}}function kd(t){return(e,n)=>{if(n.isPhantom)return;const r=n.modelPosition.nodeBefore;if(r&&r.is("element","listItem")){const e=n.mapper.toViewElement(r),i=e.getAncestors().find(Od),o=t.createPositionAt(e,0).getWalker();for(const t of o){if("elementStart"==t.type&&t.item.is("element","li")){n.viewPosition=t.previousPosition;break}if("elementEnd"==t.type&&t.item==i){n.viewPosition=t.nextPosition;break}}}}}function Cd(t,[e,n]){let r,i=e.is("documentFragment")?e.getChild(0):e;if(r=n?this.createSelection(n):this.document.selection,i&&i.is("element","listItem")){const t=r.getFirstPosition();let e=null;if(t.parent.is("element","listItem")?e=t.parent:t.nodeBefore&&t.nodeBefore.is("element","listItem")&&(e=t.nodeBefore),e){const t=e.getAttribute("listIndent");if(t>0)for(;i&&i.is("element","listItem");)i._setAttribute("listIndent",i.getAttribute("listIndent")+t),i=i.nextSibling}}}function Ad(t){const e=new Qo({startPosition:t});let n;do{n=e.next()}while(!n.value.item.is("element","listItem"));return n.value.item}function Ed(t,e,n,r,i,o){const s=hd(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:t,foo:"b"}),a=i.mapper,c=i.writer,u=s?s.getAttribute("listIndent"):null;let l;if(s)if(u==t){const t=a.toViewElement(s).parent;l=c.createPositionAfter(t)}else{const t=o.createPositionAt(s,"end");l=a.toViewPosition(t)}else l=n;l=ld(l);for(const h of[...r.getChildren()])Od(h)&&(l=c.move(c.createRangeOn(h),l).end,ud(c,h,h.nextSibling),ud(c,h.previousSibling,h))}function Od(t){return t.is("element","ol")||t.is("element","ul")}class xd extends Dt{static get pluginName(){return"ListEditing"}static get requires(){return[Nl,Vl]}init(){const t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const e=t.data,n=t.editing;t.model.document.registerPostFixer(e=>function(t,e){const n=t.document.differ.getChanges(),r=new Map;let i=!1;for(const c of n)if("insert"==c.type&&"listItem"==c.name)o(c.position);else if("insert"==c.type&&"listItem"!=c.name){if("$text"!=c.name){const n=c.position.nodeAfter;n.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",n),i=!0),n.hasAttribute("listType")&&(e.removeAttribute("listType",n),i=!0),n.hasAttribute("listStyle")&&(e.removeAttribute("listStyle",n),i=!0);for(const e of Array.from(t.createRangeIn(n)).filter(t=>t.item.is("element","listItem")))o(e.previousPosition)}o(c.position.getShiftedBy(c.length))}else"remove"==c.type&&"listItem"==c.name?o(c.position):("attribute"==c.type&&"listIndent"==c.attributeKey||"attribute"==c.type&&"listType"==c.attributeKey)&&o(c.range.start);for(const c of r.values())s(c),a(c);return i;function o(t){const e=t.nodeBefore;if(e&&e.is("element","listItem")){let t=e;if(r.has(t))return;for(let e=t.previousSibling;e&&e.is("element","listItem");e=t.previousSibling)if(t=e,r.has(t))return;r.set(e,t)}else{const e=t.nodeAfter;e&&e.is("element","listItem")&&r.set(e,e)}}function s(t){let n=0,r=null;for(;t&&t.is("element","listItem");){const o=t.getAttribute("listIndent");if(o>n){let s;null===r?(r=o-n,s=n):(r>o&&(r=o),s=o-r),e.setAttribute("listIndent",s,t),i=!0}else r=null,n=t.getAttribute("listIndent")+1;t=t.nextSibling}}function a(t){let n=[],r=null;for(;t&&t.is("element","listItem");){const o=t.getAttribute("listIndent");if(r&&r.getAttribute("listIndent")>o&&(n=n.slice(0,o+1)),0!=o)if(n[o]){const r=n[o];t.getAttribute("listType")!=r&&(e.setAttribute("listType",r,t),i=!0)}else n[o]=t.getAttribute("listType");r=t,t=t.nextSibling}}}(t.model,e)),n.mapper.registerViewToModelLength("li",Sd),e.mapper.registerViewToModelLength("li",Sd),n.mapper.on("modelToViewPosition",kd(n.view)),n.mapper.on("viewToModelPosition",function(t){return(e,n)=>{const r=n.viewPosition,i=r.parent,o=n.mapper;if("ul"==i.name||"ol"==i.name){if(r.isAtEnd){const e=o.toModelElement(r.nodeBefore),i=o.getModelLength(r.nodeBefore);n.modelPosition=t.createPositionBefore(e).getShiftedBy(i)}else{const e=o.toModelElement(r.nodeAfter);n.modelPosition=t.createPositionBefore(e)}e.stop()}else if("li"==i.name&&r.nodeBefore&&("ul"==r.nodeBefore.name||"ol"==r.nodeBefore.name)){const s=o.toModelElement(i);let a=1,c=r.nodeBefore;for(;c&&Od(c);)a+=o.getModelLength(c),c=c.previousSibling;n.modelPosition=t.createPositionBefore(s).getShiftedBy(a),e.stop()}}}(t.model)),e.mapper.on("modelToViewPosition",kd(n.view)),t.conversion.for("editingDowncast").add(e=>{e.on("insert",bd,{priority:"high"}),e.on("insert:listItem",pd(t.model)),e.on("attribute:listType:listItem",gd,{priority:"high"}),e.on("attribute:listType:listItem",md,{priority:"low"}),e.on("attribute:listIndent:listItem",function(t){return(e,n,r)=>{if(!r.consumable.consume(n.item,"attribute:listIndent"))return;const i=r.mapper.toViewElement(n.item),o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));const s=i.parent,a=s.previousSibling,c=o.createRangeOn(s);o.remove(c),a&&a.nextSibling&&ud(o,a,a.nextSibling),Ed(n.attributeOldValue+1,n.range.start,c.start,i,r,t),cd(n.item,i,r,t);for(const t of n.item.getChildren())r.consumable.consume(t,"insert")}}(t.model)),e.on("remove:listItem",function(t){return(e,n,r)=>{const i=r.mapper.toViewPosition(n.position).getLastMatchingPosition(t=>!t.item.is("element","li")).nodeAfter,o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));const s=i.parent,a=s.previousSibling,c=o.createRangeOn(s),u=o.remove(c);a&&a.nextSibling&&ud(o,a,a.nextSibling),Ed(r.mapper.toModelElement(i).getAttribute("listIndent")+1,n.position,c.start,i,r,t);for(const t of o.createRangeIn(u).getItems())r.mapper.unbindViewElement(t);e.stop()}}(t.model)),e.on("remove",vd,{priority:"low"})}),t.conversion.for("dataDowncast").add(e=>{e.on("insert",bd,{priority:"high"}),e.on("insert:listItem",pd(t.model))}),t.conversion.for("upcast").add(t=>{t.on("element:ul",yd,{priority:"high"}),t.on("element:ol",yd,{priority:"high"}),t.on("element:li",wd,{priority:"high"}),t.on("element:li",_d)}),t.model.on("insertContent",Cd,{priority:"high"}),t.commands.add("numberedList",new id(t,"numbered")),t.commands.add("bulletedList",new id(t,"bulleted")),t.commands.add("indentList",new ad(t,"forward")),t.commands.add("outdentList",new ad(t,"backward"));const r=n.view.document;this.listenTo(r,"enter",(t,e)=>{const n=this.editor.model.document,r=n.selection.getLastPosition().parent;n.selection.isCollapsed&&"listItem"==r.name&&r.isEmpty&&(this.editor.execute("outdentList"),e.preventDefault(),t.stop())},{context:"li"}),this.listenTo(r,"delete",(t,e)=>{if("backward"!==e.direction)return;const n=this.editor.model.document.selection;if(!n.isCollapsed)return;const r=n.getFirstPosition();if(!r.isAtStart)return;const i=r.parent;"listItem"===i.name&&(i.previousSibling&&"listItem"===i.previousSibling.name||(this.editor.execute("outdentList"),e.preventDefault(),t.stop()))},{context:"li"});const i=t=>(e,n)=>{this.editor.commands.get(t).isEnabled&&(this.editor.execute(t),n())};t.keystrokes.set("Tab",i("indentList")),t.keystrokes.set("Shift+Tab",i("outdentList"))}afterInit(){const t=this.editor.commands,e=t.get("indent"),n=t.get("outdent");e&&e.registerChildCommand(t.get("indentList")),n&&n.registerChildCommand(t.get("outdentList"))}}function Sd(t){let e=1;for(const n of t.getChildren())if("ul"==n.name||"ol"==n.name)for(const t of n.getChildren())e+=Sd(t);return e}class Td extends Dt{static get pluginName(){return"ListUI"}init(){const t=this.editor.t;dd(this.editor,"numberedList",t("Numbered List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>'),dd(this.editor,"bulletedList",t("Bulleted List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>')}}class Id extends Rt{refresh(){const t=this.editor.model,e=To(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("element","paragraph"),this.isEnabled=!!e&&Pd(e,t.schema)}execute(t={}){const e=this.editor.model,n=e.document;e.change(r=>{const i=(t.selection||n.selection).getSelectedBlocks();for(const t of i)!t.is("element","paragraph")&&Pd(t,e.schema)&&r.rename(t,"paragraph")})}}function Pd(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}class Dd extends Rt{execute(t){const e=this.editor.model;let n=t.position;e.change(t=>{const r=t.createElement("paragraph");if(!e.schema.checkChild(n.parent,r)){const i=e.schema.findAllowedParent(n,r);if(!i)return;n=t.split(n,i).position}e.insertContent(r,n),t.setSelection(r,"in")})}}class Nd extends Dt{static get pluginName(){return"Paragraph"}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new Id(t)),t.commands.add("insertParagraph",new Dd(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(t,{writer:e})=>Nd.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}}Nd.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);const Rd="removeFormat";class jd extends Dt{static get pluginName(){return"RemoveFormatUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(Rd,n=>{const r=t.commands.get(Rd),i=new eu(n);return i.set({label:e("Remove Format"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>',tooltip:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",()=>{t.execute(Rd),t.editing.view.focus()}),i})}}class Md extends Rt{refresh(){const t=this.editor.model;this.isEnabled=!!To(this._getFormattingItems(t.document.selection,t.schema))}execute(){const t=this.editor.model,e=t.schema;t.change(n=>{for(const r of this._getFormattingItems(t.document.selection,e))if(r.is("selection"))for(const t of this._getFormattingAttributes(r,e))n.removeSelectionAttribute(t);else{const t=n.createRangeOn(r);for(const i of this._getFormattingAttributes(r,e))n.removeAttribute(i,t)}})}*_getFormattingItems(t,e){const n=t=>!!To(this._getFormattingAttributes(t,e));for(const r of t.getRanges())for(const t of r.getItems())!e.isBlock(t)&&n(t)&&(yield t);for(const r of t.getSelectedBlocks())n(r)&&(yield r);n(t)&&(yield t)}*_getFormattingAttributes(t,e){for(const[n]of t.getAttributes()){const t=e.getAttributeProperties(n);t&&t.isFormatting&&(yield n)}}}class Fd extends Dt{static get pluginName(){return"RemoveFormatEditing"}init(){const t=this.editor;t.commands.add("removeFormat",new Md(t))}}class Ld extends vl{}Ld.builtinPlugins=[class extends Dt{static get requires(){return[wl,Cl]}static get pluginName(){return"Bold"}},class extends Dt{static get requires(){return[gh,Nl,Eh,_h,Ph,qh]}static get pluginName(){return"Essentials"}},class extends Dt{static get requires(){return[Jh,Zh]}static get pluginName(){return"FontColor"}},class extends Dt{static get requires(){return[ed,rd]}static get pluginName(){return"Italic"}},class extends Dt{static get requires(){return[xd,Td]}static get pluginName(){return"List"}},Nd,class extends Dt{static get requires(){return[Fd,jd]}static get pluginName(){return"RemoveFormat"}}],Ld.defaultConfig={toolbar:{items:["bold","italic","fontColor","bulletedList","|","removeFormat"]},language:"zh"},e.default=Ld}]).default},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){return"function"==typeof e?n=>n.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new c(t,this.project))}}class c extends o.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return pn}),n.d(e,"b",function(){return Ac}),n.d(e,"c",function(){return _c}),n.d(e,"d",function(){return bc}),n.d(e,"e",function(){return vc}),n.d(e,"f",function(){return bu}),n.d(e,"g",function(){return au}),n.d(e,"h",function(){return ba}),n.d(e,"i",function(){return jc}),n.d(e,"j",function(){return Ks}),n.d(e,"k",function(){return xc}),n.d(e,"l",function(){return $s}),n.d(e,"m",function(){return Tr}),n.d(e,"n",function(){return Ya}),n.d(e,"o",function(){return ho}),n.d(e,"p",function(){return Cn}),n.d(e,"q",function(){return fn}),n.d(e,"r",function(){return So}),n.d(e,"s",function(){return ha}),n.d(e,"t",function(){return da}),n.d(e,"u",function(){return Oc}),n.d(e,"v",function(){return Sa}),n.d(e,"w",function(){return uu}),n.d(e,"x",function(){return xa}),n.d(e,"y",function(){return nu}),n.d(e,"z",function(){return Lc}),n.d(e,"A",function(){return An}),n.d(e,"B",function(){return Cc}),n.d(e,"C",function(){return kc}),n.d(e,"D",function(){return Ys}),n.d(e,"E",function(){return Qs}),n.d(e,"F",function(){return Nr}),n.d(e,"G",function(){return Xs}),n.d(e,"H",function(){return kr}),n.d(e,"I",function(){return On}),n.d(e,"J",function(){return du}),n.d(e,"K",function(){return Ca}),n.d(e,"L",function(){return Hc}),n.d(e,"M",function(){return gn}),n.d(e,"N",function(){return ta}),n.d(e,"O",function(){return Zs}),n.d(e,"P",function(){return Ia}),n.d(e,"Q",function(){return L}),n.d(e,"R",function(){return ru}),n.d(e,"S",function(){return tu}),n.d(e,"T",function(){return y}),n.d(e,"U",function(){return Zc}),n.d(e,"V",function(){return gu}),n.d(e,"W",function(){return $c}),n.d(e,"X",function(){return Ec}),n.d(e,"Y",function(){return po}),n.d(e,"Z",function(){return Is}),n.d(e,"ab",function(){return yr}),n.d(e,"bb",function(){return rr}),n.d(e,"cb",function(){return Wn}),n.d(e,"db",function(){return $n}),n.d(e,"eb",function(){return Xn}),n.d(e,"fb",function(){return Yn}),n.d(e,"gb",function(){return Qn}),n.d(e,"hb",function(){return Jn}),n.d(e,"ib",function(){return Os}),n.d(e,"jb",function(){return pu}),n.d(e,"kb",function(){return xs}),n.d(e,"lb",function(){return Ss}),n.d(e,"mb",function(){return Gn}),n.d(e,"nb",function(){return z}),n.d(e,"ob",function(){return Lo}),n.d(e,"pb",function(){return ns}),n.d(e,"qb",function(){return es}),n.d(e,"rb",function(){return Es}),n.d(e,"sb",function(){return Dt}),n.d(e,"tb",function(){return b}),n.d(e,"ub",function(){return Hn}),n.d(e,"vb",function(){return Io}),n.d(e,"wb",function(){return Et}),n.d(e,"xb",function(){return Us}),n.d(e,"yb",function(){return gi}),n.d(e,"zb",function(){return zo}),n.d(e,"Ab",function(){return hs}),n.d(e,"Bb",function(){return lc}),n.d(e,"Cb",function(){return tt}),n.d(e,"Db",function(){return at}),n.d(e,"Eb",function(){return C}),n.d(e,"Fb",function(){return A}),n.d(e,"Gb",function(){return it}),n.d(e,"Hb",function(){return ct}),n.d(e,"Ib",function(){return Wo}),n.d(e,"Jb",function(){return Jo}),n.d(e,"Kb",function(){return Zo}),n.d(e,"Lb",function(){return Xo}),n.d(e,"Mb",function(){return Yo}),n.d(e,"Nb",function(){return Qo}),n.d(e,"Ob",function(){return ts}),n.d(e,"Pb",function(){return un}),n.d(e,"Qb",function(){return ws}),n.d(e,"Rb",function(){return Mn}),n.d(e,"Sb",function(){return ln}),n.d(e,"Tb",function(){return mc}),n.d(e,"Ub",function(){return rs}),n.d(e,"Vb",function(){return hc}),n.d(e,"Wb",function(){return Ee}),n.d(e,"Xb",function(){return ss}),n.d(e,"Yb",function(){return $a}),n.d(e,"Zb",function(){return Qa}),n.d(e,"ac",function(){return Go}),n.d(e,"bc",function(){return Ha}),n.d(e,"cc",function(){return Wa}),n.d(e,"dc",function(){return cc}),n.d(e,"ec",function(){return Ho}),n.d(e,"fc",function(){return Xt}),n.d(e,"gc",function(){return Cr}),n.d(e,"hc",function(){return Ar}),n.d(e,"ic",function(){return ot}),n.d(e,"jc",function(){return ls}),n.d(e,"kc",function(){return Ko}),n.d(e,"lc",function(){return gc}),n.d(e,"mc",function(){return bs}),n.d(e,"nc",function(){return vs}),n.d(e,"oc",function(){return _s}),n.d(e,"pc",function(){return ys}),n.d(e,"qc",function(){return uc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function c(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return c()(this)}}const d=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function m(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function b(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(b).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function v(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _=g({__forward_ref__:g});function y(t){return t.__forward_ref__=y,t.toString=function(){return b(this())},t}function w(t){return k(t)?t():t}function k(t){return"function"==typeof t&&t.hasOwnProperty(_)&&t.__forward_ref__===y}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function A(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function E(t){return O(t,S)||O(t,I)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function x(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(P))?t[T]:null}const S=g({"\u0275prov":g}),T=g({"\u0275inj":g}),I=g({ngInjectableDef:g}),P=g({ngInjectorDef:g});var D=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function R(t){const e=N;return N=t,e}function j(t,e,n){const r=E(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&D.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${b(t)}]`)}function M(t){return{toString:t}.toString()}var F=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const B="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,z=B||q||V||U,K={},H=[],W=g({"\u0275cmp":g}),G=g({"\u0275dir":g}),$=g({"\u0275pipe":g}),Q=g({"\u0275mod":g}),Y=g({"\u0275loc":g}),J=g({"\u0275fac":g}),X=g({__NG_ELEMENT_ID__:g});let Z=0;function tt(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ut(t)||function(t){return t[G]||null}(t)}function nt(t){return function(t){return t[$]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&M(()=>{rt[t.id]=t.type}),e}function ot(t,e){return M(()=>{const n=lt(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function st(t,e){if(null==t)return K;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ct(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[W]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${b(t)} does not have '\u0275mod' property.`);return n}const ht=20,dt=10;function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function bt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function _t(t,e){return t.hasOwnProperty(J)?t[J]:null}class yt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function wt(t){return"string"==typeof t?t:null==t?"":String(t)}function kt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():wt(t)}function Ct(t,e){const n=e?" in "+e:"";throw new yt("201",`No provider for ${kt(t)} found${n}`)}class At{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Et(){return Ot}function Ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),xt}function xt(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===K)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:K,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new At(c&&c.currentValue,e,s===K),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}Et.ngInherit=!0;const It="http://www.w3.org/2000/svg";let Pt=void 0;function Dt(t){Pt=t}function Nt(){return void 0!==Pt?Pt:"undefined"!=typeof document?document:void 0}function Rt(t){return!!t.listen}const jt={createRenderer:(t,e)=>Nt()};function Mt(t){for(;Array.isArray(t);)t=t[0];return t}function Ft(t,e){return Mt(e[t])}function Lt(t,e){return Mt(e[t.index])}function Bt(t,e){return t.data[e]}function Vt(t,e){return t[e]}function Ut(t,e){const n=e[t];return ft(n)?n:n[0]}function qt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function zt(t){return 4==(4&t[2])}function Kt(t){return 128==(128&t[2])}function Ht(t,e){return null==e?null:t[e]}function Wt(t){t[18]=0}function Gt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const $t={lFrame:ve(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Qt(){return $t.bindingsEnabled}function Yt(){return $t.lFrame.lView}function Jt(){return $t.lFrame.tView}function Xt(t){$t.lFrame.contextLView=t}function Zt(){let t=te();for(;null!==t&&64===t.type;)t=t.parent;return t}function te(){return $t.lFrame.currentTNode}function ee(t,e){const n=$t.lFrame;n.currentTNode=t,n.isParent=e}function ne(){return $t.lFrame.isParent}function re(){$t.lFrame.isParent=!1}function ie(){return $t.isInCheckNoChangesMode}function oe(t){$t.isInCheckNoChangesMode=t}function se(){const t=$t.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ae(){return $t.lFrame.bindingIndex}function ce(){return $t.lFrame.bindingIndex++}function ue(t){const e=$t.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function le(t,e){const n=$t.lFrame;n.bindingIndex=n.bindingRootIndex=t,he(e)}function he(t){$t.lFrame.currentDirectiveIndex=t}function de(){return $t.lFrame.currentQueryIndex}function fe(t){$t.lFrame.currentQueryIndex=t}function pe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ge(t,e,n){if(n&D.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&D.Host||(r=pe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=$t.lFrame=be();return r.currentTNode=e,r.lView=t,!0}function me(t){const e=be(),n=t[1];$t.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function be(){const t=$t.lFrame,e=null===t?null:t.child;return null===e?ve(t):e}function ve(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function _e(){const t=$t.lFrame;return $t.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ye=_e;function we(){const t=_e();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ke(){return $t.lFrame.selectedIndex}function Ce(t){$t.lFrame.selectedIndex=t}function Ae(){const t=$t.lFrame;return Bt(t.tView,t.selectedIndex)}function Ee(){$t.lFrame.currentNamespace=It}function Oe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function xe(t,e,n){Ie(t,e,3,n)}function Se(t,e,n,r){(3&t[2])===n&&Ie(t,e,n,r)}function Te(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ie(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Pe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Pe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const De=-1;class Ne{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Re(t,e,n){const r=Rt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,s):e.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];Me(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function je(t){return 3===t||4===t||6===t}function Me(t){return 64===t.charCodeAt(0)}function Fe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Le(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Le(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Be(t){return t!==De}function Ve(t){return 32767&t}function Ue(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let qe=!0;function ze(t){const e=qe;return qe=t,e}let Ke=0;function He(t,e){const n=Ge(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,We(r.data,t),We(e,null),We(r.blueprint,null));const i=$e(t,e),o=t.injectorIndex;if(Be(i)){const t=Ve(i),n=Ue(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function We(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ge(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function $e(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return De;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return De}function Qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=Ke++);const i=255&r,o=1<<i,s=64&i,a=32&i,c=e.data;128&i?s?a?c[t+7]|=o:c[t+6]|=o:a?c[t+5]|=o:c[t+4]|=o:s?a?c[t+3]|=o:c[t+2]|=o:a?c[t+1]|=o:c[t]|=o}(t,e,n)}function Ye(t,e,n){if(n&D.Optional)return t;Ct(e,"NodeInjector")}function Je(t,e,n,r){if(n&D.Optional&&void 0===r&&(r=null),0==(n&(D.Self|D.Host))){const i=t[9],o=R(void 0);try{return i?i.get(e,r,n&D.Optional):j(e,r,n&D.Optional)}finally{R(o)}}return Ye(r,e,n)}function Xe(t,e,n,r=D.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(X)?t[X]:void 0;return"number"==typeof e?e>=0?255&e:tn:e}(n);if("function"==typeof o){if(!ge(e,t,r))return r&D.Host?Ye(i,n,r):Je(e,n,r,i);try{const t=o();if(null!=t||r&D.Optional)return t;Ct(n)}finally{ye()}}else if("number"==typeof o){let i=null,s=Ge(t,e),a=De,c=r&D.Host?e[16][6]:null;for((-1===s||r&D.SkipSelf)&&(a=-1===s?$e(t,e):e[s+8],a!==De&&sn(r,!1)?(i=e[1],s=Ve(a),e=Ue(a,e)):s=-1);-1!==s;){const t=e[1];if(on(o,s,t.data)){const t=en(s,e,n,i,r,c);if(t!==Ze)return t}a=e[s+8],a!==De&&sn(r,e[1].data[s+8]===c)&&on(o,s,e)?(i=t,s=Ve(a),e=Ue(a,e)):s=-1}}}return Je(e,n,r,i)}const Ze={};function tn(){return new an(Zt(),Yt())}function en(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],c=nn(a,s,n,null==r?mt(a)&&qe:r!=s&&0!=(3&a.type),i&D.Host&&o===a);return null!==c?rn(e,s,c,a):Ze}function nn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,u=o>>20,l=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<l;h++){const t=s[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=s[c];if(t&&vt(t)&&t.type===n)return c}return null}function rn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ne){const s=i;s.resolving&&function(t,e){throw new yt("200","Circular dependency in DI detected for "+t)}(kt(o[n]));const a=ze(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?R(s.injectImpl):null;ge(t,r,D.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ot(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==c&&R(c),ze(a),s.resolving=!1,ye()}}return i}function on(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function sn(t,e){return!(t&D.Self||t&D.Host&&e)}class an{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Xe(this._tNode,this._lView,t,void 0,e)}}function cn(t){const e=t;if(k(t))return()=>{const t=cn(w(e));return t?t():null};let n=_t(e);if(null===n){const t=x(e);n=t&&t.factory}return n||null}function un(t){return M(()=>{const e=t.prototype.constructor,n=e[J]||cn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[J]||cn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function ln(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(je(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Zt(),t)}const hn="__parameters__";function dn(t,e,n){return M(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(hn)?t[hn]:Object.defineProperty(t,hn,{value:[]})[hn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class fn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=C({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const pn=new fn("AnalyzeForEntryComponents"),gn=Function;function mn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),mn(r,e)):e!==t&&e.push(r)}return e}function bn(t,e){t.forEach(t=>Array.isArray(t)?bn(t,e):e(t))}function vn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function _n(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yn(t,e,n){let r=kn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function wn(t,e){const n=kn(t,e);if(n>=0)return t[1|n]}function kn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const Cn=dn("Inject",t=>({token:t})),An=dn("Optional"),En=dn("Self"),On=dn("SkipSelf"),xn=dn("Host"),Sn={},Tn=/\n/gm,In="__source",Pn=g({provide:String,useValue:g});let Dn,Nn=void 0;function Rn(t){const e=Nn;return Nn=t,e}function jn(t,e=D.Default){if(void 0===Nn)throw new Error("inject() must be called from an injection context");return null===Nn?j(t,void 0,e):Nn.get(t,e&D.Optional?null:void 0,e)}function Mn(t,e=D.Default){return(N||jn)(w(t),e)}function Fn(t){const e=[];for(let n=0;n<t.length;n++){const r=w(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=D.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof An||"Optional"===i.ngMetadataName||i===An?n|=D.Optional:i instanceof On||"SkipSelf"===i.ngMetadataName||i===On?n|=D.SkipSelf:i instanceof En||"Self"===i.ngMetadataName||i===En?n|=D.Self:i instanceof xn||"Host"===i.ngMetadataName||i===xn?n|=D.Host:t=i instanceof Cn||i===Cn?i.token:i}e.push(Mn(t,n))}else e.push(Mn(r))}return e}function Ln(t){var e;return(null===(e=function(){if(void 0===Dn&&(Dn=null,z.trustedTypes))try{Dn=z.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Dn}())||void 0===e?void 0:e.createHTML(t))||t}class Bn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class Vn extends Bn{getTypeName(){return"HTML"}}class Un extends Bn{getTypeName(){return"Style"}}class qn extends Bn{getTypeName(){return"Script"}}class zn extends Bn{getTypeName(){return"URL"}}class Kn extends Bn{getTypeName(){return"ResourceURL"}}function Hn(t){return t instanceof Bn?t.changingThisBreaksApplicationSecurity:t}function Wn(t,e){const n=Gn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Gn(t){return t instanceof Bn&&t.getTypeName()||null}function $n(t){return new Vn(t)}function Qn(t){return new Un(t)}function Yn(t){return new qn(t)}function Jn(t){return new zn(t)}function Xn(t){return new Kn(t)}class Zn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ln(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class tr{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Ln(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Ln(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const er=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function rr(t){return(t=String(t)).match(er)||t.match(nr)?t:"unsafe:"+t}function ir(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function or(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const sr=ir("area,br,col,hr,img,wbr"),ar=ir("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cr=ir("rp,rt"),ur=or(cr,ar),lr=or(sr,or(ar,ir("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),or(cr,ir("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ur),hr=ir("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dr=ir("srcset"),fr=or(hr,dr,ir("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ir("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),pr=ir("script,style,template");class gr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!lr.hasOwnProperty(e))return this.sanitizedSomething=!0,!pr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!fr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;hr[o]&&(s=rr(s)),dr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>rr(t.trim())).join(", ")),this.buf.push(" ",e,'="',vr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();lr.hasOwnProperty(e)&&!sr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(vr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const mr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,br=/([^\#-~ |!])/g;function vr(t){return t.replace(/&/g,"&amp;").replace(mr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(br,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _r;function yr(t,e){let n=null;try{_r=_r||function(t){const e=new tr(t);return function(){try{return!!(new window.DOMParser).parseFromString(Ln(""),"text/html")}catch(t){return!1}}()?new Zn(e):e}(t);let r=e?String(e):"";n=_r.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=_r.getInertBodyElement(r)}while(r!==o);return(new gr).sanitizeChildren(wr(n)||n)}finally{if(n){const t=wr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function wr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var kr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Cr(t){const e=Er();return e?e.sanitize(kr.HTML,t)||"":Wn(t,"HTML")?Hn(t):yr(Nt(),wt(t))}function Ar(t){const e=Er();return e?e.sanitize(kr.URL,t)||"":Wn(t,"URL")?Hn(t):rr(wt(t))}function Er(){const t=Yt();return t&&t[12]}function Or(t){return t.ngDebugContext}function xr(t){return t.ngOriginalError}function Sr(t,...e){t.error(...e)}class Tr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Sr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Or(t)?Or(t):this._findContext(xr(t)):null}_findOriginalError(t){let e=xr(t);for(;e&&xr(e);)e=xr(e);return e}}function Ir(t,e){t.__ngContext__=e}const Pr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function Dr(t){return t instanceof Function?t():t}var Nr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Rr(t,e){return(void 0)(t,e)}function jr(t){const e=t[3];return pt(e)?e[3]:e}function Mr(t){return Lr(t[13])}function Fr(t){return Lr(t[4])}function Lr(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Br(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:ft(r)&&(s=!0,r=r[0]);const a=Mt(r);0===t&&null!==n?null==i?Wr(e,n,a):Hr(e,n,a,i||null,!0):1===t&&null!==n?Hr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=$r(t,e);r&&function(t,e,n,r){Rt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Mt(n)&&Br(e,t,r,o,i);for(let s=dt;s<n.length;s++){const i=n[s];Zr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Vr(t,e,n){return Rt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ur(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Gt(i,-1)),n.splice(r,1)}function qr(t,e){if(t.length<=dt)return;const n=dt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ur(o,r),e>0&&(t[n-1][4]=r[4]);const s=_n(t,dt+e);Zr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function zr(t,e){if(!(256&e[2])){const n=e[11];Rt(n)&&n.destroyNode&&Zr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Kr(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&Kr(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&Kr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Kr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ne)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Mt(e[t]),a=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?s.removeEventListener(n[o],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Rt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Ur(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Hr(t,e,n,r,i){Rt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Wr(t,e,n){Rt(t)?t.appendChild(e,n):e.appendChild(n)}function Gr(t,e,n,r,i){null!==r?Hr(t,e,n,r,i):Wr(t,e,n)}function $r(t,e){return Rt(t)?t.parentNode(e):e.parentNode}function Qr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Lt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Lt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Gr(o,i,n[a],s,!1);else Gr(o,i,n,s,!1)}function Yr(t,e){if(null!==e){const n=e.type;if(3&n)return Lt(e,t);if(4&n)return Jr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Yr(t,n);{const n=t[e.index];return pt(n)?Jr(-1,n):Mt(n)}}if(32&n)return Rr(e,t)()||Mt(t[e.index]);{const n=t[16],r=n[6],i=jr(n),o=r.projection[e.projection];return null!=o?Yr(i,o):Yr(t,e.next)}}return null}function Jr(t,e){const n=dt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Yr(t,r)}return e[7]}function Xr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===e&&(a&&Ir(Mt(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Xr(t,e,n.child,r,i,o,!1),Br(e,t,i,a,o);else if(32&c){const s=Rr(n,r);let c;for(;c=s();)Br(e,t,i,c,o);Br(e,t,i,a,o)}else 16&c?ti(t,e,r,n,i,o):Br(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Zr(t,e,n,r,i,o){Xr(n,r,t.firstChild,e,i,o,!1)}function ti(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Br(e,t,i,a[c],o);else Xr(t,e,a,s[3],i,o,!0)}function ei(t,e,n){Rt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ni(t,e,n){Rt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ri(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ii="ng-template";function oi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ri(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function si(t){return 4===t.type&&t.value!==ii}function ai(t,e,n){return e===(4!==t.type||n?t.value:ii)}function ci(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(je(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!ai(t,c,n)||""===c&&1===e.length){if(ui(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!oi(t.attrs,u,n)){if(ui(r))return!1;s=!0}continue}const l=li(8&r?"class":c,i,si(t),n);if(-1===l){if(ui(r))return!1;s=!0;continue}if(""!==u){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ri(e,u,0)||2&r&&u!==t){if(ui(r))return!1;s=!0}}}}else{if(!s&&!ui(r)&&!ui(c))return!1;if(s&&ui(c))continue;s=!1,r=c|1&r}}return ui(r)||s}function ui(t){return 0==(1&t)}function li(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function hi(t,e,n=!1){for(let r=0;r<e.length;r++)if(ci(t,e[r],n))return!0;return!1}function di(t,e){return t?":not("+e.trim()+")":e}function fi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ui(s)||(e+=di(o,i),i=""),r=s,o=o||!ui(r);n++}return""!==i&&(e+=di(o,i)),e}const pi={};function gi(t){mi(Jt(),Yt(),ke()+t,ie())}function mi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&xe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Se(e,r,0,n)}Ce(n)}function bi(t,e){return t<<17|e<<2}function vi(t){return t>>17&32767}function _i(t){return 2|t}function yi(t){return(131068&t)>>2}function wi(t,e){return-131069&t|e<<2}function ki(t){return 1|t}function Ci(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];fe(i),n.contentQueries(2,e[o],o)}}}function Ai(t,e,n,r,i,o,s,a,c,u){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Wt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ei(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=te(),s=ne(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),$t.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=$t.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return ee(o,!0),o}function Oi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function xi(t,e,n){me(e);try{const r=t.viewQuery;null!==r&&ro(1,r,n);const i=t.template;null!==i&&Ii(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ci(t,e),t.staticViewQueries&&ro(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Xi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,we()}}function Si(t,e,n,r){const i=e[2];if(256==(256&i))return;me(e);const o=ie();try{Wt(e),$t.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ii(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&xe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Se(e,n,0,null),Te(e,0)}if(function(t){for(let e=Mr(t);null!==e;e=Fr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Gt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Mr(t);null!==e;e=Fr(e))for(let t=dt;t<e.length;t++){const n=e[t],r=n[1];Kt(n)&&Si(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ci(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&xe(e,n)}else{const n=t.contentHooks;null!==n&&Se(e,n,1),Te(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Ce(~r);else{const i=r,o=n[++t],s=n[++t];le(o,i),s(2,e[i])}}}finally{Ce(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Yi(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&ro(2,c,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&xe(e,n)}else{const n=t.viewHooks;null!==n&&Se(e,n,2),Te(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Gt(e[3],-1))}finally{we()}}function Ti(t,e,n,r){const i=e[10],o=!ie(),s=zt(e);try{o&&!s&&i.begin&&i.begin(),s&&xi(t,e,r),Si(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ii(t,e,n,r,i){const o=ke();try{Ce(-1),2&r&&e.length>ht&&mi(t,e,ht,ie()),n(r,i)}finally{Ce(o)}}function Pi(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Di(t,e,n){Qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||He(n,e),Ir(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Wi(e,n,r);const c=rn(e,t,a,n);Ir(c,e),null!==s&&Gi(0,a-i,c,r,0,s),o&&(Ut(n.index,e)[8]=c)}}(t,e,n,Lt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=$t.lFrame.currentDirectiveIndex;try{Ce(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];he(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ui(r,i)}}finally{Ce(-1),he(s)}}(t,e,n))}function Ni(t,e,n=Lt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ji(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ji(t,e,n,r,i,o,s,a,c,u){const l=ht+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:pi);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Mi(t,e,n,r){const i=oo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&so(t).push(r,i.length-1))}function Fi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Li(t,e,n,r,i,o,s,a){const c=Lt(e,n);let u,l=e.inputs;var h;!a&&null!=l&&(u=l[r])?(co(t,n,u,r,i),mt(e)&&function(t,e){const n=Ut(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Rt(o)?o.setProperty(c,r,i):Me(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Bi(t,e,n,r){let i=!1;if(Qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];hi(n,s.selectors,!1)&&(i||(i=[]),Qe(He(n,e),t,s.type),vt(s)?(qi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ki(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,c=Oi(t,e,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=Fe(n.mergedAttrs,u.hostAttrs),Hi(t,n,e,c,u),zi(c,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],n=t.inputs,u=null===i||si(e)?null:$i(n,i);o.push(u),s=Fi(n,c,s),a=Fi(t.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new yt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Fe(n.mergedAttrs,n.attrs),i}function Vi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ui(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function qi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function zi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function Ki(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Hi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=_t(i.type)),s=new Ne(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Vi(t,e,0,r,Oi(t,n,i.hostVars,pi),i)}function Wi(t,e,n){const r=Lt(e,t),i=Ri(n),o=t[10],s=Zi(t,Ai(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Gi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function $i(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Qi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Yi(t,e){const n=Ut(e,t);if(Kt(n)){const t=n[1];80&n[2]?Si(t,n,t.template,n[8]):n[5]>0&&Ji(n)}}function Ji(t){for(let n=Mr(t);null!==n;n=Fr(n))for(let t=dt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Si(t,e,t.template,e[8])}else e[5]>0&&Ji(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ut(e[n],t);Kt(r)&&r[5]>0&&Ji(r)}}function Xi(t,e){const n=Ut(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),xi(r,n,n[8])}function Zi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function to(t){for(;t;){t[2]|=64;const e=jr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function eo(t,e,n){const r=e[10];r.begin&&r.begin();try{Si(t,e,t.template,n)}catch(i){throw ao(e,i),i}finally{r.end&&r.end()}}function no(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=qt(n),i=r[1];Ti(i,r,i.template,n)}}(t[8])}function ro(t,e,n){fe(0),e(t,n)}const io=(()=>Promise.resolve(null))();function oo(t){return t[7]||(t[7]=[])}function so(t){return t.cleanup||(t.cleanup=[])}function ao(t,e){const n=t[9],r=n?n.get(Tr,null):null;r&&r.handleError(e)}function co(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=e[s],u=t.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function uo(t,e,n){const r=Ft(e,t);!function(t,e,n){Rt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function lo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=v(i,t):2==o&&(r=v(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const ho=new fn("INJECTOR",-1);class fo{get(t,e=Sn){if(e===Sn){const e=new Error(`NullInjectorError: No provider for ${b(t)}!`);throw e.name="NullInjectorError",e}return e}}const po=new fn("Set Injector scope."),go={},mo={},bo=[];let vo=void 0;function _o(){return void 0===vo&&(vo=new fo),vo}function yo(t,e=null,n=null,r){return new wo(t,n,e||_o(),r)}class wo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&bn(e,n=>this.processProvider(n,t,e)),bn([t],t=>this.processInjectorType(t,[],i)),this.records.set(ho,Ao(void 0,this));const o=this.records.get(po);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:b(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Sn,n=D.Default){this.assertNotDestroyed();const r=Rn(this);try{if(!(n&D.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof fn)&&E(t);e=n&&this.injectableDefInScope(n)?Ao(ko(t),go):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&D.Self?_o():this.parent).get(t,e=n&D.Optional&&e===Sn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(b(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[In]&&i.unshift(e[In]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=b(e);if(Array.isArray(e))i=e.map(b).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):b(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Tn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Rn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(b(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=w(t)))return!1;let r=x(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=x(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{bn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];bn(r,t=>this.processProvider(t,n,r||bo))}}this.injectorDefTypes.add(o),this.records.set(o,Ao(r.factory,go));const a=r.providers;if(null!=a&&!s){const e=t;bn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Oo(t=w(t))?t:w(t&&t.provide);const i=function(t,e,n){return Eo(t)?Ao(void 0,t.useValue):Ao(Co(t),go)}(t);if(Oo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ao(void 0,go,!0),e.factory=()=>Fn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===go&&(e.value=mo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ko(t){const e=E(t),n=null!==e?e.factory:_t(t);if(null!==n)return n;const r=x(t);if(null!==r)return r.factory;if(t instanceof fn)throw new Error(`Token ${b(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${b(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Co(t,e,n){let r=void 0;if(Oo(t)){const e=w(t);return _t(e)||ko(e)}if(Eo(t))r=()=>w(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Fn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Mn(w(t.useExisting));else{const e=w(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return _t(e)||ko(e);r=()=>new e(...Fn(t.deps))}var i;return r}function Ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Eo(t){return null!==t&&"object"==typeof t&&Pn in t}function Oo(t){return"function"==typeof t}const xo=function(t,e,n){return function(t,e=null,n=null,r){const i=yo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let So=(()=>{class t{static create(t,e){return Array.isArray(t)?xo(t,e,""):xo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Sn,t.NULL=new fo,t.\u0275prov=C({token:t,providedIn:"any",factory:()=>Mn(ho)}),t.__NG_ELEMENT_ID__=-1,t})();function To(t,e){Oe(qt(t)[1],Zt())}function Io(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Po(t.inputs),e.declaredInputs=Po(t.declaredInputs),e.outputs=Po(t.outputs);const n=i.hostBindings;n&&Ro(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Do(t,o),s&&No(t,s),m(t.inputs,i.inputs),m(t.declaredInputs,i.declaredInputs),m(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Io&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fe(i.hostAttrs,n=Fe(n,i.hostAttrs))}}(r)}function Po(t){return t===K?{}:t===H?[]:t}function Do(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function No(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ro(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let jo=null;function Mo(){if(!jo){const t=z.Symbol;if(t&&t.iterator)jo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(jo=n)}}}return jo}class Fo{constructor(t){this.wrapped=t}static wrap(t){return new Fo(t)}static unwrap(t){return Fo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Fo}}function Lo(t){return!!Bo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Mo()in t)}function Bo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Vo(t,e,n){return t[e]=n}function Uo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function qo(t,e,n,r){const i=Uo(t,e,n);return Uo(t,e+1,r)||i}function zo(t,e,n,r){const i=Yt();return Uo(i,ce(),e)&&(Jt(),function(t,e,n,r,i,o){const s=Lt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Rt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?wt(o):s(o,r||"",i);Rt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(Ae(),i,t,e,n,r)),zo}function Ko(t,e,n,r,i,o,s,a){const c=Yt(),u=Jt(),l=t+ht,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,c){const u=e.consts,l=Ei(e,t,4,s||null,Ht(u,a));Bi(e,n,l,Ht(u,c)),Oe(e,l);const h=l.tViews=ji(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,i,o,s):u.data[l];ee(h,!1);const d=c[11].createComment("");Qr(u,c,d,h),Ir(d,c),Zi(c,c[l]=Qi(d,c,d,h)),bt(h)&&Di(u,c,h),null!=s&&Ni(c,h,a)}function Ho(t){return Vt($t.lFrame.contextLView,ht+t)}function Wo(t,e=D.Default){const n=Yt();return null===n?Mn(t,e):Xe(Zt(),n,w(t),e)}function Go(t,e,n){const r=Yt();return Uo(r,ce(),e)&&Li(Jt(),Ae(),r,t,e,r[11],n,!1),Go}function $o(t,e,n,r,i){const o=i?"class":"style";co(t,n,e.inputs[o],o,r)}function Qo(t,e,n,r){const i=Yt(),o=Jt(),s=ht+t,a=i[11],c=i[s]=Vr(a,e,$t.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,c=Ei(e,t,2,i,Ht(a,o));return Bi(e,n,c,Ht(a,s)),null!==c.attrs&&lo(c,c.attrs,!1),null!==c.mergedAttrs&&lo(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,n,r):o.data[s];ee(u,!0);const l=u.mergedAttrs;null!==l&&Re(a,c,l);const h=u.classes;null!==h&&ni(a,c,h);const d=u.styles;null!==d&&ei(a,c,d),64!=(64&u.flags)&&Qr(o,i,c,u),0===$t.lFrame.elementDepthCount&&Ir(c,i),$t.lFrame.elementDepthCount++,bt(u)&&(Di(o,i,u),Pi(o,u,i)),null!==r&&Ni(i,u)}function Yo(){let t=Zt();ne()?re():(t=t.parent,ee(t,!1));const e=t;$t.lFrame.elementDepthCount--;const n=Jt();n.firstCreatePass&&(Oe(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&$o(n,e,Yt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&$o(n,e,Yt(),e.stylesWithoutHost,!1)}function Jo(t,e,n,r){Qo(t,e,n,r),Yo()}function Xo(t,e,n){const r=Yt(),i=Jt(),o=t+ht,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ht(o,r),a=Ei(e,t,8,"ng-container",s);return null!==s&&lo(a,s,!0),Bi(e,n,a,Ht(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];ee(s,!0);const a=r[o]=r[11].createComment("");Qr(i,r,a,s),Ir(a,r),bt(s)&&(Di(i,r,s),Pi(i,s,r)),null!=n&&Ni(r,s)}function Zo(){let t=Zt();const e=Jt();ne()?re():(t=t.parent,ee(t,!1)),e.firstCreatePass&&(Oe(e,t),gt(t)&&e.queries.elementEnd(t))}function ts(){return Yt()}function es(t){return!!t&&"function"==typeof t.then}function ns(t){return!!t&&"function"==typeof t.subscribe}function rs(t,e,n=!1,r){const i=Yt(),o=Jt(),s=Zt();return function(t,e,n,r,i,o,s=!1,a){const c=bt(r),u=t.firstCreatePass&&so(t),l=oo(e);let h=!0;if(3&r.type){const d=Lt(r,e),f=a?a(d):K,p=f.target||d,g=l.length,m=a?t=>a(Mt(t[r.index])).target:r.index;if(Rt(n)){let s=null;if(!a&&c&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=os(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),u&&u.push(i,m,g,g+1)}}else o=os(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),u&&u.push(i,m,g,s)}else o=os(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),rs}function is(t,e,n){try{return!1!==e(n)}catch(r){return ao(t,r),!1}}function os(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Ut(t.index,e):e;0==(32&e[2])&&to(s);let a=is(e,n,o),c=i.__ngNextListenerFn__;for(;c;)a=is(e,c,o)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ss(t=1){return function(t){return($t.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,$t.lFrame.contextLView))[8]}(t)}const as=[];function cs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?vi(o):yi(o),c=!1;for(;0!==a&&(!1===c||s);){const n=t[a+1];us(t[a],e)&&(c=!0,t[a+1]=r?ki(n):_i(n)),a=r?vi(n):yi(n)}c&&(t[n+1]=r?_i(o):ki(o))}function us(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&kn(t,e)>=0}function ls(t,e,n){return ds(t,e,n,!1),ls}function hs(t,e){return ds(t,e,null,!0),hs}function ds(t,e,n,r){const i=Yt(),o=Jt(),s=ue(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ke()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=$t.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ps(n=fs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=fs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==yi(r))return t[vi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=fs(null,t,e,n[1],r),n=ps(n,e.attrs,r),function(t,e,n,r){t[vi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ps(r,t[o].hostAttrs,n);return ps(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=vi(s),c=yi(s);t[r]=n;let u,l=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||kn(t,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const e=vi(t[a+1]);t[r+1]=bi(e,a),0!==e&&(t[e+1]=wi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=bi(a,0),0!==a&&(t[a+1]=wi(t[a+1],r)),a=r;else t[r+1]=bi(c,0),0===a?a=r:t[c+1]=wi(t[c+1],r),c=r;l&&(t[r+1]=_i(t[r+1])),cs(t,u,r,!0),cs(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&kn(o,e)>=0&&(n[r+1]=ki(n[r+1]))}(e,u,t,r,o),s=bi(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==pi&&Uo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1];ms(1==(1&u)?gs(c,e,n,i,yi(u),s):void 0)||(ms(o)||function(t){return 2==(2&t)}(u)&&(o=gs(c,null,n,i,a,s)),function(t,e,n,r,i){const o=Rt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Nr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Nr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Ft(ke(),n),i,o))}(o,o.data[ke()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=b(Hn(t)))),t}(e,n),r,s)}function fs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ps(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ps(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yn(t,s,!!n||e[++o]))}return void 0===t?null:t}function gs(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),c=o?e[1]:e,u=null===c;let l=n[i+1];l===pi&&(l=u?as:void 0);let h=u?wn(l,r):c===r?l:void 0;if(o&&!ms(h)&&(h=wn(e,r)),ms(h)&&(a=h,s))return a;const d=t[i+1];i=s?vi(d):yi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=wn(t,r))}return a}function ms(t){return void 0!==t}function bs(t,e=""){const n=Yt(),r=Jt(),i=t+ht,o=r.firstCreatePass?Ei(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Rt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Qr(r,n,s,o),ee(o,!1)}function vs(t){return _s("",t,""),vs}function _s(t,e,n){const r=Yt(),i=function(t,e,n,r){return Uo(t,ce(),n)?e+wt(n)+r:pi}(r,t,e,n);return i!==pi&&uo(r,ke(),i),_s}function ys(t,e,n,r,i){const o=Yt(),s=function(t,e,n,r,i,o){const s=qo(t,ae(),n,i);return ue(2),s?e+wt(n)+r+wt(i)+o:pi}(o,t,e,n,r,i);return s!==pi&&uo(o,ke(),s),ys}function ws(t,e,n){const r=Yt();return Uo(r,ce(),e)&&Li(Jt(),Ae(),r,t,e,r[11],n,!0),ws}const ks=void 0;var Cs=["en",[["a","p"],["AM","PM"],ks],[["AM","PM"],ks,ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ks,"{1} 'at' {0}",ks],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let As={};function Es(t,e,n){"string"!=typeof e&&(n=e,e=t[Is.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),As[e]=t,n&&(As[e][Is.ExtraData]=n)}function Os(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ts(e);if(n)return n;const r=e.split("-")[0];if(n=Ts(r),n)return n;if("en"===r)return Cs;throw new Error(`Missing locale data for the locale "${t}".`)}function xs(t){return Os(t)[Is.CurrencyCode]||null}function Ss(t){return Os(t)[Is.PluralCase]}function Ts(t){return t in As||(As[t]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[t]),As[t]}var Is=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ps="en-US";let Ds=Ps;function Ns(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ds=t.toLowerCase().replace(/_/g,"-"))}function Rs(t,e,n,r,i){if(t=w(t),Array.isArray(t))for(let o=0;o<t.length;o++)Rs(t[o],e,n,r,i);else{const o=Jt(),s=Yt();let a=Oo(t)?t:w(t.provide),c=Co(t);const u=Zt(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Oo(t)||!t.multi){const r=new Ne(c,i,Wo),f=Fs(a,e,i?l:l+d,h);-1===f?(Qe(He(u,s),o,a),js(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Fs(a,e,l+d,h),p=Fs(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Qe(He(u,s),o,a);const l=function(t,e,n,r,i){const o=new Ne(t,n,Wo);return o.multi=[],o.index=e,o.componentProviders=0,Ms(o,i,r&&!n),o}(i?Bs:Ls,n.length,i,r,c);!i&&m&&(n[p].providerFactory=l),js(o,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),s.push(l)}else js(o,t,f>-1?f:p,Ms(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function js(t,e,n,r){const i=Oo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ms(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ls(t,e,n,r){return Vs(this.multi,[])}function Bs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=rn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Vs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Vs(i,o);return o}function Vs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Us(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Jt();if(r.firstCreatePass){const i=vt(t);Rs(n,r.data,r.blueprint,i,!0),Rs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class qs{}class zs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${b(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ks=(()=>{class t{}return t.NULL=new zs,t})();function Hs(...t){}function Ws(t,e){return new $s(Lt(t,e))}const Gs=function(){return Ws(Zt(),Yt())};let $s=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Gs,t})();class Qs{}let Ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Js(),t})();const Js=function(){const t=Yt(),e=Ut(Zt().index,t);return function(t){return t[11]}(ft(e)?e:t)};let Xs=(()=>{class t{}return t.\u0275prov=C({token:t,providedIn:"root",factory:()=>null}),t})();class Zs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ta=new Zs("11.0.9");class ea{constructor(){}supports(t){return Lo(t)}create(t){return new ra(t)}}const na=(t,e)=>e;class ra{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||na}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<aa(n,r,i)?e:n,s=aa(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Lo(t))throw new Error(`Error trying to diff '${b(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Mo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ia(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new sa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ia{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class sa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new oa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aa(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ca{constructor(){}supports(t){return t instanceof Map||Bo(t)}create(){return new ua}}class ua{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Bo(t)))throw new Error(`Error trying to diff '${b(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new la(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class la{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ha=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new On,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t([new ea])}),t})(),da=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new On,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t([new ca])}),t})();function fa(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Mt(o)),pt(o))for(let t=dt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&fa(e[1],e,n,r)}const s=n.type;if(8&s)fa(t,e,n.child,r);else if(32&s){const t=Rr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=jr(t);fa(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class pa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return fa(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(qr(t,n),_n(e,n))}this._attachedToViewContainer=!1}zr(this._lView[1],this._lView)}onDestroy(t){Mi(this._lView[1],this._lView,null,t)}markForCheck(){to(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){eo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){oe(!0);try{eo(t,e,n)}finally{oe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Zr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ga extends pa{constructor(t){super(t),this._view=t}detectChanges(){no(this._view)}checkNoChanges(){!function(t){oe(!0);try{no(t)}finally{oe(!1)}}(this._view)}get context(){return null}}const ma=va;let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=ma,t.__ChangeDetectorRef__=!0,t})();function va(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Ut(t.index,e);return new pa(n,n)}return 47&t.type?new pa(e[16],e):null}(Zt(),Yt(),t)}const _a=[new ca],ya=new ha([new ea]),wa=new da(_a),ka=function(){return Oa(Zt(),Yt())};let Ca=(()=>{class t{}return t.__NG_ELEMENT_ID__=ka,t})();const Aa=Ca,Ea=class extends Aa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ai(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),xi(e,n,t),new pa(n)}};function Oa(t,e){return 4&t.type?new Ea(e,t,Ws(t,e)):null}class xa{}class Sa{}const Ta=function(){return ja(Zt(),Yt())};let Ia=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ta,t})();const Pa=Ia,Da=class extends Pa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ws(this._hostTNode,this._hostLView)}get injector(){return new an(this._hostTNode,this._hostLView)}get parentInjector(){const t=$e(this._hostTNode,this._hostLView);if(Be(t)){const e=Ue(t,this._hostLView),n=Ve(t);return new an(e[1].data[n+8],e)}return new an(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Na(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-dt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(xa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Da(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=dt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-dt?(e[4]=n[i],vn(n,dt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Jr(i,o),a=n[11],c=$r(a,o[7]);return null!==c&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Zr(t,r,n,1,i,o)}(r,o[6],a,n,c,s),t.attachToViewContainerRef(),vn(Ra(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Na(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=qr(this._lContainer,e);n&&(_n(Ra(this._lContainer),e),zr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=qr(this._lContainer,e);return n&&null!=_n(Ra(this._lContainer),e)?new pa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Na(t){return t[8]}function Ra(t){return t[8]||(t[8]=[])}function ja(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=Mt(r);else{const n=e[11];i=n.createComment("");const r=Lt(t,e);Hr(n,$r(n,r),i,function(t,e){return Rt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Qi(r,e,i,t),Zi(e,n)}return new Da(n,t,e)}const Ma={};class Fa extends Ks{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new Va(e,this.ngModule)}}function La(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ba=new fn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Pr});class Va extends qs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(fi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return La(this.componentDef.inputs)}get outputs(){return La(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ma,i);return o!==Ma||r===Ma?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Qs,jt),s=i.get(Xs,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(Rt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Vr(o.createRenderer(null,this.componentDef),c,function(t){const e=t.toLowerCase();return"svg"===e?It:"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Pr,clean:io,playerHandler:null,flags:0},d=ji(0,null,null,1,0,null,null,null,null,null),f=Ai(null,d,h,l,null,null,o,a,s,i);let p,g;me(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ei(s,20,2,"#host",null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(lo(a,c,!0),null!==t&&(Re(i,t,c),null!==a.classes&&ni(i,t,a.classes),null!==a.styles&&ei(i,t,a.styles)));const u=r.createRenderer(t,e),l=Ai(n,Ri(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(Qe(He(a,n),s,e.type),qi(s,a),Ki(a,n.length,1)),Zi(n,l),n[20]=l}(u,this.componentDef,f,o,a);if(u)if(n)Re(a,u,["ng-version",ta.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ui(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Re(a,u,t),e&&e.length>0&&ni(a,u,e.join(" "))}if(g=Bt(d,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hi(t,r,e,Oi(t,e,1,null),n));const i=rn(e,t,r.directiveStart,r);Ir(i,e);const o=Lt(r,e);return o&&Ir(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Zt();e.contentQueries(1,s,t.directiveStart)}const a=Zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ce(a.index),Vi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ui(e,s)),s}(t,this.componentDef,f,h,[To]),xi(d,f,null)}finally{we()}return new Ua(this.componentType,p,Ws(g,f),f,g)}}class Ua extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ga(r),this.componentType=t}get injector(){return new an(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const qa=new Map;class za extends xa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fa(this);const n=lt(t),r=t[Y]||null;r&&Ns(r),this._bootstrapComponents=Dr(n.bootstrap),this._r3Injector=yo(t,e,[{provide:xa,useValue:this},{provide:Ks,useValue:this.componentFactoryResolver}],b(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=So.THROW_IF_NOT_FOUND,n=D.Default){return t===So||t===xa||t===ho?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ka extends Sa{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${b(e)} vs ${b(e.name)}`)}(i,qa.get(i),n),qa.set(i,n));const o=Dr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new za(this.moduleType,t)}}function Ha(t,e,n){const r=se()+t,i=Yt();return i[r]===pi?Vo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Wa(t,e,n,r,i,o,s){return function(t,e,n,r,i,o,s,a,c){const u=e+n;return function(t,e,n,r,i,o){const s=qo(t,e,n,r);return qo(t,e+2,i,o)||s}(t,u,i,o,s,a)?Vo(t,u+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):Ga(t,u+4)}(Yt(),se(),t,e,n,r,i,o,s)}function Ga(t,e){const n=t[e];return n===pi?void 0:n}function $a(t,e){const n=Jt();let r;const i=t+ht;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new yt("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=_t(r.type)),s=R(Wo);try{const t=ze(!1),e=o();return ze(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Yt(),i,e),e}finally{R(s)}}function Qa(t,e,n){const r=t+ht,i=Yt(),o=Vt(i,r);return function(t,e){return Fo.isWrapped(e)&&(e=Fo.unwrap(e),t[ae()]=pi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?function(t,e,n,r,i,o){const s=e+n;return Uo(t,s,i)?Vo(t,s+1,o?r.call(o,i):r(i)):Ga(t,s+1)}(i,se(),e,o.transform,n,o):o.transform(n))}const Ya=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Ja(){return this._results[Mo()]()}class Xa{constructor(){this.dirty=!0,this._results=[],this.changes=new Ya,this.length=0;const t=Mo(),e=Xa.prototype;e[t]||(e[t]=Ja)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=mn(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Za{constructor(t){this.queryList=t,this.matches=null}clone(){return new Za(this.queryList)}setDirty(){this.queryList.setDirty()}}class tc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new tc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==pc(t,e).matches&&this.queries[e].setDirty()}}class ec{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class nc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new nc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class rc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new rc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ic(e,i)),this.matchTNodeWithReadOption(t,e,nn(e,t,i,!1,!1))}else n===Ca?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,nn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===$s||r===Ia||r===Ca&&4&e.type)this.addMatch(e.index,-2);else{const n=nn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ic(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function oc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ws(t,e):4&t.type?Oa(t,e):null}(e,t):-2===n?function(t,e,n){return n===$s?Ws(e,t):n===Ca?Oa(e,t):n===Ia?ja(e,t):void 0}(t,e,r):rn(t,t[1],n,e)}function sc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:oc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function ac(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=sc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=dt;t<s.length;t++){const e=s[t];e[17]===e[3]&&ac(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];ac(n[1],n,i,r)}}}}}return r}function cc(t){const e=Yt(),n=Jt(),r=de();fe(r+1);const i=pc(n,r);if(t.dirty&&zt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?ac(n,e,r,[]):sc(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function uc(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&fc(t,new ec(n,r,false,i),-1),dc(t,e)}(Jt(),Yt(),t,e,n)}function lc(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(fc(t,new ec(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),dc(t,e)}(Jt(),Yt(),e,n,r,0,Zt(),t)}function hc(){return t=Yt(),e=de(),t[19].queries[e].queryList;var t,e}function dc(t,e){const n=new Xa;Mi(t,e,n,n.destroy),null===e[19]&&(e[19]=new tc),e[19].queries.push(new Za(n))}function fc(t,e,n){null===t.queries&&(t.queries=new nc),t.queries.track(new rc(e,n))}function pc(t,e){return t.queries.getByIndex(e)}function gc(t,e){return Oa(t,e)}function mc(t=D.Default){const e=va(!0);if(null!=e||t&D.Optional)return e;Ct("ChangeDetectorRef")}const bc=new fn("Application Initializer");let vc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Hs,this.reject=Hs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();es(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Mn(bc,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();const _c=new fn("AppId"),yc={provide:_c,useFactory:function(){return`${wc()}${wc()}${wc()}`},deps:[]};function wc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const kc=new fn("Platform Initializer"),Cc=new fn("Platform ID"),Ac=new fn("appBootstrapListener");let Ec=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();const Oc=new fn("LocaleId"),xc=new fn("DefaultCurrencyCode");class Sc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Tc=function(t){return new Ka(t)},Ic=Tc,Pc=function(t){return Promise.resolve(Tc(t))},Dc=function(t){const e=Tc(t),n=Dr(lt(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new Va(n)),t},[]);return new Sc(e,n)},Nc=Dc,Rc=function(t){return Promise.resolve(Dc(t))};let jc=(()=>{class t{constructor(){this.compileModuleSync=Ic,this.compileModuleAsync=Pc,this.compileModuleAndAllComponentsSync=Nc,this.compileModuleAndAllComponentsAsync=Rc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();const Mc=(()=>Promise.resolve(0))();function Fc(t){"undefined"==typeof Zone?Mc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Lc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ya(!1),this.onMicrotaskEmpty=new Ya(!1),this.onStable=new Ya(!1),this.onError=new Ya(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=z.requestAnimationFrame,e=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(z,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Uc(t),Vc(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Uc(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return qc(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),zc(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return qc(t),e.invoke(r,i,o,s,a)}finally{zc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Uc(t),Vc(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Lc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Bc,Hs,Hs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Bc={};function Vc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Uc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function qc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zc(t){t._nesting--,Vc(t)}class Kc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ya,this.onMicrotaskEmpty=new Ya,this.onStable=new Ya,this.onError=new Ya}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Hc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lc.assertNotInAngularZone(),Fc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Mn(Lc))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})(),Wc=(()=>{class t{constructor(){this._applications=new Map,Yc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Yc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();class Gc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function $c(t){Yc=t}let Qc,Yc=new Gc,Jc=!0,Xc=!1;function Zc(){return Xc=!0,Jc}function tu(){if(Xc)throw new Error("Cannot enable prod mode after platform setup.");Jc=!1}const eu=new fn("AllowMultipleToken");class nu{constructor(t,e){this.name=t,this.token=e}}function ru(t,e,n=[]){const r="Platform: "+e,i=new fn(r);return(e=[])=>{let o=iu();if(!o||o.injector.get(eu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:po,useValue:"platform"});!function(t){if(Qc&&!Qc.destroyed&&!Qc.injector.get(eu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Qc=t.get(ou);const e=t.get(kc,null);e&&e.forEach(t=>t())}(So.create({providers:t,name:r}))}return function(t){const e=iu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function iu(){return Qc&&!Qc.destroyed?Qc:null}let ou=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Kc:("zone.js"===t?void 0:t)||new Lc({enableLongStackTrace:Zc(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Lc,useValue:n}];return n.run(()=>{const e=So.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Tr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{cu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return es(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(vc);return t.runInitializers(),t.donePromise.then(()=>(Ns(i.injector.get(Oc,Ps)||Ps),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=su({},e);return function(t,e,n){const r=new Ka(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(au);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${b(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Mn(So))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();function su(t,e){return Array.isArray(e)?e.reduce(su,t):Object.assign(Object.assign({},t),e)}let au=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Lc.assertNotInAngularZone(),Fc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Lc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,l.pipe(t=>{return c()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,d);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof qs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(xa),i=n.create(So.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Hc,null),a=s&&i.injector.get(Wc);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),cu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Zc()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;cu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ac,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Mn(Lc),Mn(Ec),Mn(So),Mn(Tr),Mn(Ks),Mn(vc))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();function cu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class uu{}class lu{}const hu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let du=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||hu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>fu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>fu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Mn(jc),Mn(lu,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac}),t})();function fu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const pu=function(t){return null},gu=ru(null,"core",[{provide:Cc,useValue:"unknown"},{provide:ou,deps:[So]},{provide:Wc,deps:[]},{provide:Ec,deps:[]}]),mu=[{provide:au,useClass:au,deps:[Lc,Ec,So,Tr,Ks,vc]},{provide:Ba,deps:[Lc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:vc,useClass:vc,deps:[[new An,bc]]},{provide:jc,useClass:jc,deps:[]},yc,{provide:ha,useFactory:function(){return ya},deps:[]},{provide:da,useFactory:function(){return wa},deps:[]},{provide:Oc,useFactory:function(t){return Ns(t=t||"undefined"!=typeof $localize&&$localize.locale||Ps),t},deps:[[new Cn(Oc),new An,new On]]},{provide:xc,useValue:"USD"}];let bu=(()=>{class t{constructor(t){}}return t.\u0275mod=it({type:t}),t.\u0275inj=A({factory:function(e){return new(e||t)(Mn(au))},providers:mu}),t})()},fwGN:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("ofXK"),i=n("fXoL");let o=(()=>{class t{}return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)},imports:[[r.c]]}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},itXk:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n("z+Ro"),i=n("DH7j"),o=n("7o/Q");class s extends o.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class a extends o.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var c=n("SeVD"),u=n("HDdC");function l(t,e,n,r,i=new a(t,n,r)){if(!i.closed)return e instanceof u.a?e.subscribe(i):Object(c.a)(e)(i)}var h=n("yCtX");const d={};function f(...t){let e=void 0,n=void 0;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(h.a)(t,n).lift(new p(e))}class p{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new g(t,this.resultSelector))}}class g extends s{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(d),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(l(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===d?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},iuoO:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return h});var r=n("nYR2"),i=n("HDdC"),o=n("D0XW"),s=n("Y7HM"),a=n("z+Ro");function c(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var u=n("quSY");class l{constructor({id:t,name:e,avatar:n}){this.isLogin=!1,this.timer$=function(t=0,e,n){let r=-1;return Object(s.a)(e)?r=Number(e)<1?1:Number(e):Object(a.a)(e)&&(n=e),Object(a.a)(n)||(n=o.a),new i.a(e=>{const i=Object(s.a)(t)?t:+t-n.now();return n.schedule(c,i,{index:0,period:r,subscriber:e})})}(6e3*Math.random()).pipe(Object(r.a)(()=>this.startTimer())),this.subscription=new u.a,this.id=t,this.name=e,this.avatar=n||"",this.startTimer()}startTimer(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe(),this.subscription=this.timer$.subscribe(()=>{this.isLogin=Math.random()>=.5})}}var h=function(t){return t[t.FetchRecommendList=1]="FetchRecommendList",t[t.FetchInviteList=2]="FetchInviteList",t[t.SearchUser=3]="SearchUser",t[t.AddFriend=4]="AddFriend",t[t.IgnoreInvite=5]="IgnoreInvite",t}({})},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return c}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__createBinding",function(){return d}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return g}),n.d(e,"__spread",function(){return m}),n.d(e,"__spreadArrays",function(){return b}),n.d(e,"__spreadArray",function(){return v}),n.d(e,"__await",function(){return _}),n.d(e,"__asyncGenerator",function(){return y}),n.d(e,"__asyncDelegator",function(){return w}),n.d(e,"__asyncValues",function(){return k}),n.d(e,"__makeTemplateObject",function(){return C}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return O}),n.d(e,"__classPrivateFieldGet",function(){return x}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var d=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function f(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||d(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function b(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function v(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof _?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function c(t){a("next",t)}function u(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:_(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function k(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var A=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&d(e,t,n);return A(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function x(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function S(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("quSY");function o(t){return e=>e.lift(new s(t))}class s{constructor(t){this.callback=t}call(t,e){return e.subscribe(new a(t,this.callback))}}class a extends r.a{constructor(t,e){super(t),this.add(new i.a(e))}}},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function c(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function u(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function f(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function p(t){this._db=t}o(u,"_index",["name","keyPath","multiEntry","unique"]),s(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,u].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[u,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new f(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},ofXK:function(t,e,n){"use strict";n.d(e,"a",function(){return y}),n.d(e,"b",function(){return K}),n.d(e,"c",function(){return G}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return k}),n.d(e,"f",function(){return H}),n.d(e,"g",function(){return h}),n.d(e,"h",function(){return C}),n.d(e,"i",function(){return v}),n.d(e,"j",function(){return D}),n.d(e,"k",function(){return R}),n.d(e,"l",function(){return L}),n.d(e,"m",function(){return B}),n.d(e,"n",function(){return w}),n.d(e,"o",function(){return u}),n.d(e,"p",function(){return Y}),n.d(e,"q",function(){return Q}),n.d(e,"r",function(){return a}),n.d(e,"s",function(){return $}),n.d(e,"t",function(){return o}),n.d(e,"u",function(){return I}),n.d(e,"v",function(){return s});var r=n("fXoL");let i=null;function o(){return i}function s(t){i||(i=t)}class a{}const c=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return Object(r.Rb)(d)}const h=new r.q("Location Initialized");let d=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(c))},t.\u0275prov=Object(r.Eb)({factory:p,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function p(){return new d(Object(r.Rb)(c))}function g(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function b(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:_,token:t,providedIn:"root"}),t})();function _(t){const e=Object(r.Rb)(c).location;return new w(Object(r.Rb)(u),e&&e.origin||"")}const y=new r.q("appBaseHref");let w=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return g(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+b(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+b(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+b(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(u),r.Rb(y,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),k=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=g(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+b(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+b(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(u),r.Rb(y,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+b(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+b(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+b(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(v),r.Rb(u))},t.normalizeQueryParams=b,t.joinWithSlash=g,t.stripTrailingSlash=m,t.\u0275prov=Object(r.Eb)({factory:A,token:t,providedIn:"root"}),t})();function A(){return new C(Object(r.Rb)(v),Object(r.Rb)(u))}function E(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const x=r.lb;class S{}let T=(()=>{class t extends S{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(x(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.u))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();function I(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class P{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let D=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new P(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K),r.Ib(r.s))},t.\u0275dir=r.Db({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let R=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new j,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){M("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){M("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K))},t.\u0275dir=r.Db({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class j{constructor(){this.$implicit=null,this.ngIf=null}}function M(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}class F{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let L=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),B=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new F(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K),r.Ib(L,1))},t.\u0275dir=r.Db({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})();class V{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class U{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const q=new U,z=new V;let K=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.qb)(e))return q;if(Object(r.pb)(e))return z;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Tb())},t.\u0275pipe=r.Hb({name:"async",type:t,pure:!1}),t})(),H=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[]}transform(t,e=W){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t);return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.t))},t.\u0275pipe=r.Hb({name:"keyvalue",type:t,pure:!1}),t})();function W(t,e){const n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),o=String(r);return i==o?0:i<o?-1:1}let G=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[{provide:S,useClass:T}]}),t})();const $="browser";function Q(t){return"server"===t}let Y=(()=>{class t{}return t.\u0275prov=Object(r.Eb)({token:t,providedIn:"root",factory:()=>new J(Object(r.Rb)(c),window)}),t})();class J{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=X(this.window.history)||X(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function X(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},phrh:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return c});var r=n("CmIU");const i=new Set([r.c.Landing,r.c.SignOn]),o=new Map([[r.d.User,"question_answer"],[r.d.Business,"trending_up"],[r.d.Friend,"person_add"],[r.d.Social,"article"]]),s=new Map([[r.f.Chat,{path:"chat",icon:""}]]),a=(new Map([[r.a.Analyze,{path:"analyze",icon:""}]]),new Map([[r.b.Recommend,{path:"recommend",icon:""}]])),c=new Map([[r.e.SharedWall,{path:"shared-wall",icon:""}]])},pqa8:function(t,e,n){"use strict";n.d(e,"a",function(){return Ja}),n.d(e,"b",function(){return qa}),n.d(e,"c",function(){return A}),n.d(e,"d",function(){return cu}),n.d(e,"e",function(){return za}),n.d(e,"f",function(){return su}),n.d(e,"g",function(){return lu}),n.d(e,"h",function(){return mu}),n.d(e,"i",function(){return bu}),n.d(e,"j",function(){return iu}),n.d(e,"k",function(){return Eu}),n.d(e,"l",function(){return uu}),n.d(e,"m",function(){return yu}),n.d(e,"n",function(){return Au}),n.d(e,"o",function(){return ou}),n.d(e,"p",function(){return Cu}),n.d(e,"q",function(){return wu}),n.d(e,"r",function(){return vu}),n.d(e,"s",function(){return Ou}),n.d(e,"t",function(){return du});var r=n("mrSG"),i=n("qOnz"),o=n("q/0M"),s=n("x7I3"),a=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();a.o=-1;var c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.__extends)(e,t),e}(Error),l=new o.Logger("@firebase/firestore");function h(){return l.logLevel}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.DEBUG){var i=e.map(g);l.debug.apply(l,Object(r.__spreadArray)(["Firestore (8.10.0): "+t],i))}}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var i=e.map(g);l.error.apply(l,Object(r.__spreadArray)(["Firestore (8.10.0): "+t],i))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.WARN){var i=e.map(g);l.warn.apply(l,Object(r.__spreadArray)(["Firestore (8.10.0): "+t],i))}}function g(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function m(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw f(e),new Error(e)}function b(t,e){t||m()}function v(t,e){return t}function _(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var y=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=_(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function w(t,e){return t<e?-1:t>e?1:0}function k(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function C(t){return t+"\0"}var A=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new u(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new u(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new u(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new u(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?w(this.nanoseconds,t.nanoseconds):w(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),E=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new A(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function O(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function x(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function S(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var T=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&m(),void 0===n?n=t.length-e:n>t.length-e&&m(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new u(c.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(T),P=/^[_a-zA-Z][_a-zA-Z0-9]*$/,D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return P.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new u(c.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new u(c.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new u(c.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new u(c.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(T),N=function(){function t(t){this.fields=t,t.sort(D.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return k(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),R=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return w(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();R.EMPTY_BYTE_STRING=new R("");var j=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function M(t){if(b(!!t),"string"==typeof t){var e=0,n=j.exec(t);if(b(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:F(t.seconds),nanos:F(t.nanos)}}function F(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function L(t){return"string"==typeof t?R.fromBase64String(t):R.fromUint8Array(t)}function B(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function V(t){var e=t.mapValue.fields.__previous_value__;return B(e)?V(e):e}function U(t){var e=M(t.mapValue.fields.__local_write_time__.timestampValue);return new A(e.seconds,e.nanos)}function q(t){return null==t}function z(t){return 0===t&&1/t==-1/0}function K(t){return"number"==typeof t&&Number.isInteger(t)&&!z(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var H=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(I.fromString(e))},t.fromName=function(e){return new t(I.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===I.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return I.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new I(e.slice()))},t}();function W(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?B(t)?4:10:m()}function G(t,e){var n=W(t);if(n!==W(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return U(t).isEqual(U(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=M(t.timestampValue),r=M(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return L(t.bytesValue).isEqual(L(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return F(t.geoPointValue.latitude)===F(e.geoPointValue.latitude)&&F(t.geoPointValue.longitude)===F(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return F(t.integerValue)===F(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=F(t.doubleValue),r=F(e.doubleValue);return n===r?z(n)===z(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return k(t.arrayValue.values||[],e.arrayValue.values||[],G);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(O(n)!==O(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!G(n[i],r[i])))return!1;return!0}(t,e);default:return m()}}function $(t,e){return void 0!==(t.values||[]).find(function(t){return G(t,e)})}function Q(t,e){var n=W(t),r=W(e);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=F(t.integerValue||t.doubleValue),r=F(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Y(t.timestampValue,e.timestampValue);case 4:return Y(U(t),U(e));case 5:return w(t.stringValue,e.stringValue);case 6:return function(t,e){var n=L(t),r=L(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=w(F(t.latitude),F(e.latitude));return 0!==n?n:w(F(t.longitude),F(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Q(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=w(r[s],o[s]);if(0!==a)return a;var c=Q(n[r[s]],i[o[s]]);if(0!==c)return c}return w(r.length,o.length)}(t.mapValue,e.mapValue);default:throw m()}}function Y(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return w(t,e);var n=M(t),r=M(e),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function J(t){return X(t)}function X(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=M(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?L(t.bytesValue).toBase64():"referenceValue"in t?H.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=X(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+X(t.fields[o])}return e+"}"}(t.mapValue):m();var e}function Z(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function tt(t){return!!t&&"integerValue"in t}function et(t){return!!t&&"arrayValue"in t}function nt(t){return!!t&&"nullValue"in t}function rt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function it(t){return!!t&&"mapValue"in t}function ot(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return x(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=ot(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ot(t.arrayValue.values[r]);return n}return Object.assign({},t)}var st=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!it(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ot(e)},t.prototype.setAll=function(t){var e=this,n=D.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ot(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());it(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return G(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];it(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){x(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(ot(this.value))},t}();function at(t){var e=[];return x(t.fields,function(t,n){var r=new D([t]);if(it(n)){var i=at(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new N(e)}var ct=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,E.min(),st.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,st.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,st.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=st.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=st.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ut=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function lt(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ut(t,e,n,r,i,o,s)}function ht(t){var e=v(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+J(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),q(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=At(e.startAt)),e.endAt&&(n+="|ub:",n+=At(e.endAt)),e.h=n}return e.h}function dt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ot(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!G(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!St(t.startAt,e.startAt)&&St(t.endAt,e.endAt)}function ft(t){return H.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var pt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new gt(t,n,r):"array-contains"===n?new _t(t,r):"in"===n?new yt(t,r):"not-in"===n?new wt(t,r):"array-contains-any"===n?new kt(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new mt(t,n):new bt(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Q(e,this.value)):null!==e&&W(this.value)===W(e)&&this.m(Q(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return m()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),gt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=H.fromName(r.referenceValue),i}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=H.comparator(t.key,this.key);return this.m(e)},e}(pt),mt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=vt(0,n),r}return Object(r.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(pt),bt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=vt(0,n),r}return Object(r.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(pt);function vt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return H.fromName(t.referenceValue)})}var _t=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return et(e)&&$(e.arrayValue,this.value)},e}(pt),yt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&$(this.value.arrayValue,e)},e}(pt),wt=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){if($(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!$(this.value.arrayValue,e)},e}(pt),kt=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!et(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return $(e.value.arrayValue,t)})},e}(pt),Ct=function(t,e){this.position=t,this.before=e};function At(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return J(t)}).join(",")}var Et=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ot(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function xt(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?H.comparator(H.fromName(s.referenceValue),n.key):Q(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function St(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!G(t.position[n],e.position[n]))return!1;return!0}var Tt=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function It(t,e,n,r,i,o,s,a){return new Tt(t,e,n,r,i,o,s,a)}function Pt(t){return new Tt(t)}function Dt(t){return!q(t.limit)&&"F"===t.limitType}function Nt(t){return!q(t.limit)&&"L"===t.limitType}function Rt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function jt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Mt(t){return null!==t.collectionGroup}function Ft(t){var e=v(t);if(null===e.p){e.p=[];var n=jt(e),r=Rt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Et(n)),e.p.push(new Et(D.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Et(D.keyField(),c))}}}return e.p}function Lt(t){var e=v(t);if(!e.T)if("F"===e.limitType)e.T=lt(e.path,e.collectionGroup,Ft(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ft(e);r<i.length;r++){var o=i[r];n.push(new Et(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Ct(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ct(e.startAt.position,!e.startAt.before):null;e.T=lt(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Bt(t,e,n){return new Tt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vt(t,e){return dt(Lt(t),Lt(e))&&t.limitType===e.limitType}function Ut(t){return ht(Lt(t))+"|lt:"+t.limitType}function qt(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+J(e.value);var e}).join(", ")+"]"),q(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+At(t.startAt)),t.endAt&&(e+=", endAt: "+At(t.endAt)),"Target("+e+")"}(Lt(t))+"; limitType="+t.limitType+")"}function zt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):H.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!xt(t.startAt,Ft(t),e)||t.endAt&&xt(t.endAt,Ft(t),e))}(t,e)}function Kt(t){return function(e,n){for(var r=!1,i=0,o=Ft(t);i<o.length;i++){var s=o[i],a=Ht(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ht(t,e,n){var r=t.field.isKeyField()?H.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Q(r,i):m()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return m()}}function Wt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z(e)?"-0":e}}function Gt(t){return{integerValue:""+t}}function $t(t,e){return K(e)?Gt(e):Wt(t,e)}var Qt=function(){this._=void 0};function Yt(t,e,n){return t instanceof Zt?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof te?ee(t,e):t instanceof ne?re(t,e):function(t,e){var n=Xt(t,e),r=oe(n)+oe(t.A);return tt(n)&&tt(t.A)?Gt(r):Wt(t.R,r)}(t,e)}function Jt(t,e,n){return t instanceof te?ee(t,e):t instanceof ne?re(t,e):n}function Xt(t,e){return t instanceof ie?tt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e}(Qt),te=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.__extends)(e,t),e}(Qt);function ee(t,e){for(var n=se(e),r=function(t){n.some(function(e){return G(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ne=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.__extends)(e,t),e}(Qt);function re(t,e){for(var n=se(e),r=function(t){n=n.filter(function(e){return!G(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ie=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(r.__extends)(e,t),e}(Qt);function oe(t){return F(t.integerValue||t.doubleValue)}function se(t){return et(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ae=function(t,e){this.field=t,this.transform=e},ce=function(t,e){this.version=t,this.transformResults=e},ue=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function le(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var he=function(){};function de(t,e,n){t instanceof be?function(t,e,n){var r=t.value.clone(),i=ye(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ve?function(t,e,n){if(le(t.precondition,e)){var r=ye(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(_e(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function fe(t,e,n){t instanceof be?function(t,e,n){if(le(t.precondition,e)){var r=t.value.clone(),i=we(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(me(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ve?function(t,e,n){if(le(t.precondition,e)){var r=we(t.fieldTransforms,n,e),i=e.data;i.setAll(_e(t)),i.setAll(r),e.convertToFoundDocument(me(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){le(t.precondition,e)&&e.convertToNoDocument(E.min())}(t,e)}function pe(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Xt(o.transform,s||null);null!=a&&(null==n&&(n=st.empty()),n.set(o.field,a))}return n||null}function ge(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&k(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof te&&e instanceof te||t instanceof ne&&e instanceof ne?k(t.elements,e.elements,G):t instanceof ie&&e instanceof ie?G(t.A,e.A):t instanceof Zt&&e instanceof Zt}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function me(t){return t.isFoundDocument()?t.version:E.min()}var be=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(r.__extends)(e,t),e}(he),ve=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(r.__extends)(e,t),e}(he);function _e(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function ye(t,e,n){var r=new Map;b(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Jt(s,a,n[i]))}return r}function we(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,c=n.data.field(s.field);r.set(s.field,Yt(a,c,e))}return r}var ke,Ce,Ae=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(r.__extends)(e,t),e}(he),Ee=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(r.__extends)(e,t),e}(he),Oe=function(t){this.count=t};function xe(t){switch(t){case c.OK:return m();case c.CANCELLED:case c.UNKNOWN:case c.DEADLINE_EXCEEDED:case c.RESOURCE_EXHAUSTED:case c.INTERNAL:case c.UNAVAILABLE:case c.UNAUTHENTICATED:return!1;case c.INVALID_ARGUMENT:case c.NOT_FOUND:case c.ALREADY_EXISTS:case c.PERMISSION_DENIED:case c.FAILED_PRECONDITION:case c.ABORTED:case c.OUT_OF_RANGE:case c.UNIMPLEMENTED:case c.DATA_LOSS:return!0;default:return m()}}function Se(t){if(void 0===t)return f("GRPC error has no .code"),c.UNKNOWN;switch(t){case ke.OK:return c.OK;case ke.CANCELLED:return c.CANCELLED;case ke.UNKNOWN:return c.UNKNOWN;case ke.DEADLINE_EXCEEDED:return c.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return c.RESOURCE_EXHAUSTED;case ke.INTERNAL:return c.INTERNAL;case ke.UNAVAILABLE:return c.UNAVAILABLE;case ke.UNAUTHENTICATED:return c.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return c.INVALID_ARGUMENT;case ke.NOT_FOUND:return c.NOT_FOUND;case ke.ALREADY_EXISTS:return c.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return c.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return c.FAILED_PRECONDITION;case ke.ABORTED:return c.ABORTED;case ke.OUT_OF_RANGE:return c.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return c.UNIMPLEMENTED;case ke.DATA_LOSS:return c.DATA_LOSS;default:return m()}}(Ce=ke||(ke={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var Te=function(){function t(t,e){this.comparator=t,this.root=e||Pe.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pe.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pe.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ie(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ie(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ie(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ie(this.root,t,this.comparator,!0)},t}(),Ie=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Pe=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw m();if(this.right.isRed())throw m();var t=this.left.check();if(t!==this.right.check())throw m();return t+(this.isRed()?0:1)},t}();Pe.EMPTY=null,Pe.RED=!0,Pe.BLACK=!1,Pe.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw m()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pe(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var De=function(){function t(t){this.comparator=t,this.data=new Te(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ne(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ne(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ne=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Re=new Te(H.comparator);function je(){return Re}var Me=new Te(H.comparator);function Fe(){return Me}var Le=new Te(H.comparator);function Be(){return Le}var Ve=new De(H.comparator);function Ue(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ve,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var qe=new De(w);function ze(){return qe}var Ke=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,He.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(E.min(),r,ze(),je(),Ue())},t}(),He=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(R.EMPTY_BYTE_STRING,n,Ue(),Ue(),Ue())},t}(),We=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ge=function(t,e){this.targetId=t,this.V=e},$e=function(t,e,n,r){void 0===n&&(n=R.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Qe=function(){function t(){this.S=0,this.D=Xe(),this.C=R.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=Ue(),e=Ue(),n=Ue();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:m()}}),new He(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Xe()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Ye=function(){function t(t){this.W=t,this.G=new Map,this.H=je(),this.J=Je(),this.Y=new De(w)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:m()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ft(i))if(0===n){var o=new H(i.path);this.tt(e,o,ct.newNoDocument(o,E.min()))}else b(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&ft(o.target)){var s=new H(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ct.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Ue();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ke(t,n,this.Y,this.H,r);return this.H=je(),this.J=Je(),this.Y=new De(w),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Qe,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new De(w),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Qe),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Je(){return new Te(H.comparator)}function Xe(){return new Te(H.comparator)}var Ze={asc:"ASCENDING",desc:"DESCENDING"},tn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},en=function(t,e){this.databaseId=t,this.I=e};function nn(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function rn(t,e){return t.I?e.toBase64():e.toUint8Array()}function on(t,e){return nn(t,e.toTimestamp())}function sn(t){return b(!!t),E.fromTimestamp(function(t){var e=M(t);return new A(e.seconds,e.nanos)}(t))}function an(t,e){return function(t){return new I(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function cn(t){var e=I.fromString(t);return b(Dn(e)),e}function un(t,e){return an(t.databaseId,e.path)}function ln(t,e){var n=cn(e);if(n.get(1)!==t.databaseId.projectId)throw new u(c.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new u(c.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(pn(n))}function hn(t,e){return an(t.databaseId,e)}function dn(t){var e=cn(t);return 4===e.length?I.emptyPath():pn(e)}function fn(t){return new I(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pn(t){return b(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function gn(t,e,n){return{name:un(t,e),fields:n.value.mapValue.fields}}function mn(t,e,n){var r=ln(t,e.name),i=sn(e.updateTime),o=new st({mapValue:{fields:e.fields}}),s=ct.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function bn(t,e){var n;if(e instanceof be)n={update:gn(t,e.key,e.value)};else if(e instanceof Ae)n={delete:un(t,e.key)};else if(e instanceof ve)n={update:gn(t,e.key,e.data),updateMask:Pn(e.fieldMask)};else{if(!(e instanceof Ee))return m();n={verify:un(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Zt)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof te)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ne)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ie)return{fieldPath:e.field.canonicalString(),increment:n.A};throw m()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:on(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:m()}(t,e.precondition)),n}function vn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ue.updateTime(sn(t.updateTime)):void 0!==t.exists?ue.exists(t.exists):ue.none()}(e.currentDocument):ue.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(b("REQUEST_TIME"===e.setToServerValue),n=new Zt):"appendMissingElements"in e?n=new te(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ne(e.removeAllFromArray.values||[]):"increment"in e?n=new ie(t,e.increment):m();var r=D.fromServerFormat(e.fieldPath);return new ae(r,n)}(t,e)}):[];if(e.update){var i=ln(t,e.update.name),o=new st({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new N((t.fieldPaths||[]).map(function(t){return D.fromServerFormat(t)}))}(e.updateMask);return new ve(i,o,s,n,r)}return new be(i,o,n,r)}if(e.delete){var a=ln(t,e.delete);return new Ae(a,n)}if(e.verify){var c=ln(t,e.verify);return new Ee(c,n)}return m()}function _n(t,e){return{documents:[hn(t,e.path)]}}function yn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hn(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(rt(t.value))return{unaryFilter:{field:xn(t.field),op:"IS_NAN"}};if(nt(t.value))return{unaryFilter:{field:xn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(rt(t.value))return{unaryFilter:{field:xn(t.field),op:"IS_NOT_NAN"}};if(nt(t.value))return{unaryFilter:{field:xn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xn(t.field),op:On(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:xn(t.field),direction:En(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||q(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Cn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Cn(e.endAt)),n}function wn(t){var e=dn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=kn(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Et(Sn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var c=null;n.limit&&(c=function(t){var e;return q(e="object"==typeof t?t.value:t)?null:e}(n.limit));var u=null;n.startAt&&(u=An(n.startAt));var l=null;return n.endAt&&(l=An(n.endAt)),It(e,i,a,s,c,"F",u,l)}function kn(t){return t?void 0!==t.unaryFilter?[In(t)]:void 0!==t.fieldFilter?[Tn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return kn(t)}).reduce(function(t,e){return t.concat(e)}):m():[]}function Cn(t){return{before:t.before,values:t.position}}function An(t){return new Ct(t.values||[],!!t.before)}function En(t){return Ze[t]}function On(t){return tn[t]}function xn(t){return{fieldPath:t.canonicalString()}}function Sn(t){return D.fromServerFormat(t.fieldPath)}function Tn(t){return pt.create(Sn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return m()}}(t.fieldFilter.op),t.fieldFilter.value)}function In(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Sn(t.unaryFilter.field);return pt.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Sn(t.unaryFilter.field);return pt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Sn(t.unaryFilter.field);return pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Sn(t.unaryFilter.field);return pt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return m()}}function Pn(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Dn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Nn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=jn(e)),e=Rn(t.get(n),e);return jn(e)}function Rn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function jn(t){return t+"\x01\x01"}function Mn(t){var e=t.length;if(b(e>=2),2===e)return b("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),I.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&m(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),c=void 0;0===i.length?c=a:(c=i+=a,i=""),r.push(c);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:m()}o=s+2}return new I(r)}var Fn=function(t,e){this.seconds=t,this.nanoseconds=e},Ln=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ln.store="owner",Ln.key="owner";var Bn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Bn.store="mutationQueues",Bn.keyPath="userId";var Vn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Vn.store="mutations",Vn.keyPath="batchId",Vn.userMutationsIndex="userMutationsIndex",Vn.userMutationsKeyPath=["userId","batchId"];var Un=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Nn(e)]},t.key=function(t,e,n){return[t,Nn(e),n]},t}();Un.store="documentMutations",Un.PLACEHOLDER=new Un;var qn=function(t,e){this.path=t,this.readTime=e},zn=function(t,e){this.path=t,this.version=e},Kn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Kn.store="remoteDocuments",Kn.readTimeIndex="readTimeIndex",Kn.readTimeIndexPath="readTime",Kn.collectionReadTimeIndex="collectionReadTimeIndex",Kn.collectionReadTimeIndexPath=["parentPath","readTime"];var Hn=function(t){this.byteSize=t};Hn.store="remoteDocumentGlobal",Hn.key="remoteDocumentGlobalKey";var Wn=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Wn.store="targets",Wn.keyPath="targetId",Wn.queryTargetsIndexName="queryTargetsIndex",Wn.queryTargetsKeyPath=["canonicalId","targetId"];var Gn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Gn.store="targetDocuments",Gn.keyPath=["targetId","path"],Gn.documentTargetsIndex="documentTargetsIndex",Gn.documentTargetsKeyPath=["path","targetId"];var $n=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};$n.key="targetGlobalKey",$n.store="targetGlobal";var Qn=function(t,e){this.collectionId=t,this.parent=e};Qn.store="collectionParents",Qn.keyPath=["collectionId","parent"];var Yn=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Yn.store="clientMetadata",Yn.keyPath="clientId";var Jn=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Jn.store="bundles",Jn.keyPath="bundleId";var Xn=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Xn.store="namedQueries",Xn.keyPath="name";var Zn=Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__spreadArray)(Object(r.__spreadArray)([],[Bn.store,Vn.store,Un.store,Kn.store,Wn.store,Ln.store,$n.store,Gn.store]),[Yn.store])),[Hn.store])),[Qn.store])),[Jn.store,Xn.store]),tr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",er=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),nr=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},rr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&m(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),ir=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ar(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=dr(e.target.error);n.ft.reject(new ar(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ar(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ur(e)},t}(),or=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(i.getUA)())&&f("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return d("SimpleDb","Removing database:",t),lr(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(i.getUA)(),n=t._t(e),r=0<n&&n<10,o=t.Et(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(d("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new ar(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new u(c.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new ar(t,n))},i.onupgradeneeded=function(t){d("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){d("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return Object(r.__awaiter)(this,void 0,void 0,function(){var o,s,a,c,u;return Object(r.__generator)(this,function(l){switch(l.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,u,l,h;return Object(r.__generator)(this,function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,c.At(t)];case 2:return c.db=r.sent(),e=ir.open(c.db,t,o?"readonly":"readwrite",n),a=i(e).catch(function(t){return e.abort(t),rr.reject(t)}).toPromise(),u={},a.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(r.sent(),a),u)];case 4:return d("SimpleDb","Transaction failed with error:",(l=r.sent()).message,"Retrying:",h="FirebaseError"!==l.name&&s<3),c.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}})},c=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),sr=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return lr(this.Pt.delete())},t}(),ar=function(t){function e(e,n){var r=this;return(r=t.call(this,c.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.__extends)(e,t),e}(u);function cr(t){return"IndexedDbTransactionError"===t.name}var ur=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),lr(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),lr(this.store.add(t))},t.prototype.get=function(t){var e=this;return lr(this.store.get(t)).next(function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),lr(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),lr(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.kt=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new rr(function(n,r){e.onerror=function(t){var e=dr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new rr(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sr(i),s=e(i.primaryKey,i.value,o);if(s instanceof rr){var a=s.catch(function(t){return o.done(),rr.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return rr.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function lr(t){return new rr(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=dr(t.target.error);n(e)}})}var hr=!1;function dr(t){var e=or._t(Object(i.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new u("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hr||(hr=!0,setTimeout(function(){throw r},0)),r}}return t}var fr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(r.__extends)(e,t),e}(er);function pr(t,e){var n=v(t);return or.It(n.Mt,e)}var gr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&de(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&fe(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&fe(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(E.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ue())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&k(this.mutations,t.mutations,function(t,e){return ge(t,e)})&&k(this.baseMutations,t.baseMutations,function(t,e){return ge(t,e)})},t}(),mr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){b(e.mutations.length===r.length);for(var i=Be(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),br=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=E.min()),void 0===o&&(o=E.min()),void 0===s&&(s=R.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),vr=function(t){this.Lt=t};function _r(t,e){if(e.document)return mn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=H.fromSegments(e.noDocument.path),r=Ar(e.noDocument.readTime),i=ct.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=H.fromSegments(e.unknownDocument.path);return r=Ar(e.unknownDocument.version),ct.newUnknownDocument(o,r)}return m()}function yr(t,e,n){var r=wr(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:un(t,e.key),fields:e.data.value.mapValue.fields,updateTime:nn(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Kn(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),c=Cr(e.version);return s=e.hasCommittedMutations,new Kn(null,new qn(a,c),null,s,r,i)}if(e.isUnknownDocument()){var u=e.key.path.toArray(),l=Cr(e.version);return new Kn(new zn(u,l),null,null,!0,r,i)}return m()}function wr(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function kr(t){var e=new A(t[0],t[1]);return E.fromTimestamp(e)}function Cr(t){var e=t.toTimestamp();return new Fn(e.seconds,e.nanoseconds)}function Ar(t){var e=new A(t.seconds,t.nanoseconds);return E.fromTimestamp(e)}function Er(t,e){for(var n=(e.baseMutations||[]).map(function(e){return vn(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return vn(t.Lt,e)}),o=A.fromMillis(e.localWriteTimeMs);return new gr(e.batchId,o,n,i)}function Or(t){var e,n,r=Ar(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ar(t.lastLimboFreeSnapshotVersion):E.min();return void 0!==t.query.documents?(b(1===(n=t.query).documents.length),e=Lt(Pt(dn(n.documents[0])))):e=function(t){return Lt(wn(t))}(t.query),new br(e,t.targetId,0,t.lastListenSequenceNumber,r,i,R.fromBase64String(t.resumeToken))}function xr(t,e){var n,r=Cr(e.snapshotVersion),i=Cr(e.lastLimboFreeSnapshotVersion);n=ft(e.target)?_n(t.Lt,e.target):yn(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Wn(e.targetId,ht(e.target),r,o,e.sequenceNumber,i,n)}function Sr(t){var e=wn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Bt(e,e.limit,"L"):e}var Tr=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ir(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Ar(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Ir(t).put({bundleId:(n=e).id,createTime:Cr(sn(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Pr(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Sr(e.bundledQuery),readTime:Ar(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Pr(t).put(function(t){return{name:t.name,readTime:Cr(sn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ir(t){return pr(t,Jn.store)}function Pr(t){return pr(t,Xn.store)}var Dr=function(){function t(){this.Bt=new Nr}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),rr.resolve()},t.prototype.getCollectionParents=function(t,e){return rr.resolve(this.Bt.getEntries(e))},t}(),Nr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new De(I.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new De(I.comparator)).toArray()},t}(),Rr=function(){function t(){this.qt=new Nr}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Nn(i)};return jr(t).put(o)}return rr.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[C(e),""],!1,!0);return jr(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Mn(o.parent))}return n})},t}();function jr(t){return pr(t,Qn.store)}var Mr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Lr(t,e,n){var r=t.store(Vn.store),i=t.store(Un.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(c.next(function(){b(1===a)}));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Un.key(e,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return rr.waitFor(o).next(function(){return u})}function Br(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m();e=t.noDocument}return JSON.stringify(e).length}Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);var Vr=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return b(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qr(t).$t({index:Vn.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=zr(t),s=qr(t);return s.add({}).next(function(a){b("number"==typeof a);for(var c=new gr(a,e,n,r),u=function(t,e,n){var r=n.baseMutations.map(function(e){return bn(t.Lt,e)}),i=n.mutations.map(function(e){return bn(t.Lt,e)});return new Vn(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,c),l=[],h=new De(function(t,e){return w(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Un.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(u)),l.push(o.put(g,Un.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=c.keys()}),rr.waitFor(l).next(function(){return c})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return qr(t).get(e).next(function(t){return t?(b(t.userId===n.userId),Er(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?rr.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return qr(t).$t({index:Vn.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(b(e.batchId>=r),o=Er(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return qr(t).$t({index:Vn.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qr(t).Nt(Vn.userMutationsIndex,n).next(function(t){return t.map(function(t){return Er(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Un.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return zr(t).$t({range:i},function(r,i,s){var a=r[0],c=r[2],u=Mn(r[1]);if(a===n.userId&&e.path.isEqual(u))return qr(t).get(c).next(function(t){if(!t)throw m();b(t.userId===n.userId),o.push(Er(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new De(w),i=[];return e.forEach(function(e){var o=Un.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=zr(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],c=Mn(t[1]);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()});i.push(a)}),rr.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Un.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new De(w);return zr(t).$t({range:s},function(t,e,o){var s=t[0],c=t[2],u=Mn(t[1]);s===n.userId&&r.isPrefixOf(u)?u.length===i&&(a=a.add(c)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(qr(t).get(e).next(function(t){if(null===t)throw m();b(t.userId===n.userId),r.push(Er(n.R,t))}))}),rr.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Lr(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),rr.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(Un.prefixForUser(e.userId)),i=[];return zr(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=Mn(t[1]);i.push(o)}else r.done()}).next(function(){b(0===i.length)})})},t.prototype.containsKey=function(t,e){return Ur(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Kr(t).get(this.userId).next(function(t){return t||new Bn(e.userId,-1,"")})},t}();function Ur(t,e,n){var r=Un.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return zr(t).$t({range:o,Ft:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function qr(t){return pr(t,Vn.store)}function zr(t){return pr(t,Un.store)}function Kr(t){return pr(t,Bn.store)}var Hr=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Wr=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Hr(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return E.fromTimestamp(new A(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Gr(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return b(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Gr(t).$t(function(s,a){var c=Or(a);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,o.push(r.removeTargetData(t,c)))}).next(function(){return rr.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Gr(t).$t(function(t,n){var r=Or(n);e(r)})},t.prototype.Xt=function(t){return $r(t).get($n.key).next(function(t){return b(null!==t),t})},t.prototype.Zt=function(t,e){return $r(t).put($n.key,e)},t.prototype.te=function(t,e){return Gr(t).put(xr(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ht(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Gr(t).$t({range:r,index:Wn.queryTargetsIndexName},function(t,n,r){var o=Or(n);dt(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Qr(t);return e.forEach(function(e){var s=Nn(e.path);i.push(o.put(new Gn(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),rr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Qr(t);return rr.forEach(e,function(e){var o=Nn(e.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Qr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Qr(t),i=Ue();return r.$t({range:n,Ft:!0},function(t,e,n){var r=Mn(t[1]),o=new H(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Nn(e.path),r=IDBKeyRange.bound([n],[C(n)],!1,!0),i=0;return Qr(t).$t({index:Gn.documentTargetsIndex,Ft:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Gr(t).get(e).next(function(t){return t?Or(t):null})},t}();function Gr(t){return pr(t,Wn.store)}function $r(t){return pr(t,$n.store)}function Qr(t){return pr(t,Gn.store)}function Yr(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){if(t.code!==c.FAILED_PRECONDITION||t.message!==tr)throw t;return d("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Jr(t,e){var n=t[1],r=e[1],i=w(t[0],e[0]);return 0===i?w(n,r):i}var Xr=function(){function t(t){this.ne=t,this.buffer=new De(Jr),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Jr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Zr=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(r.__awaiter)(e,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return cr(e=n.sent())?(d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Yr(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),ti=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return rr.resolve(a.o);var r=new Xr(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Mr)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Mr):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,a,c,u,l=this,f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>l.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),l.nthSequenceNumber(t,r)}).next(function(r){return n=r,a=Date.now(),l.removeTargets(t,n,e)}).next(function(e){return i=e,c=Date.now(),l.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),h()<=o.LogLevel.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(c-a)+"ms\n\tRemoved "+t+" documents in "+(u-c)+"ms\nTotal Duration: "+(u-f)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),ei=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ti(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return ni(t,n)},t.prototype.removeReference=function(t,e,n){return ni(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ni(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Kr(t).Ot(function(r){return Ur(t,r,e).next(function(t){return t&&(n=!0),rr.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var c=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Qr(t).delete([0,Nn(s.path)])})});i.push(c)}}).next(function(){return rr.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ni(t,e)},t.prototype.we=function(t,e){var n,r=Qr(t),i=a.o;return r.$t({index:Gn.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==a.o&&e(new H(Mn(n)),i),i=s,n=o):i=a.o}).next(function(){i!==a.o&&e(new H(Mn(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ni(t,e){return Qr(t).put(function(t,e){return new Gn(0,Nn(t.path),e)}(e,t.currentSequenceNumber))}var ri=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){x(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return S(this.inner)},t}(),ii=function(){function t(){this.changes=new ri(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:E.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ct.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?rr.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),oi=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ci(t).put(ui(e),n)},t.prototype.removeEntry=function(t,e){var n=ci(t),r=ui(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return ci(t).get(ui(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return ci(t).get(ui(e)).next(function(t){return{document:n.ye(e,t),size:Br(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=je();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=je(),i=new Te(H.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Br(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ci(t).$t({range:r},function(t,e,r){for(var s=H.fromSegments(t);o&&H.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=je(),o=e.path.length+1,s={};if(n.isEqual(E.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var c=e.path.toArray(),u=wr(n);s.range=IDBKeyRange.lowerBound([c,u],!0),s.index=Kn.collectionReadTimeIndex}return ci(t).$t(s,function(t,n,s){if(t.length===o){var a=_r(r.R,n);e.path.isPrefixOf(a.key.path)?zt(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new si(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ai(t).get(Hn.key).next(function(t){return b(!!t),t})},t.prototype.me=function(t,e){return ai(t).put(Hn.key,e)},t.prototype.ye=function(t,e){if(e){var n=_r(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(E.min()))return n}return ct.newInvalidDocument(t)},t}(),si=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ri(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(r.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new De(function(t,e){return w(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var c=yr(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var u=Br(c);r+=u-a,n.push(e.Ie.addEntry(t,o,c))}else if(r-=a,e.trackRemovals){var l=yr(e.Ie.R,ct.newNoDocument(o,E.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(ii);function ai(t){return pr(t,Hn.store)}function ci(t){return pr(t,Kn.store)}function ui(t){return t.path.toArray()}var li=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;b(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ln.store)}(t),function(t){t.createObjectStore(Bn.store,{keyPath:Bn.keyPath}),t.createObjectStore(Vn.store,{keyPath:Vn.keyPath,autoIncrement:!0}).createIndex(Vn.userMutationsIndex,Vn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Un.store)}(t),hi(t),function(t){t.createObjectStore(Kn.store)}(t));var s=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Gn.store),t.deleteObjectStore(Wn.store),t.deleteObjectStore($n.store)}(t),hi(t)),s=s.next(function(){return function(t){var e=t.store($n.store),n=new $n(0,0,E.min().toTimestamp(),0);return e.put($n.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Vn.store).Nt().next(function(n){t.deleteObjectStore(Vn.store),t.createObjectStore(Vn.store,{keyPath:Vn.keyPath,autoIncrement:!0}).createIndex(Vn.userMutationsIndex,Vn.userMutationsKeyPath,{unique:!0});var r=e.store(Vn.store),i=n.map(function(t){return r.put(t)});return rr.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Hn.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Kn.store);e.createIndex(Kn.readTimeIndex,Kn.readTimeIndexPath,{unique:!1}),e.createIndex(Kn.collectionReadTimeIndex,Kn.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(t),function(t){t.createObjectStore(Xn.store,{keyPath:Xn.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Kn.store).$t(function(t,n){e+=Br(n)}).next(function(){var n=new Hn(e);return t.store(Hn.store).put(Hn.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Bn.store),r=t.store(Vn.store);return n.Nt().next(function(n){return rr.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Vn.userMutationsIndex,i).next(function(r){return rr.forEach(r,function(r){b(r.userId===n.userId);var i=Er(e.R,r);return Lr(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Gn.store),n=t.store(Kn.store);return t.store($n.store).get($n.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new I(n),s=function(t){return[0,Nn(t)]}(o);r.push(e.get(s).next(function(n){return n?rr.resolve():function(n){return e.put(new Gn(0,Nn(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return rr.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Qn.store,{keyPath:Qn.keyPath});var n=e.store(Qn.store),r=new Nr,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Nn(i)})}};return e.store(Kn.store).$t({Ft:!0},function(t,e){var n=new I(t);return i(n.popLast())}).next(function(){return e.store(Un.store).$t({Ft:!0},function(t,e){var n=Mn(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Wn.store);return n.$t(function(t,r){var i=Or(r),o=xr(e.R,i);return n.put(o)})},t}();function hi(t){t.createObjectStore(Gn.store,{keyPath:Gn.keyPath}).createIndex(Gn.documentTargetsIndex,Gn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Wn.store,{keyPath:Wn.keyPath}).createIndex(Wn.queryTargetsIndexName,Wn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore($n.store)}var di="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fi=function(){function t(e,n,r,i,o,s,a,l,h,d){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=h,this.Ce=d,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new u(c.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ei(this,i),this.Le=n+"main",this.R=new vr(l),this.Be=new or(this.Le,11,new li(this.R)),this.qe=new Wr(this.referenceDelegate,this.R),this.Ut=new Rr,this.Ue=function(t,e){return new oi(t,e)}(this.R,this.Ut),this.Ke=new Tr,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===d&&f("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new u(c.FAILED_PRECONDITION,di);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new a(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(r.__awaiter)(e,void 0,void 0,function(){return Object(r.__generator)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(r.__awaiter)(e,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(r.__awaiter)(e,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return gi(e).put(new Yn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(cr(e))return d("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return pi(t).get(Ln.key).next(function(t){return rr.resolve(e.tn(t))})},t.prototype.en=function(t){return gi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e,n,i=this;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=pr(t,Yn.store);return e.Nt().next(function(t){var n=i.rn(t,18e5),r=t.filter(function(t){return-1===n.indexOf(t)});return rr.forEach(r,function(t){return e.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(t=r.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));r.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?rr.resolve(!0):pi(t).get(Ln.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new u(c.FAILED_PRECONDITION,di);return!1}}return!(!e.networkEnabled||!e.inForeground)||gi(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t=this;return Object(r.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ln.store,Yn.store],function(e){var n=new fr(e,a.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return gi(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Vr.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return d("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Zn,function(o){return r=new fr(o,i.Ne?i.Ne.next():a.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw f("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new u(c.FAILED_PRECONDITION,tr);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return pi(t).get(Ln.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new u(c.FAILED_PRECONDITION,di)})},t.prototype.Ze=function(t){var e=new Ln(this.clientId,this.allowTabSynchronization,Date.now());return pi(t).put(Ln.key,e)},t.yt=function(){return or.yt()},t.prototype.Xe=function(t){var e=this,n=pi(t);return n.get(Ln.key).next(function(t){return e.tn(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(Ln.key)):rr.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(f("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),Object(i.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return d("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return f("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){f("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function pi(t){return pr(t,Ln.store)}function gi(t){return pr(t,Yn.store)}function mi(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bi=function(t,e){this.progress=t,this.wn=e},vi=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return H.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Mt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new H(e)).next(function(t){var e=Fe();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Fe();return this.Ut.getCollectionParents(t,i).next(function(s){return rr.forEach(s,function(s){var a=function(t,e){return new Tt(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var c=a[s],u=c.key,l=r.get(u);null==l&&(l=ct.newInvalidDocument(u),r=r.insert(u,l)),fe(c,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(u))}})}).next(function(){return r.forEach(function(t,n){zt(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Ue(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var c=a[s];c instanceof ve&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(u=u.insert(t,e))}),u})},t}(),_i=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ue(),i=Ue(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),yi=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(E.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var a=i.Cn(e,s);return(Dt(e)||Nt(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(h()<=o.LogLevel.DEBUG&&d("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qt(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return a.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new De(Kt(t));return e.forEach(function(e,r){zt(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return h()<=o.LogLevel.DEBUG&&d("QueryEngine","Using full collection scan to execute query:",qt(e)),this.Sn.getDocumentsMatchingQuery(t,e,E.min())},t}(),wi=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Te(w),this.Fn=new ri(function(t){return ht(t)},dt),this.$n=E.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new vi(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.kn)})},t}();function ki(t,e,n,r){return new wi(t,e,n,r)}function Ci(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=v(t),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var r;return n._n.getAllMutationBatches(t).next(function(s){return r=s,i=n.persistence.getMutationQueue(e),o=new vi(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)}).next(function(e){for(var n=[],i=[],s=Ue(),a=0,c=r;a<c.length;a++){var u=c[a];n.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];i.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return o.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:i}})})})];case 1:return s=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),s)]}})})}function Ai(t,e){var n=v(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=rr.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);b(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Ei(t){var e=v(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Oi(t,e){var n=v(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var c=e.resumeToken;if(c.approximateByteSize()>0){var u=a.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,u),function(t,e,n){return b(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,e)&&s.push(n.qe.updateTargetData(t,u))}}});var a=je();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(xi(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(E.min())){var c=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(c)}return rr.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.kn=i,t})}function xi(t,e,n,r,i){var o=Ue();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=je();return n.forEach(function(n,s){var a=t.get(n),c=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(E.min())?(e.removeEntry(n,c),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,c),o=o.insert(n,s)):d("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Si(t,e){var n=v(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Ti(t,e){var n=v(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?rr.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new br(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t})}function Ii(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s,a;return Object(r.__generator)(this,function(r){switch(r.label){case 0:i=v(t),o=i.kn.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,function(t){return i.persistence.referenceDelegate.removeTarget(t,o)})];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!cr(a=r.sent()))throw a;return d("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.kn=i.kn.remove(e),i.Fn.delete(o.target),[2]}})})}function Pi(t,e,n){var r=v(t),i=E.min(),o=Ue();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=v(t),i=r.Fn.get(n);return void 0!==i?rr.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Lt(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:E.min(),n?o:Ue())}).next(function(t){return{documents:t,Bn:o}})})}function Di(t,e){var n=v(t),r=v(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Ni(t){var e=v(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=v(t),i=je(),o=wr(n),s=ci(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Kn.readTimeIndex,range:a},function(t,e){var n=_r(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:kr(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Ri(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){return[2,(e=v(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=ci(t),n=E.min();return e.$t({index:Kn.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=kr(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function ji(t,e,n,i){return Object(r.__awaiter)(this,void 0,void 0,function(){var o,s,a,c,u,l,h,d,f,p;return Object(r.__generator)(this,function(r){switch(r.label){case 0:for(o=v(t),s=Ue(),a=je(),c=Be(),u=0,l=n;u<l.length;u++)d=e.qn((h=l[u]).metadata.name),h.document&&(s=s.add(d)),a=a.insert(d,e.Un(h)),c=c.insert(d,e.Kn(h.metadata.readTime));return f=o.On.newChangeBuffer({trackRemovals:!0}),[4,Ti(o,function(t){return Lt(Pt(I.fromString("__bundle__/docs/"+t)))}(i))];case 1:return p=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return xi(t,f,a,E.min(),c).next(function(e){return f.apply(t),e}).next(function(e){return o.qe.removeMatchingKeysForTargetId(t,p.targetId).next(function(){return o.qe.addMatchingKeys(t,s,p.targetId)}).next(function(){return o.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Mi(t,e,n){return void 0===n&&(n=Ue()),Object(r.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,Ti(t,Lt(Sr(e.bundledQuery)))];case 1:return i=r.sent(),[2,(o=v(t)).persistence.runTransaction("Save named query","readwrite",function(t){var r=sn(e.readTime);if(i.snapshotVersion.compareTo(r)>=0)return o.Ke.saveNamedQuery(t,e);var s=i.withResumeToken(R.EMPTY_BYTE_STRING,r);return o.kn=o.kn.insert(s.targetId,s),o.qe.updateTargetData(t,s).next(function(){return o.qe.removeMatchingKeysForTargetId(t,i.targetId)}).next(function(){return o.qe.addMatchingKeys(t,n,i.targetId)}).next(function(){return o.Ke.saveNamedQuery(t,e)})})]}})})}var Fi=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return rr.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:sn(n.createTime)}),rr.resolve()},t.prototype.getNamedQuery=function(t,e){return rr.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Sr(t.bundledQuery),readTime:sn(t.readTime)}}(e)),rr.resolve()},t}(),Li=function(){function t(){this.Wn=new De(Bi.Gn),this.zn=new De(Bi.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Bi(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Bi(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new H(new I([])),r=new Bi(n,t),i=new Bi(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new H(new I([])),n=new Bi(e,t),r=new Bi(e,t+1),i=Ue();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Bi(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Bi=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return H.comparator(t.key,e.key)||w(t.ns,e.ns)},t.Hn=function(t,e){return w(t.ns,e.ns)||H.comparator(t.key,e.key)},t}(),Vi=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new De(Bi.Gn)}return t.prototype.checkEmpty=function(t){return rr.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new gr(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var c=a[s];this.rs=this.rs.add(new Bi(c.key,i)),this.Ut.addToCollectionParentIndex(t,c.key.path.popLast())}return rr.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return rr.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return rr.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return rr.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return rr.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Bi(e,0),i=new Bi(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),rr.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new De(w);return e.forEach(function(t){var e=new Bi(t,0),i=new Bi(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),rr.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;H.isDocumentKey(i)||(i=i.child(""));var o=new Bi(new H(i),0),s=new De(w);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),rr.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;b(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return rr.forEach(e.mutations,function(i){var o=new Bi(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Bi(e,0),r=this.rs.firstAfterOrEqual(n);return rr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return rr.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Ui=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Te(H.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return rr.resolve(n?n.document.clone():ct.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=je();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ct.newInvalidDocument(t))}),rr.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=je(),i=new H(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,c=a.document,u=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;u.compareTo(n)<=0||zt(e,c)&&(r=r.insert(c.key,c.clone()))}return rr.resolve(r)},t.prototype.fs=function(t,e){return rr.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new qi(this)},t.prototype.getSize=function(t){return rr.resolve(this.size)},t}(),qi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(r.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ii),zi=function(){function t(t){this.persistence=t,this.ds=new ri(function(t){return ht(t)},dt),this.lastRemoteSnapshotVersion=E.min(),this.highestTargetId=0,this.ws=0,this._s=new Li,this.targetCount=0,this.ys=Hr.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),rr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return rr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return rr.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),rr.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),rr.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Hr(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,rr.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),rr.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,rr.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),rr.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return rr.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return rr.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),rr.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),rr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),rr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return rr.resolve(n)},t.prototype.containsKey=function(t,e){return rr.resolve(this._s.containsKey(e))},t}(),Ki=function(){function t(t,e){var n=this;this.gs={},this.Ne=new a(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new zi(this),this.Ut=new Dr,this.Ue=function(t,e){return new Ui(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new vr(e),this.Ke=new Fi(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Vi(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new Hi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return rr.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(r.__extends)(e,t),e}(er),Wi=function(){function t(t){this.persistence=t,this.As=new Li,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw m()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),rr.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),rr.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),rr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.vs,function(r){var i=H.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return rr.or([function(){return rr.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Gi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function $i(t,e){return"firestore_clients_"+t+"_"+e}function Qi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Yi(t,e){return"firestore_targets_"+t+"_"+e}Gi.UNAUTHENTICATED=new Gi(null),Gi.GOOGLE_CREDENTIALS=new Gi("google-credentials-uid"),Gi.FIRST_PARTY=new Gi("first-party-uid"),Gi.MOCK_USER=new Gi("mock-user");var Ji=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new u(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(f("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Xi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new u(i.error.code,i.error.message)),o?new t(e,i.state,r):(f("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Zi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ze(),s=0;i&&s<r.activeTargetIds.length;++s)i=K(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(f("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),to=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(f("SharedClientState","Failed to parse online state: "+e),null)},t}(),eo=function(){function t(){this.activeTargetIds=ze()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),no=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Te(w),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=$i(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new eo),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e,n,i,o,s,a,c,u,l,h=this;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Ns&&(o=this.getItem($i(this.persistenceKey,i)))&&(s=Zi.Vs(i,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(c=this.js(a))&&this.Ws(c),u=0,l=this.$s;u<l.length;u++)this.ks(l[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Yi(this.persistenceKey,t));if(n){var r=Xi.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Yi(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(d("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void f("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(r.__awaiter)(e,void 0,void 0,function(){var t,e,i,o,s,c;return Object(r.__generator)(this,function(r){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(i=this.si(n.key,n.newValue)))return[2,this.ii(i)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(c=function(t){var e=a.o;if(null!=t)try{var n=JSON.parse(t);b("number"==typeof n),e=n}catch(t){f("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==a.o&&this.sequenceNumberHandler(c);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ji(this.currentUser,t,e,n),i=Qi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Qi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Yi(this.persistenceKey,t),i=new Xi(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Zi.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Ji.Vs(new Gi(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Xi.Vs(r,e)},t.prototype.js=function(t){return to.Vs(t)},t.prototype.ii=function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(d("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.Fs=r})},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ze();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),ro=function(){function t(){this.li=new eo,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new eo,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),io=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),oo=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),so={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ao=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),co=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(r.__extends)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise(function(i,o){var a=new s.g;a.listenOnce(s.c.COMPLETE,function(){try{switch(a.getLastErrorCode()){case s.a.NO_ERROR:var e=a.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s.a.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),o(new u(c.DEADLINE_EXCEEDED,"Request time out"));break;case s.a.HTTP_ERROR:var n=a.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var l=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(c).indexOf(e)>=0?e:c.UNKNOWN}(r.status);o(new u(l,r.message))}else o(new u(c.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new u(c.UNAVAILABLE,"Connection failed."));break;default:m()}}finally{d("Connection",'RPC "'+t+'" completed.')}});var l=JSON.stringify(r);a.send(e,"POST",l,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(s.h)(),o=Object(s.i)(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new s.d({})),this.ki(a.initMessageHeaders,e),Object(i.isMobileCordova)()||Object(i.isReactNative)()||Object(i.isElectron)()||Object(i.isIE)()||Object(i.isUWP)()||Object(i.isBrowserExtension)()||(a.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");d("Connection","Creating WebChannel: "+l,a);var h=r.createWebChannel(l,a),f=!1,g=!1,m=new ao({Ei:function(t){g?d("Connection","Not sending because WebChannel is closed:",t):(f||(d("Connection","Opening WebChannel transport."),h.open(),f=!0),d("Connection","WebChannel sending:",t),h.send(t))},Ti:function(){return h.close()}}),v=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return v(h,s.f.EventType.OPEN,function(){g||d("Connection","WebChannel transport opened.")}),v(h,s.f.EventType.CLOSE,function(){g||(g=!0,d("Connection","WebChannel transport closed"),m.Vi())}),v(h,s.f.EventType.ERROR,function(t){g||(g=!0,p("Connection","WebChannel transport errored:",t),m.Vi(new u(c.UNAVAILABLE,"The operation could not be completed")))}),v(h,s.f.EventType.MESSAGE,function(t){var e;if(!g){var n=t.data[0];b(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){d("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=ke[t];if(void 0!==e)return Se(e)}(i),s=r.message;void 0===o&&(o=c.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),g=!0,m.Vi(new u(o,s)),h.close()}else d("Connection","WebChannel received:",n),m.Si(n)}}),v(o,s.b.STAT_EVENT,function(t){t.stat===s.e.PROXY?d("Connection","Detected buffering proxy"):t.stat===s.e.NOPROXY&&d("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Pi()},0),m},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);d("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then(function(t){return d("RestConnection","Received: ",t),t},function(e){throw p("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+so[t]},t}());function uo(){return"undefined"!=typeof window?window:null}function lo(){return"undefined"!=typeof document?document:null}function ho(t){return new en(t,!0)}var fo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),po=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fo(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===c.RESOURCE_EXHAUSTED?(f(e.toString()),f("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===c.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new u(c.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(r.__awaiter)(t,void 0,void 0,function(){return Object(r.__generator)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),go=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(r.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:m()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(b(void 0===e||"string"==typeof e),R.fromBase64String(e||"")):(b(void 0===e||e instanceof Uint8Array),R.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?c.UNKNOWN:Se(t.code);return new u(e,t.message||"")}(a);n=new $e(r,i,o,s||null)}else if("documentChange"in e){i=ln(t,(r=e.documentChange).document.name),o=sn(r.document.updateTime);var a=new st({mapValue:{fields:r.document.fields}}),l=(s=ct.newFoundDocument(i,o,a),r.targetIds||[]);n=new We(l,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=ln(t,(r=e.documentDelete).document),o=r.readTime?sn(r.readTime):E.min(),a=ct.newNoDocument(i,o),n=new We([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=ln(t,(r=e.documentRemove).document),n=new We([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return m();var h=e.filter;i=new Oe(r=h.count||0),n=new Ge(o=h.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return E.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?E.min():e.readTime?sn(e.readTime):E.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=fn(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ft(r)?{documents:_n(t,r)}:{query:yn(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=rn(t,e.resumeToken):e.snapshotVersion.compareTo(E.min())>0&&(n.readTime=nn(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=fn(this.R),e.removeTarget=t,this.cr(e)},e}(po),mo=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(b(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(b(void 0!==e),t.map(function(t){return function(t,e){var n=sn(t.updateTime?t.updateTime:e);return n.isEqual(E.min())&&(n=sn(e)),new ce(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=sn(t.commitTime);return this.listener.Tr(n,e)}return b(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=fn(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return bn(e.R,t)})};this.cr(n)},e}(po),bo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(r.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new u(c.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===c.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new u(c.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===c.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new u(c.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),vo=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(f(e),this.Vr=!1):d("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),_o=function(t,e,n,i,o){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(r.__awaiter)(s,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return So(this)?(d("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return(e=v(t)).Or.add(4),[4,wo(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,yo(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new vo(n,i)};function yo(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:if(!So(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function wo(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ko(t,e){var n=v(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),xo(n)?Oo(n):zo(n).er()&&Ao(n,e))}function Co(t,e){var n=v(t),r=zo(n);n.$r.delete(e),r.er()&&Eo(n,e),0===n.$r.size&&(r.er()?r.ir():So(n)&&n.Br.set("Unknown"))}function Ao(t,e){t.qr.U(e.targetId),zo(t).mr(e)}function Eo(t,e){t.qr.U(e),zo(t).yr(e)}function Oo(t){t.qr=new Ye({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),zo(t).start(),t.Br.Sr()}function xo(t){return So(t)&&!zo(t).tr()&&t.$r.size>0}function So(t){return 0===v(t).Or.size}function To(t){t.qr=void 0}function Io(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){return t.$r.forEach(function(e,n){Ao(t,e)}),[2]})})}function Po(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(n){return To(t),xo(t)?(t.Br.Nr(e),Oo(t)):t.Br.set("Unknown"),[2]})})}function Do(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s;return Object(r.__generator)(this,function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof $e&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s;return Object(r.__generator)(this,function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?t.$r.has(s=o[i])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:r.sent(),t.$r.delete(s),t.qr.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),d("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,No(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof We?t.qr.X(e):e instanceof Ge?t.qr.rt(e):t.qr.et(e),n.isEqual(E.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Ei(t.localStore)];case 8:return o=a.sent(),n.compareTo(o)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(R.EMPTY_BYTE_STRING,n.snapshotVersion)),Eo(t,e);var r=new br(n.target,e,1,n.sequenceNumber);Ao(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return d("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,No(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function No(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i=this;return Object(r.__generator)(this,function(o){switch(o.label){case 0:if(!cr(e))throw e;return t.Or.add(1),[4,wo(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return Ei(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(r.__awaiter)(i,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return d("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,yo(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ro(t,e){return e().catch(function(n){return No(t,n,e)})}function jo(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,n,i,o,s;return Object(r.__generator)(this,function(r){switch(r.label){case 0:e=v(t),n=Ko(e),i=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return So(t)&&t.Fr.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Si(e.localStore,i)];case 3:return null===(o=r.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(i=o.batchId,function(t,e){t.Fr.push(e);var n=Ko(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,No(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Mo(e)&&Fo(e),[2]}})})}function Mo(t){return So(t)&&!Ko(t).tr()&&t.Fr.length>0}function Fo(t){Ko(t).start()}function Lo(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){return Ko(t).Ar(),[2]})})}function Bo(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,n,i;return Object(r.__generator)(this,function(r){for(e=Ko(t),n=0,i=t.Fr;n<i.length;n++)e.Er(i[n].mutations);return[2]})})}function Vo(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return i=t.Fr.shift(),o=mr.from(i,e,n),[4,Ro(t,function(){return t.remoteSyncer.applySuccessfulWrite(o)})];case 1:return r.sent(),[4,jo(t)];case 2:return r.sent(),[2]}})})}function Uo(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(n){switch(n.label){case 0:return e&&Ko(t).pr?[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return xe(i=e.code)&&i!==c.ABORTED?(n=t.Fr.shift(),Ko(t).sr(),[4,Ro(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return r.sent(),[4,jo(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Mo(t)&&Fo(t),[2]}})})}function qo(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=v(t),e?(n.Or.delete(2),[4,yo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,wo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function zo(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=v(t);return r.br(),new go(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Io.bind(null,t),Ri:Po.bind(null,t),_r:Do.bind(null,t)}),t.Mr.push(function(n){return Object(r.__awaiter)(e,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),xo(t)?Oo(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),To(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Ko(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=v(t);return r.br(),new mo(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Lo.bind(null,t),Ri:Uo.bind(null,t),Ir:Bo.bind(null,t),Tr:Vo.bind(null,t)}),t.Mr.push(function(n){return Object(r.__awaiter)(e,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,jo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(d("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Ho=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new u(c.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Wo(t,e){if(f("AsyncQueue",e+": "+t),cr(t))return new u(c.UNAVAILABLE,e+": "+t);throw t}var Go=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||H.comparator(e.key,n.key)}:function(t,e){return H.comparator(t.key,e.key)},this.keyedMap=Fe(),this.sortedSet=new Te(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),$o=function(){function t(){this.Qr=new Te(H.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):m():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Qo=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Go.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vt(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Yo=function(){this.Wr=void 0,this.listeners=[]},Jo=function(){this.queries=new ri(function(t){return Ut(t)},Vt),this.onlineState="Unknown",this.Gr=new Set};function Xo(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a,c,u;return Object(r.__generator)(this,function(r){switch(r.label){case 0:if(n=v(t),o=!1,(s=n.queries.get(i=e.query))||(o=!0,s=new Yo),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.onListen(i)];case 2:return a.Wr=r.sent(),[3,4];case 3:return c=r.sent(),u=Wo(c,"Initialization of query '"+qt(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(i,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ns(n),[2]}})})}function Zo(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a;return Object(r.__generator)(this,function(r){return n=v(t),o=!1,(s=n.queries.get(i=e.query))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]})})}function ts(t,e){for(var n=v(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var c=0,u=a.listeners;c<u.length;c++)u[c].Hr(s)&&(r=!0);a.Wr=s}}r&&ns(n)}function es(t,e,n){var r=v(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ns(t){t.Gr.forEach(function(t){t.next()})}var rs=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Qo(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Qo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),is=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),os=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ln(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?mn(this.R,t.document,!1):ct.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return sn(t)},t}(),ss=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=as(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new os(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,c=o.metadata.queries;a<c.length;a++){var u=c[a],l=(e.get(u)||Ue()).add(s);e.set(u,l)}}return e},t.prototype.complete=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e,n,i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,ji(this.localStore,new os(this.R),this.documents,this.ro.id)];case 1:t=r.sent(),e=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?[4,Mi(this.localStore,o=i[n],e.get(o.name))]:[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new bi(Object.assign({},this.progress),t))]}})})},t}();function as(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var cs=function(t){this.key=t},us=function(t){this.key=t},ls=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ue(),this.mutatedKeys=Ue(),this.lo=Kt(t),this.fo=new Go(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new $o,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=Dt(this.query)&&i.size===this.query.limit?i.last():null,u=Nt(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=zt(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(c&&n.lo(h,c)>0||u&&n.lo(h,u)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(c||u)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Dt(this.query)||Nt(this.query))for(;s.size>this.query.limit;){var l=Dt(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,c=a!==this.ao;return this.ao=a,0!==o.length||c?{snapshot:new Qo(this.query,t.fo,i,o,t.mutatedKeys,0===a,c,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new $o,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ue(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new us(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new cs(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ue();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Qo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),hs=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ds=function(t){this.key=t,this.bo=!1},fs=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ri(function(t){return Ut(t)},Vt),this.Vo=new Map,this.So=new Set,this.Do=new Te(H.comparator),this.Co=new Map,this.No=new Li,this.xo={},this.ko=new Map,this.Fo=Hr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function ps(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=zs(t),(o=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Ti(n.localStore,Lt(e))];case 2:return s=r.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,gs(n,e,s.targetId,"current"===a)];case 3:i=r.sent(),n.isPrimaryClient&&ko(n.remoteStore,s),r.label=4;case 4:return[2,i]}})})}function gs(t,e,n,i){return Object(r.__awaiter)(this,void 0,void 0,function(){var o,s,a,c,u,l;return Object(r.__generator)(this,function(h){switch(h.label){case 0:return t.Oo=function(e,n,i){return function(t,e,n,i){return Object(r.__awaiter)(this,void 0,void 0,function(){var o,s,a;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return(o=e.view._o(n)).Nn?[4,Pi(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,o)})]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.targetChanges.get(e.targetId),a=e.view.applyChanges(o,t.isPrimaryClient,s),[2,(Ss(t,e.targetId,a.To),a.snapshot)]}})})}(t,e,n,i)},[4,Pi(t.localStore,e,!0)];case 1:return o=h.sent(),s=new ls(e,o.Bn),a=s._o(o.documents),c=He.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),u=s.applyChanges(a,t.isPrimaryClient,c),Ss(t,n,u.To),l=new hs(e,n,s),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function ms(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=v(t),i=n.Po.get(e),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter(function(t){return!Vt(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,Ii(n.localStore,i.targetId,!1).then(function(){n.sharedClientState.clearQueryState(i.targetId),Co(n.remoteStore,i.targetId),Os(n,i.targetId)}).catch(Yr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Os(n,i.targetId),[4,Ii(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})}function bs(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s,a;return Object(r.__generator)(this,function(r){switch(r.label){case 0:i=Ks(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=v(t),i=A.now(),o=e.reduce(function(t,e){return t.add(e.key)},Ue());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,c=e;a<c.length;a++){var u=c[a],l=pe(u,n.get(u.key));null!=l&&s.push(new ve(u.key,l,at(l.value.mapValue),ue.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(i.localStore,e)];case 2:return o=r.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Te(w)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(i,o.batchId,n),[4,Ps(i,o.changes)];case 3:return r.sent(),[4,jo(i.remoteStore)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=Wo(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function vs(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:n=v(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Oi(n.localStore,e)];case 2:return i=r.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?b(r.bo):t.removedDocuments.size>0&&(b(r.bo),r.bo=!1))}),[4,Ps(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,Yr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})}function _s(t,e,n){var r=v(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=v(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&ns(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ys(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,c,u;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return(i=v(t)).sharedClientState.updateQueryState(e,"rejected",n),o=i.Co.get(e),(s=o&&o.key)?(a=(a=new Te(H.comparator)).insert(s,ct.newNoDocument(s,E.min())),c=Ue().add(s),u=new Ke(E.min(),new Map,new De(w),a,c),[4,vs(i,u)]):[3,2];case 1:return r.sent(),i.Do=i.Do.remove(s),i.Co.delete(e),Is(i),[3,4];case 2:return[4,Ii(i.localStore,e,!1).then(function(){return Os(i,e,n)}).catch(Yr)];case 3:r.sent(),r.label=4;case 4:return[2]}})})}function ws(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:n=v(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ai(n.localStore,e)];case 2:return o=r.sent(),Es(n,i,null),As(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,Ps(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Yr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})}function ks(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:i=v(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=v(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return b(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(i.localStore,e)];case 2:return o=r.sent(),Es(i,e,n),As(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),[4,Ps(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Yr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})}function Cs(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a;return Object(r.__generator)(this,function(r){switch(r.label){case 0:So((n=v(t)).remoteStore)||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=v(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.ko.get(i)||[]).push(e),n.ko.set(i,o),[3,4]);case 3:return s=r.sent(),a=Wo(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}})})}function As(t,e){(t.ko.get(e)||[]).forEach(function(t){t.resolve()}),t.ko.delete(e)}function Es(t,e,n){var r=v(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Os(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||xs(t,e)})}function xs(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Co(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Is(t))}function Ss(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof cs?(t.No.addReference(o.key,e),Ts(t,o)):o instanceof us?(d("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||xs(t,o.key)):m()}}function Ts(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(d("SyncEngine","New document in limbo: "+n),t.So.add(r),Is(t))}function Is(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new H(I.fromString(e)),r=t.Fo.next();t.Co.set(r,new ds(n)),t.Do=t.Do.insert(n,r),ko(t.remoteStore,new br(Lt(Pt(n.path)),r,2,a.o))}}function Ps(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s,a;return Object(r.__generator)(this,function(c){switch(c.label){case 0:return i=v(t),o=[],s=[],a=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach(function(t,r){a.push(i.Oo(r,e,n).then(function(t){if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=_i.Pn(r.targetId,t);s.push(e)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),i.vo._r(o),[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a,c,u,l;return Object(r.__generator)(this,function(r){switch(r.label){case 0:n=v(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return rr.forEach(e,function(e){return rr.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return rr.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return r.sent(),[3,4];case 3:if(!cr(i=r.sent()))throw i;return d("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)c=(a=s[o]).targetId,a.fromCache||(u=n.kn.get(c),l=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.kn=n.kn.insert(c,l));return[2]}})})}(i.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function Ds(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return(n=v(t)).currentUser.isEqual(e)?[3,3]:(d("SyncEngine","User change. New user:",e.toKey()),[4,Ci(n.localStore,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.ko.forEach(function(t){t.forEach(function(t){t.reject(new u(c.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),[4,Ps(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}})})}function Ns(t,e){var n=v(t),r=n.Co.get(e);if(r&&r.bo)return Ue().add(r.key);var i=Ue(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var c=n.Po.get(a[s]);i=i.unionWith(c.view.wo)}return i}function Rs(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,Pi((n=v(t)).localStore,e.query,!0)];case 1:return i=r.sent(),o=e.view.Ao(i),[2,(n.isPrimaryClient&&Ss(n,e.targetId,o.To),o)]}})})}function js(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){return[2,Ni((e=v(t)).localStore).then(function(t){return Ps(e,t)})]})})}function Ms(t,e,n,i){return Object(r.__awaiter)(this,void 0,void 0,function(){var o,s;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,function(t,e){var n=v(t),r=v(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):rr.resolve(null)})})}((o=v(t)).localStore,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,jo(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Es(o,e,i||null),As(o,e),function(t,e){v(v(t)._n).Gt(e)}(o.localStore,e)):m(),r.label=4;case 4:return[4,Ps(o,s)];case 5:return r.sent(),[3,7];case 6:d("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}})})}function Fs(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a,c,u;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return zs(n=v(t)),Ks(n),!0!==e||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,Ls(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,qo(n.remoteStore,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)ko(n.remoteStore,a[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):u=u.then(function(){return Os(n,e),Ii(n.localStore,e,!0)}),Co(n.remoteStore,e)}),[4,u]);case 4:return r.sent(),[4,Ls(n,c)];case 5:return r.sent(),function(t){var e=v(t);e.Co.forEach(function(t,n){Co(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Te(H.comparator)}(n),n.$o=!1,[4,qo(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}})})}function Ls(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a,c,u,l,h,d,f,p,g;return Object(r.__generator)(this,function(r){switch(r.label){case 0:n=v(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(u=void 0,(l=n.Vo.get(c=a[s]))&&0!==l.length?[4,Ti(n.localStore,Lt(l[0]))]:[3,7]):[3,13];case 2:u=r.sent(),h=0,d=l,r.label=3;case 3:return h<d.length?(f=n.Po.get(d[h]),[4,Rs(n,f)]):[3,6];case 4:(p=r.sent()).snapshot&&o.push(p.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Di(n.localStore,c)];case 8:return g=r.sent(),[4,Ti(n.localStore,g)];case 9:return u=r.sent(),[4,gs(n,Bs(g),c,!1)];case 10:r.sent(),r.label=11;case 11:i.push(u),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(o),i)]}})})}function Bs(t){return It(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Vs(t){var e=v(t);return v(v(e.localStore).persistence).fn()}function Us(t,e,n,i){return Object(r.__awaiter)(this,void 0,void 0,function(){var o,s,a;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return(o=v(t)).$o?(d("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ni(o.localStore)];case 3:return s=r.sent(),a=Ke.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ps(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,Ii(o.localStore,e,!0)];case 6:return r.sent(),Os(o,e,i),[3,8];case 7:m(),r.label=8;case 8:return[2]}})})}function qs(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,c,u,l,h,f;return Object(r.__generator)(this,function(p){switch(p.label){case 0:if(!(i=zs(t)).$o)return[3,10];o=0,s=e,p.label=1;case 1:return o<s.length?i.Vo.has(a=s[o])?(d("SyncEngine","Adding an already active target "+a),[3,5]):[4,Di(i.localStore,a)]:[3,6];case 2:return c=p.sent(),[4,Ti(i.localStore,c)];case 3:return u=p.sent(),[4,gs(i,Bs(c),u.targetId,!1)];case 4:p.sent(),ko(i.remoteStore,u),p.label=5;case 5:return o++,[3,1];case 6:l=function(t){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return i.Vo.has(t)?[4,Ii(i.localStore,t,!1).then(function(){Co(i.remoteStore,t),Os(i,t)}).catch(Yr)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},h=0,f=n,p.label=7;case 7:return h<f.length?[5,l(f[h])]:[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}})})}function zs(t){var e=v(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vs.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ns.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ys.bind(null,e),e.vo._r=ts.bind(null,e.eventManager),e.vo.Mo=es.bind(null,e.eventManager),e}function Ks(t){var e=v(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ws.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ks.bind(null,e),e}function Hs(t,e,n){var i=v(t);(function(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,c,u;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return i=r.sent(),[4,function(t,e){var n=v(t),r=sn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Ke.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,i)];case 2:return r.sent()?[4,e.close()]:[3,4];case 3:return[2,(r.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)))];case 4:return n._updateProgress(as(i)),o=new ss(i,t.localStore,e.R),[4,e.Lo()];case 5:s=r.sent(),r.label=6;case 6:return s?[4,o.oo(s)]:[3,10];case 7:return(a=r.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:s=r.sent(),r.label=9;case 9:return[3,6];case 10:return[4,o.complete()];case 11:return c=r.sent(),[4,Ps(t,c.wn,void 0)];case 12:return r.sent(),[4,function(t,e){var n=v(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Ke.saveBundleMetadata(t,e)})}(t.localStore,i)];case 13:return r.sent(),n._completeWith(c.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(u=r.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(i,e,n).then(function(){i.sharedClientState.notifyBundleLoaded()})}var Ws=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return this.R=ho(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return ki(this.persistence,new yi,t.initialUser,this.R)},t.prototype.qo=function(t){return new Ki(Wi.bs,this.R)},t.prototype.Bo=function(t){return new ro},t.prototype.terminate=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Gs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r.__extends)(e,t),e.prototype.initialize=function(e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n=this;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Ri(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,Ks(this.Qo.syncEngine)];case 4:return r.sent(),[4,jo(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He(function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()})];case 6:return r.sent(),[2]}})})},e.prototype.Ko=function(t){return ki(this.persistence,new yi,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Zr(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=mi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new fi(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,uo(),lo(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new ro},e}(Ws),$s=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r.__extends)(e,t),e.prototype.initialize=function(e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i=this;return Object(r.__generator)(this,function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof no?(this.sharedClientState.syncEngine={ui:Ms.bind(null,n),ai:Us.bind(null,n),hi:qs.bind(null,n),fn:Vs.bind(null,n),ci:js.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He(function(t){return Object(r.__awaiter)(i,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return[4,Fs(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},e.prototype.Bo=function(t){var e=uo();if(!no.yt(e))throw new u(c.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=mi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new no(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Gs),Qs=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n=this;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return _s(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ds.bind(null,this.syncEngine),[4,qo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Jo},t.prototype.createDatastore=function(t){var e=ho(t.databaseInfo.databaseId),n=new co(t.databaseInfo);return function(t,e,n){return new bo(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return _s(s.syncEngine,t,0)},o=oo.yt()?new oo:new io,new _o(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new fs(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return e=v(t),d("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,wo(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function Ys(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var i;return Object(r.__generator)(this,function(r){return n<t.byteLength?(i={value:t.slice(n,n+e),done:!1},[2,(n+=e,i)]):[2,{done:!0}]})})},cancel:function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Js=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Xs=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new nr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e,n,i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new is(JSON.parse(i),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),Zs=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(r.__generator)(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new u(c.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o,s,a,c;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=v(t),i=fn(n.R)+"/documents",o={documents:e.map(function(t){return un(n.R,t)})},[4,n.$i("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){b(!!e.found);var n=ln(t,e.found.name),r=sn(e.found.updateTime),i=new st({mapValue:{fields:e.found.fields}});return ct.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){b(!!e.missing),b(!!e.readTime);var n=ln(t,e.missing),r=sn(e.readTime);return ct.newNoDocument(n,r)}(t,e):m()}(n.R,t);a.set(e.key.toString(),e)}),c=[],[2,(e.forEach(function(t){var e=a.get(t.toString());b(!!e),c.push(e)}),c)]}})})}(this.datastore,t)];case 1:return[2,((e=i.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ae(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(r.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=H.fromPath(n);e.mutations.push(new Ee(r,e.precondition(r)))}),[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=v(t),i=fn(n.R)+"/documents",o={writes:e.map(function(t){return bn(n.R,t)})},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw m();e=E.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new u(c.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ue.updateTime(e):ue.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(E.min()))throw new u(c.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ue.updateTime(e)}return ue.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ta=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fo(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(r.__awaiter)(t,void 0,void 0,function(){var t,e,n=this;return Object(r.__generator)(this,function(r){return t=new Zs(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!q(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!xe(e)}return!1},t}(),ea=function(){function t(t,e,n){var i=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Gi.UNAUTHENTICATED,this.clientId=y.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return Object(r.__awaiter)(i,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return d("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new u(c.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(r.__awaiter)(t,void 0,void 0,function(){var t,n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Wo(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function na(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i,o=this;return Object(r.__generator)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),i=n.initialUser,t.setCredentialChangeListener(function(t){return Object(r.__awaiter)(o,void 0,void 0,function(){return Object(r.__generator)(this,function(n){switch(n.label){case 0:return i.isEqual(t)?[3,2]:[4,Ci(e.localStore,t)];case 1:n.sent(),i=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function ra(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i;return Object(r.__generator)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ia(t)];case 1:return n=o.sent(),d("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return Object(r.__awaiter)(this,void 0,void 0,function(){var n,i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return(n=v(t)).asyncQueue.verifyOperationInProgress(),d("RemoteStore","RemoteStore received new credentials"),i=So(n),n.Or.add(3),[4,wo(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return r.sent(),n.Or.delete(3),[4,yo(n)];case 3:return r.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function ia(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(d("FirestoreClient","Using default OfflineComponentProvider"),[4,na(t,new Ws)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function oa(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(d("FirestoreClient","Using default OnlineComponentProvider"),[4,ra(t,new Qs)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function sa(t){return ia(t).then(function(t){return t.persistence})}function aa(t){return ia(t).then(function(t){return t.localStore})}function ca(t){return oa(t).then(function(t){return t.remoteStore})}function ua(t){return oa(t).then(function(t){return t.syncEngine})}function la(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,oa(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ps.bind(null,e.syncEngine),n.onUnlisten=ms.bind(null,e.syncEngine),n)]}})})}function ha(t,e,n){var i=this;void 0===n&&(n={});var o=new nr;return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(i,void 0,void 0,function(){var i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Js({next:function(o){e.enqueueAndForget(function(){return Zo(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new u(c.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new u(c.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new rs(Pt(n.path),o,{includeMetadataChanges:!0,so:!0});return Xo(t,s)},[4,la(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}})})}),o.promise}function da(t,e,n){var i=this;void 0===n&&(n={});var o=new nr;return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(i,void 0,void 0,function(){var i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Js({next:function(n){e.enqueueAndForget(function(){return Zo(t,s)}),n.fromCache&&"server"===r.source?i.reject(new u(c.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new rs(n,o,{includeMetadataChanges:!0,so:!0});return Xo(t,s)},[4,la(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}})})}),o.promise}var fa=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},pa=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ga=new Map,ma=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ba=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Gi.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),va=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),_a=function(){function t(t){var e=this;this.currentUser=Gi.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){d("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(d("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(b("string"==typeof n.accessToken),new ma(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return b(null===t||"string"==typeof t),new Gi(t)},t}(),ya=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Gi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),wa=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new ya(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Gi.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ka(t,e,n){if(!n)throw new u(c.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ca(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new u(c.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Aa(t,e,n,r){if(!0===e&&!0===r)throw new u(c.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ea(t){if(!H.isDocumentKey(t))throw new u(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Oa(t){if(H.isDocumentKey(t))throw new u(c.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function xa(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m()}function Sa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new u(c.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xa(t);throw new u(c.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ta(t,e){if(e<=0)throw new u(c.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ia=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new u(c.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new u(c.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Aa("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Pa=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ia({}),this._settingsFrozen=!1,t instanceof pa?(this._databaseId=t,this._credentials=new ba):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new u(c.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(t.options.projectId)}(t),this._credentials=new _a(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new u(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new u(c.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ia(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ba;switch(t.type){case"gapi":var e=t.client;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new wa(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new u(c.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=ga.get(this))&&(d("ComponentProvider","Removing Datastore"),ga.delete(this),t.terminate()),Promise.resolve();var t},t}(),Da=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ra(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Na=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ra=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Pt(r))||this)._path=r,i.type="collection",i}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Da(this.firestore,null,new H(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Na);function ja(t,e){for(var n,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];if(t=Object(i.getModularInstance)(t),ka("collection","path",e),t instanceof Pa)return Oa(n=I.fromString.apply(I,Object(r.__spreadArray)([e],o))),new Ra(t,null,n);if(!(t instanceof Da||t instanceof Ra))throw new u(c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Oa(n=I.fromString.apply(I,Object(r.__spreadArray)([t.path],o)).child(I.fromString(e))),new Ra(t.firestore,null,n)}function Ma(t,e){for(var n,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];if(t=Object(i.getModularInstance)(t),1===arguments.length&&(e=y.u()),ka("doc","path",e),t instanceof Pa)return Ea(n=I.fromString.apply(I,Object(r.__spreadArray)([e],o))),new Da(t,null,new H(n));if(!(t instanceof Da||t instanceof Ra))throw new u(c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ea(n=t._path.child(I.fromString.apply(I,Object(r.__spreadArray)([e],o)))),new Da(t.firestore,t instanceof Ra?t.converter:null,new H(n))}function Fa(t,e){return t=Object(i.getModularInstance)(t),e=Object(i.getModularInstance)(e),(t instanceof Da||t instanceof Ra)&&(e instanceof Da||e instanceof Ra)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function La(t,e){return t=Object(i.getModularInstance)(t),e=Object(i.getModularInstance)(e),t instanceof Na&&e instanceof Na&&t.firestore===e.firestore&&Vt(t._query,e._query)&&t.converter===e.converter}var Ba=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new fo(this,"async_queue_retry"),this.Ic=function(){var e=lo();e&&d("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=lo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=lo();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new nr;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(r.__generator)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!cr(t=n.sent()))throw t;return d("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,f("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Ho.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&m()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Va(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ua=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),qa=-1,za=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Ba,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(r.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Ha(this),this._firestoreClient.terminate()},e}(Pa);function Ka(t){return t._firestoreClient||Ha(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ha(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new fa(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ea(t._credentials,t._queue,r)}function Wa(t,e,n){var i=this,o=new nr;return t.asyncQueue.enqueue(function(){return Object(r.__awaiter)(i,void 0,void 0,function(){var i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,na(t,n)];case 1:return r.sent(),[4,ra(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===c.FAILED_PRECONDITION||t.code===c.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function Ga(t){if(t._initialized||t._terminated)throw new u(c.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var $a=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new u(c.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new D(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Qa=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(R.fromBase64String(e))}catch(e){throw new u(c.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(R.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Ya=function(t){this._methodName=t},Ja=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new u(c.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new u(c.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return w(this._lat,t._lat)||w(this._long,t._long)},t}(),Xa=/^__.*__$/,Za=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ve(t,this.data,this.fieldMask,e,this.fieldTransforms):new be(t,this.data,e,this.fieldTransforms)},t}(),tc=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ve(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function ec(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m()}}var nc=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return kc(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(ec(this.Nc)&&Xa.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),rc=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ho(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new nc({Nc:t,methodName:e,qc:n,path:D.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function ic(t){var e=t._freezeSettings(),n=ho(t._databaseId);return new rc(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oc(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);vc("Data must be an object, but it was:",s,r);var a,l,h=mc(r,s);if(o.merge)a=new N(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){for(var d=[],f=0,p=o.mergeFields;f<p.length;f++){var g=_c(e,p[f],n);if(!s.contains(g))throw new u(c.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");Cc(d,g)||d.push(g)}a=new N(d),l=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,l=s.fieldTransforms;return new Za(new st(h),a,l)}var sc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ya);function ac(t,e,n){return new nc({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new ae(t.path,new Zt)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ya),uc=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=ac(this,t,!0),n=this.Kc.map(function(t){return gc(t,e)}),r=new te(n);return new ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ya),lc=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=ac(this,t,!0),n=this.Kc.map(function(t){return gc(t,e)}),r=new ne(n);return new ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ya),hc=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new ie(t.R,$t(t.R,this.Qc));return new ae(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ya);function dc(t,e,n,r){var o=t.Uc(1,e,n);vc("Data must be an object, but it was:",o,r);var s=[],a=st.empty();x(r,function(t,r){var c=wc(e,t,n);r=Object(i.getModularInstance)(r);var u=o.Oc(c);if(r instanceof sc)s.push(c);else{var l=gc(r,u);null!=l&&(s.push(c),a.set(c,l))}});var c=new N(s);return new tc(a,c,o.fieldTransforms)}function fc(t,e,n,r,o,s){var a=t.Uc(1,e,n),l=[_c(e,r,n)],h=[o];if(s.length%2!=0)throw new u(c.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var d=0;d<s.length;d+=2)l.push(_c(e,s[d])),h.push(s[d+1]);for(var f=[],p=st.empty(),g=l.length-1;g>=0;--g)if(!Cc(f,l[g])){var m=l[g],b=h[g];b=Object(i.getModularInstance)(b);var v=a.Oc(m);if(b instanceof sc)f.push(m);else{var _=gc(b,v);null!=_&&(f.push(m),p.set(m,_))}}var y=new N(f);return new tc(p,y,a.fieldTransforms)}function pc(t,e,n,r){return void 0===r&&(r=!1),gc(n,t.Uc(r?4:3,e))}function gc(t,e){if(bc(t=Object(i.getModularInstance)(t)))return vc("Unsupported field value:",e,t),mc(t,e);if(t instanceof Ya)return function(t,e){if(!ec(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=gc(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(i.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $t(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=A.fromDate(t);return{timestampValue:nn(e.R,n)}}if(t instanceof A)return n=new A(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:nn(e.R,n)};if(t instanceof Ja)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qa)return{bytesValue:rn(e.R,t._byteString)};if(t instanceof Da){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:an(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+xa(t))}(t,e)}function mc(t,e){var n={};return S(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):x(t,function(t,r){var i=gc(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function bc(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof A||t instanceof Ja||t instanceof Qa||t instanceof Da||t instanceof Ya)}function vc(t,e,n){if(!bc(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=xa(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function _c(t,e,n){if((e=Object(i.getModularInstance)(e))instanceof $a)return e._internalPath;if("string"==typeof e)return wc(t,e);throw kc("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var yc=new RegExp("[~\\*/\\[\\]]");function wc(t,e,n){if(e.search(yc)>=0)throw kc("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new($a.bind.apply($a,Object(r.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(i){throw kc("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function kc(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var l="";return(o||s)&&(l+=" (found",o&&(l+=" in field "+r),s&&(l+=" in document "+i),l+=")"),new u(c.INVALID_ARGUMENT,(a+=". ")+t+l)}function Cc(t,e){return t.some(function(t){return t.isEqual(e)})}var Ac=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Da(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ec(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Oc("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ac);function Oc(t,e){return"string"==typeof e?wc(t,e):e instanceof $a?e._internalPath:e._delegate._internalPath}var xc=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Sc=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(r.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Oc("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ac),Tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Sc),Ic=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new xc(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Tc(n._firestore,n._userDataWriter,r.key,r,new xc(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new u(c.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Tc(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xc(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Tc(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xc(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Pc(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Pc(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m()}}function Dc(t,e){return t instanceof Sc&&e instanceof Sc?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ic&&e instanceof Ic&&t._firestore===e._firestore&&La(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Nc(t){if(Nt(t)&&0===t.explicitOrderBy.length)throw new u(c.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rc=function(){};function jc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Mc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=ic(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new u(c.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){zc(s,o);for(var l=[],h=0,d=s;h<d.length;h++)l.push(qc(r,t,d[h]));a={arrayValue:{values:l}}}else a=qc(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||zc(s,o),a=pc(n,"where",s,"in"===o||"not-in"===o);var f=pt.create(i,o,a);return function(t,e){if(e.g()){var n=jt(t);if(null!==n&&!n.isEqual(e.field))throw new u(c.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Rt(t);null!==r&&Kc(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new u(c.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Na(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Tt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Rc),Fc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new u(c.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new u(c.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Et(e,n);return function(t,e){if(null===Rt(t)){var n=jt(t);null!==n&&Kc(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Na(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Tt(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Rc),Lc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){return new Na(t.firestore,t.converter,Bt(t._query,this.Hc,this.Jc))},e}(Rc),Bc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=Uc(t,this.type,this.Yc,this.Xc);return new Na(t.firestore,t.converter,function(t,e){return new Tt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Rc),Vc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=Uc(t,this.type,this.Yc,this.Xc);return new Na(t.firestore,t.converter,function(t,e){return new Tt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Rc);function Uc(t,e,n,r){if(n[0]=Object(i.getModularInstance)(n[0]),n[0]instanceof Ac)return function(t,e,n,r,i){if(!r)throw new u(c.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ft(t);s<a.length;s++){var l=a[s];if(l.field.isKeyField())o.push(Z(e,r.key));else{var h=r.data.field(l.field);if(B(h))throw new u(c.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var d=l.field.canonicalString();throw new u(c.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+d+"' (used as the orderBy) does not exist.")}o.push(h)}}return new Ct(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var o=ic(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new u(c.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],l=0;l<i.length;l++){var h=i[l];if(s[l].field.isKeyField()){if("string"!=typeof h)throw new u(c.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Mt(t)&&-1!==h.indexOf("/"))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var d=t.path.child(I.fromString(h));if(!H.isDocumentKey(d))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+d+"' is not because it contains an odd number of segments.");var f=new H(d);a.push(Z(e,f))}else{var p=pc(n,r,h);a.push(p)}}return new Ct(a,o)}(t._query,t.firestore._databaseId,o,e,n,r)}function qc(t,e,n){if("string"==typeof(n=Object(i.getModularInstance)(n))){if(""===n)throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mt(e)&&-1!==n.indexOf("/"))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(I.fromString(n));if(!H.isDocumentKey(r))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Z(t,new H(r))}if(n instanceof Da)return Z(t,n._key);throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+xa(n)+".")}function zc(t,e){if(!Array.isArray(t)||0===t.length)throw new u(c.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new u(c.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Kc(t,e,n){if(!n.isEqual(e))throw new u(c.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Hc=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),W(t)){case 0:return null;case 1:return t.booleanValue;case 2:return F(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(L(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw m()}},t.prototype.convertObject=function(t,e){var n=this,r={};return x(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Ja(F(t.latitude),F(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=V(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(U(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=M(t);return new A(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=I.fromString(t);b(Dn(n));var r=new pa(n.get(1),n.get(3)),i=new H(n.popFirst(5));return r.isEqual(e)||f("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Wc(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.__extends)(e,t),e.prototype.convertBytes=function(t){return new Qa(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Da(this.firestore,null,e)},e}(Hc),$c=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ic(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Qc(t,this._firestore),i=Wc(r.converter,e,n),o=oc(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ue.none())),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var s,a=Qc(t,this._firestore);return s="string"==typeof(e=Object(i.getModularInstance)(e))||e instanceof $a?fc(this._dataReader,"WriteBatch.update",a._key,e,n,r):dc(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(s.toMutation(a._key,ue.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Qc(t,this._firestore);return this._mutations=this._mutations.concat(new Ae(e._key,ue.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new u(c.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Qc(t,e){if((t=Object(i.getModularInstance)(t)).firestore!==e)throw new u(c.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Yc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.__extends)(e,t),e.prototype.convertBytes=function(t){return new Qa(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Da(this.firestore,null,e)},e}(Hc);function Jc(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];t=Sa(t,Da);var s=Sa(t.firestore,za),a=ic(s);return Zc(s,[("string"==typeof(e=Object(i.getModularInstance)(e))||e instanceof $a?fc(a,"updateDoc",t._key,e,n,r):dc(a,"updateDoc",t._key,e)).toMutation(t._key,ue.exists(!0))])}function Xc(t){for(var e,n,o,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];t=Object(i.getModularInstance)(t);var c={includeMetadataChanges:!1},u=0;"object"!=typeof s[u]||Va(s[u])||(c=s[u],u++);var l,h,d,f={includeMetadataChanges:c.includeMetadataChanges};if(Va(s[u])){var p=s[u];s[u]=null===(e=p.next)||void 0===e?void 0:e.bind(p),s[u+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),s[u+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(t instanceof Da)h=Sa(t.firestore,za),d=Pt(t._key.path),l={next:function(e){s[u]&&s[u](tu(h,t,e))},error:s[u+1],complete:s[u+2]};else{var g=Sa(t,Na);h=Sa(g.firestore,za),d=g._query;var m=new Yc(h);l={next:function(t){s[u]&&s[u](new Ic(h,m,g,t))},error:s[u+1],complete:s[u+2]},Nc(t._query)}return function(t,e,n,i){var o=this,s=new Js(i),a=new rs(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(o,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return e=Xo,[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(o,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return e=Zo,[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})})}}(Ka(h),d,f,l)}function Zc(t,e){return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){var n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=bs,[4,ua(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}})})}),i.promise}(Ka(t),e)}function tu(t,e,n){var r=n.docs.get(e._key),i=new Yc(t);return new Sc(t,i,e._key,r,new xc(n.hasPendingWrites,n.fromCache),e.converter)}var eu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(r.__extends)(e,t),e.prototype.get=function(e){var n=this,r=Qc(e,this._firestore),i=new Yc(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Sc(n._firestore,i,r._key,t._document,new xc(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ic(t)}return t.prototype.get=function(t){var e=this,n=Qc(t,this._firestore),r=new Gc(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return m();var i=t[0];if(i.isFoundDocument())return new Ac(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ac(e._firestore,r,n._key,null,n.converter);throw m()})},t.prototype.set=function(t,e,n){var r=Qc(t,this._firestore),i=Wc(r.converter,e,n),o=oc(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s,a=Qc(t,this._firestore);return s="string"==typeof(e=Object(i.getModularInstance)(e))||e instanceof $a?fc(this._dataReader,"Transaction.update",a._key,e,n,r):dc(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,s),this},t.prototype.delete=function(t){var e=Qc(t,this._firestore);return this._transaction.delete(e._key),this},t}());function nu(){if("undefined"==typeof Uint8Array)throw new u(c.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ru(){if("undefined"==typeof atob)throw new u(c.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var iu=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return ru(),new t(Qa.fromBase64String(e))},t.fromUint8Array=function(e){return nu(),new t(Qa.fromUint8Array(e))},t.prototype.toBase64=function(){return ru(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return nu(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),ou=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ga(t=Sa(t,za));var n=Ka(t),r=t._freezeSettings(),i=new Qs;return Wa(n,i,new Gs(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ga(t=Sa(t,za));var e=Ka(t),n=t._freezeSettings(),r=new Qs;return Wa(e,r,new $s(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new u(c.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nr;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(r.__awaiter)(e,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return or.yt()?[4,or.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(mi(t._databaseId,t._persistenceKey))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),su=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof pa||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var o;void 0===r&&(r={});var s=(t=Sa(t,Pa))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Gi.MOCK_USER;else{a=Object(i.createMockUserToken)(r.mockUserToken,null===(o=t._app)||void 0===o?void 0:o.options.projectId);var h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new u(c.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Gi(h)}t._credentials=new va(new ma(a,l))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(r.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,sa(t)];case 1:return e=r.sent(),[4,ca(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=v(t);return e.Or.delete(0),yo(e)}(n))]}})})})}(Ka(Sa(this._delegate,za)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(r.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(r.__generator)(this,function(i){switch(i.label){case 0:return[4,sa(t)];case 1:return e=i.sent(),[4,ca(t)];case 2:return n=i.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return(e=v(t)).Or.add(0),[4,wo(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Ka(Sa(this._delegate,za)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Aa("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new nr;return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(e,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return e=Cs,[4,ua(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Ka(Sa(this._delegate,za)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,i=new Js(e);return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){v(t).Gr.add(e),e.next()},[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}})})}),function(){i.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){v(t).Gr.delete(e)},[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}})})})}}(Ka(t=Sa(t,za)),Va(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new u(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wu(this,ja(this._delegate,t))}catch(t){throw fu(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new du(this,Ma(this._delegate,t))}catch(t){throw fu(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new vu(this,function(t,e){if(t=Sa(t,Pa),ka("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new u(c.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Na(t,null,function(t){return new Tt(I.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw fu(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){var n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,function(t){return oa(t).then(function(t){return t.datastore})}(t)];case 1:return n=r.sent(),new ta(t.asyncQueue,n,e,i).run(),[2]}})})}),i.promise}(Ka(t),function(n){return e(new eu(t,n))})}(this._delegate,function(n){return t(new uu(e,n))})},t.prototype.batch=function(){var t=this;return Ka(this._delegate),new lu(new $c(this._delegate,function(e){return Zc(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new u(c.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new u(c.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),au=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.__extends)(e,t),e.prototype.convertBytes=function(t){return new iu(new Qa(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return du.eu(e,this.firestore,null)},e}(Hc);function cu(t){l.setLogLevel(t)}var uu=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new au(t)}return t.prototype.get=function(t){var e=this,n=ku(t);return this._delegate.get(n).then(function(t){return new mu(e._firestore,new Sc(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=ku(t);return n?(Ca("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=ku(t);return 2===arguments.length?this._delegate.update(a,e):(i=this._delegate).update.apply(i,Object(r.__spreadArray)([a,e,n],o)),this},t.prototype.delete=function(t){var e=ku(t);return this._delegate.delete(e),this},t}(),lu=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=ku(t);return n?(Ca("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=ku(t);return 2===arguments.length?this._delegate.update(a,e):(i=this._delegate).update.apply(i,Object(r.__spreadArray)([a,e,n],o)),this},t.prototype.delete=function(t){var e=ku(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),hu=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Tc(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new bu(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new au(e),n),i.set(n,o)),o},t}();hu.su=new WeakMap;var du=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new au(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new u(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Da(n._delegate,r,new H(e)))},t.eu=function(e,n,r){return new t(n,new Da(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wu(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wu(this.firestore,ja(this._delegate,t))}catch(t){throw fu(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(i.getModularInstance)(t))instanceof Da&&Fa(this._delegate,t)},t.prototype.set=function(t,e){e=Ca("DocumentReference.set",e);try{return function(t,e,n){t=Sa(t,Da);var r=Sa(t.firestore,za),i=Wc(t.converter,e,n);return Zc(r,[oc(ic(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ue.none())])}(this._delegate,t,e)}catch(t){throw fu(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?Jc(this._delegate,t):Jc.apply(void 0,Object(r.__spreadArray)([this._delegate,t,e],n))}catch(t){throw fu(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Zc(Sa((t=this._delegate).firestore,za),[new Ae(t._key,ue.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pu(e),i=gu(e,function(e){return new mu(t.firestore,new Sc(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Xc(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Sa(t,Da);var e=Sa(t.firestore,za),n=Ka(e),i=new Yc(e);return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){var n;return Object(r.__generator)(this,function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=v(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(o=r.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new u(c.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=Wo(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}})})},[4,aa(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}})})}),i.promise}(n,t._key).then(function(n){return new Sc(e,i,t._key,n,new xc(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Sa(t,Da);var e=Sa(t.firestore,za);return ha(Ka(e),t._key,{source:"server"}).then(function(n){return tu(e,t,n)})}(this._delegate):function(t){t=Sa(t,Da);var e=Sa(t.firestore,za);return ha(Ka(e),t._key).then(function(n){return tu(e,t,n)})}(this._delegate)).then(function(t){return new mu(e.firestore,new Sc(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?hu.nu(this.firestore,e):null))},t}();function fu(t,e,n){return t.message=t.message.replace(e,n),t}function pu(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Va(r))return r}return{}}function gu(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Va(t[0])?t[0]:Va(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mu=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new du(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Dc(this._delegate,t._delegate)},t}(),bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(mu),vu=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new au(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,jc(this._delegate,function(t,e,n){var r=e,i=Oc("where",t);return new Mc(i,r,n)}(e,n,r)))}catch(e){throw fu(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,jc(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Oc("orderBy",t);return new Fc(r,n)}(e,n)))}catch(e){throw fu(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,jc(this._delegate,function(t){return Ta("limit",t),new Lc("limit",t,"F")}(e)))}catch(e){throw fu(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,jc(this._delegate,function(t){return Ta("limitToLast",t),new Lc("limitToLast",t,"L")}(e)))}catch(e){throw fu(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jc(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bc("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw fu(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jc(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bc("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw fu(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jc(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vc("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw fu(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jc(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vc("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw fu(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return La(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Sa(t,Na);var e=Sa(t.firestore,za),n=Ka(e),i=new Yc(e);return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){var n;return Object(r.__generator)(this,function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,c;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Pi(t,e,!0)];case 1:return c=r.sent(),i=new ls(e,c.Bn),o=i._o(c.documents),s=i.applyChanges(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=r.sent(),c=Wo(a,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}})})},[4,aa(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}})})}),i.promise}(n,t._query).then(function(n){return new Ic(e,i,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Sa(t,Na);var e=Sa(t.firestore,za),n=Ka(e),r=new Yc(e);return da(n,t._query,{source:"server"}).then(function(n){return new Ic(e,r,t,n)})}(this._delegate):function(t){t=Sa(t,Na);var e=Sa(t.firestore,za),n=Ka(e),r=new Yc(e);return Nc(t._query),da(n,t._query).then(function(n){return new Ic(e,r,t,n)})}(this._delegate)).then(function(t){return new yu(e.firestore,new Ic(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pu(e),i=gu(e,function(e){return new yu(t.firestore,new Ic(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Xc(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?hu.nu(this.firestore,e):null))},t}(),_u=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new bu(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),yu=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new vu(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new bu(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new _u(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new bu(n._firestore,r))})},t.prototype.isEqual=function(t){return Dc(this._delegate,t._delegate)},t}(),wu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new du(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new du(this.firestore,void 0===t?Ma(this._delegate):Ma(this._delegate,t))}catch(t){throw fu(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Sa(t.firestore,za),r=Ma(t),i=Wc(t.converter,e);return Zc(n,[oc(ic(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ue.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new du(e.firestore,t)})},e.prototype.isEqual=function(t){return Fa(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?hu.nu(this.firestore,t):null))},e}(vu);function ku(t){return Sa(t,Da)}var Cu=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new($a.bind.apply($a,Object(r.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(D.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(i.getModularInstance)(t))instanceof $a&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Au=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new cc("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new sc("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uc("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lc("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new hc("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();function Eu(t){return function(t,e){var n=Ka(t=Sa(t,za)),i=new Ua;return function(t,e,n,i){var o=this,s=function(t,e){return function(t,e){return new Xs(t,e)}(function(t,e){if(t instanceof Uint8Array)return Ys(t,e);if(t instanceof ArrayBuffer)return Ys(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,ho(e));t.asyncQueue.enqueueAndForget(function(){return Object(r.__awaiter)(o,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return e=Hs,[4,ua(t)];case 1:return e.apply(void 0,[n.sent(),s,i]),[2]}})})})}(n,t._databaseId,e,i),i}(this._delegate,t)}function Ou(t){var e,n,i=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return Object(r.__awaiter)(n,void 0,void 0,function(){var n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=v(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Ke.getNamedQuery(t,e)})},[4,aa(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(Ka(e=Sa(e,za)),n).then(function(t){return t?new Na(e,null,t.query):null})).then(function(t){return t?new vu(i,t):null})}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function c(t,e=0){return function(n){return n.lift(new u(t,e))}}class u{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",function(){return s}),n.d(e,"Logger",function(){return h}),n.d(e,"setLogLevel",function(){return d}),n.d(e,"setUserLogHandler",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=u[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.r(e),n.d(e,"CONSTANTS",function(){return i}),n.d(e,"Deferred",function(){return p}),n.d(e,"ErrorFactory",function(){return D}),n.d(e,"FirebaseError",function(){return P}),n.d(e,"MAX_VALUE_MILLIS",function(){return ut}),n.d(e,"RANDOM_FACTOR",function(){return lt}),n.d(e,"Sha1",function(){return J}),n.d(e,"areCookiesEnabled",function(){return T}),n.d(e,"assert",function(){return o}),n.d(e,"assertionError",function(){return s}),n.d(e,"async",function(){return tt}),n.d(e,"base64",function(){return c}),n.d(e,"base64Decode",function(){return h}),n.d(e,"base64Encode",function(){return u}),n.d(e,"base64urlEncodeWithoutPadding",function(){return l}),n.d(e,"calculateBackoffMillis",function(){return ht}),n.d(e,"contains",function(){return q}),n.d(e,"createMockUserToken",function(){return g}),n.d(e,"createSubscribe",function(){return X}),n.d(e,"decode",function(){return F}),n.d(e,"deepCopy",function(){return d}),n.d(e,"deepEqual",function(){return W}),n.d(e,"deepExtend",function(){return f}),n.d(e,"errorPrefix",function(){return rt}),n.d(e,"extractQuerystring",function(){return Y}),n.d(e,"getGlobal",function(){return I}),n.d(e,"getModularInstance",function(){return ft}),n.d(e,"getUA",function(){return m}),n.d(e,"isAdmin",function(){return U}),n.d(e,"isBrowser",function(){return _}),n.d(e,"isBrowserExtension",function(){return y}),n.d(e,"isElectron",function(){return k}),n.d(e,"isEmpty",function(){return K}),n.d(e,"isIE",function(){return C}),n.d(e,"isIndexedDBAvailable",function(){return x}),n.d(e,"isMobileCordova",function(){return b}),n.d(e,"isNode",function(){return v}),n.d(e,"isNodeSdk",function(){return E}),n.d(e,"isReactNative",function(){return w}),n.d(e,"isSafari",function(){return O}),n.d(e,"isUWP",function(){return A}),n.d(e,"isValidFormat",function(){return V}),n.d(e,"isValidTimestamp",function(){return L}),n.d(e,"issuedAtTime",function(){return B}),n.d(e,"jsonEval",function(){return j}),n.d(e,"map",function(){return H}),n.d(e,"ordinal",function(){return dt}),n.d(e,"querystring",function(){return $}),n.d(e,"querystringDecode",function(){return Q}),n.d(e,"safeGet",function(){return z}),n.d(e,"stringLength",function(){return ct}),n.d(e,"stringToByteArray",function(){return at}),n.d(e,"stringify",function(){return M}),n.d(e,"validateArgCount",function(){return nt}),n.d(e,"validateCallback",function(){return ot}),n.d(e,"validateContextObject",function(){return st}),n.d(e,"validateIndexedDBOpenable",function(){return S}),n.d(e,"validateNamespace",function(){return it});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=(15&a)<<2|u>>6,h=63&u;c||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==c)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==c&&r.push(a<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return c.encodeByteArray(e,!0)},l=function(t){return u(t).replace(/\./g,"")},h=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function d(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var p=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function g(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function v(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function _(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function k(){return m().indexOf("Electron/")>=0}function C(){var t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A(){return m().indexOf("MSAppHost/")>=0}function E(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function O(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x(){return"indexedDB"in self&&null!=indexedDB}function S(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function T(){return!(!navigator||!navigator.cookieEnabled)}function I(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var P=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,D.prototype.create),o}return Object(r.__extends)(e,t),e}(Error),D=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?N(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",c=new P(i,a,r);return c},t}();function N(t,e){return t.replace(R,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var R=/\{\$([^}]+)}/g;function j(t){return JSON.parse(t)}function M(t){return JSON.stringify(t)}var F=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=j(h(o[0])||""),n=j(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},L=function(t){var e=F(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},B=function(t){var e=F(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},V=function(t){var e=F(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},U=function(t){var e=F(t).claims;return"object"==typeof e&&!0===e.admin};function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function K(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function H(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function W(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,o=n;i<o.length;i++){if(!r.includes(l=o[i]))return!1;var s=t[l],a=e[l];if(G(s)&&G(a)){if(!W(s,a))return!1}else if(s!==a)return!1}for(var c=0,u=r;c<u.length;c++){var l;if(!n.includes(l=u[c]))return!1}return!0}function G(t){return null!==t&&"object"==typeof t}function $(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function Q(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("="),r=n[1];e[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),e}function Y(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var J=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=u^a&(c^u),o=1518500249):(i=a^c^u,o=1859775393):r<60?(i=a&c|u&(a|c),o=2400959708):(i=a^c^u,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=u,u=c,c=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function X(t,e){var n=new Z(t,e);return n.subscribe.bind(n)}var Z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=et),void 0===r.error&&(r.error=et),void 0===r.complete&&(r.complete=et);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function tt(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function et(){}var nt=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function rt(t,e){return t+" failed: "+e+" argument "}function it(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(rt(t,"namespace")+"must be a valid firebase namespace.")}function ot(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(rt(t,e)+"must be a valid function.")}function st(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(rt(t,e)+"must be a valid context object.")}var at=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ct=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},ut=144e5,lt=.5;function ht(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(lt*r*(Math.random()-.5)*2);return Math.min(ut,r+i)}function dt(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):""+t}function ft(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return c});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),c=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof s?c(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},sVev:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})()},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return O}),n.d(e,"b",function(){return _}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return b}),n.d(e,"f",function(){return A}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return k});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),c=n("fXoL"),u=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),b=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new c.q("angularfire2.app.options"),_=new c.q("angularfire2.app.nameOrConfig"),y=new c.O("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=u.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>u.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const k=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(c.U)()&&"undefined"!=typeof console&&console[t](...e)};function A(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(c){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[v,c.z,[new c.A,_]]};let O=(()=>{class t{constructor(t){u.a.registerVersion("angularfire",y.full,t.toString()),u.a.registerVersion("angular",c.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)(c.Rb(c.B))},providers:[E]}),t})()}).call(this,n("3UD+")(t))},t6oF:function(t,e,n){"use strict";var r=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Ra(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Ra(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self,c=/^[\w+/_-]+[=]{0,2}$/,u=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function h(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==d(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++v)}var b="closure_uid_"+(1e9*Math.random()>>>0),v=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:y).apply(null,arguments)}function k(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now;function A(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function O(t,e,n){this.code=T+t,this.message=e||I[t]||"",this.a=n||null}function x(t){var e=t&&t.code;return e?new O(e.substring(T.length),t.message,t.serverResponse):null}A(O,Error),O.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},O.prototype.toJSON=function(){return this.w()};var S,T="auth/",I={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function N(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function j(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function M(t,e){throw new j("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function B(){this.b=this.a=null}S=D("__EID__")?"__EID__":void 0,A(R,Error),R.prototype.name="CustomError",A(j,R),j.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new F(function(){return new q},function(t){t.reset()});function U(){var t=ve,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}B.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var z=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function $(t,e){return 0<=z(t,e)}function Q(t,e){var n;return(n=0<=(e=z(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function J(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function dt(t){return ct(Z,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===Ct&&e||"",this.b=kt}function yt(t){return t instanceof _t&&t.constructor===_t&&t.b===kt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ta=!0,_t.prototype.sa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,kt={},Ct={};function At(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function Et(t,e){this.a=e===It?t:""}function Ot(t){return t instanceof Et&&t.constructor===Et?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function xt(t,e){var n=yt(t);if(!Tt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=At();return new Et(t=e?e.createScriptURL(t):t,It)}(t=n.replace(St,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?yt(t):encodeURIComponent(String(t))}))}Et.prototype.ta=!0,Et.prototype.sa=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={};function Pt(t,e){this.a=e===Lt?t:""}function Dt(t){return t instanceof Pt&&t.constructor===Pt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Pt.prototype.ta=!0,Pt.prototype.sa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,jt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Pt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),jt.test(t))t=new Pt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Nt.test(e[1])?new Pt(t,Lt):null}return t}function Ft(t){return t instanceof Pt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),jt.test(t)||(t="about:invalid#zClosurez"),new Pt(t,Lt))}var Lt={},Bt=new Pt("about:invalid#zClosurez",Lt);function Vt(t,e,n){this.a=n===Ut?t:""}Vt.prototype.ta=!0,Vt.prototype.sa=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function qt(t,e,n,r){return t=t instanceof Pt?t:Ft(t),e=e||a,n=n instanceof _t?yt(n):n||"",e.open(Dt(t),n,r,void 0)}function zt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Kt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ht[" "]=h;var Wt,Gt,$t=dt("Opera"),Qt=dt("Trident")||dt("MSIE"),Yt=dt("Edge"),Jt=Yt||Qt,Xt=dt("Gecko")&&!(ct(Z.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),Zt=ct(Z.toLowerCase(),"webkit")&&!dt("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Gt=Z,Xt?/rv:([^\);]+)(\)|;)/.exec(Gt):Yt?/Edge\/([\d\.]+)/.exec(Gt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Zt?/WebKit\/(\S+)/.exec(Gt):$t?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ne&&(ee=ne?ne[1]:""),Qt){var re=te();if(null!=re&&re>parseFloat(ee)){Wt=String(re);break t}}Wt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var se=a.document&&Qt&&(te()||parseInt(Wt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!Qt||9<=Number(se);function ce(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}K(s?X(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function me(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(_e)}}else he=function(){var t=_e;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!dt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),be||(he(),be=!0),ve.add(t,e)}var be=!1,ve=new B;function _e(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){ge(e)}L(V,t)}be=!1}function ye(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Re(n,ke,t)},function(t){if(!(t instanceof Ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Re(n,Ce,t)})}catch(r){Re(this,Ce,r)}}var we=0,ke=2,Ce=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new F(function(){return new Ae},function(t){t.reset()});function Oe(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function xe(t){if(t instanceof ye)return t;var e=new ye(h);return Re(e,ke,t),e}function Se(t){return new ye(function(e,n){n(t)})}function Te(t,e,n){je(t,e,n,null)||me(k(e,t))}function Ie(t){return new ye(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Te(t[o],k(i,o,!0),k(i,o,!1));else e(r)})}function Pe(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),Le(n,i,Ce,e)))}t.c=null}else Re(t,Ce,e)}function De(t,e){t.b||t.a!=ke&&t.a!=Ce||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,e,n,r){var i=Oe(null,null,null);return i.a=new ye(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ue?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,De(t,i),i.a}function Re(t,e,n){t.a==we&&(t===n&&(e=Ce,n=new TypeError("Promise cannot resolve to itself")),t.a=1,je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ce||n instanceof Ue||function(t,e){t.g=!0,me(function(){t.g&&Ve.call(null,e)})}(t,n)))}function je(t,e,n,r){if(t instanceof ye)return De(t,Oe(e||h,n||null,r)),!0;if(N(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,me(t.gc,t))}function Fe(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Le(t,e,n,r){if(n==Ce&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Be(e,n,r);else try{e.c?e.g.call(e.f):Be(e,n,r)}catch(i){Ve.call(null,i)}L(Ee,e)}function Be(t,e,n){e==ke?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ye.prototype.then=function(t,e,n){return Ne(this,p(t)?t:null,p(e)?e:null,n)},ye.prototype.$goog_Thenable=!0,(t=ye.prototype).oa=function(t,e){return(t=Oe(t,t,e)).c=!0,De(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Ue(t);me(function(){Pe(this,e)},this)}},t.$c=function(t){this.a=we,Re(this,ke,t)},t.ad=function(t){this.a=we,Re(this,Ce,t)},t.gc=function(){for(var t;t=Fe(this);)Le(this,t,this.a,this.i);this.h=!1};var Ve=ge;function Ue(t){R.call(this,t)}function qe(){0!=ze&&(Ke[m(this)]=this),this.ya=this.ya,this.pa=this.pa}A(Ue,R),Ue.prototype.name="cancel";var ze=0,Ke={};function He(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=ze)){var e=m(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ke[e]}}qe.prototype.ya=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Ge=!Qt||9<=Number(se),$e=Qt&&!oe("9"),Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Je(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},A(Je,Ye);var Xe=We({2:"touch",3:"pen",4:"mouse"});Je.prototype.preventDefault=function(){Je.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Je.prototype.g=function(){return this.a};var Ze="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++tn,this.wa=this.Qa=!1}function nn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new en(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),cn={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=yn(n),t&&t[Ze]?kn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=vn(t);if(a||(t[an]=a=new rn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=bn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=yn(n),t&&t[Ze]?Cn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=yn(n),t&&t[Ze]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=vn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Ze])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(on(n,t),0==n.b&&(n.src=null,e[an]=null)):nn(t)}}}function pn(t){return t in cn?cn[t]:cn[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=vn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&fn(t),n.call(r,e)}function bn(t,e){if(t.wa)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Je(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Je(e,this))}function vn(t){return(t=t[an])instanceof rn?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(t){return p(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function wn(){qe.call(this),this.v=new rn(this),this.bc=this,this.hb=null}function kn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Cn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,c=s.Wa||s.src;s.Qa&&on(t.v,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function On(t){var e=null;return new ye(function(n,r){-1==(e=En(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function xn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Tn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Tn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function In(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}A(wn,qe),wn.prototype[Ze]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;bt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=An(s,r,!0,t)&&i}if(i=An(s=t.b=n,r,!0,t)&&i,i=An(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Tn.prototype).X=function(){In(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return In(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Nn?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,jn(this,t.g),this.f=t.f,Mn(this,er(t.b)),this.h=t.h):t&&(n=String(t).match(Dn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),jn(this,n[4]),this.f=Un(n[5]||"",!0),Mn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Rn(t,e,n){t.c=n?Un(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Mn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),tr(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Gn)),t.b=new Qn(e,t.i))}function Fn(t,e,n){t.b.set(e,n)}function Ln(t,e){return t.b.get(e)}function Bn(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function Vn(t,e,n,r){var i=new Nn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&jn(i,n),r&&(i.f=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Wn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,$n)),t.join("")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)jn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Mn(e,er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,Hn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,$n=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new Tn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Jn(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=xn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function Xn(t,e){Yn(t),e=nr(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&In(t)))}function Zn(t,e){return Yn(t),e=nr(t,e),Pn(t.a.b,e)}function tr(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(nr(t,e),X(n)),t.b+=n.length)}function er(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new Tn(t.a),e.b=t.b),e}function nr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rr(t){var e=[];return or(new ir,t,e),e.join("")}function ir(){}function or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),cr(r,n),n.push(":"),or(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":cr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){Yn(this),this.c=null,t=nr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach(function(n,r){K(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Yn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Yn(this);var e=[];if("string"==typeof t)Zn(this,t)&&(e=J(e,this.a.get(nr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Zn(this,t=nr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function cr(t,e){e.push('"',t.replace(ar,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function ur(){var t=Tr();return Qt&&!!se&&11==se||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=Dt(Mt(t)||Bt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Tr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(e){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Tr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Or(Tr())==Ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Mt(void 0!==n.href?n.href:String(n))||Bt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Pt?e:Ft(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=qt("",r,n,s),t=Dt(e),s&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Kt(t)+'">',t=new Vt(t=(r=At())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}(t)),r.close())):(s=qt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function vr(){var t=null;return new ye(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).o(function(e){throw dn(window,"load",t),e})}function _r(t){return t=t||Tr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function kr(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Cr(){var t=kr();return"ReactNative"===t||"Node"===t}var Ar="Firefox",Er="Chrome";function Or(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Ar:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var xr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in xr)i[xr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=kr())?r=Or(i=Tr()):"Worker"===r&&(r=Or(i=Tr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Tr(){return a.navigator&&a.navigator.userAgent||""}function Ir(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=a.localStorage,e=Br();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(n){return wr()&&!!a.indexedDB}return!1}function Dr(){return(Nr()||"chrome-extension:"===Rr()||_r())&&!Cr()&&Pr()&&!wr()}function Nr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return a.location&&a.location.protocol||null}function jr(t){return!fr(t=t||Tr())&&Or(t)!=Ar}function Mr(t){return void 0===t?null:rr(t)}function Fr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Lr(t){if(null!==t)return JSON.parse(t)}function Br(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Or(t=t||Tr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Tr(),e=kr(),this.b=fr(t)||"ReactNative"===e}function zr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Hr(){return!(!Ir("fireauth.oauthhelper",a)&&!Ir("fireauth.iframe",a))}qr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Nr()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function $r(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Qr.abcd}catch(Gt){Wr=!1}function Yr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function Xr(t){var e={};return Jr(e,t),e}function Zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,Zr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new O("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ii]),Yr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ei(t){try{var e=new si(t)}catch(n){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function si(t){ti.call(this,t),Yr(this,"phoneNumber",t[oi])}function ai(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ei(t[di]),!i||i!=ui&&i!=li&&!n||i==li&&!r||i==ci&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[mi]=n||null,e[vi]=n||null,e[gi]=r):(e[mi]=r||null,e[vi]=r||null,e[gi]=n||null),e[bi]=t||null,Yr(this,yi,i),Yr(this,_i,Zr(e))}A(si,ti),si.prototype.w=function(){var t=si.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ci="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",hi="email",di="mfaInfo",fi="newEmail",pi="requestType",gi="email",mi="fromEmail",bi="multiFactorInfo",vi="previousEmail",_i="data",yi="operation";function wi(t){var e=Ln(t=Bn(t),ki)||null,n=Ln(t,Ci)||null,r=Ln(t,Oi)||null;if(r=r&&Si[r]||null,!e||!n||!r)throw new O("argument-error",ki+", "+Ci+"and "+Oi+" are required in a valid action code URL.");Jr(this,{apiKey:e,operation:r,code:n,continueUrl:Ln(t,Ai)||null,languageCode:Ln(t,Ei)||null,tenantId:Ln(t,xi)||null})}var ki="apiKey",Ci="oobCode",Ai="continueUrl",Ei="languageCode",Oi="mode",xi="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:ui,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ti(t){try{return new wi(t)}catch(e){return null}}function Ii(t){var e=t[ji];if(void 0===e)throw new O("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new O("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Li];var r=n[Mi];if(n=n[Fi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new O("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new O("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new O("argument-error",Li+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new O("missing-android-pkg-name")}}else if(void 0!==n)throw new O("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Bi])&&e.length)this.f=e;else if(void 0!==e)throw new O("argument-error",Bi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new O("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Ni])&&"boolean"!=typeof e)throw new O("argument-error",Ni+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Di])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new O("argument-error",Di+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Di="dynamicLinkDomain",Ni="handleCodeInApp",Ri="iOS",ji="url",Mi="installApp",Fi="minimumVersion",Li="packageName",Bi="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ui=null;function qi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new qi(t)}catch(e){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(c){}return null}qi.prototype.T=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Wi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Wi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Wi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Hi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Ji];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Xi(t)}catch(r){}return null}var Yi="idToken",Ji="providerId";function Xi(t){var e=t[Ji];if(!e&&t[Yi]){var n=zi(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){Xi.call(this,t),Yr(this,"profile",Zr((t=Lr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=Bn(t),n=Ln(e,"link"),r=Ln(Bn(n),"link");return e=Ln(e,"deep_link_id"),Ln(Bn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new O("internal-error","Internal assert: no raw session string available");if(t&&e)throw new O("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}A(Zi,Xi),A(to,Zi),A(eo,Zi),A(no,Zi),A(ro,Zi);var so="enroll",ao="signin";function co(){}function uo(t,e){return t.then(function(t){if(t[Ys]){var n=zi(t[Ys]);if(!n||e!=n.i)throw new O("user-mismatch");return t}throw new O("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new O("user-mismatch"):t})}function lo(t,e){if(!e)throw new O("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new O("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function bo(t,e){this.Qc=e||[],Jr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=($i(t)||{}).Ja||null,this.pb=null}function vo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new O("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function _o(t){bo.call(this,t,Wi),this.a=[]}function yo(){_o.call(this,"facebook.com")}function wo(t){if(!t)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new yo).credential({accessToken:e})}function ko(){_o.call(this,"github.com")}function Co(t){if(!t)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new ko).credential({accessToken:e})}function Ao(){_o.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function Oo(){bo.call(this,"twitter.com",Hi)}function xo(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new O("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function So(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Io.EMAIL_LINK_SIGN_IN_METHOD?Io.EMAIL_LINK_SIGN_IN_METHOD:Io.EMAIL_PASSWORD_SIGN_IN_METHOD)}function To(t){return t&&t.email&&t.password?new So(t.email,t.password,t.signInMethod):null}function Io(){Jr(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=Do(e)))throw new O("argument-error","Invalid email link!");return new So(t,e.code,Io.EMAIL_LINK_SIGN_IN_METHOD)}function Do(t){return(t=Ti(t=io(t)))&&t.operation===ui?t:null}function No(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new O("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new No(e)}return null}function jo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Mo(t){try{this.a=t||r.default.auth()}catch(e){throw new O("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new O("missing-verification-id");if(!e)throw new O("missing-verification-code");return new No({fb:t,eb:e})}function Lo(t){if(t.temporaryProof&&t.phoneNumber)return new No({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return wo(n);case"github.com":return Co(n);case"twitter.com":return xo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Bo(t){if(!t.isOAuthProvider)throw new O("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new O("invalid-auth-event");if(this.g&&this.a)throw new O("invalid-auth-event");if(this.g&&!this.f)throw new O("invalid-auth-event")}function Uo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&x(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return xe(this.a?this.a:this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},co.prototype.ka=function(){},co.prototype.b=function(){},co.prototype.c=function(){},co.prototype.w=function(){},lo.prototype.ka=function(t){return ba(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,va(t,n)},lo.prototype.c=function(t,e){return uo(_a(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ba(t,go(this))},po.prototype.b=function(t,e){var n=go(this);return n.idToken=e,va(t,n)},po.prototype.c=function(t,e){return uo(_a(t,go(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Jb=gt(t),this},A(vo,bo),A(_o,bo),_o.prototype.Ca=function(t){return $(this.a,t)||this.a.push(t),this},_o.prototype.Rb=function(){return X(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new O("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},A(yo,_o),Yr(yo,"PROVIDER_ID","facebook.com"),Yr(yo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),A(ko,_o),Yr(ko,"PROVIDER_ID","github.com"),Yr(ko,"GITHUB_SIGN_IN_METHOD","github.com"),A(Ao,_o),Yr(Ao,"PROVIDER_ID","google.com"),Yr(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),A(Oo,bo),Yr(Oo,"PROVIDER_ID","twitter.com"),Yr(Oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),So.prototype.ka=function(t){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?tc(t,xa,{email:this.a,oobCode:this.f}):tc(t,Qa,{email:this.a,password:this.f})},So.prototype.b=function(t,e){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?tc(t,Sa,{idToken:e,email:this.a,oobCode:this.f}):tc(t,Ua,{idToken:e,email:this.a,password:this.f})},So.prototype.c=function(t,e){return uo(this.ka(t),e)},So.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Jr(Io,{PROVIDER_ID:"password"}),Jr(Io,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Jr(Io,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),No.prototype.ka=function(t){return t.gb(jo(this))},No.prototype.b=function(t,e){var n=jo(this);return n.idToken=e,tc(t,Ja,n)},No.prototype.c=function(t,e){var n=jo(this);return n.operation="REAUTH",uo(t=tc(t,Xa,n),e)},No.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.gb=function(t,e){var n=this.a.a;return xe(e.verify()).then(function(r){if("string"!=typeof r)throw new O("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then(function(t){return function(t,e){return tc(t,za,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==ao?i.Ha().then(function(e){return function(t,e){return tc(t,Ka,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return tc(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new O("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Jr(Mo,{PROVIDER_ID:"phone"}),Jr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Ko=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Bn(t);t=r.a,"chrome-extension"==(r=r.c)?n=zt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=zt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",O.call(this,e,n)}function Wo(t,e,n){O.call(this,t,n),(t=e||{}).Kb&&Yr(this,"email",t.Kb),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.$b&&Yr(this,"tenantId",t.$b)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:Lo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new O(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function $o(){}function Qo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Tb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}A(Ho,O),A(Wo,O),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&bt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,A(Qo,$o),Qo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},zo=new Qo,A(Jo,$o),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Xo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Xo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){r||C(),delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(M("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},us=null;function ls(t){var e;if(us||(us=new es(""),cs[""]=us,us.c=os),!(e=cs[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function ds(t){this.f=t}function fs(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A(ds,$o),ds.prototype.a=function(){return new fs(this.f)},ds.prototype.b=function(t){return function(){return t}}({}),A(fs,wn);var ps=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,bs(t)}function bs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function vs(t){wn.call(this),this.headers=new Tn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=_s,this.u=this.S=!1}(t=fs.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,bs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=ps},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,bs(this)),this.a&&(this.readyState=3,bs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):bs(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Va=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),A(vs,wn);var _s="";vs.prototype.b=ls("goog.net.XhrIo");var ys=/^https?$/i,ws=["POST","PUT"];function ks(t){return"content-type"==t.toLowerCase()}function Cs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,As(t),Os(t)}function As(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Es(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Ss(t)&&2==Ts(t))hs(t.b,Is(t,"Local request error detected and ignored"));else if(t.i&&4==Ss(t))En(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ss(t)){hs(t.b,Is(t,"Request complete")),t.c=!1;try{var e,n=Ts(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Dn)[1]||null;if(!o&&a.self&&a.self.location){var c=a.self.location.protocol;o=c.substr(0,c.length-1)}i=!ys.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var u=2<Ss(t)?t.a.statusText:""}catch(l){hs(t.b,"Can not get status: "+l.message),u=""}t.h=u+" ["+Ts(t)+"]",As(t)}}finally{Os(t)}}}function Os(t,e){if(t.a){xs(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function xs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Ss(t){return t.a?t.a.readyState:0}function Ts(t){try{return 2<Ss(t)?t.a.status:-1}catch(e){return-1}}function Is(t,e){return e+" ["+t.P+" "+t.l+" "+Ts(t)+"]"}function Ps(t){var e=qs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ds(t,e,n){t.a=!0,t.c=n,t.f=!e,Ms(t)}function Ns(t){if(t.a){if(!t.v)throw new Fs(t);t.v=!1}}function Rs(t,e,n,r){t.g.push([e,n,r]),t.a&&Ms(t)}function js(t){return G(t.g,function(t){return p(t[1])})}function Ms(t){if(t.h&&t.a&&js(t)){var e=t.h,n=Vs[e];n&&(a.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var c=o.call(i||t.s,e);void 0!==c&&(t.f=t.f&&(c==e||c instanceof Error),t.c=e=c),(N(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,js(t)||(n=!0)}}t.c=e,r&&(c=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ps?(Rs(e,c,r),e.C=!0):e.then(c,r)),n&&(e=new Bs(e),Vs[e.a]=e,t.h=e.a)}function Fs(){R.call(this)}function Ls(){R.call(this)}function Bs(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=vs.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,Is(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,Is(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Os(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Os(this,!0)),vs.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Es(this):this.Jc())},t.Jc=function(){Es(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return hs(this.b,"Can not get response: "+e.message),null}},Ps.prototype.cancel=function(t){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ls(this),Ns(this),Ds(this,!1,t))}},Ps.prototype.m=function(t,e){this.i=!1,Ds(this,t,e)},Ps.prototype.then=function(t,e,n){var r,i,o=new ye(function(t,e){r=t,i=e});return Rs(this,r,function(t){t instanceof Ls?o.cancel():i(t)}),o.then(t,e,n)},Ps.prototype.$goog_Thenable=!0,A(Fs,R),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",A(Ls,R),Ls.prototype.message="Deferred was canceled",Ls.prototype.name="CanceledError",Bs.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function Us(t){var e={},n=e.document||document,r=Ot(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Ps(o),c=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(c=window.setTimeout(function(){zs(i,!0);var t=new Ws(Hs,"Timeout reached for loading script "+r);Ns(s),Ds(s,!1,t)},h),o.Ma=c),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,e.xd||!1,c),Ns(s),Ds(s,!0,null))},i.onerror=function(){zs(i,!0,c);var t=new Ws(Ks,"Error while loading script "+r);Ns(s),Ds(s,!1,t)},bt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Ot(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===u&&(u=l(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function qs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ks=0,Hs=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Gs(t){this.f=t}function $s(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Js,this.g=gt(t.secureTokenHeaders||Xs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Zs,this.a=gt(t.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==kr(),!(n=a.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!wr())throw new O("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=wr()?new ds(self):Cr()?new Gs(n):new Jo,this.b=null}A(Ws,R),A(Gs,$o),Gs.prototype.a=function(){return new this.f},Gs.prototype.b=function(){return{}};var Qs,Ys="idToken",Js=new qr(3e4,6e4),Xs={"Content-Type":"application/x-www-form-urlencoded"},Zs=new qr(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e&&(t.l=ra("https://securetoken.googleapis.com/v1/token",e),t.h=ra("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ra("https://identitytoolkit.googleapis.com/v2/",e))}function ra(t,e){return t=Bn(t),e=Bn(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,jn(t,e.g),t.toString()}function ia(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function oa(t,e,n,r,i,o,s){(function(){var t=Tr();return!((t=Or(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&se&&!(9<se))})()||wr()?t=w(t.u,t):(Qs||(Qs=new ye(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Rs(t,null,e,void 0)}(Us(xt(sa,{onload:aa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=w(t.s,t)),t(e,n,r,i,o,s)}$s.prototype.T=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new O("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new vs(this.f);if(o){s.g=Math.max(0,o);var c=setTimeout(function(){s.dispatchEvent("timeout")},o)}kn(s,"complete",function(){c&&clearTimeout(c);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Cn(s,"ready",function(){c&&clearTimeout(c),He(this)}),Cn(s,"timeout",function(){c&&clearTimeout(c),He(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:zo),t.a.onreadystatechange=w(t.Wb,t);try{hs(t.b,Is(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return hs(t.b,Is(t,"Error opening Xhr: "+s.message)),void Cs(t,s)}e=r||"";var o=new Tn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)K(t,e,void 0);else for(var n=Sn(t),r=xn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=ks,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!$(ws,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{xs(t),0<t.g&&(t.u=function(t){return Qt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,Is(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=En(t.Ma,t.g,t)),hs(t.b,Is(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){hs(t.b,Is(t,"Send error: "+s.message)),Cs(t,s)}}(s,t,n,r,i)};var sa=new _t(Ct,"https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();function ca(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new O("invalid-email")}function ua(t){"email"in t&&ca(t)}function la(t){if(!t[Ys]){if(t.mfaPendingCredential)throw new O("multi-factor-auth-required",null,gt(t));throw new O("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new O("internal-error")}else{if(!t.sessionInfo)throw new O("missing-verification-id");if(!t.code)throw new O("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Qs.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},$s.prototype.Ab=function(){return tc(this,qa,{})},$s.prototype.Cb=function(t,e){return tc(this,Va,{idToken:t,email:e})},$s.prototype.Db=function(t,e){return tc(this,Ua,{idToken:t,password:e})};var da={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new O("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new O("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new O("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new O("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Zn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ma(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=ec(t.errorMessage)),e)throw e;la(t)}function ba(t,e){return e.returnIdpCredential=!0,tc(t,Ha,e)}function va(t,e){return e.returnIdpCredential=!0,tc(t,Ga,e)}function _a(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,tc(t,Wa,e)}function ya(t){if(!t.oobCode)throw new O("invalid-action-code")}(t=$s.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ft(da,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),tc(this,Va,n)},t.wb=function(t,e){return bt(t={requestType:"PASSWORD_RESET",email:t},e),tc(this,ja,t)},t.xb=function(t,e){return bt(t={requestType:"EMAIL_SIGNIN",email:t},e),tc(this,Da,t)},t.vb=function(t,e){return bt(t={requestType:"VERIFY_EMAIL",idToken:t},e),tc(this,Na,t)},t.Fb=function(t,e,n){return bt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),tc(this,Ra,t)},t.gb=function(t){return tc(this,Ya,t)},t.ob=function(t,e){return tc(this,La,{oobCode:t,newPassword:e})},t.Sa=function(t){return tc(this,ka,{oobCode:t})},t.kb=function(t){return tc(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:ya,Z:"email",B:!0},ka={endpoint:"resetPassword",A:ya,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new O("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(ca(t),!t.password)throw new O("weak-password")},G:la,V:!0,B:!0},Aa={endpoint:"createAuthUri",B:!0},Ea={endpoint:"deleteAccount",O:["idToken"]},Oa={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new O("internal-error")}},xa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ca,G:la,V:!0,B:!0},Sa={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ca,G:la,V:!0},Ta={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:fa,G:la,B:!0,Na:!0},Ia={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:la,B:!0,Na:!0},Pa={endpoint:"getAccountInfo"},Da={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new O("internal-error");ca(t)},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new O("internal-error")},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new O("internal-error")},Z:"email",B:!0},ja={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new O("internal-error");ca(t)},Z:"email",B:!0},Ma={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Fa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new O("internal-error")}},La={endpoint:"resetPassword",A:ya,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Va={endpoint:"setAccountInfo",O:["idToken"],A:ua,V:!0},Ua={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ua(t),!t.password)throw new O("weak-password")},G:la,V:!0},qa={endpoint:"signupNewUser",G:la,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new O("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new O("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},Ka={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},Ha={endpoint:"verifyAssertion",A:pa,Za:ga,G:ma,V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:pa,Za:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new O("user-not-found");if(t.errorMessage)throw ec(t.errorMessage);la(t)},V:!0,B:!0},Ga={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new O("internal-error")},Za:ga,G:ma,V:!0},$a={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new O("invalid-custom-token")},G:la,V:!0,B:!0},Qa={endpoint:"verifyPassword",A:function(t){if(ca(t),!t.password)throw new O("wrong-password")},G:la,V:!0,B:!0},Ya={endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Ja={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new O("internal-error");ha(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);la(t)}},Xa={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Za={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ys]^!!t.refreshToken)throw new O("internal-error")},B:!0,Na:!0};function tc(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Se(new O("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return xe(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Bn(e+n);Fn(a,"key",t.c),s&&Fn(a,"cb",Date.now().toString());var c="GET"==r;if(c)for(var u in i)i.hasOwnProperty(u)&&Fn(a,u,i[u]);return new ye(function(e,n){oa(t,a.toString(),function(t){t?t.error?n(nc(t,o||{})):e(t):n(new O("network-request-failed"))},r,c?void 0:rr(Fr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)}).then(function(t){return r=t,e.Za?e.Za(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new O("internal-error");return r[e.Z]})}function ec(t){return nc({error:{errors:[{message:t}],code:400,message:t}})}function nc(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new O(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",bt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new O(r[i],e);return!e&&t&&(e=Mr(t)),new O("internal-error",e)}function rc(t){this.b=t,this.a=null,this.sb=function(t){return(ac||(ac=new ye(function(t,e){function n(){Ur(),Ir("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:oc.get()})}if(Ir("gapi.iframes.Iframe"))t();else if(Ir("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ir("gapi.load")?n():e(Error("Network Error"))},xe(Us(r=xt(ic,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw ac=null,t}))).then(function(){return new ye(function(e,n){Ir("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},sc.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ic=new _t(Ct,"https://apis.google.com/js/api.js?onload=%{onload}"),oc=new qr(3e4,6e4),sc=new qr(5e3,15e3),ac=null;function cc(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=Bn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Fn(this.a,"apiKey",this.h),Fn(this.a,"appName",this.i),this.b=null,this.c=[]}function uc(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lc(t){try{return r.default.app(t).auth().Ga()}catch(e){return[]}}function hc(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function dc(t){var e=lr();return function(t){return tc(t,Ma,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Bn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Bn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:mr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(lr())})}function fc(t){return t.m||(t.m=vr().then(function(){if(!t.u){var e=t.c,n=t.i,r=lc(t.b),i=new cc(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new rc(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then(function(){t.a.register("authEvent",e,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Uo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",xe(n)}return n.status="ERROR",xe(n)})}(t)})),t.m}function pc(t){return t.l||(t.C=t.c?Sr(t.c,lc(t.b)):null,t.l=new $s(t.g,D(t.i),t.C),t.f&&na(t.l,t.f)),t.l}function gc(t,e,n,r,i,o,s,a,c,u,l,h){return(t=new uc(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(c||null),t.f=u,t.zb(l).toString()}function mc(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new O("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bc(t){this.b=t,this.a={},this.f=w(this.c,this)}cc.prototype.toString=function(){return this.f?Fn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Fn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Fn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},uc.prototype.zb=function(t){return this.h=t,this},uc.prototype.toString=function(){if(this.v){var t=Bn(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Fn(t,"apiKey",this.s),Fn(t,"appName",this.c),Fn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(c){n=null}for(var i in e.pb=n,Fn(t,"providerId",this.a.providerId),e=Fr((n=this.a).Jb))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),pt(e)||Fn(t,"customParameters",Mr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Fn(t,"scopes",n.join(",")),this.l?Fn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Fn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Fn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Ln(t,a)&&Fn(t,a,this.b[a]);return this.h?Fn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Fn(t,"eid",this.f):Xn(t.b,"eid"),(a=lc(this.c)).length&&Fn(t,"fw",a.join(",")),t.toString()},(t=hc.prototype).Pb=function(t,e,n){var r=new O("popup-closed-by-user"),i=new O("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fc(t).then(function(){return function(t,e){return t.sb.then(function(){return new ye(function(n){t.a.send(e.type,e,n,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&pr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new ye(function(e){return function n(){On(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return On(n).then(function(){e(r)})})},t.Yb=function(){var t=Tr();return!jr(t)&&!Vr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Se(new O("popup-blocked"));if(s&&!jr())return this.ma().o(function(e){pr(t),i(e)}),r(),xe();this.a||(this.a=dc(pc(this)));var c=this;return this.a.then(function(){var e=c.ma().o(function(e){throw pr(t),i(e),e});return r(),e}).then(function(){Bo(n),s||hr(gc(c.s,c.g,c.b,e,n,null,o,c.c,void 0,c.i,a,c.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(c.a=null),t})},t.Ob=function(t,e,n,r){this.a||(this.a=dc(pc(this)));var i=this;return this.a.then(function(){Bo(e),hr(gc(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fc(this).then(function(){return t.v.sb}).o(function(){throw t.a=null,new O("network-request-failed")})},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,function(e){return e==t})},(t=mc.prototype).get=function(t){return xe(this.a.getItem(t)).then(function(t){return t&&Lr(t)})},t.set=function(t,e){return xe(this.a.setItem(t,Mr(e)))},t.U=function(t){return xe(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var vc,_c=[];function yc(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wc(t){this.a=t}function kc(t){this.c=t,this.b=!1,this.a=[]}function Cc(t,e,n,r){var i,o,s,a,c=n||{},u=null;if(t.b)return Se(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ye(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(u={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:c},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Ac(t,u),e}).o(function(e){throw Ac(t,u),e})}function Ac(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Y(t.a,function(t){return t==e})}}function Ec(){if(!Tc())throw new O("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(K(_c,function(n){n.b==t&&(e=n)}),!e){var e=new bc(t);_c.push(e)}return e}(),yc(this.v,"keyChanged",function(e,n){return Rc(t).then(function(e){return 0<e.length&&K(t.a,function(t){t(e)}),{keyProcessed:$(e,n.key)}})}),yc(this.v,"ping",function(){return xe(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?xe().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):xe(null)}().then(function(e){(t.h=e)&&(t.g=new kc(new wc(e)),Cc(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&$(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Oc(t){return new ye(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new ye(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Oc(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function xc(t){return t.i||(t.i=Oc(t)),t.i}function Sc(t,e){var n=0;return new ye(function r(i,o){xc(t).then(e).then(i).o(function(e){if(!(3<++n))return xc(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function Tc(){try{return!!a.indexedDB}catch(Gt){return!1}}function Ic(t){return t.objectStore("firebaseLocalStorage")}function Pc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Dc(t){return new ye(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Nc(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cc(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):xe()}function Rc(t){return xc(t).then(function(t){var e=Ic(Pc(t,!1));return e.getAll?Dc(e.getAll()):new ye(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r})}function jc(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=xe().then(function(){if(Tc()){var t=Br(),r="__sak"+t;return vc||(vc=new Ec),(n=vc).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){K(e.a,function(e){e(t)})}),t})}function Fc(){this.a={},this.type="inMemory"}function Lc(){if(!function(){var t="Node"==kr();if(!(t=Bc()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==kr())throw new O("internal-error","The LocalStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.a=Bc()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function Bc(){try{var t=a.localStorage,e=Br();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Vc(){this.type="nullStorage"}function Uc(){if(!function(){var t="Node"==kr();if(!(t=qc()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==kr())throw new O("internal-error","The SessionStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.a=qc()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qc(){try{var t=a.sessionStorage,e=Br();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zc(){var t={};t.Browser=Wc,t.Node=Gc,t.ReactNative=$c,t.Worker=Qc,this.a=t[kr()]}bc.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,function(e){i.push(xe().then(function(){return e(t.origin,t.data.data)}))}),Ie(i).then(function(r){var i=[];K(r,function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})}),K(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},wc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},kc.prototype.close=function(){for(;0<this.a.length;)Ac(this,this.a[0]);this.b=!0},(t=Ec.prototype).set=function(t,e){var n=this,r=!1;return Sc(this,function(e){return Dc((e=Ic(Pc(e,!0))).get(t))}).then(function(i){return Sc(n,function(o){if(o=Ic(Pc(o,!0)),i)return i.value=e,Dc(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Dc(o.add(s))})}).then(function(){return n.c[t]=e,Nc(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return Sc(this,function(e){return Dc(Ic(Pc(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Sc(this,function(r){return n=!0,e.b++,Dc(Ic(Pc(r,!0)).delete(t))}).then(function(){return delete e.c[t],Nc(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){jc(t),function e(){t.f=setTimeout(function(){t.l=Rc(t).then(function(e){0<e.length&&K(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t}),0==this.a.length&&jc(this)},(t=Mc.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t})},(t=Fc.prototype).get=function(t){return xe(this.a[t])},t.set=function(t,e){return this.a[t]=e,xe()},t.U=function(t){return delete this.a[t],xe()},t.ca=function(){},t.ia=function(){},(t=Lc.prototype).get=function(t){var e=this;return xe().then(function(){return Lr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return xe().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return xe().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&dn(a.window,"storage",t)},(t=Vc.prototype).get=function(){return xe(null)},t.set=function(){return xe()},t.U=function(){return xe()},t.ca=function(){},t.ia=function(){},(t=Uc.prototype).get=function(t){var e=this;return xe().then(function(){return Lr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return xe().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return xe().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Kc,Hc,Wc={F:Lc,cb:Uc},Gc={F:Lc,cb:Uc},$c={F:mc,cb:Vc},Qc={F:Lc,cb:Vc},Yc={rd:"local",NONE:"none",td:"session"};function Jc(){var t=!(Vr(Tr())||!yr()),e=jr(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},Kc||(Kc=new zc),t=Kc;try{this.g=!ur()&&Hr()||!a.indexedDB?new t.a.F:new Mc(wr()?new Fc:new t.a.F)}catch(r){this.g=new Fc,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Fc}this.v=new Fc,this.f=w(this.Zb,this),this.b={}}function Xc(){return Hc||(Hc=new Jc),Hc}function Zc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function tu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function eu(t,e,n){return n=tu(e,n),"local"==e.F&&(t.b[n]=null),Zc(t,e.F).U(n)}function nu(t){t.c&&(clearInterval(t.c),t.c=null)}function ru(t){this.a=t,this.b=Xc()}(t=Jc.prototype).get=function(t,e){return Zc(this,t.F).get(tu(t,e))},t.set=function(t,e,n){var r=tu(t,n),i=this,o=Zc(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=tu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(Zc(this,"local").ca(this.f),this.h||(ur()||!Hr())&&a.indexedDB||!this.l||function(t){nu(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Je({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tu(t,e),this.a[t]&&(Y(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Zc(this,"local").ia(this.f),nu(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Zc(this,"local").ia(this.f):nu(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},Qt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,w(this.nb,this))},t.nb=function(t){this.a[t]&&K(this.a[t],function(t){t()})};var iu,ou={name:"authEvent",F:"local"};function su(){this.a=Xc()}function au(t,e){this.b=cu,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===iu&&(iu=a.Int32Array?new Int32Array(gu):gu),this.reset()}A(au,function(){this.b=-1});for(var cu=64,uu=cu-1,lu=[],hu=0;hu<uu;hu++)lu[hu]=0;var du=J(128,lu);function fu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],c=0|t.a[3],u=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((s=(s=u&l^~u&h)+(0|iu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=u,u=c+s|0,c=a,a=i,i=r,r=s+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+c|0,t.a[4]=t.a[4]+u|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fu(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fu(t),i=0)}}t.c=i,t.g+=n}au.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):X(this.h)};var gu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mu(){au.call(this,8,bu)}A(mu,au);var bu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function vu(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new su,this.g=new ru(this.h),this.f=null,this.b=[],this.a=this.c=null}function _u(t){return new O("invalid-cordova-configuration",t)}function yu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function wu(t){return t.f||(t.f=t.ma().then(function(){return new ye(function(e){t.Ea(function n(r){return e(r),t.Ta(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),ku(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Lr(Ln(o=Bn(i),"firebaseError")||null))?x(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}yu(t,i)})}var n=new Vo("unknown",null,null,null,new O("no-auth-event")),r=!1,i=On(500).then(function(){return ku(t).then(function(){r||yu(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ir("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ko||(Ko=new qo),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ir("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function ku(t){var e=null;return function(t){return t.b.get(ou,t.a).then(function(t){return Uo(t)})}(t.g).then(function(n){return e=n,eu((n=t.g).b,ou,n.a)}).then(function(){return e})}function Cu(t){this.a=t,this.b=Xc()}(t=vu.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(_r(void 0)?vr().then(function(){return new ye(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Se(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ir("universalLinks.subscribe",a))throw _u("cordova-universal-links-plugin-fix is not installed");if(void 0===Ir("BuildInfo.packageName",a))throw _u("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ir("cordova.plugins.browsertab.openUrl",a))throw _u("cordova-plugin-browsertab is not installed");if("function"!=typeof Ir("cordova.InAppBrowser.open",a))throw _u("cordova-plugin-inappbrowser is not installed")},function(){throw new O("cordova-not-ready")})},t.Pb=function(t,e){return e(new O("operation-not-supported-in-this-environment")),xe()},t.Nb=function(){return Se(new O("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Se(new O("redirect-operation-pending"));var i=this,o=a.document,s=null,c=null,u=null,l=null;return this.c=xe().then(function(){return Bo(e),wu(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new O("no-auth-event"),null,i),c=Ir("BuildInfo.packageName",a);if("string"!=typeof c)throw new O("invalid-cordova-configuration");var u=Ir("BuildInfo.displayName",a),l={};if(Tr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=c;else{if(!Tr().toLowerCase().match(/android/))return Se(new O("operation-not-supported-in-this-environment"));l.apn=c}u&&(l.appDisplayName=u),o=function(t){var e=new mu;pu(e,t),t=[];var n=8*e.g;pu(e,du,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=gc(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ou,s.w(),e)}).then(function(){var e=Ir("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new O("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ir("cordova.plugins.browsertab.openUrl",a)))throw new O("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ir("cordova.InAppBrowser.open",a)))throw new O("invalid-cordova-configuration");e=Tr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new ye(function(t,e){c=function(){var e=Ir("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(c),l=function(){zr()&&u()},o.addEventListener("resume",u=function(){s||(s=On(2e3).then(function(){e(new O("redirect-cancelled-by-user"))}))},!1),Tr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return ku(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),c&&i.Ta(c),i.c=null})},t.Ea=function(t){this.b.push(t),wu(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new O("no-auth-event")),t(e))})},t.Ta=function(t){Y(this.b,function(e){return e==t})};var Au={name:"pendingRedirect",F:"session"};function Eu(t){return eu(t.b,Au,t.a)}function Ou(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Uu,this.C=new Wu,this.g=new Cu(Bu(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=xu(this.D,this.v,this.m,S,this.J)}function xu(t,e,n,i,o){var s=r.default.SDK_VERSION||null;return _r()?new vu(t,e,n,s,i,o):new hc(t,e,n,s,i,o)}function Su(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Tu(t){t.a.Yb()&&Su(t).o(function(e){var n=new Vo("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));ju(e)&&t.s(n)}),t.a.Ub()||qu(t.b)}function Iu(t,e){$(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Au,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Eu(t.g).then(function(){Su(t).o(function(e){var n=new Vo("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));ju(e)&&t.s(n)})}):Tu(t)}).o(function(){Tu(t)})}function Pu(t,e){Y(t.h,function(t){return t==e})}Ou.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=xu(this.D,this.v,this.m,null,this.J),this.i={}},Ou.prototype.s=function(t){if(!t)throw new O("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return qu(this.b),e};var Du=new qr(2e3,1e4),Nu=new qr(3e4,6e4);function Ru(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function ju(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mu(t,e,n,r,i){var o;return function(t){return t.b.set(Au,"pending",t.a)}(t.g).then(function(){return t.a.Ob(e,n,r,i).o(function(e){if(ju(e))throw new O("operation-not-supported-in-this-environment");return o=e,Eu(t.g).then(function(){throw o})}).then(function(){return t.a.ac()?new ye(function(){}):Eu(t.g).then(function(){return t.ra()}).then(function(){}).o(function(){})})})}function Fu(t,e,n,r,i){return t.a.Pb(r,function(t){e.na(n,null,t,i)},Du.get())}Ou.prototype.ra=function(){return this.b.ra()};var Lu={};function Bu(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vu(t,e,n,r){var i=Bu(e,n,r);return Lu[i]||(Lu[i]=new Ou(t,e,n,r)),Lu[i]}function Uu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function qu(t){t.g||(t.g=!0,Hu(t,!1,null,null))}function zu(t){t.g&&!t.i&&Hu(t,!1,null,null)}function Ku(t,e){if(t.b=function(){return xe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Hu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Se(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Ku(t,n):Ku(t,{user:null}),t.f=[],t.c=[]}function Wu(){}function Gu(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function $u(t,e){this.a=e,Yr(this,"verificationId",t)}function Qu(t,e,n,r){return new Mo(t).gb(e,n).then(function(t){return new $u(t,r)})}function Yu(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new O("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Jr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Ju(t,e,n){var r=e&&e[Zu];if(!r)throw new O("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;K(e[Xu]||[],function(t){(t=ei(t))&&i.b.push(t)}),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}Uu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Uu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Hu(this,!0,null,t.a),xe()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){Hu(t,a,e,null)}).o(function(e){Hu(t,a,null,e)})}(this,t,e):Se(new O("invalid-auth-event")):(Hu(this,!1,null,null),xe())}else Se(new O("invalid-auth-event"))},Uu.prototype.ra=function(){var t=this;return new ye(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new O("timeout");t.a&&t.a.cancel(),t.a=On(Nu.get()).then(function(){t.b||(t.g=!0,Hu(t,!0,null,e))})}(t))})},Wu.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),xe()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):Se(new O("invalid-auth-event"))}else Se(new O("invalid-auth-event"))},$u.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var Xu="mfaInfo",Zu="mfaPendingCredential";function tl(t,e,n,r){O.call(this,"multi-factor-auth-required",r,e),this.b=new Ju(t,e,n),Yr(this,"resolver",this.b)}function el(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tl(e,t.serverResponse,n,t.message)}catch(r){}return null}function nl(){}function rl(t){Yr(this,"factorId",t.fa),this.a=t}function il(t){if(rl.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new O("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ol(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function sl(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new si(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),al(this,n)}function al(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function cl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ul(t,e){t.stop(),t.b=On(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return zr()||!t?xe():new ye(function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){ul(t,!0)}).o(function(e){t.i(e)&&ul(t,!1)})}function ll(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function dl(t,e){t.b=zi(e[Ys]||""),t.a=e.refreshToken,hl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fl(t,e){this.a=t||null,this.b=e||null,Jr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function pl(t,e,n,r,i,o){Jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?Sr(r.default.SDK_VERSION):null;this.a=new $s(this.l,D(S),i),(this.u=t.emulatorConfig||null)&&na(this.a,this.u),this.h=new ll(this.a),Al(this,e[Ys]),dl(this.h,e),Yr(this,"refreshToken",this.h.a),xl(this,n||{}),wn.call(this),this.P=!1,this.s&&Dr()&&(this.b=Vu(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new cl(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0})}(this),this.ba=w(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){ml(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){_l(o,t.f)},this.ja=null,this.S=new sl(this,n),Yr(this,"multiFactor",this.S)}function ml(t,e){t.u=e,na(t.a,e),t.b&&(e=t.b,t.b=Vu(t.s,t.l,t.m,t.u),t.P&&(Pu(e,t),Iu(t.b,t)))}function bl(t,e){t.qa&&dn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&un(e,"languageCodeChanged",t.Pa)}function vl(t,e){t.$&&dn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&un(e,"emulatorConfigChanged",t.Ba)}function _l(t,e){t.aa=e,ia(t.a,r.default.SDK_VERSION?Sr(r.default.SDK_VERSION,t.aa):null)}function yl(t,e){t.ja&&dn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&un(e,"frameworkChanged",t.Oa)}function wl(t){try{return r.default.app(t.m).auth()}catch(e){throw new O("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kl(t){t.J||t.D.b||(t.D.start(),dn(t,"tokenChanged",t.ba),un(t,"tokenChanged",t.ba))}function Cl(t){dn(t,"tokenChanged",t.ba),t.D.stop()}function Al(t,e){t.Aa=e,Yr(t,"_lat",e)}function El(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ie(e).then(function(){return t})}function Ol(t){t.b&&!t.P&&(t.P=!0,Iu(t.b,t))}function xl(t,e){Jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Sl(){}function Tl(t){return xe().then(function(){if(t.J)throw new O("app-deleted")})}function Il(t){return W(t.providerData,function(t){return t.providerId})}function Pl(t,e){e&&(Dl(t,e.providerId),t.providerData.push(e))}function Dl(t,e){Y(t.providerData,function(t){return t.providerId==e})}function Nl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Rl(t,e){t!=e&&(Jr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Yr(t,"metadata",e.metadata?function(t){return new fl(t.a,t.b)}(e.metadata):new fl),K(e.providerData,function(e){Pl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Yr(t,"refreshToken",t.h.a),al(t.S,e.S.b))}function jl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return tc(t.a,Pa,{idToken:e}).then(w(t.Kc,t))}(t,e).then(function(){return n||Nl(t,"isAnonymous",!1),e})})}function Ml(t,e){e[Ys]&&t.Aa!=e[Ys]&&(dl(t.h,e),t.dispatchEvent(new ol("tokenChanged")),Al(t,e[Ys]),Nl(t,"refreshToken",t.h.a))}function Fl(t,e){return jl(t).then(function(){if($(Il(t),e))return El(t).then(function(){throw new O("provider-already-linked")})})}function Ll(t,e,n){return Xr({user:t,credential:Lo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Bl(t,e){return Ml(t,e),t.reload().then(function(){return t})}function Vl(t,e,n,i,o){if(!Dr())return Se(new O("operation-not-supported-in-this-environment"));if(t.i&&!o)return Se(t.i);var s=$i(n.providerId),a=Br(t.uid+":::"),c=null;(!jr()||yr())&&t.s&&n.isOAuthProvider&&(c=gc(t.s,t.l,t.m,e,n,null,a,r.default.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=gr(c,s&&s.va,s&&s.ua);return i=i().then(function(){if(ql(t),!o)return t.I().then(function(){})}).then(function(){return Ru(t.b,u,e,n,a,!!c,t.tenantId)}).then(function(){return new ye(function(n,r){t.na(e,null,new O("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Fu(t.b,t,e,u,a)})}).then(function(t){return u&&pr(u),t?Xr(t):null}).o(function(t){throw u&&pr(u),t}),zl(t,i,o)}function Ul(t,e,n,r,i){if(!Dr())return Se(new O("operation-not-supported-in-this-environment"));if(t.i&&!i)return Se(t.i);var o=null,s=Br(t.uid+":::");return r=r().then(function(){if(ql(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,El(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Wl,t.w(),e.a)),e}).then(function(){return Mu(t.b,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Gl(t.ha);throw o}).then(function(){if(o)throw o}),zl(t,r,i)}function ql(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new O("internal-error");throw new O("auth-domain-config-required")}}function zl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Se(t.i)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new ol("userInvalidated")),t.i=e),e})}(t,e,n);return t.N.push(r),r.oa(function(){Q(t.N,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),wl(t),w(t.jc,t))),n||e})}function Kl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ys]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gl(e,n,t);return t.providerData&&K(t.providerData,function(t){t&&Pl(i,Xr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Hl(t){this.a=t,this.b=Xc()}Ju.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Xu],delete n[Zu],bt(n,t),e.g(n)})},A(tl,O),nl.prototype.tb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),bt(n,{phoneVerificationInfo:jo(t.a)}),tc(e,Ta,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return bt(n={mfaPendingCredential:n},{phoneVerificationInfo:jo(t.a)}),tc(e,Ia,n)})}(this,t,e)},A(rl,nl),A(il,rl),A(ol,Ye),(t=sl.prototype).yc=function(t){al(this,function(t){var e=[];return K(t.mfaInfo||[],function(t){(t=ei(t))&&e.push(t)}),e}(t.hd))},t.Sb=function(){return this.a.I().then(function(t){return new oo(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then(function(n){return t.tb(r,n,e)}).then(function(t){return Ml(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return tc(r,Za,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=H(e.b,function(t){return t.uid!=n});return al(e,r),Ml(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,function(t){return t.w()})}}},cl.prototype.start=function(){this.a=this.c,ul(this,!0)},cl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ll.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ll.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Se(new O("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new ye(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?oa(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(nc(t)):t.access_token&&t.refresh_token?n(t):r(new O("internal-error")):r(new O("network-request-failed"))},"POST",Jn(e).toString(),t.g,t.m.get()):r(new O("internal-error"))})}(t.f,e).then(function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,hl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):xe(null):xe({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},A(gl,wn),gl.prototype.xa=function(t){this.za=t,ea(this.a,t)},gl.prototype.la=function(){return this.za},gl.prototype.Ga=function(){return X(this.aa)},gl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Yr(gl.prototype,"providerId","firebase"),(t=gl.prototype).reload=function(){var t=this;return zl(this,Tl(this).then(function(){return jl(t).then(function(){return El(t)}).then(Sl)}))},t.oc=function(t){return this.I(t).then(function(t){return new Yu(t)})},t.I=function(t){var e=this;return zl(this,Tl(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new O("internal-error");return t.accessToken!=e.Aa&&(Al(e,t.accessToken),e.dispatchEvent(new ol("tokenChanged"))),Nl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new O("internal-error");xl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Pl(this,e[n]);Nl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ol("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return zl(this,t.c(this.a,this.uid).then(function(t){return Ml(e,t),n=Ll(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return zl(this,Fl(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ll(e,t,"link"),Bl(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return zl(this,Fl(this,"phone").then(function(){return Qu(wl(n),t,e,w(n.rb,n))}))},t.Mc=function(t,e){var n=this;return zl(this,xe().then(function(){return Qu(wl(n),t,e,w(n.ub,n))}),!0)},t.Cb=function(t){var e=this;return zl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Ml(e,t),e.reload()}))},t.ed=function(t){var e=this;return zl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Ml(e,t),e.reload()}))},t.Db=function(t){var e=this;return zl(this,this.I().then(function(n){return e.a.Db(n,t)}).then(function(t){return Ml(e,t),e.reload()}))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Tl(this);var e=this;return zl(this,this.I().then(function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Ml(e,t),Nl(e,"displayName",t.displayName||null),Nl(e,"photoURL",t.photoUrl||null),K(e.providerData,function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))}),El(e)}).then(Sl))},t.cd=function(t){var e=this;return zl(this,jl(this).then(function(n){return $(Il(e),t)?function(t,e,n){return tc(t,Oa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return K(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),K(Il(e),function(t){n[t]||Dl(e,t)}),n[Mo.PROVIDER_ID]||Yr(e,"phoneNumber",null),El(e)}):El(e).then(function(){throw new O("no-such-provider")})}))},t.delete=function(){var t=this;return zl(this,this.I().then(function(e){return tc(t.a,Ea,{idToken:e})}).then(function(){t.dispatchEvent(new ol("userDeleted"))})).then(function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");bl(t,null),vl(t,null),yl(t,null),t.N=[],t.J=!0,Cl(t),Yr(t,"refreshToken",null),t.b&&Pu(t.b,t)})},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Mb,this):null},t.Ec=function(t){var e=this;return Vl(this,"linkViaPopup",t,function(){return Fl(e,t.providerId).then(function(){return El(e)})},!1)},t.Nc=function(t){return Vl(this,"reauthViaPopup",t,function(){return xe()},!0)},t.Fc=function(t){var e=this;return Ul(this,"linkViaRedirect",t,function(){return Fl(e,t.providerId)},!1)},t.Oc=function(t){return Ul(this,"reauthViaRedirect",t,function(){return xe()},!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zl(this,this.I().then(function(n){return va(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ll(i,t,"link"),Bl(i,t)}).then(function(){return o}))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zl(this,xe().then(function(){return uo(_a(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ll(i,t,"reauthenticate"),Ml(i,t),i.i=null,i.reload()}).then(function(){return o}),!0)},t.vb=function(t){var e=this,n=null;return zl(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:Vi(new Ii(t))}).then(function(t){return e.a.vb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Fb=function(t,e){var n=this,r=null;return zl(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:Vi(new Ii(e))}).then(function(e){return n.a.Fb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return zl(this,t=uo(xe(t),n.uid).then(function(t){return e=Ll(n,t,"reauthenticate"),Ml(n,t),n.i=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&bt(t,this.metadata.w()),K(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),bt(t,this.S.w()),t};var Wl={name:"redirectUser",F:"session"};function Gl(t){return eu(t.b,Wl,t.a)}function $l(t){this.a=t,this.b=Xc(),this.c=null,this.f=function(t){var e=Jl("local"),n=Jl("session"),r=Jl("none");return function(t,e,n){var r=tu(e,n),i=Zc(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Lr(a.localStorage.getItem(r))}catch(c){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Yl,t.a).then(function(t){return t?Jl(t):e})})})}).then(function(e){return t.c=e,Ql(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Jl("local"),this.a,w(this.g,this))}function Ql(t,e){var n,r=[];for(n in Yc)Yc[n]!==e&&r.push(eu(t.b,Jl(Yc[n]),t.a));return r.push(eu(t.b,Yl,t.a)),function(t){return new ye(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Te(t[a],k(o,a),s);else e(i)})}(r)}$l.prototype.g=function(){var t=this,e=Jl("local");eh(this,function(){return xe().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Ql(t,"local").then(function(){t.c=e})})})};var Yl={name:"persistence",F:"session"};function Jl(t){return{name:"authUser",F:t}}function Xl(t,e){return eh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Zl(t){return eh(t,function(){return eu(t.b,t.c,t.a)})}function th(t,e,n){return eh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Kl(t||{})})})}function eh(t,e){return t.f=t.f.then(e,e),t.f}function nh(t){if(this.l=!1,Yr(this,"settings",new Gu),Yr(this,"app",t),!lh(this).options||!lh(this).options.apiKey)throw new O("invalid-api-key");t=r.default.SDK_VERSION?Sr(r.default.SDK_VERSION):null,this.a=new $s(lh(this).options&&lh(this).options.apiKey,D(S),t),this.P=[],this.s=[],this.N=[],this.Pa=r.default.INTERNAL.createSubscribe(w(this.zc,this)),this.W=void 0,this.ib=r.default.INTERNAL.createSubscribe(w(this.Ac,this)),ch(this,null),this.i=new $l(lh(this).options.apiKey+":"+lh(this).name),this.D=new Hl(lh(this).options.apiKey+":"+lh(this).name),this.$=ph(this,function(t){var e=lh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Wl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Kl(t||{})})}(t.D,lh(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Gl(t.D)});return ph(t,e)}(t).then(function(){return th(t.i,e,t.R)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Xl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Zl(t.i)})):null}).then(function(e){ch(t,e||null)});return ph(t,n)}(this)),this.h=ph(this,function(t){return t.$.then(function(){return ah(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Jl("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.qa=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=lh(t).options.authDomain,n=lh(t).options.apiKey;e&&Dr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Vu(e,n,lh(t).name,t.R),Iu(t.b,t),hh(t)&&Ol(hh(t)),t.m){Ol(t.m);var r=t.m;r.xa(t.la()),bl(r,t),_l(r=t.m,t.J),yl(r,t),ml(r=t.m,t.R),vl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Bn(this.R.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function rh(t){Ye.call(this,"languageCodeChanged"),this.h=t}function ih(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function oh(t){Ye.call(this,"frameworkChanged"),this.f=t}function sh(t){return t.Oa||Se(new O("auth-domain-config-required"))}function ah(t){if(!Dr())return Se(new O("operation-not-supported-in-this-environment"));var e=sh(t).then(function(){return t.b.ra()}).then(function(t){return t?Xr(t):null});return ph(t,e)}function ch(t,e){hh(t)&&(function(t,e){Y(t.W,function(t){return t==e})}(hh(t),t.Ba),dn(hh(t),"tokenChanged",t.qa),dn(hh(t),"userDeleted",t.za),dn(hh(t),"userInvalidated",t.Aa),Cl(hh(t))),e&&(e.W.push(t.Ba),un(e,"tokenChanged",t.qa),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&kl(e)),Yr(t,"currentUser",e),e&&(e.xa(t.la()),bl(e,t),_l(e,t.J),yl(e,t),ml(e,t.R),vl(e,t))}function uh(t,e){var n=null,r=null;return ph(t,e.then(function(e){return n=Lo(e),r=Qi(e),function(t,e){var n={};return n.apiKey=lh(t).options.apiKey,n.authDomain=lh(t).options.authDomain,n.appName=lh(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then(function(){return function(t,e,n,r){var i=new gl(t,e);return n&&(i.ha=n),r&&_l(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return hh(t)&&e.uid==hh(t).uid?(Rl(hh(t),e),t.da(e)):(ch(t,e),Ol(e),t.da(e))}).then(function(){fh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),t,w(t.kc,t))),n||e}).then(function(){return Xr({user:hh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function lh(t){return t.app}function hh(t){return t.currentUser}function dh(t){return hh(t)&&hh(t)._lat||null}function fh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](dh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](dh(t))}}function ph(t,e){return t.P.push(e),e.oa(function(){Q(t.P,e)}),e}function gh(){}function mh(){this.a={},this.b=1e12}$l.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new O("invalid-persistence-type"),n=new O("unsupported-persistence-type");t:{for(r in Yc)if(Yc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(kr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Tc()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),eh(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Ql(n,t)}).then(function(){if(n.c=Jl(t),e)return n.b.set(n.c,e,n.a)}):xe()})},A(nh,wn),A(rh,Ye),A(ih,Ye),A(oh,Ye),(t=nh.prototype).yb=function(t){return ph(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ea(this.a,this.aa),this.dispatchEvent(new rh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new O("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&vr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,na(this.a,this.R),this.dispatchEvent(new ih(this.R))}},t.Gc=function(t){this.J.push(t),ia(this.a,r.default.SDK_VERSION?Sr(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new oh(this.J))},t.Ga=function(){return X(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:lh(this).options.apiKey,authDomain:lh(this).options.authDomain,appName:lh(this).name,currentUser:hh(this)&&hh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return uh(i,ba(i.a,o))})},t.Xc=function(t){if(!Dr())return Se(new O("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),i=Br(),o=null;(!jr()||yr())&&lh(this).options.authDomain&&t.isOAuthProvider&&(o=gc(lh(this).options.authDomain,lh(this).options.apiKey,lh(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.R));var s=gr(o,n&&n.va,n&&n.ua);return ph(this,n=sh(this).then(function(n){return Ru(n,s,"signInViaPopup",t,i,!!o,e.T())}).then(function(){return new ye(function(t,n){e.na("signInViaPopup",null,new O("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Fu(e.b,e,"signInViaPopup",s,i)})}).then(function(t){return s&&pr(s),t?Xr(t):null}).o(function(t){throw s&&pr(s),t}))},t.Yc=function(t){if(!Dr())return Se(new O("operation-not-supported-in-this-environment"));var e=this;return ph(this,sh(this).then(function(){return function(t){return eh(t,function(){return t.b.set(Yl,t.c.F,t.a)})}(e.i)}).then(function(){return Mu(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.ra=function(){var t=this;return ah(this).then(function(e){return t.b&&zu(t.b.b),e}).o(function(e){throw t.b&&zu(t.b.b),e})},t.dd=function(t){if(!t)return Se(new O("null-user"));if(this.S!=t.tenantId)return Se(new O("tenant-id-mismatch"));var e=this,n={};n.apiKey=lh(this).options.apiKey,n.authDomain=lh(this).options.authDomain,n.appName=lh(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Ys]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&_l(e,r),Rl(e,t),e}(t,n,e.D,e.Ga());return ph(this,this.h.then(function(){if(lh(e).options.apiKey!=t.l)return r.reload()}).then(function(){return hh(e)&&t.uid==hh(e).uid?(Rl(hh(e),t),e.da(t)):(ch(e,r),Ol(r),e.da(r))}).then(function(){fh(e)}))},t.Bb=function(){var t=this;return ph(this,this.h.then(function(){return t.b&&zu(t.b.b),hh(t)?(ch(t,null),Zl(t.i).then(function(){fh(t)})):xe()}))},t.Zc=function(){var t=this;return th(this.i,lh(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=hh(t)&&e){n=hh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Rl(hh(t),e),hh(t).I();(hh(t)||e)&&(ch(t,e),e&&(Ol(e),e.ha=t.D),t.b&&Iu(t.b,t),fh(t))}})},t.da=function(t){return Xl(this.i,t)},t.mc=function(){fh(this),this.da(hh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then(function(){return uh(e,xe(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(hh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),ph(t,t.h.then(function(){!t.l&&$(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(dh(t)))}))}(this,function(){t.next(hh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.ib(t,e,n)},t.nc=function(t){var e=this;return ph(this,this.h.then(function(){return hh(e)?hh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return uh(e,tc(e.a,$a,{token:t}))}).then(function(t){var n=t.user;return Nl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tc(n.a,Qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tc(n.a,Ca,{email:t,password:e}))})},t.ab=function(t){var e=this;return this.h.then(function(){return uh(e,t.ka(e.a))})},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then(function(){var e=hh(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.Ab()).then(function(e){var n=e.user;return Nl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return hh(this)&&hh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&hh(this)&&kl(hh(this))},t.Pc=function(t){var e=this;K(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&hh(this)&&Cl(hh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ph(this,this.h.then(function(){e.l||$(e.s,t)&&t(dh(e))}))},t.removeAuthTokenListener=function(t){Y(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Jl("local"),t.a,this.ja),this.b&&(Pu(this.b,this),zu(this.b.b)),Promise.resolve()},t.hc=function(t){return ph(this,function(t,e){return tc(t,Aa,{identifier:e,continueUri:Nr()?lr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Do(t)},t.xb=function(t,e){var n=this;return ph(this,xe().then(function(){var t=new Ii(e);if(!t.c)throw new O("argument-error",Ni+" must be true when sending sign in link to email");return Vi(t)}).then(function(e){return n.a.xb(t,e)}).then(function(){}))},t.jd=function(t){return this.Sa(t).then(function(t){return t.data.email})},t.ob=function(t,e){return ph(this,this.a.ob(t,e).then(function(){}))},t.Sa=function(t){return ph(this,this.a.Sa(t).then(function(t){return new ai(t)}))},t.kb=function(t){return ph(this,this.a.kb(t).then(function(){}))},t.wb=function(t,e){var n=this;return ph(this,xe().then(function(){return void 0===e||pt(e)?{}:Vi(new Ii(e))}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.Wc=function(t,e){return ph(this,Qu(this,t,e,w(this.ab,this)))},t.Vc=function(t,e){var n=this;return ph(this,xe().then(function(){var r=e||lr(),i=Po(t,r);if(!(r=Do(r)))throw new O("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new O("tenant-id-mismatch");return n.ab(i)}))},gh.prototype.render=function(){},gh.prototype.reset=function(){},gh.prototype.getResponse=function(){},gh.prototype.execute=function(){};var bh=null;function vh(t,e){return(e=_h(e))&&t.a[e]||null}function _h(t){return(t=void 0===t?1e12:t)?t.toString():null}function yh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ce(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function wh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function kh(){}function Ch(){}mh.prototype.render=function(t,e){return this.a[this.b.toString()]=new yh(t,e),this.b++},mh.prototype.reset=function(t){var e=vh(this,t);t=_h(t),e&&t&&(e.delete(),delete this.a[t])},mh.prototype.getResponse=function(t){return(t=vh(this,t))?t.getResponse():null},mh.prototype.execute=function(t){(t=vh(this,t))&&t.execute()},yh.prototype.getResponse=function(){return wh(this),this.b},yh.prototype.execute=function(){wh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},yh.prototype.delete=function(){wh(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Yr(kh,"FACTOR_ID","phone"),Ch.prototype.g=function(){return bh||(bh=new mh),xe(bh)},Ch.prototype.c=function(){};var Ah=null;function Eh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Oh=new _t(Ct,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xh=new qr(3e4,6e4);Eh.prototype.g=function(t){var e=this;return new ye(function(n,r){var i=setTimeout(function(){r(new O("network-request-failed"))},xh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new O("internal-error"));delete a[e.a]},xe(Us(xt(Oh,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new O("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Eh.prototype.c=function(){this.b--};var Sh=null;function Th(t,e,n,r,i,o,s){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Ah||(Ah=new Ch),s=Ah):(Sh||(Sh=new Eh),s=Sh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Dh])throw new O("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Nh],!a.document)throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ce(e)||!this.i&&ce(e).hasChildNodes())throw new O("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var c=this;this.l=[];var u=this.a[Ih];this.a[Ih]=function(t){if(Rh(c,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=Ir(u,a);"function"==typeof e&&e(t)}};var l=this.a[Ph];this.a[Ph]=function(){if(Rh(c,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ir(l,a);"function"==typeof t&&t()}}}var Ih="callback",Ph="expired-callback",Dh="sitekey",Nh="size";function Rh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function jh(t,e){return t.h.push(e),e.oa(function(){Q(t.h,e)}),e}function Mh(t){if(t.J)throw new O("internal-error","RecaptchaVerifier instance has been destroyed.")}function Fh(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(a){throw new O("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new O("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.default.SDK_VERSION?Sr(r.default.SDK_VERSION,s):null,Th.call(this,n,t,e,function(){try{var t=o.b.auth().la()}catch(e){t=null}return t},s,D(S),i)}function Lh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new O("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Bh.length)throw new O("internal-error","Argument validator received an unsupported number of arguments.");n=Bh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new O("argument-error",t+" failed: "+r)}(t=Th.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jh(this,xe().then(function(){if(Nr()&&!wr())return vr();throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,tc(t.s,Fa,{})}).then(function(e){t.a[Dh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Mh(this);var t=this;return jh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ce(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Kt(s.name),'"'),s.type){o.push(' type="',Kt(s.type),'"');var a={};bt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Mh(this);var t=this;return jh(this,this.render().then(function(e){return new ye(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Mh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Mh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ce(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},A(Fh,Th);var Bh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Uh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function zh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Kh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Hh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Wh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Gh(t){return g(t)&&"string"==typeof t.uid}function $h(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Qh(t,e){for(var n in e){var r=e[n].name;t[r]=Xh(r,t[n],e[n].j)}}function Yh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:k(function(t){return this[t]},n),set:k(function(t,e,n,r){Lh(t,[n],[r],!0),this[e]=r},r,n,e[n].lb),enumerable:!0})}}function Jh(t,e,n,r){t[e]=Xh(e,n,r)}function Xh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Qh(nh.prototype,{kb:{name:"applyActionCode",j:[Vh("code")]},Sa:{name:"checkActionCode",j:[Vh("code")]},ob:{name:"confirmPasswordReset",j:[Vh("code"),Vh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Vh("email"),Vh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Vh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Vh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[$h(qh(),zh(),"nextOrObserver"),zh("opt_error",!0),zh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[$h(qh(),zh(),"nextOrObserver"),zh("opt_error",!0),zh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Vh("email"),$h(qh("opt_actionCodeSettings",!0),Kh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Vh("email"),qh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Vh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Hh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Hh()]},Tc:{name:"signInWithCustomToken",j:[Vh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Vh("email"),Vh("password")]},Vc:{name:"signInWithEmailLink",j:[Vh("email"),Vh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[$h({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gl)}},Kh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Vh("url"),qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Vh("code")]}}),Yh(nh.prototype,{lc:{name:"languageCode",lb:$h(Vh(),Kh(),"languageCode")},ti:{name:"tenantId",lb:$h(Vh(),Kh(),"tenantId")}}),(nh.Persistence=Yc).LOCAL="local",nh.Persistence.SESSION="session",nh.Persistence.NONE="none",Qh(gl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Uh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Uh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Hh()]},rb:{name:"linkWithCredential",j:[Hh()]},Dc:{name:"linkWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Hh()]},ub:{name:"reauthenticateWithCredential",j:[Hh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[$h(qh("opt_actionCodeSettings",!0),Kh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},cd:{name:"unlink",j:[Vh("provider")]},Cb:{name:"updateEmail",j:[Vh("email")]},Db:{name:"updatePassword",j:[Vh("password")]},ed:{name:"updatePhoneNumber",j:[Hh("phone")]},Eb:{name:"updateProfile",j:[qh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Vh("email"),$h(qh("opt_actionCodeSettings",!0),Kh(null,!0),"opt_actionCodeSettings",!0)]}}),Qh(mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qh(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qh(ye.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Yh(Gu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Uh("appVerificationDisabledForTesting")}}),Qh($u.prototype,{confirm:{name:"confirm",j:[Vh("verificationCode")]}}),Jh(co,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,To,Ro,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[$h(Vh(),qh(),"json")]),Jh(Io,"credential",function(t,e){return new So(t,e)},[Vh("email"),Vh("password")]),Qh(So.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Qh(yo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(yo,"credential",wo,[$h(Vh(),qh(),"token")]),Jh(Io,"credentialWithLink",Po,[Vh("email"),Vh("emailLink")]),Qh(ko.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(ko,"credential",Co,[$h(Vh(),qh(),"token")]),Qh(Ao.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(Ao,"credential",Eo,[$h(Vh(),$h(qh(),Kh()),"idToken"),$h(Vh(),Kh(),"accessToken",!0)]),Qh(Oo.prototype,{Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(Oo,"credential",xo,[$h(Vh(),qh(),"token"),Vh("secret",!0)]),Qh(_o.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},credential:{name:"credential",j:[$h(Vh(),$h(qh(),Kh()),"optionsOrIdToken"),$h(Vh(),Kh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Qh(po.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Qh(lo.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Jh(Mo,"credential",Fo,[Vh("verificationId"),Vh("verificationCode")]),Qh(Mo.prototype,{gb:{name:"verifyPhoneNumber",j:[$h(Vh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Wh(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wh(t.session,ao)&&Gh(t.multiFactorHint):t.session&&t.multiFactorUid?Wh(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Qh(No.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Qh(O.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Qh(Wo.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Qh(Ho.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Qh(tl.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Qh(Ju.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),Qh(sl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Vh("displayName",!0)]},bd:{name:"unenroll",j:[$h({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Gh},Vh(),"multiFactorInfoIdentifier")]}}),Qh(Fh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Jh(wi,"parseLink",Ti,[Vh("link")]),Jh(kh,"assertion",function(t){return new il(t)},[Hh("phone")]),function(){if(void 0===r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:nh,AuthCredential:co,Error:O};Jh(t,"EmailAuthProvider",Io,[]),Jh(t,"FacebookAuthProvider",yo,[]),Jh(t,"GithubAuthProvider",ko,[]),Jh(t,"GoogleAuthProvider",Ao,[]),Jh(t,"TwitterAuthProvider",Oo,[]),Jh(t,"OAuthProvider",_o,[Vh("providerId")]),Jh(t,"SAMLAuthProvider",vo,[Vh("providerId")]),Jh(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof nh)}}]),Jh(t,"RecaptchaVerifier",Fh,[$h(Vh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),Jh(t,"ActionCodeURL",wi,[]),Jh(t,"PhoneMultiFactorGenerator",kh,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new nh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.8"),r.default.INTERNAL.extendNamespace({User:gl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const c={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var u=n("3N8a");class l extends u.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=c.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(c.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new b(t,e))}}class b{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},tyNb:function(t,e,n){"use strict";n.d(e,"a",function(){return Kt}),n.d(e,"b",function(){return U}),n.d(e,"c",function(){return V}),n.d(e,"d",function(){return ln}),n.d(e,"e",function(){return wn}),n.d(e,"f",function(){return hn});var r=n("ofXK"),i=n("fXoL"),o=n("Cfvw"),s=n("LRne"),a=n("2Vo4"),c=n("itXk"),u=n("HDdC"),l=n("sVev"),h=n("GyhO"),d=n("EY2u");function f(t){return new u.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(o.a)(n):Object(d.b)()).subscribe(e)})}var p=n("XNiG"),g=n("lJxs"),m=n("eIep"),b=n("IzEk"),v=n("JX91"),_=n("Kqap"),y=n("pLZG"),w=n("zx2A");function k(t){return function(e){const n=new C(t),r=e.lift(n);return n.caught=r}}class C{constructor(t){this.selector=t}call(t,e){return e.subscribe(new A(t,this.selector,this.caught))}}class A extends w.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new w.a(this);this.add(r);const i=Object(w.c)(n,r);i!==r&&this.add(i)}}}var E=n("5+tZ");function O(t,e){return Object(E.a)(t,e,1)}var x=n("7o/Q"),S=n("4I5i");function T(t){return function(e){return 0===t?Object(d.b)():e.lift(new I(t))}}class I{constructor(t){if(this.total=t,this.total<0)throw new S.a}call(t,e){return e.subscribe(new P(t,this.total))}}class P extends x.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var D=n("XDbj"),N=n("xbPD"),R=n("SpAZ"),j=n("SxV6"),M=n("vkgz"),F=n("nYR2"),L=n("bHdf");class B{constructor(t,e){this.id=t,this.url=e}}class V extends B{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class U extends B{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class q extends B{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class z extends B{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class K extends B{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H extends B{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W extends B{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class G extends B{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ extends B{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Y{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class J{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tt{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class et{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const nt="primary";class rt{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function it(t){return new rt(t)}function ot(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function st(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function at(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ct(t[i],e[i]))return!1;return!0}function ct(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function ut(t){return Array.prototype.concat.apply([],t)}function lt(t){return t.length>0?t[t.length-1]:null}function ht(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function dt(t){return Object(i.pb)(t)?t:Object(i.qb)(t)?Object(o.a)(Promise.resolve(t)):Object(s.a)(t)}function ft(t,e,n){return n?function(t,e){return at(t,e)}(t.queryParams,e.queryParams)&&pt(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ct(t[n],e[n]))}(t.queryParams,e.queryParams)&&gt(t.root,e.root)}function pt(t,e){if(!yt(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!pt(t.children[n],e.children[n]))return!1}return!0}function gt(t,e){return mt(t,e,e.segments)}function mt(t,e,n){if(t.segments.length>n.length)return!!yt(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!yt(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!gt(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!yt(t.segments,r)&&!!t.children.primary&&mt(t.children.primary,e,i)}}class bt{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=it(this.queryParams)),this._queryParamMap}toString(){return Ct.serialize(this)}}class vt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ht(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return At(this)}}class _t{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=it(this.parameters)),this._parameterMap}toString(){return Pt(this)}}function yt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class wt{}class kt{parse(t){const e=new Mt(t);return new bt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+Et(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${xt(e)}=${xt(t)}`).join("&"):`${xt(e)}=${xt(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Ct=new kt;function At(t){return t.segments.map(t=>Pt(t)).join("/")}function Et(t,e){if(!t.hasChildren())return At(t);if(e){const e=t.children.primary?Et(t.children.primary,!1):"",n=[];return ht(t.children,(t,e)=>{e!==nt&&n.push(`${e}:${Et(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ht(t.children,(t,r)=>{r===nt&&(n=n.concat(e(t,r)))}),ht(t.children,(t,r)=>{r!==nt&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===nt?[Et(t.children.primary,!1)]:[`${n}:${Et(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${At(t)}/${e[0]}`:`${At(t)}/(${e.join("//")})`}}function Ot(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xt(t){return Ot(t).replace(/%3B/gi,";")}function St(t){return Ot(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tt(t){return decodeURIComponent(t)}function It(t){return Tt(t.replace(/\+/g,"%20"))}function Pt(t){return`${St(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${St(t)}=${St(e[t])}`).join("")}`;var e}const Dt=/^[^\/()?;=#]+/;function Nt(t){const e=t.match(Dt);return e?e[0]:""}const Rt=/^[^=?&#]+/,jt=/^[^?&#]+/;class Mt{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vt([],{}):new vt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new vt(t,e)),n}parseSegment(){const t=Nt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new _t(Tt(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Nt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Nt(this.remaining);t&&(n=t,this.capture(n))}t[Tt(e)]=Tt(n)}parseQueryParam(t){const e=function(t){const e=t.match(Rt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(jt);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=It(e),i=It(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Nt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=nt);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new vt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ft{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Lt(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Lt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Bt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Bt(t,this._root).map(t=>t.value)}}function Lt(t,e){if(t===e.value)return e;for(const n of e.children){const e=Lt(t,n);if(e)return e}return null}function Bt(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Bt(t,n);if(r.length)return r.unshift(e),r}return[]}class Vt{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ut(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class qt extends Ft{constructor(t,e){super(t),this.snapshot=e,$t(this,t)}toString(){return this.snapshot.toString()}}function zt(t,e){const n=function(t,e){const n=new Wt([],{},{},"",{},nt,e,null,t.root,-1,{});return new Gt("",new Vt(n,[]))}(t,e),r=new a.a([new _t("",{})]),i=new a.a({}),o=new a.a({}),s=new a.a({}),c=new a.a(""),u=new Kt(r,i,s,c,o,nt,e,n.root);return u.snapshot=n.root,new qt(new Vt(u,[]),n)}class Kt{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(g.a)(t=>it(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(g.a)(t=>it(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ht(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Wt{constructor(t,e,n,r,i,o,s,a,c,u,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=it(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=it(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gt extends Ft{constructor(t,e){super(e),this.url=t,$t(this,e)}toString(){return Qt(this._root)}}function $t(t,e){e.value._routerState=t,e.children.forEach(e=>$t(t,e))}function Qt(t){const e=t.children.length>0?` { ${t.children.map(Qt).join(", ")} } `:"";return`${t.value}${e}`}function Yt(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,at(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),at(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!at(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),at(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Jt(t,e){var n,r;return at(t.params,e.params)&&yt(n=t.url,r=e.url)&&n.every((t,e)=>at(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Jt(t.parent,e.parent))}function Xt(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Xt(t,e,r);return Xt(t,e)})}(t,e,n);return new Vt(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Zt(e,t),t}{const n=new Kt(new a.a((r=e.value).url),new a.a(r.params),new a.a(r.queryParams),new a.a(r.fragment),new a.a(r.data),r.outlet,r.component,r),i=e.children.map(e=>Xt(t,e));return new Vt(n,i)}}var r}function Zt(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Zt(t.children[n],e.children[n])}function te(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ee(t){return"object"==typeof t&&null!=t&&t.outlets}function ne(t,e,n,r,i){let o={};return r&&ht(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new bt(n.root===t?e:re(n.root,t,e),o,i)}function re(t,e,n){const r={};return ht(t.children,(t,i)=>{r[i]=t===e?n:re(t,e,n)}),new vt(t.segments,r)}class ie{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&te(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ee);if(r&&r!==lt(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oe{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function se(t,e,n){if(t||(t=new vt([],{})),0===t.segments.length&&t.hasChildren())return ae(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(ee(s))break;const a=""+s,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!he(a,c,e))return o;r+=2}else{if(!he(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new vt(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new vt(t.segments.slice(r.pathIndex),t.children),ae(e,0,i)}return r.match&&0===i.length?new vt(t.segments,{}):r.match&&!t.hasChildren()?ce(t,e,n):r.match?ae(t,0,i):ce(t,e,n)}function ae(t,e,n){if(0===n.length)return new vt(t.segments,{});{const r=function(t){return ee(t[0])?t[0].outlets:{[nt]:t}}(n),i={};return ht(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=se(t.children[r],e,n))}),ht(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new vt(t.segments,i)}}function ce(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(ee(o)){const t=ue(o.outlets);return new vt(r,t)}if(0===i&&te(n[0])){r.push(new _t(t.segments[e].path,n[0])),i++;continue}const s=ee(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&te(a)?(r.push(new _t(s,le(a))),i+=2):(r.push(new _t(s,{})),i++)}return new vt(r,{})}function ue(t){const e={};return ht(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ce(new vt([],{}),0,t))}),e}function le(t){const e={};return ht(t,(t,n)=>e[n]=""+t),e}function he(t,e,n){return t==n.path&&at(e,n.parameters)}class de{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Yt(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Ut(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ht(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Ut(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=Ut(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new tt(t.value.snapshot))}),t.children.length&&this.forwardEvent(new X(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Yt(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),fe(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function fe(t){Yt(t.value),t.children.forEach(fe)}class pe{constructor(t,e){this.routes=t,this.module=e}}function ge(t){return"function"==typeof t}function me(t){return t instanceof bt}const be=Symbol("INITIAL_VALUE");function ve(){return Object(m.a)(t=>Object(c.a)(t.map(t=>t.pipe(Object(b.a)(1),Object(v.a)(be)))).pipe(Object(_.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==be)return t;if(r===be&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||me(r))return r}return t},t)},be),Object(y.a)(t=>t!==be),Object(g.a)(t=>me(t)?t:!0===t),Object(b.a)(1)))}let _e=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i.Jb(0,"router-outlet")},directives:function(){return[hn]},encapsulation:2}),t})();function ye(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];we(r,ke(e,r))}}function we(t,e){t.children&&ye(t.children,e)}function ke(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ce(t){const e=t.children&&t.children.map(Ce),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==nt&&(n.component=_e),n}function Ae(t){return t.outlet||nt}function Ee(t,e){const n=t.filter(t=>Ae(t)===e);return n.push(...t.filter(t=>Ae(t)!==e)),n}const Oe={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function xe(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Oe):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||st)(n,t,e);if(!i)return Object.assign({},Oe);const o={};ht(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Se(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Te(t,e,n)&&Ae(n)!==nt)}(t,n,r)){const i=new vt(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Ae(o)!==nt){const n=new vt([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ae(o)]=n}return i}(t,e,r,new vt(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Te(t,e,n))}(t,n,r)){const o=new vt(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Te(t,n,a)&&!i[Ae(a)]){const n=new vt([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ae(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new vt(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Te(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ie(t,e,n,r){return!!(Ae(t)===r||r!==nt&&Te(e,n,t))&&("**"===t.path||xe(e,t,n).matched)}function Pe(t,e,n){return 0===e.length&&!t.children[n]}class De{constructor(t){this.segmentGroup=t||null}}class Ne{constructor(t){this.urlTree=t}}function Re(t){return new u.a(e=>e.error(new De(t)))}function je(t){return new u.a(e=>e.error(new Ne(t)))}function Me(t){return new u.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Fe{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.x)}apply(){const t=Se(this.urlTree.root,[],[],this.config).segmentGroup,e=new vt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,nt).pipe(Object(g.a)(t=>this.createUrlTree(Le(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(k(t=>{if(t instanceof Ne)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof De)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,nt).pipe(Object(g.a)(e=>this.createUrlTree(Le(e),t.queryParams,t.fragment))).pipe(k(t=>{if(t instanceof De)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new vt([],{[nt]:t}):t;return new bt(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(g.a)(t=>new vt([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(o.a)(r).pipe(O(r=>{const i=n.children[r],o=Ee(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(g.a)(t=>({segment:t,outlet:r})))}),Object(_.a)((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(y.a)((e,n)=>t(e,n,r)):R.a,T(1),n?Object(N.a)(e):Object(D.a)(()=>new l.a))}())}expandSegment(t,e,n,r,i,a){return Object(o.a)(n).pipe(O(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,a).pipe(k(t=>{if(t instanceof De)return Object(s.a)(null);throw t}))),Object(j.a)(t=>!!t),k((t,n)=>{if(t instanceof l.a||"EmptyError"===t.name){if(Pe(e,r,i))return Object(s.a)(new vt([],{}));throw new De(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ie(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Re(e):Re(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?je(i):this.lineralizeSegments(n,i).pipe(Object(E.a)(n=>{const i=new vt(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:c,positionalParamSegments:u}=xe(e,r,i);if(!s)return Re(e);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?je(l):this.lineralizeSegments(r,l).pipe(Object(E.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(g.a)(t=>(n._loadedConfig=t,new vt(r,{})))):Object(s.a)(new vt(r,{}));const{matched:o,consumedSegments:a,lastChild:c}=xe(e,n,r);if(!o)return Re(e);const u=r.slice(c);return this.getChildConfig(t,n,r).pipe(Object(E.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:c,slicedSegments:l}=Se(e,a,u,o),h=new vt(c.segments,c.children);if(0===l.length&&h.hasChildren())return this.expandChildren(r,o,h).pipe(Object(g.a)(t=>new vt(a,t)));if(0===o.length&&0===l.length)return Object(s.a)(new vt(a,{}));const d=Ae(n)===i;return this.expandSegment(r,h,o,l,d?nt:i,!0).pipe(Object(g.a)(t=>new vt(a.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(s.a)(new pe(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(s.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(E.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(g.a)(t=>(e._loadedConfig=t,t))):function(t){return new u.a(e=>e.error(ot(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(s.a)(new pe([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(s.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ge(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ge(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return dt(o)});return Object(s.a)(i).pipe(ve(),Object(M.a)(t=>{if(!me(t))return;const e=ot(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(g.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(s.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Me(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new bt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ht(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ht(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new vt(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Le(t){const e={};for(const n of Object.keys(t.children)){const r=Le(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new vt(t.segments.concat(e.segments),e.children)}return t}(new vt(t.segments,e))}class Be{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ve{constructor(t,e){this.component=t,this.route=e}}function Ue(t,e,n){const r=t._root;return ze(r,e?e._root:null,n,[r.value])}function qe(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ze(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ut(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!yt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yt(t.url,e.url)||!at(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jt(t,e)||!at(t.queryParams,e.queryParams);case"paramsChange":default:return!Jt(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Be(r)):(o.data=s.data,o._resolvedData=s._resolvedData),ze(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ve(a.outlet.component,s))}else s&&Ke(e,a,i),i.canActivateChecks.push(new Be(r)),ze(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ht(o,(t,e)=>Ke(t,n.getContext(e),i)),i}function Ke(t,e,n){const r=Ut(t),i=t.value;ht(r,(t,r)=>{Ke(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ve(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class He{}function We(t){return new u.a(e=>e.error(t))}class Ge{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Se(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,nt);if(null===e)return null;const n=new Wt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},nt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Vt(n,e),i=new Gt(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Ht(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Ee(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!$e(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===nt?-1:e.value.outlet===nt?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Pe(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Ie(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?lt(n).parameters:{};i=new Wt(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Je(t),Ae(t),t.component,t,Qe(e),Ye(e)+n.length,Xe(t))}else{const r=xe(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Wt(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Je(t),Ae(t),t.component,t,Qe(e),Ye(e)+o.length,Xe(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=Se(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const t=this.processChildren(a,c);return null===t?null:[new Vt(i,t)]}if(0===a.length&&0===u.length)return[new Vt(i,[])];const l=Ae(t)===r,h=this.processSegment(a,c,u,l?nt:r);return null===h?null:[new Vt(i,h)]}}function $e(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qe(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ye(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Je(t){return t.data||{}}function Xe(t){return t.resolve||{}}function Ze(t){return Object(m.a)(e=>{const n=t(e);return n?Object(o.a)(n).pipe(Object(g.a)(()=>e)):Object(s.a)(e)})}class tn extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const en=new i.q("ROUTES");class nn{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(g.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new pe(ut(r.injector.get(en)).map(Ce),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(o.a)(this.loader.load(t)):dt(t()).pipe(Object(E.a)(t=>t instanceof i.v?Object(s.a)(t):Object(o.a)(this.compiler.compileModuleAsync(t))))}}class rn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new on,this.attachRef=null}}class on{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new rn,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class sn{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function an(t){throw t}function cn(t,e,n){return e.parse("/")}function un(t,e){return Object(s.a)(null)}let ln=(()=>{class t{constructor(t,e,n,r,o,s,c,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new p.a,this.errorHandler=an,this.malformedUriErrorHandler=cn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:un,afterPreactivation:un},this.urlHandlingStrategy=new sn,this.routeReuseStrategy=new tn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(i.x),this.console=o.get(i.X);const l=o.get(i.z);this.isNgZoneEnabled=l instanceof i.z&&i.z.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new bt(new vt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nn(s,c,t=>this.triggerEvent(new Q(t)),t=>this.triggerEvent(new Y(t))),this.routerState=zt(this.currentUrlTree,this.rootComponentType),this.transitions=new a.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(y.a)(t=>0!==t.id),Object(g.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(m.a)(t=>{let n=!1,r=!1;return Object(s.a)(t).pipe(Object(M.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(m.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(s.a)(t).pipe(Object(m.a)(t=>{const n=this.transitions.getValue();return e.next(new V(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?d.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,a=this.config,Object(m.a)(t=>function(t,e,n,r,i){return new Fe(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe(Object(g.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(M.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(E.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const a=new Ge(t,e,n,r,i,o).recognize();return null===a?We(new He):Object(s.a)(a)}catch(a){return We(a)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(g.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(M.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new K(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:a}=t,c=new V(n,this.serializeUrl(r),i,o);e.next(c);const u=zt(r,this.rootComponentType).snapshot;return Object(s.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),d.a}),Ze(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(M.a)(t=>{const e=new H(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(g.a)(t=>Object.assign(Object.assign({},t),{guards:Ue(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(E.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=n;return 0===c.length&&0===a.length?Object(s.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(o.a)(t).pipe(Object(E.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(s.a)(!0);const a=o.map(o=>{const s=qe(o,e,i);let a;if(function(t){return t&&ge(t.canDeactivate)}(s))a=dt(s.canDeactivate(t,e,n,r));else{if(!ge(s))throw new Error("Invalid CanDeactivate guard");a=dt(s(t,e,n,r))}return a.pipe(Object(j.a)())});return Object(s.a)(a).pipe(ve())}(t.component,t.route,n,e,r)),Object(j.a)(t=>!0!==t,!0))}(c,r,i,t).pipe(Object(E.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(o.a)(e).pipe(O(e=>Object(h.a)(function(t,e){return null!==t&&e&&e(new J(t)),Object(s.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Z(t)),Object(s.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>f(()=>{const i=e.guards.map(i=>{const o=qe(i,e.node,n);let s;if(function(t){return t&&ge(t.canActivateChild)}(o))s=dt(o.canActivateChild(r,t));else{if(!ge(o))throw new Error("Invalid CanActivateChild guard");s=dt(o(r,t))}return s.pipe(Object(j.a)())});return Object(s.a)(i).pipe(ve())}));return Object(s.a)(i).pipe(ve())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(s.a)(!0);const i=r.map(r=>f(()=>{const i=qe(r,e,n);let o;if(function(t){return t&&ge(t.canActivate)}(i))o=dt(i.canActivate(e,t));else{if(!ge(i))throw new Error("Invalid CanActivate guard");o=dt(i(e,t))}return o.pipe(Object(j.a)())}));return Object(s.a)(i).pipe(ve())}(t,e.route,n))),Object(j.a)(t=>!0!==t,!0))}(r,a,t,e):Object(s.a)(n)),Object(g.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(M.a)(t=>{if(me(t.guardsResult)){const e=ot(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new W(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(y.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new q(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ze(t=>{if(t.guards.canActivateChecks.length)return Object(s.a)(t).pipe(Object(M.a)(t=>{const e=new G(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(m.a)(t=>{let n=!1;return Object(s.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(E.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(s.a)(t);let a=0;return Object(o.a)(n).pipe(O(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(s.a)({});const a={};return Object(o.a)(i).pipe(Object(E.a)(i=>function(t,e,n,r){const i=qe(t,e,r);return dt(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(M.a)(t=>{a[i]=t}))),T(1),Object(E.a)(()=>Object.keys(a).length===i.length?Object(s.a)(a):d.a))}(t._resolve,t,e,r).pipe(Object(g.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Ht(t,n).resolve),null)))}(t.route,e,r,i)),Object(M.a)(()=>a++),T(1),Object(E.a)(e=>a===n.length?Object(s.a)(t):d.a))})),Object(M.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new q(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(M.a)(t=>{const e=new $(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ze(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(g.a)(t=>{const e=function(t,e,n){const r=Xt(t,e._root,n?n._root:void 0);return new qt(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(M.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,a=this.routeReuseStrategy,c=t=>this.triggerEvent(t),Object(g.a)(t=>(new de(a,t.targetRouterState,t.currentRouterState,c).activate(i),t))),Object(M.a)({next(){n=!0},complete(){n=!0}}),Object(F.a)(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new q(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),k(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=me(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new q(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new z(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return d.a}));var i,a,c}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ye(t),this.config=t.map(Ce),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return ne(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ie(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ht(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ie(n,e,r)}(n);if(o.toRoot())return ne(e.root,new vt([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new oe(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new oe(t,t===e.root,0)}const r=te(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new oe(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?ae(s.segmentGroup,s.index,o.commands):se(s.segmentGroup,s.index,o.commands);return ne(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){const n=me(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(me(t))return ft(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ft(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new U(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let c,u,l;i?(c=i.resolve,u=i.reject,l=i.promise):l=new Promise((t,e)=>{c=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(i.M),i.Rb(wt),i.Rb(on),i.Rb(r.h),i.Rb(i.r),i.Rb(i.w),i.Rb(i.i),i.Rb(void 0))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})(),hn=(()=>{class t{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.n,this.deactivateEvents=new i.n,this.name=r||nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new dn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(on),i.Ib(i.P),i.Ib(i.j),i.Sb("name"),i.Ib(i.h))},t.\u0275dir=i.Db({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class dn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Kt?this.route:t===on?this.childContexts:this.parent.get(t,e)}}class fn{}class pn{preload(t,e){return Object(s.a)(null)}}let gn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new nn(e,n,e=>t.triggerEvent(new Q(e)),e=>t.triggerEvent(new Y(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(y.a)(t=>t instanceof U),O(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(o.a)(n).pipe(Object(L.a)(),Object(g.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(E.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(ln),i.Rb(i.w),i.Rb(i.i),i.Rb(i.r),i.Rb(fn))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})(),mn=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof V?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof U&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof et&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new et(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(ln),i.Rb(r.p),i.Rb(void 0))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();const bn=new i.q("ROUTER_CONFIGURATION"),vn=new i.q("ROUTER_FORROOT_GUARD"),_n=[r.h,{provide:wt,useClass:kt},{provide:ln,useFactory:function(t,e,n,i,o,s,a,c={},u,l){const h=new ln(null,t,e,n,i,o,s,ut(a));if(u&&(h.urlHandlingStrategy=u),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(c,h),c.enableTracing){const t=Object(r.t)();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[wt,on,r.h,i.r,i.w,i.i,en,bn,[class{},new i.A],[class{},new i.A]]},on,{provide:Kt,useFactory:function(t){return t.routerState.root},deps:[ln]},{provide:i.w,useClass:i.J},gn,pn,class{preload(t,e){return e().pipe(k(()=>Object(s.a)(null)))}},{provide:bn,useValue:{enableTracing:!1}}];function yn(){return new i.y("Router",ln)}let wn=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[_n,En(e),{provide:vn,useFactory:An,deps:[[ln,new i.A,new i.I]]},{provide:bn,useValue:n||{}},{provide:r.i,useFactory:Cn,deps:[r.o,[new i.p(r.a),new i.A],bn]},{provide:mn,useFactory:kn,deps:[ln,r.p,bn]},{provide:fn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:pn},{provide:i.y,multi:!0,useFactory:yn},[On,{provide:i.d,multi:!0,useFactory:xn,deps:[On]},{provide:Tn,useFactory:Sn,deps:[On]},{provide:i.b,multi:!0,useExisting:Tn}]]}}static forChild(e){return{ngModule:t,providers:[En(e)]}}}return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)(i.Rb(vn,8),i.Rb(ln,8))}}),t})();function kn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new mn(t,e,n)}function Cn(t,e,n={}){return n.useHash?new r.e(t,e):new r.n(t,e)}function An(t){return"guarded"}function En(t){return[{provide:i.a,multi:!0,useValue:t},{provide:en,multi:!0,useValue:t}]}let On=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new p.a}appInitializer(){return this.injector.get(r.g,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ln),r=this.injector.get(bn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(s.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(bn),n=this.injector.get(gn),r=this.injector.get(mn),o=this.injector.get(ln),s=this.injector.get(i.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(i.r))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();function xn(t){return t.appInitializer.bind(t)}function Sn(t){return t.bootstrapListener.bind(t)}const Tn=new i.q("Router Initializer")},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},x7I3:function(t,e,n){"use strict";n.d(e,"a",function(){return ar}),n.d(e,"b",function(){return ur}),n.d(e,"c",function(){return cr}),n.d(e,"d",function(){return hr}),n.d(e,"e",function(){return lr}),n.d(e,"f",function(){return dr}),n.d(e,"g",function(){return fr}),n.d(e,"h",function(){return or}),n.d(e,"i",function(){return sr});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=a||{},c=s||self;function u(){}function l(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),f=0;function p(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:g).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function v(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function _(){this.s=this.s,this.o=this.o}var y={};_.prototype.s=!1,_.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++f)}(this);delete y[t]}},_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var w=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},k=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function C(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function E(t){return/^[\s\xa0]*$/.test(t)}var O,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function S(t,e){return-1!=t.indexOf(e)}function T(t,e){return t<e?-1:t>e?1:0}t:{var I=c.navigator;if(I){var P=I.userAgent;if(P){O=P;break t}}O=""}function D(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function N(t){var e={};for(var n in t)e[n]=t[n];return e}var R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<R.length;o++)n=R[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function M(t){return M[" "](t),t}M[" "]=u;var F,L,B=S(O,"Opera"),V=S(O,"Trident")||S(O,"MSIE"),U=S(O,"Edge"),q=U||V,z=S(O,"Gecko")&&!(S(O.toLowerCase(),"webkit")&&!S(O,"Edge"))&&!(S(O,"Trident")||S(O,"MSIE"))&&!S(O,"Edge"),K=S(O.toLowerCase(),"webkit")&&!S(O,"Edge");function H(){var t=c.document;return t?t.documentMode:void 0}t:{var W="",G=(L=O,z?/rv:([^\);]+)(\)|;)/.exec(L):U?/Edge\/([\d\.]+)/.exec(L):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(L):K?/WebKit\/(\S+)/.exec(L):B?/(?:Version)[ \/]?(\S+)/.exec(L):void 0);if(G&&(W=G?G[1]:""),V){var $=H();if(null!=$&&$>parseFloat(W)){F=String($);break t}}F=W}var Q={};var Y=c.document&&V&&(H()||parseInt(F,10))||void 0,J=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",u,e),c.removeEventListener("test",u,e)}catch(n){}return t}();function X(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Z(t,e){if(X.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(z){t:{try{M(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Z.Z.h.call(this)}}X.prototype.h=function(){this.defaultPrevented=!0},v(Z,X);var tt={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),nt=0;function rt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++nt,this.ca=this.fa=!1}function it(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ot(t){this.src=t,this.g={},this.h=0}function st(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=w(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(it(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function at(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ot.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=at(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new rt(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ct="closure_lm_"+(1e6*Math.random()|0),ut={};function lt(t,e,n,r,i){if(r&&r.once)return dt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)lt(t,e[o],n,r,i);return null}return n=_t(n),t&&t[et]?t.N(e,n,h(r)?!!r.capture:!!r,i):ht(t,e,n,!1,r,i)}function ht(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=h(i)?!!i.capture:!!i,a=bt(t);if(a||(t[ct]=a=new ot(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=mt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)J||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function dt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)dt(t,e[o],n,r,i);return null}return n=_t(n),t&&t[et]?t.O(e,n,h(r)?!!r.capture:!!r,i):ht(t,e,n,!0,r,i)}function ft(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ft(t,e[o],n,r,i);else r=h(r)?!!r.capture:!!r,n=_t(n),t&&t[et]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=at(o=t.g[e],n,r,i))&&(it(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=bt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=at(e,n,r,i)),(n=-1<t?e[t]:null)&&pt(n))}function pt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[et])st(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(st(n,t),0==n.h&&(n.src=null,e[ct]=null)):it(t)}}}function gt(t){return t in ut?ut[t]:ut[t]="on"+t}function mt(t,e){if(t.ca)t=!0;else{e=new Z(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&pt(t),t=n.call(r,e)}return t}function bt(t){return(t=t[ct])instanceof ot?t:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(t){return"function"==typeof t?t:(t[vt]||(t[vt]=function(e){return t.handleEvent(e)}),t[vt])}function yt(){_.call(this),this.i=new ot(this),this.P=this,this.I=null}function wt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new X(e,t);else if(e instanceof X)e.target=e.target||t;else{var i=e;j(e=new X(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=kt(s,r,!0,e)&&i}if(i=kt(s=e.g=t,r,!0,e)&&i,i=kt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=kt(s=e.g=n[o],r,!1,e)&&i}function kt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,c=s.ia||s.src;s.fa&&st(t.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}v(yt,_),yt.prototype[et]=!0,yt.prototype.removeEventListener=function(t,e,n,r){ft(this,t,e,n,r)},yt.prototype.M=function(){if(yt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)it(n[r]);delete e.g[t],e.h--}}this.I=null},yt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},yt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ct=c.JSON.stringify;function At(){var t=Dt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Et,Ot=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=xt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),xt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new St},function(t){return t.reset()}),St=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Tt(t){c.setTimeout(function(){throw t},0)}function It(t,e){Et||function(){var t=c.Promise.resolve(void 0);Et=function(){t.then(Nt)}}(),Pt||(Et(),Pt=!0),Dt.add(t,e)}var Pt=!1,Dt=new Ot;function Nt(){for(var t;t=At();){try{t.h.call(t.g)}catch(n){Tt(n)}var e=xt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pt=!1}function Rt(t,e){yt.call(this),this.h=t||1,this.g=e||c,this.j=m(this.kb,this),this.l=Date.now()}function jt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Mt(t,e,n){if("function"==typeof t)n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Ft(t){t.g=Mt(function(){t.g=null,t.i&&(t.i=!1,Ft(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}v(Rt,yt),(o=Rt.prototype).da=!1,o.S=null,o.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wt(this,"tick"),this.da&&(jt(this),this.start()))}},o.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},o.M=function(){Rt.Z.M.call(this),jt(this),delete this.g};var Lt=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Ft(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(_);function Bt(t){_.call(this),this.h=t,this.g={}}v(Bt,_);var Vt=[];function Ut(t,e,n,r){Array.isArray(n)||(n&&(Vt[0]=n.toString()),n=Vt);for(var i=0;i<n.length;i++){var o=lt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function qt(t){D(t.g,function(t,e){this.g.hasOwnProperty(e)&&pt(t)},t),t.g={}}function zt(){this.g=!0}function Kt(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ct(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Bt.prototype.M=function(){Bt.Z.M.call(this),qt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zt.prototype.Aa=function(){this.g=!1},zt.prototype.info=function(){};var Ht={},Wt=null;function Gt(){return Wt=Wt||new yt}function $t(t){X.call(this,Ht.Ma,t)}function Qt(t){var e=Gt();wt(e,new $t(e,t))}function Yt(t,e){X.call(this,Ht.STAT_EVENT,t),this.stat=e}function Jt(t){var e=Gt();wt(e,new Yt(e,t))}function Xt(t,e){X.call(this,Ht.Na,t),this.size=e}function Zt(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){t()},e)}Ht.Ma="serverreachability",v($t,X),Ht.STAT_EVENT="statevent",v(Yt,X),Ht.Na="timingevent",v(Xt,X);var te={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ee={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ne(){}function re(){}ne.prototype.h=null;var ie,oe={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function se(){X.call(this,"d")}function ae(){X.call(this,"c")}function ce(){}function ue(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Bt(this),this.P=he,this.W=new Rt(t=q?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new le}function le(){this.i=null,this.g="",this.h=!1}v(se,X),v(ae,X),v(ce,ne),ce.prototype.g=function(){return new XMLHttpRequest},ce.prototype.i=function(){return{}},ie=new ce;var he=45e3,de={},fe={};function pe(t,e,n){t.K=1,t.v=Fe(Pe(e)),t.s=n,t.U=!0,ge(t,null)}function ge(t,e){t.F=Date.now(),_e(t),t.A=Pe(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ye(n.h,"t",r),t.C=0,n=t.l.H,t.h=new le,t.g=Xn(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Lt(m(t.Ia,t,t.g),t.O)),Ut(t.V,t.g,"readystatechange",t.gb),e=t.H?N(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Qt(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function me(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function be(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=ve(t,n))==fe){4==e&&(t.o=4,Jt(14),i=!1),Kt(t.j,t.m,null,"[Incomplete Response]");break}if(r==de){t.o=4,Jt(15),Kt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Kt(t.j,t.m,r,null),Ae(t,r)}me(t)&&r!=fe&&r!=de&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Jt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kn(e),e.L=!0,Jt(11))):(Kt(t.j,t.m,n,"[Invalid Chunked Response]"),Ce(t),ke(t))}function ve(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?fe:(n=Number(e.substring(n,r)),isNaN(n)?de:(r+=1)+n>e.length?fe:(e=e.substr(r,n),t.C=r+n,e))}function _e(t){t.Y=Date.now()+t.P,ye(t,t.P)}function ye(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Zt(m(t.eb,t),e)}function we(t){t.B&&(c.clearTimeout(t.B),t.B=null)}function ke(t){0==t.l.G||t.I||Gn(t.l,t)}function Ce(t){we(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,jt(t.W),qt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ae(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||rn(n.i,t)))if(n.I=t.N,!t.J&&rn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Wn(n),jn(n)}zn(n),Jt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Zt(m(n.ab,n),6e3));if(1>=nn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Qn(n,11)}else if((t.J||n.g==t)&&Wn(n),!E(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var c=o[5];null!=c&&"number"==typeof c&&0<c&&(n.K=r=1.5*c,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=t.g;if(u){var l=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(S(l,"spdy")||S(l,"quic")||S(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(on(h,h.h),h.h=null))}if(r.D){var d=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Me(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=Jn(r,r.H?r.la:null,r.W),f.J){sn(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(we(p),_e(p)),r.g=f}else qn(r);0<n.l.length&&Ln(n)}else"stop"!=o[0]&&"close"!=o[0]||Qn(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Qn(n,7):Rn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Qt(4)}catch(o){}}function Ee(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"==typeof t)k(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(l(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xe(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Se(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Se(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Se(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=ue.prototype).setTimeout=function(t){this.P=t},o.gb=function(t){t=t.target;var e=this.L;e&&3==Tn(t)?e.l():this.Ia(t)},o.Ia=function(t){try{if(t==this.g)t:{var e=Tn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||q||this.g&&(this.h.h||this.g.ga()||In(this.g)))){this.I||4!=e||7==n||Qt(8==n||0>=r?3:2),we(this);var i=this.g.ba();this.N=i;e:if(me(this)){var o=In(this.g);t="";var s=o.length,a=4==Tn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ce(this),ke(this);var u="";break e}this.h.i=new c.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(l)){var d=l;break e}}d=null}if(!(i=d)){this.i=!1,this.o=3,Jt(12),Ce(this),ke(this);break t}Kt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ae(this,i)}this.U?(be(this,e,u),q&&this.i&&3==e&&(Ut(this.V,this.W,"tick",this.fb),this.W.start())):(Kt(this.j,this.m,u,null),Ae(this,u)),4==e&&Ce(this),this.i&&!this.I&&(4==e?Gn(this.l,this):(this.i=!1,_e(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Jt(12)):(this.o=0,Jt(13)),Ce(this),ke(this)}}}catch(e){}},o.fb=function(){if(this.g){var t=Tn(this.g),e=this.g.ga();this.C<e.length&&(we(this),be(this,t,e),this.i&&4!=t&&_e(this))}},o.cancel=function(){this.I=!0,Ce(this)},o.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qt(3),Jt(17)),Ce(this),this.o=2,ke(this)):ye(this,this.Y-t)},(o=Oe.prototype).R=function(){xe(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},o.T=function(){return xe(this),this.g.concat()},o.get=function(t,e){return Se(this.h,t)?this.h[t]:e},o.set=function(t,e){Se(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},o.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Te=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ie(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ie){this.g=void 0!==e?e:t.g,De(this,t.j),this.s=t.s,Ne(this,t.i),Re(this,t.m),this.l=t.l,e=t.h;var n=new We;n.i=e.i,e.g&&(n.g=new Oe(e.g),n.h=e.h),je(this,n),this.o=t.o}else t&&(n=String(t).match(Te))?(this.g=!!e,De(this,n[1]||"",!0),this.s=Le(n[2]||""),Ne(this,n[3]||"",!0),Re(this,n[4]),this.l=Le(n[5]||"",!0),je(this,n[6]||"",!0),this.o=Le(n[7]||"")):(this.g=!!e,this.h=new We(null,this.g))}function Pe(t){return new Ie(t)}function De(t,e,n){t.j=n?Le(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ne(t,e,n){t.i=n?Le(e,!0):e}function Re(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function je(t,e,n){e instanceof We?(t.h=e,function(t,e){e&&!t.j&&(Ge(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&($e(this,e),Ye(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=Be(e,Ke)),t.h=new We(e,t.g))}function Me(t,e,n){t.h.set(e,n)}function Fe(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Le(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ie.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Be(e,Ue,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Be(e,Ue,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?ze:qe,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Be(n,He)),t.join("")};var Ue=/[#\/\?@]/g,qe=/[#\?:]/g,ze=/[#\?]/g,Ke=/[#\?@]/g,He=/#/g;function We(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ge(t){t.g||(t.g=new Oe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $e(t,e){Ge(t),e=Je(t,e),Se(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Se((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&xe(t)))}function Qe(t,e){return Ge(t),e=Je(t,e),Se(t.g.h,e)}function Ye(t,e,n){$e(t,e),0<n.length&&(t.i=null,t.g.set(Je(t,e),A(n)),t.h+=n.length)}function Je(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(o=We.prototype).add=function(t,e){Ge(this),this.i=null,t=Je(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},o.forEach=function(t,e){Ge(this),this.g.forEach(function(n,r){k(n,function(n){t.call(e,n,r,this)},this)},this)},o.T=function(){Ge(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.R=function(t){Ge(this);var e=[];if("string"==typeof t)Qe(this,t)&&(e=C(e,this.g.get(Je(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},o.set=function(t,e){return Ge(this),this.i=null,Qe(this,t=Je(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},o.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},o.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Xe=function(){return function(t,e){this.h=t,this.g=e}}();function Ze(t){this.l=t||tn,t=c.PerformanceNavigationTiming?0<(t=c.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(c.g&&c.g.Ea&&c.g.Ea()&&c.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tn=10;function en(t){return!!t.h||!!t.g&&t.g.size>=t.j}function nn(t){return t.h?1:t.g?t.g.size:0}function rn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function on(t,e){t.g?t.g.add(e):t.h=e}function sn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function an(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var o=i(t.g.values()),s=o.next();!s.done;s=o.next())r=r.concat(s.value.D)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return A(t.i)}function cn(){}function un(){this.g=new cn}function ln(t,e,n){var r=n||"";try{Ee(t,function(t,n){var i=t;h(t)&&(i=Ct(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function dn(t){this.l=t.$b||null,this.j=t.ib||!1}function fn(t,e){yt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=pn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ze.prototype.cancel=function(){var t,e;if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=i(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},cn.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},cn.prototype.parse=function(t){return c.JSON.parse(t,void 0)},v(dn,ne),dn.prototype.g=function(){return new fn(this.l,this.j)},dn.prototype.i=function(t){return function(){return t}}({}),v(fn,yt);var pn=0;function gn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function mn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bn(t)}function bn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(o=fn.prototype).open=function(t,e){if(this.readyState!=pn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bn(this)},o.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||c).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},o.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mn(this)),this.readyState=pn},o.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bn(this)),this.g&&(this.readyState=3,bn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==c.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},o.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mn(this):bn(this),3==this.readyState&&gn(this)}},o.Ua=function(t){this.g&&(this.response=this.responseText=t,mn(this))},o.Ta=function(t){this.g&&(this.response=t,mn(this))},o.ha=function(){this.g&&mn(this)},o.setRequestHeader=function(t,e){this.v.append(t,e)},o.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},o.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var vn=c.JSON.parse;function _n(t){yt.call(this),this.headers=new Oe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yn,this.K=this.L=!1}v(_n,yt);var yn="",wn=/^https?$/i,kn=["POST","PUT"];function Cn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,En(t),xn(t)}function En(t){t.D||(t.D=!0,wt(t,"complete"),wt(t,"error"))}function On(t){if(t.h&&void 0!==a&&(!t.C[1]||4!=Tn(t)||2!=t.ba()))if(t.v&&4==Tn(t))Mt(t.Fa,0,t);else if(wt(t,"readystatechange"),4==Tn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Te)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!wn.test(o?o.toLowerCase():"")}e=i}if(e)wt(t,"complete"),wt(t,"success");else{t.m=6;try{var u=2<Tn(t)?t.g.statusText:""}catch(l){u=""}t.j=u+" ["+t.ba()+"]",En(t)}}finally{xn(t)}}}function xn(t,e){if(t.g){Sn(t);var n=t.g,r=t.C[0]?u:null;t.g=null,t.C=null,e||wt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Sn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(c.clearTimeout(t.A),t.A=null)}function Tn(t){return t.g?t.g.readyState:0}function In(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case yn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Pn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return D(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Me(t,e,n))}function Dn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Nn(t){this.za=0,this.l=[],this.h=new zt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dn("baseRetryDelayMs",5e3,t),this.$a=Dn("retryDelaySeedMs",1e4,t),this.Ya=Dn("forwardChannelMaxRetries",2,t),this.ra=Dn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Ze(t&&t.concurrentRequestLimit),this.Ca=new un,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Rn(t){if(Mn(t),3==t.G){var e=t.V++,n=Pe(t.F);Me(n,"SID",t.J),Me(n,"RID",e),Me(n,"TYPE","terminate"),Vn(t,n),(e=new ue(t,t.h,e,void 0)).K=2,e.v=Fe(Pe(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(e.v.toString(),"")),!n&&c.Image&&((new Image).src=e.v,n=!0),n||(e.g=Xn(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_e(e)}Yn(t)}function jn(t){t.g&&(Kn(t),t.g.cancel(),t.g=null)}function Mn(t){jn(t),t.u&&(c.clearTimeout(t.u),t.u=null),Wn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&c.clearTimeout(t.m),t.m=null)}function Fn(t,e){t.l.push(new Xe(t.Za++,e)),3==t.G&&Ln(t)}function Ln(t){en(t.i)||t.m||(t.m=!0,It(t.Ha,t),t.C=0)}function Bn(t,e){var n;n=e?e.m:t.V++;var r=Pe(t.F);Me(r,"SID",t.J),Me(r,"RID",n),Me(r,"AID",t.U),Vn(t,r),t.o&&t.s&&Pn(r,t.o,t.s),n=new ue(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Un(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),on(t.i,n),pe(n,r,e)}function Vn(t,e){t.j&&Ee({},function(t,n){Me(e,n,t)})}function Un(t,e,n){n=Math.min(t.l.length,n);var r=t.j?m(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,c=0;c<n;c++){var u=i[c].h,l=i[c].g;if(0>(u-=o))o=Math.max(0,i[c].h-100),a=!1;else try{ln(l,s,"req"+u+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function qn(t){t.g||t.u||(t.Y=1,It(t.Ga,t),t.A=0)}function zn(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Zt(m(t.Ga,t),$n(t,t.A)),t.A++,0))}function Kn(t){null!=t.B&&(c.clearTimeout(t.B),t.B=null)}function Hn(t){t.g=new ue(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Pe(t.oa);Me(e,"RID","rpc"),Me(e,"SID",t.J),Me(e,"CI",t.N?"0":"1"),Me(e,"AID",t.U),Vn(t,e),Me(e,"TYPE","xmlhttp"),t.o&&t.s&&Pn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Fe(Pe(e)),n.s=null,n.U=!0,ge(n,t)}function Wn(t){null!=t.v&&(c.clearTimeout(t.v),t.v=null)}function Gn(t,e){var n=null;if(t.g==e){Wn(t),Kn(t),t.g=null;var r=2}else{if(!rn(t.i,e))return;n=e.D,sn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;wt(r=Gt(),new Xt(r,n,e,i)),Ln(t)}else qn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(nn(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Zt(m(t.Ha,t,e),$n(t,t.C)),t.C++,0)))}(t,e)||2==r&&zn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Qn(t,5);break;case 4:Qn(t,10);break;case 3:Qn(t,6);break;default:Qn(t,2)}}function $n(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Qn(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=m(t.jb,t);n||(n=new Ie("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||De(n,"https"),Fe(n)),function(t,e){var n=new zt;if(c.Image){var r=new Image;r.onload=b(hn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=b(hn,n,r,"TestLoadImage: error",!1,e),r.onabort=b(hn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=b(hn,n,r,"TestLoadImage: timeout",!1,e),c.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jt(2);t.G=0,t.j&&t.j.va(e),Yn(t),Mn(t)}function Yn(t){t.G=0,t.I=-1,t.j&&(0==an(t.i).length&&0==t.l.length||(t.i.i.length=0,A(t.l),t.l.length=0),t.j.ua())}function Jn(t,e,n){var r=function(t){return t instanceof Ie?Pe(t):new Ie(t,void 0)}(n);if(""!=r.i)e&&Ne(r,e+"."+r.i),Re(r,r.m);else{var i=c.location;r=function(t,e,n,r){var i=new Ie(null,void 0);return t&&De(i,t),e&&Ne(i,e),n&&Re(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&D(t.aa,function(t,e){Me(r,e,t)}),n=t.sa,(e=t.D)&&n&&Me(r,e,n),Me(r,"VER",t.ma),Vn(t,r),r}function Xn(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _n(n&&t.Ba&&!t.qa?new dn({ib:!0}):t.qa)).L=t.H,e}function Zn(){}function tr(){if(V&&!(10<=Number(Y)))throw Error("Environmental error: no available transport.")}function er(t,e){yt.call(this),this.g=new Nn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!E(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!E(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ir(this)}function nr(t){se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function rr(){ae.call(this),this.status=1}function ir(t){this.g=t}(o=_n.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ie.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:ie),this.g.onreadystatechange=m(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void An(this,o)}t=n||"";var i=new Oe(this.headers);r&&Ee(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Cn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=c.FormData&&t instanceof c.FormData,!(0<=w(kn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sn(this),0<this.B&&((this.K=function(t){return V&&function(){return t=Q,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=x(String(F)).split("."),n=x("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=T(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||T(0==o[2].length,0==s[2].length)||T(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=m(this.pa,this)):this.A=Mt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){An(this,o)}},o.pa=function(){void 0!==a&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wt(this,"timeout"),this.abort(8))},o.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,wt(this,"complete"),wt(this,"abort"),xn(this))},o.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xn(this,!0)),_n.Z.M.call(this)},o.Fa=function(){this.s||(this.F||this.v||this.l?On(this):this.cb())},o.cb=function(){On(this)},o.ba=function(){try{return 2<Tn(this)?this.g.status:-1}catch(L){return-1}},o.ga=function(){try{return this.g?this.g.responseText:""}catch(L){return""}},o.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vn(e)}},o.Da=function(){return this.m},o.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(o=Nn.prototype).ma=8,o.G=1,o.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},o.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ue(this,this.h,t,void 0),n=this.s;if(this.P&&(n?j(n=N(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Un(this,e,r),Me(i=Pe(this.F),"RID",t),Me(i,"CVER",22),this.D&&Me(i,"X-HTTP-Session-Id",this.D),Vn(this,i),this.o&&n&&Pn(i,this.o,n),on(this.i,e),this.Ra&&Me(i,"TYPE","init"),this.ja?(Me(i,"$req",r),Me(i,"SID","null"),e.$=!0,pe(e,i,null)):pe(e,i,r),this.G=2}}else 3==this.G&&(t?Bn(this,t):0==this.l.length||en(this.i)||Bn(this))},o.Ga=function(){if(this.u=null,Hn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Zt(m(this.bb,this),t)}},o.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Jt(10),jn(this),Hn(this))},o.ab=function(){null!=this.v&&(this.v=null,jn(this),zn(this),Jt(19))},o.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Jt(2)):(this.h.info("Failed to ping google.com"),Jt(1))},(o=Zn.prototype).xa=function(){},o.wa=function(){},o.va=function(){},o.ua=function(){},o.Oa=function(){},tr.prototype.g=function(t,e){return new er(t,e)},v(er,yt),er.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),It(m(t.hb,t,e))),Jt(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Jn(t,null,t.W),Ln(t)},er.prototype.close=function(){Rn(this.g)},er.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Fn(this.g,e)}else this.v?((e={}).__data__=Ct(t),Fn(this.g,e)):Fn(this.g,t)},er.prototype.M=function(){this.g.j=null,delete this.j,Rn(this.g),delete this.g,er.Z.M.call(this)},v(nr,se),v(rr,ae),v(ir,Zn),ir.prototype.xa=function(){wt(this.g,"a")},ir.prototype.wa=function(t){wt(this.g,new nr(t))},ir.prototype.va=function(t){wt(this.g,new rr(t))},ir.prototype.ua=function(){wt(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,er.prototype.send=er.prototype.u,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,te.NO_ERROR=0,te.TIMEOUT=8,te.HTTP_ERROR=6,ee.COMPLETE="complete",re.EventType=oe,oe.OPEN="a",oe.CLOSE="b",oe.ERROR="c",oe.MESSAGE="d",yt.prototype.listen=yt.prototype.N,_n.prototype.listenOnce=_n.prototype.O,_n.prototype.getLastError=_n.prototype.La,_n.prototype.getLastErrorCode=_n.prototype.Da,_n.prototype.getStatus=_n.prototype.ba,_n.prototype.getResponseJson=_n.prototype.Qa,_n.prototype.getResponseText=_n.prototype.ga,_n.prototype.send=_n.prototype.ea;var or=function(){return new tr},sr=function(){return Gt()},ar=te,cr=ee,ur=Ht,lr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hr=dn,dr=re,fr=_n},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},xo5E:function(t,e,n){"use strict";var r,i=n("zIRd"),o=n("pqa8"),s=n("/6Yf"),a=(n("qOnz"),n("q/0M"),n("x7I3"),{Firestore:o.f,GeoPoint:o.a,Timestamp:o.c,Blob:o.j,Transaction:o.l,WriteBatch:o.g,DocumentReference:o.t,DocumentSnapshot:o.h,Query:o.r,QueryDocumentSnapshot:o.i,QuerySnapshot:o.m,CollectionReference:o.q,FieldPath:o.p,FieldValue:o.n,setLogLevel:o.d,CACHE_SIZE_UNLIMITED:o.b});(function(t,e){t.INTERNAL.registerComponent(new s.Component("firestore",function(t){return function(t,e){return new o.f(t,new o.e(t,e),new o.o)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},a)))})(r=i.default),r.registerVersion("@firebase/firestore","2.4.0")},xutz:function(t,e,n){"use strict";(function(t){var r=n("XqMk"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.a.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();e.a=a}).call(this,n("3UD+")(t))},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",function(){return y});var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),c=n("q/0M"),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",u),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new c.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.contains)(e,a))throw l.create("duplicate-app",{appName:a});var c=new t(n,o,r);return e[a]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),c=e.match(/\s|\//);if(s||c){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&c&&u.push("and"),c&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:c.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(c.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.contains)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.deepExtend)(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var u=0,h=Object.keys(e);u<h.length;u++)e[h[u]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.__assign)(Object(o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),b=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var y=m;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",function(t){return new b(t)},"PRIVATE")),t.registerVersion(h,"0.6.30",void 0),t.registerVersion("fire-js","")}(y),e.default=y},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL"),i=n("AytR"),o=n("ofXK");class s extends o.r{constructor(){super()}supportsDOMEvents(){return!0}}class a extends s{static makeCurrent(){Object(o.v)(new a)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=u||(u=document.querySelector("base"),u)?u.getAttribute("href"):null;return null==e?null:(n=e,c||(c=document.createElement("a")),c.setAttribute("href",n),"/"===c.pathname.charAt(0)?c.pathname:"/"+c.pathname);var n}resetBaseElement(){u=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(o.u)(document.cookie,t)}}let c,u=null;const l=new r.q("TRANSITION_ID"),h=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=Object(o.t)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[l,o.d,r.r],multi:!0}];class d{static init(){Object(r.W)(new d)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Object(o.t)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const f=new r.q("EventManagerPlugins");let p=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(f),r.Rb(r.z))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class g{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Object(o.t)().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let m=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends m{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Object(o.t)().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o.d))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_=/%COMP%/g;function y(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?y(t,i,n):(i=i.replace(_,t),n.push(i))}return n}function w(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let k=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new C(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new A(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.Q.ShadowDom:return new E(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=y(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(p),r.Rb(b),r.Rb(r.c))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class C{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(v[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=v[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=v[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.F.DashCase|r.F.Important)?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,w(n)):this.eventManager.addEventListener(t,e,w(n))}}class A extends C{constructor(t,e,n,r){super(t),this.component=n;const i=y(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(_,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(_,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class E extends C{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=y(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let O=(()=>{class t extends g{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o.d))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const x=["alt","control","meta","shift"],S={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},T={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},I={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let P=(()=>{class t extends g{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Object(o.t)().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(x.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&T.hasOwnProperty(e)&&(e=T[e]))}return S[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),x.forEach(r=>{r!=n&&(0,I[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o.d))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const D=[{provide:r.B,useValue:o.s},{provide:r.C,useValue:function(){a.makeCurrent(),d.init()},multi:!0},{provide:o.d,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],N=Object(r.R)(r.V,"browser",D),R=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:f,useClass:O,multi:!0,deps:[o.d,r.z,r.B]},{provide:f,useClass:P,multi:!0,deps:[o.d]},[],{provide:k,useClass:k,deps:[p,b,r.c]},{provide:r.E,useExisting:k},{provide:m,useExisting:b},{provide:b,useClass:b,deps:[o.d]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:p,useClass:p,deps:[f,r.z]},[]];let j=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:l,useExisting:r.c},h]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Rb(t,12))},providers:R,imports:[o.c,r.f]}),t})();"undefined"!=typeof window&&window;var M=n("tyNb"),F=n("CmIU"),L=n("lJxs"),B=n("vkgz"),V=n("pLZG"),U=n("Jgta"),q=n("UbJi"),z=n("LJo4"),K=n("PvES"),H=n("N+D2"),W=n("a/YC");let G=(()=>{class t{constructor(t,e,n,r,i,o){this.$auth=t,this.router=e,this.$user=n,this.$logger=r,this.$overlay=i,this.$fb=o,this.isAuth$=this.$auth.authState.pipe(Object(B.a)(t=>{(null==t?void 0:t.uid)?(sessionStorage.setItem("id",""+t.uid),this.$user.generateUser(t.uid)):this.router.navigateByUrl("landing").then(()=>this.$logger.errorMessage("Unknown user, please login first",null,"Auth"))}),Object(V.a)(t=>!!(null==t?void 0:t.uid)))}get isAuth(){return sessionStorage.getItem("id")}login({email:t,password:e}){const n=this.$overlay.startLoading();this.$auth.signInWithEmailAndPassword(t,e).then(()=>this.router.navigateByUrl(i.a.defaultUrl).then(()=>this.$overlay.endLoading(n))).catch(t=>{console.log("login-catch"),this.$overlay.endLoading(n),alert(""+t)})}signOn({name:t,email:e,password:n}){const r=this.$overlay.startLoading();this.$auth.createUserWithEmailAndPassword(e,n).then(({user:i})=>this.initialDBData(t,null==i?void 0:i.uid,r).then(()=>this.login({email:e,password:n}))).catch(t=>{window.alert(t),this.$overlay.endLoading(r)})}logout(){this.$auth.signOut().then(()=>this.router.navigateByUrl("landing").then(()=>sessionStorage.clear()))}initialDBData(t,e,n){const r=new Promise(n=>n(this.$fb.request("user").create({id:e,name:t,friends:[],inviteAddFriends:[]},e))),i=new Promise(t=>t(this.$fb.request("businessCenter").create({coinInfo:{isDigging:!1,lastStopDate:U.a.firestore.Timestamp.fromDate(new Date(0)),totalAmount:0}},e)));return Promise.all([r,i]).then(()=>this.$overlay.endLoading(n))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(q.a),r.Rb(M.d),r.Rb(z.a),r.Rb(K.a),r.Rb(H.a),r.Rb(W.a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$=(()=>{class t{constructor(t){this.$auth=t}canActivate(t,e){return this.$auth.isAuth$.pipe(Object(L.a)(t=>!!t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(G))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=n("3Pt+");const Y=[{path:"",canActivate:[$],children:[{path:F.d.User,loadChildren:()=>n.e(8).then(n.bind(null,"9N29")).then(t=>t.UserModule)},{path:F.d.Friend,loadChildren:()=>n.e(5).then(n.bind(null,"yGy4")).then(t=>t.FriendModule)},{path:F.d.Business,loadChildren:()=>n.e(4).then(n.bind(null,"miBY")).then(t=>t.BusinessModule)},{path:F.d.Social,loadChildren:()=>n.e(6).then(n.bind(null,"5jUG")).then(t=>t.SocialModule)}]},{path:F.c.Landing,component:(()=>{class t{constructor(t,e,n){this.fb=t,this.$auth=e,this.router=n,this.form=this.fb.group({email:[null,Q.n.required],password:[null,Q.n.required]})}ngOnInit(){this.$auth.isAuth&&this.router.navigateByUrl("")}submit({email:t,password:e}){this.$auth.login({email:t,password:e})}toLogOnPage(){this.router.navigateByUrl(F.c.SignOn)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Q.b),r.Ib(G),r.Ib(M.d))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-landing-page"]],decls:26,vars:3,consts:[[1,"Landing"],[1,"Landing__Logo"],["src","assets/images/logo.png"],[1,"Landing__Container"],[1,"Landing__Title"],[1,"icon_logo"],[1,"Landing__Form",3,"formGroup","ngSubmit"],["type","text","formControlName","email","placeholder","email"],[1,"material-icons"],["type","password","formControlName","password","placeholder","password",3,"minlength"],["type","submit",3,"disabled"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"section",0),r.Nb(1,"div",1),r.Jb(2,"img",2),r.Nb(3,"p"),r.mc(4,"F-Coin"),r.Mb(),r.Mb(),r.Nb(5,"div",3),r.Nb(6,"h2",4),r.Jb(7,"em",5),r.mc(8,"CHAT "),r.Jb(9,"br"),r.mc(10,"AND"),r.Jb(11,"br"),r.mc(12," COINING"),r.Mb(),r.Nb(13,"form",6),r.Ub("ngSubmit",function(){return e.$auth.login(e.form.getRawValue())}),r.Nb(14,"div"),r.Jb(15,"input",7),r.Nb(16,"span",8),r.mc(17," mail_outline "),r.Mb(),r.Mb(),r.Nb(18,"div"),r.Jb(19,"input",9),r.Nb(20,"span",8),r.mc(21," password "),r.Mb(),r.Mb(),r.Nb(22,"button",10),r.mc(23,"SIGN IN"),r.Mb(),r.Mb(),r.Nb(24,"p",11),r.Ub("click",function(){return e.toLogOnPage()}),r.mc(25,"\u8a3b\u518a\u65b0\u5e33\u865f\uff1f"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.yb(13),r.ac("formGroup",e.form),r.yb(6),r.ac("minlength",6),r.yb(3),r.ac("disabled",e.form.invalid))},directives:[Q.o,Q.j,Q.d,Q.a,Q.i,Q.c,Q.g],styles:[".Landing[_ngcontent-%COMP%]{position:relative;justify-content:center;height:100vh;width:100%;background:linear-gradient(180deg,#4891f1,#305ae4 50%,#4891f1);background-size:100% 400%;animation:verticalCycle 10s infinite}.Landing[_ngcontent-%COMP%], .Landing__Logo[_ngcontent-%COMP%]{display:flex;align-items:center}.Landing__Logo[_ngcontent-%COMP%]{position:absolute;flex-direction:row;top:23px;left:27px}.Landing__Logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}.Landing__Logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-weight:700}.Landing__Container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;width:255px;height:316px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);box-shadow:inset 12px 27px 40px 8px rgba(225,236,255,.2);border-radius:7px;border-top:1px solid hsla(0,0%,91.4%,.4);border-left:1px solid hsla(0,0%,91.4%,.4)}.Landing__Container[_ngcontent-%COMP%]:before{position:absolute;z-index:9999;top:10px;left:10px;width:200px;height:200px;background:red}.Landing__Container[_ngcontent-%COMP%]:hover{transition:.2s;transform:translateY(1px);background:rgba(73,167,255,.6);box-shadow:inset 12px 27px 25px 8px rgba(225,236,255,.2),12px 27px 30px 8px rgba(225,236,255,.1)}.Landing__Container[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{font-size:23px;font-weight:600;color:#fff}.Landing__Container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-child{position:absolute;bottom:11px;right:13px;font-size:.75rem;color:#73d5ff;cursor:pointer}.Landing__Form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;font-size:12px}.Landing__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}.Landing__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .material-icons[_ngcontent-%COMP%]{position:absolute;left:9px;top:19px;color:#6495ed}.Landing__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:172px;height:36px;border:none;padding-left:40px;border-radius:3px;margin-top:10px}.Landing__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus{outline-style:none}.Landing__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:88px;height:35px;border:none;border-radius:4px;margin-top:10px;color:#fff;background:#539cf0}.Landing__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{transition:.2s;background:#46b1f8}.Landing__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:#59b8ff;transform:translateY(-1px)}.Landing__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;color:#898d94;background:#e4e9ef}@keyframes verticalCycle{0%{background-position:0 -200%}to{background-position:0 200%}}"]}),t})()},{path:F.c.SignOn,component:(()=>{class t{constructor(t,e,n,r){this.router=t,this.fb=e,this.$fb=n,this.$auth=r,this.form=this.fb.group({name:[null,Q.n.required],email:[null,Q.n.required],password:[null,Q.n.required]})}ngOnInit(){}signOn(){this.form.valid&&this.$auth.signOn({name:this.form.controls.name.value,email:this.form.controls.email.value,password:this.form.controls.password.value})}toLandingPage(){this.router.navigateByUrl(F.c.Landing)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(M.d),r.Ib(Q.b),r.Ib(W.a),r.Ib(G))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-sign-on-page"]],decls:28,vars:3,consts:[[1,"SignOn"],[1,"SignOn__Logo"],["src","assets/images/logo.png"],[1,"SignOn__Container"],[1,"icon_logo"],[1,"SignOn__Form",3,"formGroup","submit"],["type","text","formControlName","name","placeholder","\u66b1\u7a31","maxlength","10",3,"keyup"],[1,"material-icons"],["type","text","formControlName","email","placeholder","\u4fe1\u7bb1"],["type","password","formControlName","password","placeholder","\u5bc6\u78bc",3,"minlength"],["type","submit",3,"disabled"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"section",0),r.Nb(1,"div",1),r.Jb(2,"img",2),r.Nb(3,"p"),r.mc(4,"F-Coin"),r.Mb(),r.Mb(),r.Nb(5,"div",3),r.Nb(6,"h2"),r.Jb(7,"em",4),r.mc(8,"\u8a3b\u518a"),r.Mb(),r.Nb(9,"form",5),r.Ub("submit",function(){return e.signOn()}),r.Nb(10,"div"),r.Nb(11,"input",6),r.Ub("keyup",function(){return null}),r.Mb(),r.Nb(12,"span",7),r.mc(13," person "),r.Mb(),r.Mb(),r.Nb(14,"div"),r.Jb(15,"input",8),r.Nb(16,"span",7),r.mc(17," mail_outline "),r.Mb(),r.Mb(),r.Nb(18,"div"),r.Jb(19,"input",9),r.Nb(20,"span",7),r.mc(21," password "),r.Mb(),r.Mb(),r.Nb(22,"p"),r.mc(23,"\u9650\u82f1\u6578"),r.Mb(),r.Nb(24,"button",10),r.mc(25,"SIGN ON"),r.Mb(),r.Mb(),r.Nb(26,"p",11),r.Ub("click",function(){return e.toLandingPage()}),r.mc(27," \u56de\u767b\u5165\u9801\uff1f"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.yb(9),r.ac("formGroup",e.form),r.yb(10),r.ac("minlength",6),r.yb(5),r.ac("disabled",e.form.invalid))},directives:[Q.o,Q.j,Q.d,Q.a,Q.i,Q.c,Q.f,Q.g],styles:[".SignOn[_ngcontent-%COMP%]{position:relative;justify-content:center;height:100vh;width:100%;background:linear-gradient(180deg,#4891f1,#305ae4 50%,#4891f1);background-size:100% 400%;animation:verticalCycle 10s infinite}.SignOn[_ngcontent-%COMP%], .SignOn__Logo[_ngcontent-%COMP%]{display:flex;align-items:center}.SignOn__Logo[_ngcontent-%COMP%]{position:absolute;flex-direction:row;top:23px;left:27px}.SignOn__Logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}.SignOn__Logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-weight:700}.SignOn__Container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;width:255px;height:316px;background:#fff;box-shadow:inset 12px 27px 40px 8px rgba(225,236,255,.2);border-radius:7px;border-top:1px solid hsla(0,0%,91.4%,.4);border-left:1px solid hsla(0,0%,91.4%,.4)}.SignOn__Container[_ngcontent-%COMP%]:hover{transition:.2s;transform:translateY(1px);box-shadow:inset 12px 27px 25px 8px rgba(225,236,255,.2),12px 27px 30px 8px rgba(225,236,255,.1)}.SignOn__Container[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{font-size:23px;font-weight:600;padding:10px 0;border-bottom:1px solid #c7c7c7}.SignOn__Container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-child{position:absolute;bottom:11px;right:13px;font-size:.75rem;cursor:pointer}.SignOn__Form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;font-size:12px}.SignOn__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}.SignOn__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .material-icons[_ngcontent-%COMP%]{position:absolute;left:9px;top:19px;color:#539cf0}.SignOn__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:172px;height:36px;padding-left:40px;border-radius:3px;margin-top:10px;border:1px solid #c7c7c7}.SignOn__Form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus{outline-style:none}.SignOn__Form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding-top:3px;padding-right:5px;color:#539cf0;font-size:.75rem;text-align:end}.SignOn__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:88px;height:35px;border:none;border-radius:4px;margin-top:10px;color:#fff;background:#539cf0}.SignOn__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{transition:.2s;background:#46b1f8}.SignOn__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:#59b8ff;transform:translateY(-1px)}.SignOn__Form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;color:#898d94;background:#e4e9ef}@keyframes verticalCycle{0%{background-position:0 -200%}to{background-position:0 200%}}"]}),t})()}];let J=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[M.e.forRoot(Y)],M.e]}),t})();var X=n("phrh"),Z=n("DZuR"),tt=function(t){return t[t.FetchCoinInfo=1]="FetchCoinInfo",t[t.FetchFriendList=2]="FetchFriendList",t[t.UpdateCoinInfo=3]="UpdateCoinInfo",t[t.StartDigging=4]="StartDigging",t[t.EndDigging=5]="EndDigging",t}({});class et{constructor({isDigging:t,lastStopDate:e,totalAmount:n}){this.isDigging=t,this.lastStopDate=e,this.totalAmount=n}updateInfo({isDigging:t,lastStopDate:e,totalAmount:n}){this.isDigging=void 0===t?this.isDigging:t,this.lastStopDate=void 0===e?this.lastStopDate:e,this.totalAmount=void 0===n?this.totalAmount:n}getData(){return{isDigging:this.isDigging,lastStopDate:this.lastStopDate,totalAmount:this.totalAmount}}}let nt=(()=>{class t extends Z.a{constructor(t,e,n){super(e,t),this.$logger=t,this.$fb=e,this.$user=n,this.databaseName="businessCenter"}fetchCoinInfo(t){return new Promise(e=>{this.fetch(!1).read(t).then(({coinInfo:t})=>e(new et(t)))})}updateCoinInfo(t,e,n=!0){return new Promise(r=>{this.fetchCoinInfo(t).then(i=>{i.updateInfo(e),this.fetch(n).update({coinInfo:i.getData()},t,!1).then(()=>r(!0))})})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(K.a),r.Rb(W.a),r.Rb(z.a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),rt=(()=>{class t{constructor(t){this.router=t,this.router.events.pipe(Object(V.a)(t=>t instanceof M.c||t instanceof M.b)).subscribe(t=>this.handleRouterEvent(t))}setModule(t){sessionStorage.setItem("module",t.toString())}getModule(){switch(sessionStorage.getItem("module")){case"user":return F.d.User;case"social":return F.d.Social;case"friend":return F.d.Friend;case"business":return F.d.Business;default:return null}}handleRouterEvent(t){t instanceof M.b&&this.onNavigationEnd(t)}onNavigationEnd(t){"/"===t.url&&this.router.navigateByUrl(i.a.defaultUrl)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(M.d))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function it(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",4),r.Nb(1,"input",7),r.Ub("ngModelChange",function(e){return r.fc(t),r.Xb().module=e})("ngModelChange",function(e){return r.fc(t),r.Xb().moduleChanged.emit(e)}),r.Mb(),r.Nb(2,"label",8),r.mc(3),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit,n=r.Xb();r.yb(1),r.ac("ngModel",n.module)("id",t.key)("value",t.key),r.yb(1),r.ac("for",t.key),r.yb(1),r.oc(" ",t.value," ")}}let ot=(()=>{class t{constructor(t){this.$auth=t,this.moduleChanged=new r.n,this.module=F.d.User,this.user=null,this.Menu=X.c}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(G))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-menu"]],inputs:{module:"module",user:"user"},outputs:{moduleChanged:"moduleChanged"},decls:10,vars:4,consts:[[1,"w-100"],[1,"d-flex","justify-content-center","align-items-center"],[3,"src"],["class","d-flex flex-row align-items-center justify-content-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","align-items-center","justify-content-center"],["id","logout","type","radio",1,"d-none",3,"change"],["for","logout",1,"material-icons"],["type","radio","name","menu",1,"d-none",3,"ngModel","id","value","ngModelChange"],[1,"material-icons",3,"for"]],template:function(t,e){1&t&&(r.Nb(0,"ul",0),r.Nb(1,"li",1),r.Jb(2,"img",2),r.Mb(),r.kc(3,it,4,5,"li",3),r.Yb(4,"keyvalue"),r.Mb(),r.Nb(5,"ul",0),r.Nb(6,"li",4),r.Nb(7,"input",5),r.Ub("change",function(){return e.$auth.logout()}),r.Mb(),r.Nb(8,"label",6),r.mc(9," logout "),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.yb(2),r.ac("src",(null==e.user?null:e.user.avatar)||"assets/images/icons/empty-avatar.jpeg",r.hc),r.yb(1),r.ac("ngForOf",r.Zb(4,2,e.Menu)))},directives:[o.j,Q.l,Q.a,Q.i,Q.k],pipes:[o.f],styles:["[_nghost-%COMP%]{-webkit-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;width:100%;height:100%;padding:20px 0 30px;background:linear-gradient(190deg,#2496ff 5%,10%,#279cef,#1c4bc8);animation:growWidth .3s}img[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:100%;margin-bottom:.5rem;cursor:pointer}.material-icons[_ngcontent-%COMP%]{cursor:pointer;color:#fff;font-size:23px;opacity:.5;animation:Looming .8s}.material-icons[_ngcontent-%COMP%]:hover{opacity:.7}li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:18px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{opacity:1}@keyframes growWidth{0%{width:0}50%{width:40px}to{width:50px}}@keyframes Looming{0%{opacity:0}to{opacity:.5}}"]}),t})();function st(t,e){if(1&t&&(r.Nb(0,"div",2),r.Jb(1,"input",3),r.Nb(2,"label",4),r.mc(3),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.yb(1),r.ac("value",t.id)("id","header-"+t.id)("name","header")("checked","all"===t.id),r.yb(1),r.ac("for","header-"+t.id),r.yb(1),r.nc(t.name)}}const at=function(){return{id:"all",name:"\u5168\u90e8"}},ct=function(){return{id:"friends",name:"\u597d\u53cb"}},ut=function(){return{id:"groups",name:"\u7fa4\u7d44"}},lt=function(){return{id:"official",name:"\u5b98\u65b9\u5e33\u865f"}},ht=function(t,e,n,r){return[t,e,n,r]};let dt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-header"]],decls:2,vars:10,consts:[[1,"Header"],["class","Header__Field",4,"ngFor","ngForOf"],[1,"Header__Field"],["type","radio",1,"d-none",3,"value","id","name","checked"],[1,"text",3,"for"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.kc(1,st,4,6,"div",1),r.Mb()),2&t&&(r.yb(1),r.ac("ngForOf",r.cc(5,ht,r.bc(1,at),r.bc(2,ct),r.bc(3,ut),r.bc(4,lt))))},directives:[o.j],styles:[".Header[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:100%;flex-direction:row}.Header[_ngcontent-%COMP%], .Header__Field[_ngcontent-%COMP%]{height:100%;display:flex}.Header__Field[_ngcontent-%COMP%]{align-items:center;padding:18px 10px 0 12px}.Header__Field[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{height:100%;text-align:end;cursor:pointer;color:#c1c1c1;font-size:.875rem}.Header__Field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .text[_ngcontent-%COMP%]{border-bottom:2px solid #202020;color:#202020}"]}),t})();function ft(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li"),r.Nb(1,"input",6),r.Ub("change",function(){r.fc(t);const n=e.$implicit;return r.Xb(3).router.navigateByUrl("user/chat/"+n.id)}),r.Mb(),r.Nb(2,"label",7),r.Jb(3,"img",8),r.Nb(4,"div",9),r.Nb(5,"p",10),r.mc(6),r.Mb(),r.Nb(7,"p",11),r.mc(8),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit,n=r.Xb(3);r.yb(1),r.ac("id","user-list"+t.id)("checked",t.id===n.activatedFriendId),r.yb(1),r.Ab("is-login",!0===t.isLogin),r.ac("for","user-list"+t.id),r.yb(1),r.Ab("is-login",!0===t.isLogin),r.ac("src",t.avatar||"assets/images/icons/empty-avatar.jpeg",r.hc),r.yb(3),r.nc(t.name),r.yb(2),r.nc("test")}}function pt(t,e){if(1&t&&(r.Lb(0),r.Nb(1,"ul",4),r.kc(2,ft,9,10,"li",5),r.Mb(),r.Kb()),2&t){const t=r.Xb().ngIf;r.yb(2),r.ac("ngForOf",t)}}function gt(t,e){if(1&t&&(r.Nb(0,"section",2),r.kc(1,pt,3,1,"ng-container",3),r.Mb()),2&t){const t=e.ngIf;r.Xb();const n=r.ec(3);r.yb(1),r.ac("ngIf",t.length>0)("ngIfElse",n)}}function mt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"section",12),r.Nb(1,"button"),r.Nb(2,"span",13),r.Ub("click",function(){return r.fc(t),r.Xb().toAddFriend()}),r.mc(3," person_add "),r.Mb(),r.Nb(4,"p"),r.mc(5,"\u52a0\u597d\u53cb\u5427!"),r.Mb(),r.Mb(),r.Mb()}}let bt=(()=>{class t{constructor(t,e){this.$user=t,this.router=e,this.switchToFriend=new r.n,this.friends$=this.$user.friends$.pipe(Object(B.a)(t=>this.onFriendsUpdated(t)))}get activatedFriendId(){const t=this.router.url.split("/");return t[t.length-1]}ngOnChanges({user:t}){t.currentValue.id===sessionStorage.getItem("id")&&this.$user.fetchFriendList(t.currentValue)}toAddFriend(){this.switchToFriend.emit()}onFriendsUpdated(t){}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(z.a),r.Ib(M.d))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-chat-list"]],inputs:{user:"user"},outputs:{switchToFriend:"switchToFriend"},features:[r.wb],decls:4,vars:3,consts:[["class","UserList",4,"ngIf"],["tEmpty",""],[1,"UserList"],[4,"ngIf","ngIfElse"],[1,"UserList__Container"],[4,"ngFor","ngForOf"],["type","radio","name","user-list",1,"d-none",3,"id","checked","change"],[3,"for"],[1,"UserList__img",3,"src"],[1,"column-left"],[1,"UserList__name"],[1,"UserList__summary"],[1,"content-empty"],[1,"material-icons",3,"click"]],template:function(t,e){1&t&&(r.kc(0,gt,2,2,"section",0),r.Yb(1,"async"),r.kc(2,mt,6,0,"ng-template",null,1,r.lc)),2&t&&r.ac("ngIf",r.Zb(1,1,e.friends$))},directives:[o.k,o.j],pipes:[o.b],styles:['.active[_ngcontent-%COMP%]{background:#f8f9fa}.UserList[_ngcontent-%COMP%], .UserList__Container[_ngcontent-%COMP%]{width:100%;height:100%}.UserList__Container[_ngcontent-%COMP%]{overflow-y:auto;margin-block-start:0;margin-block-end:0;padding-inline-start:0}.UserList__Container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .UserList__Container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f8f9fa}.UserList__img[_ngcontent-%COMP%]{position:relative;width:48px;height:48px;margin:0 5px 0 0;background-color:#d9dfe7;border-radius:50%}.UserList[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;width:calc(100%-55px);padding:9px 17px;cursor:pointer}.UserList[_ngcontent-%COMP%]   label.is-login[_ngcontent-%COMP%]:before{content:"";position:absolute;top:6px;left:10px;width:5px;height:5px;background:#28b2fd;border-radius:50%}.UserList[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background:#f8f9fa}.UserList[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .column-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:203px;padding:0 0 0 7px}.UserList[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.UserList[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   img.is-login[_ngcontent-%COMP%]{box-shadow:5px,5px,5px,5px,#28b2fd;filter:drop-shadow(0,0,0,5px,#28b2fd);transition:.3s}.UserList__name[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#000}.UserList__summary[_ngcontent-%COMP%]{width:100%;overflow:hidden;padding:5px 0 0;font-size:.75rem;color:#a9a8a8;text-overflow:ellipsis;line-clamp:2}.content-empty[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;background:#f9fcff}.content-empty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80px;height:80px;color:#539cf0;border-radius:13px;border:1px solid #539cf0;background:#fff;opacity:.5}.content-empty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;transition:1s}.content-empty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{cursor:pointer;font-size:48px}.content-empty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}']}),t})();var vt=n("IzEk"),_t=n("2Vo4"),yt=n("quSY"),wt=n("HDdC"),kt=n("D0XW"),Ct=n("Y7HM");function At(t=0,e=kt.a){return(!Object(Ct.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=kt.a),new wt.a(n=>(n.add(e.schedule(Et,t,{subscriber:n,counter:0,period:t})),n))}function Et(t){const{subscriber:e,counter:n,period:r}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var Ot,xt=n("cp0P"),St=n("0tOT"),Tt=n("eIep"),It=n("zIRd"),Pt=(n("t6oF"),n("6Uf2"),n("xo5E"),n("pqa8")),Dt=n("qOnz"),Nt=n("q/0M");n("x7I3"),(Ot=Pt.f).prototype.loadBundle=Pt.k,Ot.prototype.namedQuery=Pt.s;var Rt=n("mrSG"),jt=n("/6Yf"),Mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ft=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(Rt.__extends)(e,t),e}(Error),Lt=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t;return Object(Rt.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getContext=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function Bt(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Vt,Ut,qt,zt=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return Bt(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?Bt(t,function(t){return e.decode(t)}):t},t}(),Kt=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new zt,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new Lt(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(c){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},t.prototype.getAppCheckToken=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t;return Object(Rt.__generator)(this,function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype.call=function(t,e,n){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,c,u,l,h,d;return Object(Rt.__generator)(this,function(f){switch(f.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=f.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new Ft("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),c=a.timer,u=a.promise,[4,Promise.race([Ht(c,this.postJSON(r,i,o)),u,Ht(c,this.cancelAllRequests)])];case 2:if(!(l=f.sent()))throw new Ft("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Mt[a])return new Ft("internal","internal");r=Mt[a],i=a}var c=s.message;"string"==typeof c&&(i=c),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(u){}return"ok"===r?null:new Ft(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new Ft("internal","Response is not valid JSON object.");if(void 0===(d=l.json.data)&&(d=l.json.result),void 0===d)throw new Ft("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}})})},t}();function Ht(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}Vt=It.default,Ut=fetch.bind(self),qt={Functions:Kt},Vt.INTERNAL.registerComponent(new jt.Component("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new Kt(r,i,s,o,n,Ut)},"PUBLIC").setServiceProps(qt).setMultipleInstances(!0)),It.default.registerVersion("@firebase/functions","0.6.15");var Wt,Gt=n("nbvr"),$t="w:0.4.32",Qt=((Wt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Wt["not-registered"]="Firebase Installation is not registered.",Wt["installation-not-found"]="Firebase Installation not found.",Wt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Wt["app-offline"]="Could not process request. Application offline.",Wt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Wt),Yt=new Dt.ErrorFactory("installations","Installations",Qt);function Jt(t){return t instanceof Dt.FirebaseError&&t.code.includes("request-failed")}function Xt(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Zt(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function te(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,Yt.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function ee(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function ne(t,e){var n=e.refreshToken,r=ee(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function re(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function ie(t,e){var n=e.fid;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s;return Object(Rt.__generator)(this,function(a){switch(a.label){case 0:return e=Xt(t),r=ee(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:$t})},[4,re(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Zt(s.authToken)}];case 3:return[4,te("Create Installation",o)];case 4:throw a.sent()}})})}function oe(t){return new Promise(function(e){setTimeout(e,t)})}var se=/^[cdef][\w-]{21}$/;function ae(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(Rt.__spreadArray)([],Object(Rt.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return se.test(e)?e:""}catch(n){return""}}function ce(t){return t.appName+"!"+t.appId}var ue=new Map;function le(t,e){var n=ce(t);he(n,e),function(t,e){var n=fe();n&&n.postMessage({key:t,fid:e}),pe()}(n,e)}function he(t,e){var n,r,i=ue.get(t);if(i)try{for(var o=Object(Rt.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var de=null;function fe(){return!de&&"BroadcastChannel"in self&&((de=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){he(t.data.key,t.data.fid)}),de}function pe(){0===ue.size&&de&&(de.close(),de=null)}var ge,me="firebase-installations-store",be=null;function ve(){return be||(be=Object(Gt.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(me)}})),be}function _e(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Rt.__generator)(this,function(a){switch(a.label){case 0:return n=ce(t),[4,ve()];case 1:return r=a.sent(),i=r.transaction(me,"readwrite"),[4,(o=i.objectStore(me)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||le(t,e.fid),[2,e]}})})}function ye(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return e=ce(t),[4,ve()];case 1:return n=i.sent(),[4,(r=n.transaction(me,"readwrite")).objectStore(me).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function we(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Rt.__generator)(this,function(c){switch(c.label){case 0:return n=ce(t),[4,ve()];case 1:return r=c.sent(),i=r.transaction(me,"readwrite"),[4,(o=i.objectStore(me)).get(n)];case 2:return s=c.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return c.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:c.sent(),c.label=6;case 6:return[4,i.complete];case 7:return c.sent(),!a||s&&s.fid===a.fid||le(t,a.fid),[2,a]}})})}function ke(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return[4,we(t,function(n){var r=function(t){return Ee(t||{fid:ae(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Yt.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,ie(t,e)];case 1:return n=i.sent(),[2,_e(t,n)];case 2:return Jt(r=i.sent())&&409===r.customData.serverCode?[4,ye(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,_e(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ce(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function Ce(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(Rt.__generator)(this,function(o){switch(o.label){case 0:return[4,Ae(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,oe(100)];case 3:return o.sent(),[4,Ae(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,ke(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function Ae(t){return we(t,function(t){if(!t)throw Yt.create("installation-not-found");return Ee(t)})}function Ee(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Oe(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t,i,o,s,a;return Object(Rt.__generator)(this,function(c){switch(c.label){case 0:return t=function(t,e){var n=e.fid;return Xt(t)+"/"+n+"/authTokens:generate"}(n,e),i=ne(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:$t}})},[4,re(function(){return fetch(t,s)})];case 1:return(a=c.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Zt(c.sent())];case 3:return[4,te("Generate Auth Token",a)];case 4:throw c.sent()}})})}function xe(t,e){return void 0===e&&(e=!1),Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Rt.__generator)(this,function(o){switch(o.label){case 0:return[4,we(t.appConfig,function(r){if(!Te(r))throw Yt.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return[4,Se(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,oe(100)];case 3:return i.sent(),[4,Se(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,xe(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw Yt.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(Rt.__assign)(Object(Rt.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Rt.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Oe(t,e)];case 1:return n=o.sent(),i=Object(Rt.__assign)(Object(Rt.__assign)({},e),{authToken:n}),[4,_e(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!Jt(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,ye(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(Rt.__assign)(Object(Rt.__assign)({},e),{authToken:{requestStatus:0}}),[4,_e(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function Se(t){return we(t,function(t){if(!Te(t))throw Yt.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(Rt.__assign)(Object(Rt.__assign)({},t),{authToken:{requestStatus:0}}):t})}function Te(t){return void 0!==t&&2===t.registrationStatus}function Ie(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return[4,ke(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function Pe(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return Xt(t)+"/"+n}(t,e),r=ne(t,e),i={method:"DELETE",headers:r},[4,re(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,te("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function De(t){return Yt.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new jt.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw De("App Configuration");if(!t.name)throw De("App Name");try{for(var r=Object(Rt.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw De(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return[4,ke(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):xe(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return[4,Ie(t.appConfig)];case 1:return n.sent(),[4,xe(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,we(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Yt.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Yt.create("app-offline");case 3:return[4,Pe(e,n)];case 4:return r.sent(),[4,ye(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){fe();var n=ce(t),r=ue.get(n);r||(r=new Set,ue.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=ce(t),r=ue.get(n);r&&(r.delete(e),0===r.size&&ue.delete(n),pe())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.32")}(It.default);var Ne=((ge={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ge["only-available-in-window"]="This method is available in a Window context.",ge["only-available-in-sw"]="This method is available in a service worker context.",ge["permission-default"]="The notification permission was not granted and dismissed instead.",ge["permission-blocked"]="The notification permission was not granted and blocked instead.",ge["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ge["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ge["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",ge["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ge["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",ge["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",ge["token-update-no-token"]="FCM returned no token when updating the user to push.",ge["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ge["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ge["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ge["invalid-vapid-key"]="The public VAPID key must be a string.",ge["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ge),Re=new Dt.ErrorFactory("messaging","Messaging",Ne),je="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Me=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function Fe(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(Rt.__spreadArray)([],Object(Rt.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Le(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Be="fcm_token_details_db",Ve="fcm_token_object_Store";function Ue(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(Be))return[2,null];r.label=2;case 2:return e=null,[4,Object(Gt.openDb)(Be,5,function(r){return Object(Rt.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return Object(Rt.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Ve)?[4,(n=r.transaction.objectStore(Ve)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:Fe(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Fe(o.auth),p256dh:Fe(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Fe(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(Gt.deleteDb)(Be)];case 4:return r.sent(),[4,Object(Gt.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Gt.deleteDb)("undefined")];case 6:return r.sent(),[2,qe(e)?e:null]}})})}function qe(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var ze="firebase-messaging-store",Ke=null;function He(){return Ke||(Ke=Object(Gt.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(ze)}})),Ke}function We(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return e=Qe(t),[4,He()];case 1:return[4,i.sent().transaction(ze).objectStore(ze).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Ue(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Ge(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function Ge(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Rt.__generator)(this,function(o){switch(o.label){case 0:return n=Qe(t),[4,He()];case 1:return r=o.sent(),[4,(i=r.transaction(ze,"readwrite")).objectStore(ze).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function $e(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return e=Qe(t),[4,He()];case 1:return n=i.sent(),[4,(r=n.transaction(ze,"readwrite")).objectStore(ze).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Qe(t){return t.appConfig.appId}function Ye(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Rt.__generator)(this,function(a){switch(a.label){case 0:return[4,tn(t)];case 1:n=a.sent(),r=en(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Ze(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),Re.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw Re.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Re.create("token-subscribe-no-token");return[2,o.token]}})})}function Je(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Rt.__generator)(this,function(a){switch(a.label){case 0:return[4,tn(t)];case 1:n=a.sent(),r=en(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Ze(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),Re.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw Re.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Re.create("token-update-no-token");return[2,o.token]}})})}function Xe(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return[4,tn(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Ze(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw Re.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),Re.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function Ze(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function tn(t){var e=t.appConfig,n=t.installations;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function en(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==je&&(n.web.applicationPubKey=e),n}function nn(t,e,n){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(Rt.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw Re.create("permission-blocked");return[4,an(e,n)];case 1:return r=a.sent(),[4,We(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Fe(r.getKey("auth")),p256dh:Fe(r.getKey("p256dh"))},i?[3,3]:[2,sn(t,o)];case 3:if(l=(u=o).endpoint===(c=i.subscriptionOptions).endpoint,u.vapidKey===c.vapidKey&&l&&u.auth===c.auth&&u.p256dh===c.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,Xe(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,sn(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,on({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var c,u,l})})}function rn(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return[4,We(t)];case 1:return(n=i.sent())?[4,Xe(t,n.token)]:[3,4];case 2:return i.sent(),[4,$e(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function on(t,e,n){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Je(e,t)];case 1:return r=s.sent(),i=Object(Rt.__assign)(Object(Rt.__assign)({},t),{token:r,createTime:Date.now()}),[4,Ge(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,rn(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function sn(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return[4,Ye(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Ge(t,r)];case 2:return i.sent(),[2,r.token]}})})}function an(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Le(e)})]}})})}function cn(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function un(t){return new Promise(function(e){setTimeout(e,t)})}var ln=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Re.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,We(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:je,r.label=2;case 2:return[2,nn(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return rn(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Re.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Re.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Re.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Re.create("only-available-in-window")},t.prototype.onMessage=function(){throw Re.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Re.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(Rt.__generator)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,pn()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,fn(n,e)]:(r=!1,e.notification?[4,gn(hn(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,un(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,rn(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,We(this.firebaseDependencies)];case 3:return r=i.sent(),[4,rn(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,nn(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:je)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Rt.__generator)(this,function(c){switch(c.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(cn(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,dn(o)]):[2]):[2];case 1:return(a=c.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=c.sent(),[4,un(3e3)];case 3:return c.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=c.sent(),c.label=6;case 6:return a?(r.messageType=Me.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function hn(t){var e,n=Object(Rt.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function dn(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(Rt.__generator)(this,function(c){switch(c.label){case 0:return[4,pn()];case 1:e=c.sent();try{for(n=Object(Rt.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(u){s={error:u}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function fn(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Me.PUSH_RECEIVED;try{for(var i=Object(Rt.__values)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function pn(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function gn(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var mn=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Me.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),cn(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Re.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,nn(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=je),[2]})})},t.prototype.updateSwReg=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Re.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),Re.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,rn(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t;return Object(Rt.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw Re.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Re.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Re.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Re.create("invalid-sw-registration");if(this.swRegistration)throw Re.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Re.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Re.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case Me.NOTIFICATION_CLICKED:return"notification_open";case Me.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function bn(t){return Re.create("missing-app-config-values",{valueName:t})}var vn={isSupported:_n};function _n(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}It.default.INTERNAL.registerComponent(new jt.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw bn("App Configuration Object");if(!t.name)throw bn("App Name");var r=t.options;try{for(var i=Object(Rt.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw bn(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!_n())throw Re.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new ln(n):new mn(n)},"PUBLIC").setServiceProps(vn));var yn="firebasestorage.googleapis.com",wn=function(t){function e(n,r){var i=t.call(this,kn(n),"Firebase Storage: "+r+" ("+kn(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(Rt.__extends)(e,t),e.prototype._codeEquals=function(t){return kn(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Dt.FirebaseError);function kn(t){return"storage/"+t}function Cn(){return new wn("unknown","An unknown error occurred, please check the error payload for server response.")}function An(){return new wn("canceled","User canceled the upload/download.")}function En(){return new wn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function On(t){return new wn("invalid-argument",t)}function xn(){return new wn("app-deleted","The Firebase app was deleted.")}function Sn(t){return new wn("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tn(t,e){return new wn("invalid-format","String does not match format '"+t+"': "+e)}function In(t){throw new wn("internal-error","Internal error: "+t)}var Pn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Dn=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Nn(t,e){switch(t){case Pn.RAW:return new Dn(Rn(e));case Pn.BASE64:case Pn.BASE64URL:return new Dn(jn(t,e));case Pn.DATA_URL:return new Dn((n=new Mn(e)).base64?jn(Pn.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw Tn(Pn.DATA_URL,"Malformed data URL.")}return Rn(e)}(n.rest),new Mn(e).contentType)}var n;throw Cn()}function Rn(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function jn(t,e){switch(t){case Pn.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Tn(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Pn.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Tn(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(u){throw Tn(t,"Invalid character found")}for(var a=new Uint8Array(s.length),c=0;c<s.length;c++)a[c]=s.charCodeAt(c);return a}var Mn=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Tn(Pn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Fn={STATE_CHANGED:"state_changed"},Ln={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Bn(t){switch(t){case"running":case"pausing":case"canceling":return Ln.RUNNING;case"paused":return Ln.PAUSED;case"success":return Ln.SUCCESS;case"canceled":return Ln.CANCELED;case"error":default:return Ln.ERROR}}var Vn=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Un=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Vn.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Vn.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=Vn.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw In("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw In("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw In("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw In("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),qn=function(){function t(){}return t.prototype.createConnection=function(){return new Un},t}(),zn=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(i){return new t(e,"")}if(""===r.path)return r;throw new wn("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),c=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===yn?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],u=0;u<c.length;u++){var l=c[u],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new wn("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Kn=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Hn(t){return"string"==typeof t||t instanceof String}function Wn(t){return Gn()&&t instanceof Blob}function Gn(){return"undefined"!=typeof Blob}function $n(t,e,n,r){if(r<e)throw On("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw On("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Qn(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Yn(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Jn=function(){function t(t,e,n,r,i,o,s,a,c,u,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=c,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(c){o(c)}else null!==s?((r=Cn()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?xn():An():new wn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Xn(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function c(){return 2===a}var u=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u||(u=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Xn(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===Vn.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Xn(s,r))}else{var a=r.getErrorCode()===Vn.ABORT;e(!1,new Xn(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,c())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)l.call.apply(l,Object(Rt.__spreadArray)([null,t],e));else{var r;c()||s?l.call.apply(l,Object(Rt.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,u||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Xn=function(){return function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}();function Zn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function tr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Zn();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Gn())return new Blob(t);throw new wn("unsupported-environment","This browser doesn't seem to support creating Blobs")}var er=function(){function t(t,e){var n=0,r="";Wn(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Wn(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Gn()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(tr.apply(null,r))}var i=e.map(function(t){return Hn(t)?Nn(Pn.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function nr(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function rr(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function ir(t,e){return e}var or=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||ir}}(),sr=null;function ar(){if(sr)return sr;var t=[];t.push(new or("bucket")),t.push(new or("generation")),t.push(new or("metageneration")),t.push(new or("name","fullPath",!0));var e=new or("name");e.xform=function(t,e){return function(t){return!Hn(t)||t.length<2?t:rr(t)}(e)},t.push(e);var n=new or("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new or("timeCreated")),t.push(new or("updated")),t.push(new or("md5Hash",null,!0)),t.push(new or("cacheControl",null,!0)),t.push(new or("contentDisposition",null,!0)),t.push(new or("contentEncoding",null,!0)),t.push(new or("contentLanguage",null,!0)),t.push(new or("contentType",null,!0)),t.push(new or("metadata","customMetadata",!0)),sr=t}function cr(t,e,n){var r=nr(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new zn(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function ur(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var lr=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function hr(t){if(!t)throw Cn()}function dr(t,e){return function(n,r){var i=cr(t,r,e);return hr(null!==i),i}}function fr(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new wn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new wn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new wn("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new wn("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function pr(t){var e=fr(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new wn("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function gr(t,e,n){var r=Qn(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new lr(r,"GET",dr(t,n),i);return o.errorHandler=pr(e),o}function mr(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var br=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function vr(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){hr(!1)}return hr(!!n&&-1!==(e||["active"]).indexOf(n)),n}var _r=262144,yr=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function wr(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var kr=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=ar(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=mr(e,r,i),a={name:s.fullPath},c=Qn(o,t.host),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=ur(s,n),h=new lr(c,"POST",function(t){var e;vr(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){hr(!1)}return hr(Hn(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=u,h.body=l,h.errorHandler=fr(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new lr(n,"POST",function(t){var e=vr(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){hr(!1)}n||hr(!1);var i=Number(n);return hr(!isNaN(i)),new br(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=fr(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=_r*this._chunkMultiplier,n=new br(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var c=new br(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new wn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var u=c.total-c.current,l=u;i>0&&(l=Math.min(l,i));var h=c.current,d={"X-Goog-Upload-Command":l===u?"upload, finalize":"upload","X-Goog-Upload-Offset":""+c.current},f=r.slice(h,h+l);if(null===f)throw En();var p=new lr(n,"POST",function(t,n){var i,s=vr(t,["active","final"]),a=c.current+l,u=r.size();return i="final"===s?dr(e,o)(t,n):null,new br(a,u,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=fr(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(c){return t._error=c,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){_r*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=gr(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var c=mr(e,r,i),u=ur(c,n),l=er.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw En();var h={name:c.fullPath},d=Qn(o,t.host),f=t.maxUploadRetryTime,p=new lr(d,"POST",dr(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=fr(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=An(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Bn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new yr(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Bn(this._state)){case Ln.SUCCESS:wr(this._resolve.bind(null,this.snapshot))();break;case Ln.CANCELED:case Ln.ERROR:wr(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Bn(this._state)){case Ln.RUNNING:case Ln.PAUSED:t.next&&wr(t.next.bind(t,this.snapshot))();break;case Ln.SUCCESS:t.complete&&wr(t.complete.bind(t))();break;case Ln.CANCELED:case Ln.ERROR:t.error&&wr(t.error.bind(t,this._error))();break;default:t.error&&wr(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Cr=function(){function t(t,e){this._service=t,this._location=e instanceof zn?e:zn.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new zn(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return rr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new zn(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Sn(t)},t}();function Ar(t){var e={prefixes:[],items:[]};return Er(t,e).then(function(){return e})}function Er(t,e,n){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return[4,Or(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Er(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function Or(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&$n("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Qn(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,c=new lr(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=nr(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new zn(e,s));r.prefixes.push(a)}if(n.items)for(var c=0,u=n.items;c<u.length;c++)a=t._makeStorageReference(new zn(e,u[c].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return hr(null!==i),i}}(t,e.bucket),a);return c.urlParams=o,c.errorHandler=fr(e),c}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function xr(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new zn(t._location.bucket,n);return new Cr(t.storage,r)}function Sr(t){return/^[A-Za-z]+:\/\//.test(t)}function Tr(t,e){if(t instanceof Dr){var n=t;if(null==n._bucket)throw new wn("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Cr(n,n._bucket);return null!=e?Tr(r,e):r}return void 0!==e?xr(t,e):t}function Ir(t,e){if(e&&Sr(e)){if(t instanceof Dr)return new Cr(t,e);throw On("To use ref(service, url), the first argument must be a Storage instance.")}return Tr(t,e)}function Pr(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:zn.makeFromBucketSpec(n,t)}var Dr=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=yn,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?zn.makeFromBucketSpec(i,this._host):Pr(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?zn.makeFromBucketSpec(this._url,t):Pr(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){$n("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){$n("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t;return Object(Rt.__generator)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Cr(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Kn(xn());var i=function(t,e,n,r,i,o){var s=Yn(t.urlParams),a=t.url+s,c=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(c,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new Jn(a,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function Nr(t,e){return Ir(t=Object(Dt.getModularInstance)(t),e)}var Rr=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),jr=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Rr(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new Rr(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Rr(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Rr(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Mr=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new Fr(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new Fr(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Fr=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return xr(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new jr(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new kr(t,new er(e),n)}(t=Object(Dt.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Pn.RAW),this._throwIfRoot("putString");var r=Nn(e,t),i=Object(Rt.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new jr(new kr(this._delegate,new er(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,Ar(t=Object(Dt.getModularInstance)(t))).then(function(t){return new Mr(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return Or(t=Object(Dt.getModularInstance)(t),e)}(this._delegate,t||void 0).then(function(t){return new Mr(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=gr(t.storage,t._location,ar()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Dt.getModularInstance)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Qn(e.fullServerUrl(),t.host),o=ur(n,r),s=t.maxOperationRetryTime,a=new lr(i,"PATCH",dr(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=pr(e),a}(t.storage,t._location,e,ar()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(Dt.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Qn(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new lr(r,"GET",function(t,e){return function(n,r){var i=cr(t,r,e);return hr(null!==i),function(t,e,n){var r=nr(e);if(null===r)return null;if(!Hn(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return Qn("/b/"+o(t.bucket)+"/o/"+o(r),n)+Yn({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=pr(e),o}(t.storage,t._location,ar()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new wn("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(Dt.getModularInstance)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Qn(e.fullServerUrl(),t.host),r=new lr(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=pr(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Dt.getModularInstance)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Sn(t)},t}(),Lr=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Sr(t))throw On("ref() expected a child path but got a URL, use refFromURL instead.");return new Fr(Nr(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Sr(t))throw On("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zn.makeFromUrl(t,this._delegate.host)}catch(e){throw On("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fr(Nr(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"==typeof i?i:Object(Dt.createMockUserToken)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,t,e,n)},t}();function Br(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Lr(r,new Dr(r,i,o,new qn,n,It.default.SDK_VERSION))}!function(t){var e={TaskState:Ln,TaskEvent:Fn,StringFormat:Pn,Storage:Dr,Reference:Fr};t.INTERNAL.registerComponent(new jt.Component("storage",Br,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.0")}(It.default);var Vr,Ur,qr,zr="0.4.18",Kr=zr,Hr="FB-PERF-TRACE-MEASURE",Wr="_wt_",Gr="_fcp",$r="_fid",Qr="@firebase/performance/config",Yr="@firebase/performance/configexpire",Jr="Performance",Xr=((Vr={})["trace started"]="Trace {$traceName} was started before.",Vr["trace stopped"]="Trace {$traceName} is not running.",Vr["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Vr["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Vr["no window"]="Window is not available.",Vr["no app id"]="App id is not available.",Vr["no project id"]="Project id is not available.",Vr["no api key"]="Api key is not available.",Vr["invalid cc log"]="Attempted to queue invalid cc event",Vr["FB not default"]="Performance can only start when Firebase app instance is the default one.",Vr["RC response not ok"]="RC response is not ok",Vr["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Vr["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Vr["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Vr["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Vr),Zr=new Dt.ErrorFactory("performance",Jr,Xr),ti=new Nt.Logger(Jr);ti.logLevel=Nt.LogLevel.INFO;var ei,ni=function(){function t(t){if(this.window=t,!t)throw Zr.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(Dt.isIndexedDBAvailable)()||(ti.info("IndexedDB is not supported by current browswer"),!1):(ti.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Ur&&(Ur=new t(qr)),Ur},t}();function ri(t,e){var n=t.length-e.length;if(n<0||n>1)throw Zr.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var ii,oi=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ri("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ri("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Zr.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Zr.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Zr.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===ei&&(ei=new t),ei},t}();function si(){return ii}var ai=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),ci=["firebase_","google_","ga_"],ui=new RegExp("^[a-zA-Z]\\w*$");function li(){var t=ni.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function hi(){switch(ni.getInstance().document.visibilityState){case"visible":return ai.VISIBLE;case"hidden":return ai.HIDDEN;default:return ai.UNKNOWN}}function di(){var t=ni.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function fi(t){if(!t)return t;var e=oi.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=pi(e.tracesSamplingRate),e.logNetworkAfterSampling=pi(e.networkRequestsSamplingRate),t}function pi(t){return Math.random()<=t}var gi,mi=1;function bi(){return mi=2,gi=gi||function(){var t=ni.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=oi.getInstance().installationsService.getId()).then(function(t){ii=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=ni.getInstance().localStorage;if(t){var e=t.getItem(Yr);if(e&&Number(e)>Date.now()){var n=t.getItem(Qr);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(fi(e),Promise.resolve()):function(t){return(e=oi.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+oi.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+oi.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:oi.getInstance().getAppId(),app_version:Kr,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw Zr.create("RC response not ok")})}).catch(function(){ti.info("Could not fetch config, will use default configs")});var e}(t).then(fi).then(function(t){return function(t){var e=ni.getInstance().localStorage;t&&e&&(e.setItem(Qr,JSON.stringify(t)),e.setItem(Yr,String(Date.now()+60*oi.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return vi()},function(){return vi()})}function vi(){mi=3}var _i,yi=1e4,wi=3,ki=[],Ci=!1;function Ai(t){setTimeout(function(){var t,e;if(0!==wi)return ki.length?(e=(t=ki.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=oi.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||ti.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=yi;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(ki=Object(Rt.__spreadArray)(Object(Rt.__spreadArray)([],e),ki),ti.info("Retry transport request later.")),wi=3,Ai(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:oi.getInstance().logSource,log_event:e},t).catch(function(){ki=Object(Rt.__spreadArray)(Object(Rt.__spreadArray)([],t),ki),wi--,ti.info("Tries left: "+wi+"."),Ai(yi)})):Ai(yi)},t)}function Ei(t){if(!t.eventTime||!t.message)throw Zr.create("invalid cc log");ki=Object(Rt.__spreadArray)(Object(Rt.__spreadArray)([],ki),[t])}function Oi(t,e){_i||(_i=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ei({message:t.apply(void 0,e),eventTime:Date.now()})}}(Ti)),_i(t,e)}function xi(t){var e=oi.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&ni.getInstance().requiredApisAvailable()&&(t.isAuto&&hi()!==ai.VISIBLE||(3===mi?Si(t):bi().then(function(){return Si(t)},function(){return Si(t)})))}function Si(t){if(si()){var e=oi.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return Oi(t,1)},0)}}function Ti(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Ii(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Ii(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function Ii(){return{google_app_id:oi.getInstance().getAppId(),app_instance_id:si(),web_app_info:{sdk_version:Kr,page_url:ni.getInstance().getUrl(),service_worker_status:li(),visibility_state:hi(),effective_connection_type:di()},application_process_state:0}}var Pi=["_fp",Gr,$r],Di=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=ni.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Zr.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Zr.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),xi(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Zr.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Zr.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(Rt.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}xi(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(Wr)&&Pi.indexOf(i)>-1)&&i.startsWith("_"))throw Zr.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&ti.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||ci.some(function(t){return n.startsWith(t)})||!n.match(ui)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Zr.create("invalid attribute name",{attributeName:t});if(!i)throw Zr.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(Rt.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=ni.getInstance().getUrl();if(i){var o=new t(Wr+i,!0),s=Math.floor(1e3*ni.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var c=n.find(function(t){return"first-contentful-paint"===t.name});c&&c.startTime&&o.putMetric(Gr,Math.floor(1e3*c.startTime)),r&&o.putMetric($r,Math.floor(1e3*r))}xi(o)}},t.createUserTimingTrace=function(e){xi(new t(e,!1,e))},t}();function Ni(t){var e=t;if(e&&void 0!==e.responseStart){var n=ni.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=oi.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return Oi(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Ri(){si()&&(setTimeout(function(){return function(){var t=ni.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){Di.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),Di.createOobTrace(e,n,t))})}else Di.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=ni.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)Ni(n[e]);t.setupObserver("resource",Ni)}()},0),setTimeout(function(){return function(){for(var t=ni.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)ji(n[e]);t.setupObserver("measure",ji)}()},0))}function ji(t){var e=t.name;e.substring(0,Hr.length)!==Hr&&Di.createUserTimingTrace(e)}var Mi=function(){function t(t){this.app=t,ni.getInstance().requiredApisAvailable()&&Object(Dt.validateIndexedDBOpenable)().then(function(t){t&&(Ci||(Ai(5500),Ci=!0),bi().then(Ri,Ri))}).catch(function(t){ti.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new Di(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return oi.getInstance().instrumentationEnabled},set:function(t){oi.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return oi.getInstance().dataCollectionEnabled},set:function(t){oi.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new jt.Component("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw Zr.create("FB not default");if("undefined"==typeof window)throw Zr.create("no window");return function(t){qr=t}(window),oi.getInstance().firebaseAppInstance=t,oi.getInstance().installationsService=e,new Mi(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",zr)}(It.default);var Fi,Li="https://www.googletagmanager.com/gtag/js",Bi=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),Vi=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),Ui=new Nt.Logger("@firebase/analytics");function qi(t,e,n,r,i,o){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var s,a,c,u;return Object(Rt.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(c=a.find(function(t){return t.measurementId===i}))?[4,e[c.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return u=l.sent(),Ui.error(u),[3,8];case 8:return t(Bi.CONFIG,i,o),[2]}})})}function zi(t,e,n,r,i){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var o,s,a,c,u,l,h;return Object(Rt.__generator)(this,function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=d.sent(),c=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},u=0,l=s;u<l.length&&"break"!==c(l[u]);u++);d.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return d.sent(),t(Bi.EVENT,r,i||{}),[3,5];case 4:return h=d.sent(),Ui.error(h),[3,5];case 5:return[2]}})})}var Ki=((Fi={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Fi["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Fi["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Fi["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Fi["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Fi["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Fi["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Fi["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Fi["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Fi),Hi=new Dt.ErrorFactory("analytics","Analytics",Ki),Wi=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Gi(t){var e;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Rt.__generator)(this,function(c){switch(c.label){case 0:return n=t.appId,r={method:"GET",headers:(u=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":u}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=c.sent()).status||304===o.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,o.json()];case 3:return a=c.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Hi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var u})})}function $i(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Wi),Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,s,a,c,u,l,h;return Object(Rt.__generator)(this,function(d){switch(d.label){case 0:e=t.appId,s=t.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Qi(n,i)];case 2:return d.sent(),[3,4];case 3:if(a=d.sent(),s)return Ui.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return d.trys.push([4,6,,7]),[4,Gi(t)];case 5:return c=d.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(!function(t){if(!(t instanceof Dt.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u=d.sent())){if(r.deleteThrottleMetadata(e),s)return Ui.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:e,measurementId:s}];throw u}return l=503===Number(u.customData.httpStatus)?Object(Dt.calculateBackoffMillis)(o,r.intervalMillis,30):Object(Dt.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),Ui.debug("Calling attemptFetch again in "+l+" millis"),[2,$i(t,h,n,r)];case 7:return[2]}})})}function Qi(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(Hi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var Yi,Ji,Xi=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),Zi={},to=[],eo={},no="dataLayer",ro="gtag",io=!1;function oo(t){if(io)throw Hi.create("already-initialized");t.dataLayerName&&(no=t.dataLayerName),t.gtagName&&(ro=t.gtagName)}var so="analytics";function ao(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(t){switch(t.label){case 0:if(Object(Dt.isBrowserExtension)())return[2,!1];if(!Object(Dt.areCookiesEnabled)())return[2,!1];if(!Object(Dt.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(Dt.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new jt.Component(so,function(t){return function(t,e){!function(){var t=[];if(Object(Dt.isBrowserExtension)()&&t.push("This is a browser extension environment."),Object(Dt.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=Hi.create("invalid-analytics-context",{errorInfo:e});Ui.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw Hi.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Hi.create("no-api-key");Ui.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Zi[i])throw Hi.create("already-exists",{id:i});if(!io){n=no,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var a;return Object(Rt.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),i!==Bi.EVENT?[3,2]:[4,zi(t,e,n,o,s)];case 1:return c.sent(),[3,5];case 2:return i!==Bi.CONFIG?[3,4]:[4,qi(t,e,n,r,o,s)];case 3:return c.sent(),[3,5];case 4:t(Bi.SET,o),c.label=5;case 5:return[3,7];case 6:return a=c.sent(),Ui.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(Zi,to,eo,no,ro);Ji=o.wrappedGtag,Yi=o.gtagCore,io=!0}return Zi[i]=function(t,e,n,r,i,o){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var s,a,c,u,l,h,d;return Object(Rt.__generator)(this,function(f){switch(f.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=Wi),Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,c=this;return Object(Rt.__generator)(this,function(u){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw Hi.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw Hi.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Xi,setTimeout(function(){return Object(Rt.__awaiter)(c,void 0,void 0,function(){return Object(Rt.__generator)(this,function(t){return a.abort(),[2]})})},6e4),[2,$i({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ui.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return Ui.error(t)}),e.push(s),a=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t;return Object(Rt.__generator)(this,function(e){switch(e.label){case 0:return Object(Dt.isIndexedDBAvailable)()?[3,1]:(Ui.warn(Hi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(Dt.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Ui.warn(Hi.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return c=f.sent(),u=c[0],l=c[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Li))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=Li+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,u.measurementId),i("js",new Date),(d={}).origin="firebase",d.update=!0,h=d,null!=l&&(h.firebase_id=l),i(Bi.CONFIG,u.measurementId,h),[2,u.measurementId]}})})}(t,to,eo,e,Yi,no),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var o,s;return Object(Rt.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(Bi.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(Rt.__assign)(Object(Rt.__assign)({},r),{send_to:o}),t(Bi.EVENT,n,s),a.label=3;case 3:return[2]}})})})(Ji,Zi[i],t,e,n).catch(function(t){return Ui.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var i;return Object(Rt.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(Bi.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Bi.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(Ji,Zi[i],t,e).catch(function(t){return Ui.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var i;return Object(Rt.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(Bi.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Bi.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(Ji,Zi[i],t,e).catch(function(t){return Ui.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,c;return Object(Rt.__generator)(this,function(u){switch(u.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(Bi.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:c=u.sent(),t(Bi.CONFIG,c,{update:!0,user_properties:n}),u.label=3;case 3:return[2]}})})})(Ji,Zi[i],t,e).catch(function(t){return Ui.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(Zi[i],t).catch(function(t){return Ui.error(t)})},INTERNAL:{delete:function(){return delete Zi[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:oo,EventName:Vi,isSupported:ao})),t.INTERNAL.registerComponent(new jt.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(so).getImmediate().logEvent}}catch(e){throw Hi.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.18")}(It.default);var co,uo=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),lo=((co={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",co["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",co["registration-api-key"]="Undefined API key. Check Firebase app initialization.",co["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",co["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",co["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",co["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",co["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",co["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",co["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',co["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',co["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",co["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",co),ho=new Dt.ErrorFactory("remoteconfig","Remote Config",lo),fo=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c,u,l,h,d,f,p,g,m;return Object(Rt.__generator)(this,function(b){switch(b.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=b.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===v&&(v=navigator),v.languages&&v.languages[0]||v.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),b.label=2;case 2:return b.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return b.sent(),[4,s];case 4:return c=b.sent(),[3,6];case 5:throw u=b.sent(),l="fetch-client-network","AbortError"===u.name&&(l="fetch-timeout"),ho.create(l,{originalErrorMessage:u.message});case 6:if(h=c.status,d=c.headers.get("ETag")||void 0,200!==c.status)return[3,11];g=void 0,b.label=7;case 7:return b.trys.push([7,9,,10]),[4,c.json()];case 8:return g=b.sent(),[3,10];case 9:throw m=b.sent(),ho.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:f=g.entries,p=g.state,b.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw ho.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:d,config:f}]}var v})})},t}(),po=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),go=["1","true","t","yes","y","on"],mo=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&go.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),bo=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Nt.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=Nt.LogLevel.SILENT;break;default:this._logger.logLevel=Nt.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t,e,n;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:t=new po,setTimeout(function(){return Object(Rt.__awaiter)(r,void 0,void 0,function(){return Object(Rt.__generator)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof Dt.FirebaseError&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o})})},t.prototype.fetchAndActivate=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){return Object(Rt.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(Rt.__assign)(Object(Rt.__assign)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new mo("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new mo("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new mo("static"))},t}();function vo(t,e){var n=t.target.error||void 0;return ho.create(e,{originalErrorMessage:n&&n.message})}var _o="app_namespace_store",yo=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(vo(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(_o,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([_o],"readonly").objectStore(_o),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(vo(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(c){i(ho.create("storage-get",{originalErrorMessage:c&&c.message}))}})]}})})},t.prototype.set=function(t,e){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var n,r=this;return Object(Rt.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([_o],"readwrite").objectStore(_o),a=r.createCompositeKey(t);try{var c=s.put({compositeKey:a,value:e});c.onerror=function(t){o(vo(t,"storage-set"))},c.onsuccess=function(){i()}}catch(u){o(ho.create("storage-set",{originalErrorMessage:u&&u.message}))}})]}})})},t.prototype.delete=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Rt.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([_o],"readwrite").objectStore(_o),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(vo(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(c){i(ho.create("storage-delete",{originalErrorMessage:c&&c.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),wo=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function ko(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(ho.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var Co,Ao=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e;return Object(Rt.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(Rt.__awaiter)(this,void 0,void 0,function(){var e,i,o;return Object(Rt.__generator)(this,function(s){switch(s.label){case 0:return[4,ko(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Dt.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(Dt.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),Eo="@firebase/remote-config";(Co=It.default).INTERNAL.registerComponent(new jt.Component("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw ho.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,c=o.appId;if(!s)throw ho.create("registration-project-id");if(!a)throw ho.create("registration-api-key");if(!c)throw ho.create("registration-app-id");var u=new yo(c,r.name,n=n||"firebase"),l=new wo(u),h=new Nt.Logger(Eo);h.logLevel=Nt.LogLevel.ERROR;var d=new fo(i,Co.SDK_VERSION,n,s,a,c),f=new Ao(d,u),p=new uo(f,u,l,h),g=new bo(r,p,l,u,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),Co.registerVersion(Eo,"0.1.43"),n("X8/r");var Oo="8.10.0";It.default.registerVersion("firebase",Oo,"app"),It.default.SDK_VERSION=Oo,console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),It.default.registerVersion("firebase","8.10.0");let xo=(()=>{class t extends St.a{constructor(t,e,n,r){super(t),this.$logger=t,this.$business=e,this.$user=n,this.$overlay=r,this.featureName="Coining",this.assets=new _t.a(0),this.assets$=this.assets.asObservable(),this.subscription=null}resolveAction({action:t,id:e,info:n,isLoading:r}){return new Promise(i=>{switch(t){case tt.FetchCoinInfo:this.assets$.pipe(Object(vt.a)(1)).subscribe(t=>{0!==t?this.fireEvent({action:tt.UpdateCoinInfo,id:e,info:{totalAmount:t}}).then(()=>i(this.fetchCoinInfo(e))):i(this.fetchCoinInfo(e))});break;case tt.UpdateCoinInfo:i(this.$business.updateCoinInfo(e,n,r));break;case tt.StartDigging:i(this.fireEvent({action:tt.UpdateCoinInfo,id:e,info:{isDigging:!0}}).then(()=>{this.subscription||(this.subscription=new yt.a,this.subscription.add(this.settlement()),this.subscription.add(this.asyncTotalAmount(e)))}));break;case tt.EndDigging:this.assets$.pipe(Object(vt.a)(1)).subscribe(t=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),i(this.fireEvent({action:tt.UpdateCoinInfo,id:e,info:{isDigging:!1,lastStopDate:It.default.firestore.Timestamp.now(),totalAmount:t}}))})}})}settlement(){return At(1e3).pipe(Object(Tt.a)(()=>Object(xt.a)([this.assets$.pipe(Object(vt.a)(1)),this.$user.friends$.pipe(Object(vt.a)(1),Object(L.a)(t=>t.filter(({isLogin:t})=>t).length))]))).subscribe(([t,e])=>this.updateTotalAmount(t,e))}asyncTotalAmount(t){return At(1e4).pipe(Object(Tt.a)(()=>this.assets$.pipe(Object(vt.a)(1)))).subscribe(e=>this.fireEvent({action:tt.UpdateCoinInfo,id:t,info:{totalAmount:e}}))}fetchCoinInfo(t){const e=this.$overlay.startLoading();return new Promise(n=>this.$business.fetchCoinInfo(t).then(t=>{this.$logger.systemMessage("Coin info has successfully updated.\n Total Assets: "+t.totalAmount),this.assets.next(t.totalAmount||0),this.$overlay.endLoading(e),n(t)}))}updateTotalAmount(t,e){this.assets.next(t+1+.5*e)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(K.a),r.Rb(nt),r.Rb(z.a),r.Rb(H.a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function So(t,e){if(1&t&&(r.Nb(0,"strong"),r.mc(1),r.Mb()),2&t){const t=e.ngIf;r.yb(1),r.oc(" ",t," ")}}function To(t,e){if(1&t){const t=r.Ob();r.Nb(0,"section",5),r.Nb(1,"div",6),r.Nb(2,"p"),r.mc(3,"\u76ee\u524d\u5171"),r.Nb(4,"strong"),r.mc(5),r.Mb(),r.mc(6,"\u4eba\u5728\u7dda\u4e0a"),r.Mb(),r.Nb(7,"p"),r.mc(8,"\u4e00\u79d2\u53ef\u6316\u51fa"),r.Nb(9,"strong"),r.mc(10),r.Mb(),r.mc(11,"\u679a"),r.Mb(),r.Nb(12,"p"),r.mc(13," \u7e3d\u5171\u5df2\u7d2f\u7a4d\u6301\u6709"),r.kc(14,So,2,1,"strong",7),r.Yb(15,"async"),r.mc(16,"\u679a "),r.Mb(),r.Mb(),r.Nb(17,"label",8),r.Nb(18,"input",9),r.Ub("change",function(){return r.fc(t),r.Xb().digging()}),r.Mb(),r.Nb(19,"p"),r.mc(20),r.Nb(21,"span",2),r.mc(22),r.Mb(),r.Mb(),r.Nb(23,"span",10),r.Nb(24,"em",2),r.mc(25),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Xb();r.yb(2),r.Ab("toggle-active",t.coinInfo.isDigging),r.yb(3),r.nc(t.onlineFriends.length),r.yb(2),r.Ab("toggle-active",t.coinInfo.isDigging),r.yb(3),r.nc(t.currentIncomePerSec),r.yb(2),r.Ab("toggle-active",t.coinInfo.isDigging),r.yb(2),r.ac("ngIf",r.Zb(15,21,t.assets$)),r.yb(3),r.jc("justify-content",t.coinInfo.isDigging?"flex-start":"flex-end"),r.yb(1),r.ac("checked",t.coinInfo.isDigging),r.yb(1),r.jc("flex-direction",t.coinInfo.isDigging?"row-reverse":"row"),r.yb(1),r.oc(" ",t.coinInfo.isDigging?"\u505c\u6b62\u6316\u7926":"\u958b\u555f\u6316\u7926"," "),r.yb(2),r.oc(" ",t.coinInfo.isDigging?"keyboard_double_arrow_left":"keyboard_double_arrow_right"," "),r.yb(1),r.Ab("toggle-active",t.coinInfo.isDigging),r.yb(1),r.Ab("toggle-active",t.coinInfo.isDigging),r.yb(1),r.nc(t.coinInfo.isDigging?"check_circle":"do_not_disturb_on")}}let Io=(()=>{class t{constructor(t,e,n){this.$user=t,this.$feature=e,this.$overlay=n,this.assets$=this.$feature.assets$.pipe(Object(L.a)(t=>""+t)),this.friends=[]}get onlineFriends(){return this.friends.filter(({isLogin:t})=>t)}ngOnInit(){this.initial()}get currentIncomePerSec(){return 1+.5*this.onlineFriends.length}digging(){var t,e,n,r;if(this.coinInfo.isDigging)this.$feature.fireEvent({action:tt.EndDigging,id:null===(r=this.user)||void 0===r?void 0:r.id}).then(()=>{this.coinInfo.isDigging=!1});else if(this.isNextDayAfterStop())this.$feature.fireEvent({action:tt.StartDigging,id:null===(t=this.user)||void 0===t?void 0:t.id}).then(()=>{this.coinInfo.isDigging=!0});else{const t=null===(n=null===(e=this.coinInfo)||void 0===e?void 0:e.lastStopDate)||void 0===n?void 0:n.toDate();alert(`\u4e0b\u6b21\u6316\u7926\u6642\u9593${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()+1}`)}}initial(){var t;const e=this.$overlay.startLoading();this.$user.friends$.pipe(Object(vt.a)(1)).subscribe(t=>this.friends=t),this.$feature.fireEvent({action:tt.FetchCoinInfo,id:null===(t=this.user)||void 0===t?void 0:t.id}).then(t=>{var n;this.coinInfo=t,t.isDigging&&this.$feature.fireEvent({action:tt.StartDigging,id:null===(n=this.user)||void 0===n?void 0:n.id}),this.$overlay.endLoading(e)})}isNextDayAfterStop(){var t,e;const n=new Date,r=null===(e=null===(t=this.coinInfo)||void 0===t?void 0:t.lastStopDate)||void 0===e?void 0:e.toDate();return n>=new Date(r.setDate(r.getDate()+1))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(z.a),r.Ib(xo),r.Ib(H.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-coining"]],inputs:{user:"user"},decls:10,vars:1,consts:[[1,"header"],[3,"click"],[1,"material-icons"],["width","100%","height","300px"],["class","d-flex flex-column align-item-center",4,"ngIf"],[1,"d-flex","flex-column","align-item-center"],[1,"content"],[4,"ngIf"],["for","coining-toggle",1,"toggle"],["type","checkbox","id","coining-toggle",1,"d-none",3,"checked","change"],[1,"button"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"h3"),r.mc(2,"\u6316\u7926"),r.Mb(),r.Nb(3,"a",1),r.Ub("click",function(){return null}),r.Nb(4,"p"),r.mc(5,"\u7dda\u5716\u5206\u6790"),r.Mb(),r.Nb(6,"span",2),r.mc(7," arrow_right "),r.Mb(),r.Mb(),r.Mb(),r.Jb(8,"canvas",3),r.kc(9,To,26,23,"section",4)),2&t&&(r.yb(9),r.ac("ngIf",e.coinInfo))},directives:[o.k],pipes:[o.b],styles:['[_nghost-%COMP%]{-webkit-user-select:none;user-select:none;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;width:100%;height:100%;color:#f1f5fc;background:linear-gradient(190deg,#2496ff 5%,10%,#279cef,#1c4bc8)}[_nghost-%COMP%] > section[_ngcontent-%COMP%]{padding-left:42px}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:calc(100% - 15px);height:30px;margin:24px 0 30px 15px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;line-height:30px}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;cursor:pointer;display:flex;flex-direction:row;align-items:center;width:auto;height:100%;color:#f1f5fc}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover > .material-icons[_ngcontent-%COMP%]:before{border:1px solid #acacac}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{padding-left:5px}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]:before{content:"";position:absolute;right:-1px;top:-3px;display:flex;height:36px;width:100px;border:1px solid #cfcfcf;border-radius:4px 0 0 4px;transition:.5s}.content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.75rem}.content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{position:relative;padding-top:15px}.content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:before{position:absolute;content:"";left:-17px;top:21px;height:10px;width:6px;border-radius:5px;background-color:#0047d6;transform-origin:bottom}.content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{padding:0 3px;font-size:1.125rem;font-weight:700;color:#0047d6}.content[_ngcontent-%COMP%] > .toggle-active[_ngcontent-%COMP%]:before{animation:tik-tok 2s ease-in-out 1s infinite}.toggle[_ngcontent-%COMP%]{cursor:pointer;position:relative;display:flex;flex-direction:row;width:105px;height:32px;margin-top:23px;background:#c9d2d6;border-radius:20px}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover + span[_ngcontent-%COMP%]{opacity:1}.toggle[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;font-size:.75rem;line-height:30px;color:transparent;background:linear-gradient(90deg,#2d7cd6,#b8c6df,#2d7cd6);-webkit-background-clip:text;background-clip:text;background-size:200% 100%;animation:horizontalCycle 3s infinite}.toggle[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{position:absolute;top:3px;left:3px;height:26px;width:26px;background:#fff8dc;transition:.3s;border-radius:50%;opacity:.5}.toggle[_ngcontent-%COMP%]   .button.toggle-active[_ngcontent-%COMP%]{transform:translateX(72px) rotate(1turn)}.toggle[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{position:absolute;font-size:2rem;top:-3px;left:-3px;color:#bdb76b;transition:.3s}.toggle[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   em.toggle-active[_ngcontent-%COMP%]{color:#1791f5!important}@keyframes tik-tok{0%{height:10px;top:21px}20%{height:5px;top:21px}30%{height:12px;top:15px}40%{height:10px;top:14px;background-color:#6495ed}60%{height:10px;top:15px;background-color:#0047d6}80%{height:10px;top:21px}90%{height:9px;top:21px}to{height:10px}}@keyframes horizontalCycle{0%{background-position:-200% 0}to{background-position:200% 0}}']}),t})();var Po=n("iuoO"),Do=n("AWfg");function No(t,e){1&t&&(r.Nb(0,"span",9),r.mc(1," \u8acb\u8f38\u5165\u82f1\u6578\u5b57 "),r.Mb())}function Ro(t,e){1&t&&(r.Nb(0,"p",9),r.mc(1,"\u67e5\u7121\u7d50\u679c"),r.Mb())}function jo(t,e){1&t&&(r.Nb(0,"p"),r.mc(1,"\u597d\u53cb\u5df2\u5b58\u5728"),r.Mb())}function Mo(t,e){if(1&t){const t=r.Ob();r.Nb(0,"section"),r.Jb(1,"img",10),r.Nb(2,"h3"),r.mc(3),r.Mb(),r.kc(4,jo,2,0,"p",8),r.Nb(5,"button",0),r.Ub("click",function(){r.fc(t);const e=r.Xb();return e.alreadyExist?e.toChat(e.result.id):e.addAsFriend(e.result.id)}),r.mc(6),r.Mb(),r.Mb()}if(2&t){const t=r.Xb();r.yb(1),r.ac("src",t.result.avatar||t.defaultAvatar,r.hc),r.yb(2),r.nc(t.result.name),r.yb(1),r.ac("ngIf",t.alreadyExist),r.yb(2),r.oc(" ",t.alreadyExist?"\u804a\u5929":"\u52a0\u5165\u597d\u53cb"," ")}}let Fo=(()=>{class t{constructor(t,e,n,o){this.$user=t,this.$feature=e,this.fb=n,this.router=o,this.switchToChat=new r.n,this.form=this.fb.group({id:[null,[Q.n.required,this.idValidator]]}),this.defaultAvatar=i.a.defaultAvatar}get alreadyExist(){var t,e;return(null===(t=this.user)||void 0===t?void 0:t.friends.includes(null===(e=this.result)||void 0===e?void 0:e.id))||!1}afterKeyDown(t){"Enter"===t.code&&this.search()}addAsFriend(t){console.log(t),this.$feature.fireEvent({action:Po.a.AddFriend,id:t,user:this.user})}toChat(t){var e;this.router.navigateByUrl(`${F.d.User}/${null===(e=X.e.get(F.f.Chat))||void 0===e?void 0:e.path}/${t}`),this.switchToChat.emit()}openFriendPage(){var t;this.router.navigateByUrl(`${F.d.Friend}/${null===(t=X.a.get(F.b.Recommend))||void 0===t?void 0:t.path}`)}search(){this.$feature.fireEvent({action:Po.a.SearchUser,id:this.form.controls.id.value}).then(t=>{var e;this.result=(null==t?void 0:t.id)!==(null===(e=this.user)||void 0===e?void 0:e.id)?t:null})}idValidator({value:t}){const e=null==t?void 0:t.trim();return(null==e?void 0:e.length)>0&&/^\w+$/.test(e)?null:{invalid:!0}}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(z.a),r.Ib(Do.a),r.Ib(Q.b),r.Ib(M.d))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-add-friend"]],inputs:{user:"user"},outputs:{switchToChat:"switchToChat"},decls:18,vars:7,consts:[[3,"click"],[1,"material-icons"],[3,"formGroup"],[1,"input-frame","d-flex","flex-row","align-items-center"],["formControlName","id","type","text","placeholder","\u8acb\u8f38\u5165ID\u641c\u5c0b","maxlength","30","autofocus","",1,"form-control",3,"keydown"],[1,"material-icons",3,"click"],[1,"material-icons",3,"disabled","click"],["class","form-control--alert mt-2",4,"ngIf"],[4,"ngIf"],[1,"form-control--alert","mt-2"],["alt","avatar",3,"src"]],template:function(t,e){1&t&&(r.Nb(0,"header"),r.Nb(1,"h3"),r.mc(2,"\u52a0\u597d\u53cb"),r.Mb(),r.Nb(3,"a",0),r.Ub("click",function(){return e.openFriendPage()}),r.Nb(4,"p"),r.mc(5,"\u63a8\u85a6\u597d\u53cb"),r.Mb(),r.Nb(6,"span",1),r.mc(7," arrow_right "),r.Mb(),r.Mb(),r.Mb(),r.Nb(8,"form",2),r.Nb(9,"div",3),r.Nb(10,"input",4),r.Ub("keydown",function(t){return e.afterKeyDown(t)}),r.Mb(),r.Nb(11,"em",5),r.Ub("click",function(){return e.form.controls.id.setValue(null)}),r.mc(12,"cancel"),r.Mb(),r.Nb(13,"button",6),r.Ub("click",function(){return e.search()}),r.mc(14," search "),r.Mb(),r.Mb(),r.kc(15,No,2,0,"span",7),r.kc(16,Ro,2,0,"p",7),r.kc(17,Mo,7,4,"section",8),r.Mb()),2&t&&(r.yb(8),r.ac("formGroup",e.form),r.yb(2),r.Ab("invalid",e.form.controls.id.invalid&&e.form.controls.id.touched),r.yb(3),r.ac("disabled",e.form.controls.id.invalid),r.yb(2),r.ac("ngIf",e.form.controls.id.invalid&&e.form.controls.id.value),r.yb(1),r.ac("ngIf",null===e.result),r.yb(1),r.ac("ngIf",e.result))},directives:[Q.o,Q.j,Q.d,Q.a,Q.i,Q.c,Q.f,o.k],styles:['[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;background:#f7fbff}header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:calc(100% - 15px);height:30px;margin:24px 0 30px 15px}header[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-weight:700;line-height:30px}header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:relative;cursor:pointer;display:flex;flex-direction:row;align-items:center;width:auto;height:100%;color:#539cf0}header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#2d7cd6}header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover > .material-icons[_ngcontent-%COMP%]:before{border:1px solid #acacac}header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{padding-left:5px}header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]:before{content:"";position:absolute;right:-1px;top:-3px;display:flex;height:36px;width:100px;border:1px solid #cfcfcf;border-radius:4px 0 0 4px;transition:.5s}header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.75rem}.input-frame[_ngcontent-%COMP%]{justify-content:space-between;width:250px;height:32px;padding-left:10px;font-size:.875rem;background:#fff;border-radius:4px;border:1px solid #e6e6e6}.input-frame[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:175px;height:100%;font-size:.75rem;outline:none;border:none}.input-frame[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:14px;margin-left:9px;color:#cacaca}.input-frame[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;font-size:18px;color:#57b1f1;border:none}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.form-control--alert[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;padding-top:20px;text-align:center;color:#afb1b5}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:85px;height:85px;margin-top:25px;object-fit:cover;border-radius:50%}section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;color:#1b1b1b;font-weight:700;padding-top:10px}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:15px;color:#afb1b5;font-size:.75rem}section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:135px;height:30px;margin-top:15px;border-radius:3px;color:#fff;font-size:14px;background:#539cf0;border:none}section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#2d7cd6}']}),t})();var Lo=function(t){return t.Image="img",t.Pdf="pdf",t.Excel="excel",t}({}),Bo=n("SlXt");function Vo(t){return{provide:Q.h,useExisting:Object(r.T)(()=>t),multi:!0}}class Uo extends Bo.a{constructor(){super(),this.model=null,this.disabled=!1,this.firstChange=!0}writeValue(t){this.model=t,this.onModelChanged({value:t,isFirstChange:this.firstChange}),this.firstChange=!1}registerOnChange(t){this.onChange=t}registerOnTouched(){}setDisabledState(t){this.disabled=t}notifyValueChange(t){this.onChange&&this.onChange(t||this.model)}onModelChanged({}){}}var qo=n("dfiu"),zo=n("zioG");const Ko=["ckEditor"];let Ho=(()=>{class t extends Uo{constructor(){super(),this.editor=qo}ngAfterViewInit(){this.setFormAttr()}get article(){return this.model}set article(t){this.notifyValueChange(this.formatHtml(t))}formatHtml(t){return t.replace(/<strong>/g,'<strong style = "font-weight: bold">')}setFormAttr(){qo.ClassicEditor.creat(this.ckEditor,{placeholder:"\u8f38\u5165\u8aaa\u660e\u6587\u5b57..."})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-document-editor"]],viewQuery:function(t,e){if(1&t&&r.qc(Ko,!0),2&t){let t;r.dc(t=r.Vb())&&(e.ckEditor=t.first)}},features:[r.xb([Vo(t)]),r.vb],decls:2,vars:2,consts:[[3,"editor","ngModel","ngModelChange"],["ckEditor",""]],template:function(t,e){1&t&&(r.Nb(0,"ckeditor",0,1),r.Ub("ngModelChange",function(t){return e.article=t}),r.Mb()),2&t&&r.ac("editor",e.editor)("ngModel",e.article)},directives:[zo.a,Q.i,Q.k],styles:["ckeditor[_ngcontent-%COMP%]  .ck-editor{width:calc(100% - 15px);margin:0 0 0 15px}ckeditor[_ngcontent-%COMP%]  .ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar{background:#309ef8;border:none;border-radius:10px 0 0 10px}ckeditor[_ngcontent-%COMP%]  .ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:2}ckeditor[_ngcontent-%COMP%]  .ck.ck-toolbar{padding:0 0 0 10px}ckeditor[_ngcontent-%COMP%]  .ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-top:0;margin-bottom:0;margin-right:0}ckeditor[_ngcontent-%COMP%]  .ck.ck-editor__top{width:210px;padding:0 0 0 11px}ckeditor[_ngcontent-%COMP%]  .ck-dropdown>.ck-button, ckeditor[_ngcontent-%COMP%]  .ck-toolbar__items>.ck-button{color:#fff;min-height:35px;padding:0}ckeditor[_ngcontent-%COMP%]  .ck-dropdown>.ck-button:hover, ckeditor[_ngcontent-%COMP%]  .ck-toolbar__items>.ck-button:hover{background:#2d7cd6!important}ckeditor[_ngcontent-%COMP%]  .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding:5px}ckeditor[_ngcontent-%COMP%]  .ck.ck-editor__main>.ck-editor__editable{border:none}ckeditor[_ngcontent-%COMP%]  .ck.ck-editor__main>.ck-editor__editable:focus{box-shadow:none}ckeditor[_ngcontent-%COMP%]  .ck.ck-button.ck-on{background:#2d7cd6!important}ckeditor[_ngcontent-%COMP%]  .ck-editor__main{width:210px}ckeditor[_ngcontent-%COMP%]  .ck-content{padding:10px;height:100%}ckeditor[_ngcontent-%COMP%]  strong{font-weight:700}ckeditor[_ngcontent-%COMP%]  .ck .ck-color-table{background:#2d7cd6!important}ckeditor[_ngcontent-%COMP%]  .ck .ck-color-table button:hover{background-color:unset}"]}),t})(),Wo=(()=>{class t extends Uo{constructor(t){super(),this.$overlay=t,this.uploadingFiles=new r.n,this.isMultiple=!0,this.allowType=Lo.Image}get files(){return this.model}set files(t){this.notifyValueChange(t)}ngOnInit(){}get acceptList(){switch(this.allowType){case Lo.Image:return this.iconCode="image","image/jpeg,image/jpg,image/png";case Lo.Pdf:return this.iconCode="picture_as_pdf",".pdf";case Lo.Excel:return this.iconCode="feed",".xls"}}onFileSelected(t){this.tt=t.target.files,this.uploadingFiles.emit(this.tt),console.log("onFileSelected",t,t.target.files,this.tt)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(H.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-file-select-icon"]],inputs:{isMultiple:"isMultiple",allowType:"allowType"},outputs:{uploadingFiles:"uploadingFiles"},features:[r.xb([Vo(t)]),r.vb],decls:4,vars:3,consts:[["type","file","id","input",1,"d-none",3,"multiple","accept","change"],["for","input"],[1,"material-icons"]],template:function(t,e){1&t&&(r.Nb(0,"input",0),r.Ub("change",function(t){return e.onFileSelected(t)}),r.Mb(),r.Nb(1,"label",1),r.Nb(2,"span",2),r.mc(3),r.Mb(),r.Mb()),2&t&&(r.ac("multiple",e.isMultiple)("accept",e.acceptList),r.yb(3),r.oc(" ",e.iconCode," "))},styles:[".material-icons[_ngcontent-%COMP%]{font-size:1.5rem}"]}),t})(),Go=(()=>{class t{constructor(){this.textContent="",this.isMultiple=!0,this.allowType=Lo.Image,this.allows=[Lo.Image]}ngOnInit(){}showFileList(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-post-edit"]],decls:10,vars:5,consts:[[1,"header"],[3,"click"],[3,"ngModel","ngModelChange"],[3,"isMultiple","allowType","uploadingFiles"],[3,"innerHTML"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"h3"),r.mc(2,"\u767c\u6587\u7ae0"),r.Mb(),r.Nb(3,"button",1),r.Ub("click",function(){return null}),r.mc(4,"\u767c\u6587"),r.Mb(),r.Mb(),r.Nb(5,"nav"),r.Nb(6,"app-document-editor",2),r.Ub("ngModelChange",function(t){return e.textContent=t}),r.Mb(),r.Nb(7,"app-file-select-icon",3),r.Ub("uploadingFiles",function(t){return e.showFileList(t)}),r.Mb(),r.Mb(),r.Jb(8,"div",4),r.mc(9)),2&t&&(r.yb(6),r.ac("ngModel",e.textContent),r.yb(1),r.ac("isMultiple",e.isMultiple)("allowType",e.allowType),r.yb(1),r.ac("innerHTML",e.textContent,r.gc),r.yb(1),r.oc("\n",e.textContent," "))},directives:[Ho,Q.i,Q.k,Wo],styles:["[_nghost-%COMP%]{width:100%;height:100%}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:calc(100% - 30px);height:30px;margin:24px 15px 30px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;line-height:30px}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;color:#539cf0;background:transparent;border:none}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#2d7cd6}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;color:#afb1b5}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row}nav[_ngcontent-%COMP%]   app-file-select-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:35px;height:35px;color:#fff;background:#539cf0;border-radius:0 10px 10px 0;border-left:1px solid #fff}nav[_ngcontent-%COMP%]   app-file-select-icon[_ngcontent-%COMP%]:hover{background:#2d7cd6}.file-list-overlay[_ngcontent-%COMP%]{width:400px;height:400px;background:red}"]}),t})();function $o(t,e){if(1&t){const t=r.Ob();r.Nb(0,"app-chat-list",11),r.Ub("switchToFriend",function(){r.fc(t);const e=r.Xb(2);return e.module=e.Module.Friend}),r.Mb()}if(2&t){const t=r.Xb().ngIf;r.ac("user",t)}}function Qo(t,e){if(1&t&&r.Jb(0,"app-coining",12),2&t){const t=r.Xb().ngIf;r.ac("user",t)}}function Yo(t,e){if(1&t){const t=r.Ob();r.Nb(0,"app-add-friend",13),r.Ub("switchToChat",function(){r.fc(t);const e=r.Xb(2);return e.module=e.Module.User}),r.Mb()}if(2&t){const t=r.Xb().ngIf;r.ac("user",t)}}function Jo(t,e){1&t&&r.Jb(0,"app-post-edit")}function Xo(t,e){if(1&t){const t=r.Ob();r.Lb(0),r.Nb(1,"aside"),r.Nb(2,"app-menu",1),r.Ub("moduleChanged",function(e){return r.fc(t),r.Xb().moduleChanged(e)}),r.Mb(),r.Mb(),r.Nb(3,"div",2),r.Nb(4,"header",3,4),r.Jb(6,"app-header"),r.Mb(),r.Nb(7,"main",5),r.Nb(8,"nav",6),r.kc(9,$o,1,1,"app-chat-list",7),r.kc(10,Qo,1,1,"app-coining",8),r.kc(11,Yo,1,1,"app-add-friend",9),r.kc(12,Jo,1,0,"app-post-edit",10),r.Mb(),r.Nb(13,"section"),r.Jb(14,"router-outlet"),r.Mb(),r.Mb(),r.Mb(),r.Kb()}if(2&t){const t=e.ngIf,n=r.ec(5),i=r.Xb();r.yb(2),r.ac("module",i.module)("user",t),r.yb(2),r.ac("hidden",i.module!==i.Module.User),r.yb(3),r.jc("height","calc(100% - "+n.clientHeight+"px)"),r.yb(1),r.ac("ngSwitch",i.module),r.yb(1),r.ac("ngSwitchCase",i.Module.User),r.yb(1),r.ac("ngSwitchCase",i.Module.Business),r.yb(1),r.ac("ngSwitchCase",i.Module.Friend),r.yb(1),r.ac("ngSwitchCase",i.Module.Social)}}let Zo=(()=>{class t{constructor(t,e,n){this.$navigation=t,this.$user=e,this.$router=n,this.module=this.$navigation.getModule()||F.d.User}get Module(){return F.d}ngOnInit(){}moduleChanged(t){var e,n;switch(this.module=t,this.$navigation.setModule(t),t){case F.d.Social:this.$router.navigateByUrl(`${F.d.Social}/${null===(e=X.d.get(F.e.SharedWall))||void 0===e?void 0:e.path}`);break;case F.d.User:this.$router.navigateByUrl(`${F.d.User}/${null===(n=X.e.get(F.f.Chat))||void 0===n?void 0:n.path}`)}}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(rt),r.Ib(z.a),r.Ib(M.d))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-layout"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"module","user","moduleChanged"],[1,"w-100","h-100"],[1,"w-100","fc-border-b",3,"hidden"],["tHeader",""],[1,"d-flex","flex-row","align-itmes-center","w-100"],[1,"fc-border-r",3,"ngSwitch"],[3,"user","switchToFriend",4,"ngSwitchCase"],[3,"user",4,"ngSwitchCase"],[3,"user","switchToChat",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"user","switchToFriend"],[3,"user"],[3,"user","switchToChat"]],template:function(t,e){1&t&&(r.kc(0,Xo,15,10,"ng-container",0),r.Yb(1,"async")),2&t&&r.ac("ngIf",r.Zb(1,1,e.$user.user$))},directives:[o.k,ot,dt,o.l,o.m,M.f,bt,Io,Fo,Go],pipes:[o.b],styles:["[_nghost-%COMP%]{width:100vw;height:100vh;display:flex;flex-direction:row}aside[_ngcontent-%COMP%]{width:57px}header[_ngcontent-%COMP%]{height:48px}main[_ngcontent-%COMP%]{height:100%}nav[_ngcontent-%COMP%]{width:280px}nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{height:100%;overflow-y:auto}section[_ngcontent-%COMP%]{width:calc(100% - 280px)}"]}),t})();function ts(t,e){1&t&&(r.Nb(0,"div",2),r.Wb(),r.Nb(1,"svg",3),r.Jb(2,"circle",4),r.Mb(),r.Mb())}let es=(()=>{class t{constructor(t){this.$overlay=t,this.isLoading=!1}ngOnInit(){window.requestAnimationFrame(this.setLoading.bind(this))}setLoading(){this.isLoading=this.$overlay.loadingQueue.size>0,window.requestAnimationFrame(this.setLoading.bind(this))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(H.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-overlay"]],decls:2,vars:1,consts:[[1,"Overlay"],["class","Loading",4,"ngIf"],[1,"Loading"],["viewBox","25 25 50 50"],["cx","50","cy","50","r","20","fill","none","stroke","#70c542","stroke-width","3"]],template:function(t,e){1&t&&(r.Nb(0,"section",0),r.kc(1,ts,3,0,"div",1),r.Mb()),2&t&&(r.yb(1),r.ac("ngIf",e.isLoading))},directives:[o.k],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex}[_nghost-%COMP%]   .Overlay[_ngcontent-%COMP%]{width:100%;height:100%;background-color:hsla(0,0%,100%,.8)}.Loading[_ngcontent-%COMP%]{height:50px;width:50px;top:50%;left:50%;position:absolute;transform:translate(-50%,-50%)}.Loading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:rotate 2s linear infinite;transform-origin:center center}.Loading[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke-dasharray:150,200;stroke-dashoffset:-10;animation:dash 1.5s ease-in-out infinite,color 6s ease-in-out infinite;stroke-linecap:round}@keyframes rotate{to{transform:rotate(1turn)}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes color{0%{stroke:#70a2db}40%{stroke:#2744c5}66%{stroke:#42abc5}80%,90%{stroke:#4261c5}}"]}),t})();function ns(t,e){1&t&&r.Jb(0,"app-layout")}function rs(t,e){1&t&&r.Jb(0,"router-outlet")}function is(t,e){1&t&&r.Jb(0,"app-overlay")}let os=(()=>{class t{constructor(t,e,n){this.router=t,this.$overlay=e,this.$business=n}ngOnInit(){}isIndividualPage(){return X.b.has(this.router.url.split("/")[1])}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(M.d),r.Ib(H.a),r.Ib(nt))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["tIndividual",""],[4,"ngIf"]],template:function(t,e){if(1&t&&(r.kc(0,ns,1,0,"app-layout",0),r.kc(1,rs,1,0,"ng-template",null,1,r.lc),r.kc(3,is,1,0,"app-overlay",2)),2&t){const t=r.ec(2);r.ac("ngIf",!e.isIndividualPage())("ngIfElse",t),r.yb(3),r.ac("ngIf",e.$overlay.isActivated)}},directives:[o.k,Zo,M.f,es],styles:["p[_ngcontent-%COMP%]{margin-block-start:0!important;margin-block-end:0!important}"]}),t})();var ss=n("fwGN"),as=n("FpXt");let cs=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[o.c,Q.e,as.a]]}),t})(),us=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[o.c,J,as.a,cs,ss.a]]}),t})();var ls=n("spgP"),hs=n("70T+");let ds=hs.a.LOG;i.a.production&&(ds=hs.a.ERROR);let fs=(()=>{class t{}return t.\u0275mod=r.Gb({type:t,bootstrap:[os]}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[],imports:[[j,ls.a.initializeApp(i.a.firebaseConfig),J,us,ss.a,hs.c.forRoot(ds)]]}),t})();i.a.production&&Object(r.S)(),N().bootstrapModule(fs).catch(t=>console.error(t))},zioG:function(t,e,n){"use strict";n.d(e,"a",function(){return Se}),n.d(e,"b",function(){return Te});var r=n("mrSG"),i=n("fXoL"),o=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},s=n("Ju5/"),a=function(){return s.a.Date.now()},c=/\s/,u=/^\s+/,l=s.a.Symbol,h=Object.prototype,d=h.hasOwnProperty,f=h.toString,p=l?l.toStringTag:void 0,g=Object.prototype.toString,m=l?l.toStringTag:void 0,b=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":m&&m in Object(t)?function(t){var e=d.call(t,p),n=t[p];try{t[p]=void 0;var r=!0}catch(o){}var i=f.call(t);return r&&(e?t[p]=n:delete t[p]),i}(t):function(t){return g.call(t)}(t)},v=function(t){return null!=t&&"object"==typeof t},_=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,w=/^0o[0-7]+$/i,k=parseInt,C=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||v(t)&&"[object Symbol]"==b(t)}(t))return NaN;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;var n;t=(n=t)?n.slice(0,function(t){for(var e=t.length;e--&&c.test(t.charAt(e)););return e}(n)+1).replace(u,""):n;var r=y.test(t);return r||w.test(t)?k(t.slice(2),r?2:8):_.test(t)?NaN:+t},A=Math.max,E=Math.min,O=function(t,e){return t===e||t!=t&&e!=e},x=function(t,e){for(var n=t.length;n--;)if(O(t[n][0],e))return n;return-1},S=Array.prototype.splice;function T(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}T.prototype.clear=function(){this.__data__=[],this.size=0},T.prototype.delete=function(t){var e=this.__data__,n=x(e,t);return!(n<0||(n==e.length-1?e.pop():S.call(e,n,1),--this.size,0))},T.prototype.get=function(t){var e=this.__data__,n=x(e,t);return n<0?void 0:e[n][1]},T.prototype.has=function(t){return x(this.__data__,t)>-1},T.prototype.set=function(t,e){var n=this.__data__,r=x(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var I,P=T,D=function(t){if(!o(t))return!1;var e=b(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},N=s.a["__core-js_shared__"],R=(I=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",j=Function.prototype.toString,M=function(t){if(null!=t){try{return j.call(t)}catch(e){}try{return t+""}catch(e){}}return""},F=/^\[object .+?Constructor\]$/,L=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!o(t)||(e=t,R&&R in e))&&(D(t)?L:F).test(M(t));var e}(n)?n:void 0},V=B(s.a,"Map"),U=B(Object,"create"),q=Object.prototype.hasOwnProperty,z=Object.prototype.hasOwnProperty;function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}K.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(U){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return q.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return U?void 0!==e[t]:z.call(e,t)},K.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=U&&void 0===e?"__lodash_hash_undefined__":e,this};var H=K,W=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function G(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}G.prototype.clear=function(){this.size=0,this.__data__={hash:new H,map:new(V||P),string:new H}},G.prototype.delete=function(t){var e=W(this,t).delete(t);return this.size-=e?1:0,e},G.prototype.get=function(t){return W(this,t).get(t)},G.prototype.has=function(t){return W(this,t).has(t)},G.prototype.set=function(t,e){var n=W(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var $=G;function Q(t){var e=this.__data__=new P(t);this.size=e.size}Q.prototype.clear=function(){this.__data__=new P,this.size=0},Q.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Q.prototype.get=function(t){return this.__data__.get(t)},Q.prototype.has=function(t){return this.__data__.has(t)},Q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof P){var r=n.__data__;if(!V||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new $(r)}return n.set(t,e),this.size=n.size,this};var Y=Q,J=function(){try{var t=B(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),X=function(t,e,n){"__proto__"==e&&J?J(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Z=Object.prototype.hasOwnProperty,tt=function(t,e,n){var r=t[e];Z.call(t,e)&&O(r,n)&&(void 0!==n||e in t)||X(t,e,n)},et=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?X(n,a,c):tt(n,a,c)}return n},nt=function(t){return v(t)&&"[object Arguments]"==b(t)},rt=Object.prototype,it=rt.hasOwnProperty,ot=rt.propertyIsEnumerable,st=nt(function(){return arguments}())?nt:function(t){return v(t)&&it.call(t,"callee")&&!ot.call(t,"callee")},at=Array.isArray,ct=n("WOAq"),ut=/^(?:0|[1-9]\d*)$/,lt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ut.test(t))&&t>-1&&t%1==0&&t<e},ht=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1;var ft=function(t){return function(e){return t(e)}},pt=n("xutz"),gt=pt.a&&pt.a.isTypedArray,mt=gt?ft(gt):function(t){return v(t)&&ht(t.length)&&!!dt[b(t)]},bt=Object.prototype.hasOwnProperty,vt=function(t,e){var n=at(t),r=!n&&st(t),i=!n&&!r&&Object(ct.a)(t),o=!n&&!r&&!i&&mt(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var u in t)!e&&!bt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||lt(u,c))||a.push(u);return a},_t=Object.prototype,yt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_t)},wt=function(t,e){return function(n){return t(e(n))}},kt=wt(Object.keys,Object),Ct=Object.prototype.hasOwnProperty,At=function(t){return null!=t&&ht(t.length)&&!D(t)},Et=function(t){return At(t)?vt(t):function(t){if(!yt(t))return kt(t);var e=[];for(var n in Object(t))Ct.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},Ot=Object.prototype.hasOwnProperty,xt=function(t){return At(t)?vt(t,!0):function(t){if(!o(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=yt(t),n=[];for(var r in t)("constructor"!=r||!e&&Ot.call(t,r))&&n.push(r);return n}(t)},St=n("3/ER"),Tt=function(){return[]},It=Object.prototype.propertyIsEnumerable,Pt=Object.getOwnPropertySymbols,Dt=Pt?function(t){return null==t?[]:(t=Object(t),function(e,n){for(var r=-1,i=null==e?0:e.length,o=0,s=[];++r<i;){var a=e[r];It.call(t,a)&&(s[o++]=a)}return s}(Pt(t)))}:Tt,Nt=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Rt=wt(Object.getPrototypeOf,Object),jt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Nt(e,Dt(t)),t=Rt(t);return e}:Tt,Mt=function(t,e,n){var r=e(t);return at(t)?r:Nt(r,n(t))},Ft=function(t){return Mt(t,Et,Dt)},Lt=function(t){return Mt(t,xt,jt)},Bt=B(s.a,"DataView"),Vt=B(s.a,"Promise"),Ut=B(s.a,"Set"),qt=B(s.a,"WeakMap"),zt="[object Map]",Kt="[object Promise]",Ht="[object Set]",Wt="[object WeakMap]",Gt="[object DataView]",$t=M(Bt),Qt=M(V),Yt=M(Vt),Jt=M(Ut),Xt=M(qt),Zt=b;(Bt&&Zt(new Bt(new ArrayBuffer(1)))!=Gt||V&&Zt(new V)!=zt||Vt&&Zt(Vt.resolve())!=Kt||Ut&&Zt(new Ut)!=Ht||qt&&Zt(new qt)!=Wt)&&(Zt=function(t){var e=b(t),n="[object Object]"==e?t.constructor:void 0,r=n?M(n):"";if(r)switch(r){case $t:return Gt;case Qt:return zt;case Yt:return Kt;case Jt:return Ht;case Xt:return Wt}return e});var te=Zt,ee=Object.prototype.hasOwnProperty,ne=s.a.Uint8Array,re=function(t){var e=new t.constructor(t.byteLength);return new ne(e).set(new ne(t)),e},ie=/\w*$/,oe=l?l.prototype:void 0,se=oe?oe.valueOf:void 0,ae=Object.create,ce=function(){function t(){}return function(e){if(!o(e))return{};if(ae)return ae(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),ue=pt.a&&pt.a.isMap,le=ue?ft(ue):function(t){return v(t)&&"[object Map]"==te(t)},he=pt.a&&pt.a.isSet,de=he?ft(he):function(t){return v(t)&&"[object Set]"==te(t)},fe="[object Arguments]",pe="[object Function]",ge={};ge[fe]=ge["[object Array]"]=ge["[object ArrayBuffer]"]=ge["[object DataView]"]=ge["[object Boolean]"]=ge["[object Date]"]=ge["[object Float32Array]"]=ge["[object Float64Array]"]=ge["[object Int8Array]"]=ge["[object Int16Array]"]=ge["[object Int32Array]"]=ge["[object Map]"]=ge["[object Number]"]=ge["[object Object]"]=ge["[object RegExp]"]=ge["[object Set]"]=ge["[object String]"]=ge["[object Symbol]"]=ge["[object Uint8Array]"]=ge["[object Uint8ClampedArray]"]=ge["[object Uint16Array]"]=ge["[object Uint32Array]"]=!0,ge["[object Error]"]=ge[pe]=ge["[object WeakMap]"]=!1;var me=function t(e,n,r,i,s,a){var c,u=1&n,l=2&n,h=4&n;if(r&&(c=s?r(e,i,s,a):r(e)),void 0!==c)return c;if(!o(e))return e;var d=at(e);if(d){if(c=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ee.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(e,c)}else{var f=te(e),p=f==pe||"[object GeneratorFunction]"==f;if(Object(ct.a)(e))return Object(St.a)(e,u);if("[object Object]"==f||f==fe||p&&!s){if(c=l||p?{}:function(t){return"function"!=typeof t.constructor||yt(t)?{}:ce(Rt(t))}(e),!u)return l?function(t,e){return et(t,jt(t),e)}(e,function(t,e){return t&&et(e,xt(e),t)}(c,e)):function(t,e){return et(t,Dt(t),e)}(e,function(t,e){return t&&et(e,Et(e),t)}(c,e))}else{if(!ge[f])return s?e:{};c=function(t,e,n){var r,i,o=t.constructor;switch(e){case"[object ArrayBuffer]":return re(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function(t,e){var n=e?re(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?re(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return(i=new(r=t).constructor(r.source,ie.exec(r))).lastIndex=r.lastIndex,i;case"[object Set]":return new o;case"[object Symbol]":return se?Object(se.call(t)):{}}}(e,f,u)}}a||(a=new Y);var g=a.get(e);if(g)return g;a.set(e,c),de(e)?e.forEach(function(i){c.add(t(i,n,r,i,e,a))}):le(e)&&e.forEach(function(i,o){c.set(o,t(i,n,r,o,e,a))});var m=d?void 0:(h?l?Lt:Ft:l?xt:Et)(e);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n););}(m||e,function(i,o){m&&(i=e[o=i]),tt(c,o,t(i,n,r,o,e,a))}),c},be=Function.prototype.toString,ve=Object.prototype.hasOwnProperty,_e=be.call(Object);function ye(t,e=new Set){const n=[t],r=new Set;for(;n.length>0;){const t=n.shift();if(!(r.has(t)||we(t)||e.has(t)))if(r.add(t),t[Symbol.iterator])try{for(const e of t)n.push(e)}catch(i){}else for(const e in t)"defaultValue"!==e&&n.push(t[e])}return r}function we(t){const e=Object.prototype.toString.call(t),n=typeof t;return"number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t instanceof EventTarget||t instanceof Event}class ke extends class{constructor(t){if(this.crashes=[],this.state="initializing",this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const e=t.error||t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(t=>t!==e)}_fire(t,...e){const n=this._listeners[t]||[];for(const r of n)r.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e.filename,lineno:e.lineno,colno:e.colno,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&null!=t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}{constructor(t,e={}){super(e),this._editor=null,this._throttledSave=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(t,e,n){var r,i,s,c,u,l,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=r,o=i;return r=i=void 0,h=e,c=t.apply(o,n)}function m(t){return h=t,u=setTimeout(v,e),d?g(t):c}function b(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-h>=s}function v(){var t=a();if(b(t))return _(t);u=setTimeout(v,function(t){var n=e-(t-l);return f?E(n,s-(t-h)):n}(t))}function _(t){return u=void 0,p&&r?g(t):(r=i=void 0,c)}function y(){var t=a(),n=b(t);if(r=arguments,i=this,l=t,n){if(void 0===u)return m(l);if(f)return clearTimeout(u),u=setTimeout(v,e),g(l)}return void 0===u&&(u=setTimeout(v,e)),c}return e=C(e)||0,o(n)&&(d=!!n.leading,s=(f="maxWait"in n)?A(C(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==u&&clearTimeout(u),h=0,r=l=i=u=void 0},y.flush=function(){return void 0===u?c:_(a())},y}(t,e,{leading:r,maxWait:e,trailing:i})}(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),this._creator=(e,n)=>t.create(e,n),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{if("string"==typeof this._elementOrData)return this.create(this._data,this._config,this._config.context);{const t=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,t,t.context)}}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,e=this._config,n){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=t,this._config=this._cloneEditorConfiguration(e)||{},this._config.context=n,this._creator(t,this._config))).then(t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const t=this._editor;return this._editor=null,this._destructor(t)})}_save(){const t=this._editor.model.document.version;if(t!==this._lastDocumentVersion)try{this._data=this._getData(),this._lastDocumentVersion=t}catch(e){console.error(e,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t={};for(const e of this._editor.model.document.getRootNames())t[e]=this._editor.data.get({rootName:e});return t}_isErrorComingFromThisItem(t){return function(t,e,n=new Set){if(t===e&&"object"==typeof(r=t)&&null!==r)return!0;var r;const i=ye(t,n),o=ye(e,n);for(const s of i)if(o.has(s))return!0;return!1}(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return me(t,5,e="function"==typeof(e=(t,e)=>function(t){return v(t)&&1===t.nodeType&&!function(t){if(!v(t)||"[object Object]"!=b(t))return!1;var e=Rt(t);if(null===e)return!0;var n=ve.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&be.call(n)==_e}(t)}(t)||"context"===e?t:void 0)?e:void 0);var e}}var Ce=n("SxV6"),Ae=n("3Pt+"),Ee=n("ofXK");function Oe(t,e){}const xe=new Array(256).fill(0).map((t,e)=>("0"+e.toString(16)).slice(-2));let Se=(()=>{class t{constructor(t,e){this.config={},this.data="",this.tagName="div",this.ready=new i.n,this.change=new i.n,this.blur=new i.n,this.focus=new i.n,this.error=new i.n,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function(){const t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0;return"e"+xe[t>>0&255]+xe[t>>8&255]+xe[t>>16&255]+xe[t>>24&255]+xe[e>>0&255]+xe[e>>8&255]+xe[e>>16&255]+xe[e>>24&255]+xe[n>>0&255]+xe[n>>8&255]+xe[n>>16&255]+xe[n>>24&255]+xe[r>>0&255]+xe[r>>8&255]+xe[r>>16&255]+xe[r>>24&255]}(),this.ngZone=e,this.elementRef=t}set disabled(t){this.setDisabledState(t)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let t=this.editorWatchdog;return this.watchdog&&(t=this.watchdog._watchdogs.get(this.id)),t?t.editor:null}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){return Object(r.__awaiter)(this,void 0,void 0,function*(){this.watchdog?yield this.watchdog.remove(this.id):this.editorWatchdog&&this.editorWatchdog.editor&&(yield this.editorWatchdog.destroy(),this.editorWatchdog=void 0)})}writeValue(t){null===t&&(t=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.setData(t),this.isEditorSettingData=!1):(this.data=t,this.ready.pipe(Object(Ce.a)()).subscribe(t=>{t.setData(this.data)}))}registerOnChange(t){this.cvaOnChange=t}registerOnTouched(t){this.cvaOnTouched=t}setDisabledState(t){this.editorInstance&&(this.editorInstance.isReadOnly=t),this.initiallyDisabled=t}attachToWatchdog(){const t=(t,e)=>Object(r.__awaiter)(this,void 0,void 0,function*(){return this.ngZone.runOutsideAngular(()=>Object(r.__awaiter)(this,void 0,void 0,function*(){this.elementRef.nativeElement.appendChild(t);const n=yield this.editor.create(t,e);return this.initiallyDisabled&&(n.isReadOnly=this.initiallyDisabled),this.ngZone.run(()=>{this.ready.emit(n)}),this.setUpEditorEvents(n),n}))}),e=t=>Object(r.__awaiter)(this,void 0,void 0,function*(){yield t.destroy(),this.elementRef.nativeElement.removeChild(this.editorElement)}),n=()=>{this.ngZone.run(()=>{this.error.emit()})},i=document.createElement(this.tagName),o=this.getConfig();if(this.editorElement=i,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:t,destructor:e,sourceElementOrData:i,config:o}),this.watchdog.on("itemError",(t,{itemId:e})=>{e===this.id&&n()});else{const r=new ke(this.editor);r.setCreator(t),r.setDestructor(e),r.on("error",n),this.editorWatchdog=r,this.editorWatchdog.create(i,o)}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const t=Object.assign({},this.config),e=this.config.initialData||this.data;return e&&(t.initialData=e),t}setUpEditorEvents(t){const e=t.editing.view.document;t.model.document.on("change:data",e=>{this.ngZone.run(()=>{if(this.cvaOnChange&&!this.isEditorSettingData){const e=t.getData();this.cvaOnChange(e)}this.change.emit({event:e,editor:t})})}),e.on("focus",e=>{this.ngZone.run(()=>{this.focus.emit({event:e,editor:t})})}),e.on("blur",e=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:e,editor:t})})})}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(i.l),i.Ib(i.z))},t.\u0275cmp=i.Cb({type:t,selectors:[["ckeditor"]],inputs:{config:"config",data:"data",tagName:"tagName",disabled:"disabled",editor:"editor",watchdog:"watchdog"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[i.xb([{provide:Ae.h,useExisting:Object(i.T)(()=>t),multi:!0}])],decls:1,vars:0,template:function(t,e){1&t&&i.kc(0,Oe,0,0,"ng-template")},encapsulation:2}),t})(),Te=(()=>{class t{}return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)},imports:[[Ae.e,Ee.c]]}),t})()},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return c});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function c(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);