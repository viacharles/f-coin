(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{yGy4:function(t,n,i){"use strict";i.r(n),i.d(n,"FriendModule",function(){return m});var e=i("ofXK"),c=i("IzEk"),s=i("iuoO"),r=i("AytR"),o=i("fXoL"),d=i("AWfg"),a=i("LJo4"),l=i("PvES");function b(t,n){if(1&t){const t=o.Qb();o.Pb(0,"li",1),o.Pb(1,"div"),o.Lb(2,"img",2),o.Pb(3,"p"),o.sc(4),o.Ob(),o.Ob(),o.Pb(5,"div"),o.Pb(6,"button",3),o.Wb("click",function(){o.lc(t);const i=n.$implicit;return o.Zb().ignoreInvite(i.id)}),o.sc(7,"\u5ffd\u7565"),o.Ob(),o.Pb(8,"span",4),o.Wb("click",function(){o.lc(t);const i=n.$implicit;return o.Zb().addFriendFromInvite(i.id)}),o.sc(9," person_add_alt "),o.Ob(),o.Ob(),o.Ob()}if(2&t){const t=n.$implicit,i=o.Zb();o.yb(2),o.fc("src",t.avatar||i.defaultAvatar,o.nc),o.yb(2),o.tc(t.name||"\u672a\u8a2d\u5b9a\u66b1\u7a31")}}function u(t,n){if(1&t){const t=o.Qb();o.Pb(0,"li",1),o.Pb(1,"div"),o.Lb(2,"img",2),o.Pb(3,"p"),o.sc(4),o.Ob(),o.Ob(),o.Pb(5,"span",4),o.Wb("click",function(){o.lc(t);const i=n.$implicit;return o.Zb().addFriendFromRecommend(i.id)}),o.sc(6," person_add_alt "),o.Ob(),o.Ob()}if(2&t){const t=n.$implicit,i=o.Zb();o.yb(2),o.fc("src",t.avatar||i.defaultAvatar,o.nc),o.yb(2),o.tc(t.name||"\u672a\u8a2d\u5b9a\u66b1\u7a31")}}let h=(()=>{class t{constructor(t,n,i){this.$feature=t,this.$user=n,this.$logger=i,this.defaultAvatar=r.a.defaultAvatar,this.inviteList=[],this.recommendList=[]}get id(){return this.user.id}ngOnInit(){this.$user.user$.pipe(Object(c.a)(1)).subscribe(t=>{this.user=t,this.init()})}addFriendFromInvite(t){this.$feature.fireEvent({action:s.a.AddFriend,id:t,user:this.user}).then(()=>this.inviteList=this.inviteList.filter(n=>n.id!==t))}addFriendFromRecommend(t){this.$feature.fireEvent({action:s.a.AddFriend,id:t,user:this.user}).then(()=>this.recommendList=this.recommendList.filter(n=>n.id!==t))}ignoreInvite(t){this.$feature.fireEvent({action:s.a.IgnoreInvite,user:this.user,id:t}).then(()=>this.inviteList=this.inviteList.filter(n=>n.id!==t))}init(){this.$feature.fireEvent({action:s.a.FetchInviteList,user:this.user}).then(t=>{this.$logger.systemMessage(t.length+" invitations were received "),this.inviteList=t}),this.$feature.fireEvent({action:s.a.FetchRecommendList}).then(t=>{this.$logger.systemMessage(t.length+" recommendations were received "),this.recommendList=t.filter(({id:t})=>{var n,i;return!(null===(n=this.user)||void 0===n?void 0:n.friends.includes(t))&&t!==(null===(i=this.user)||void 0===i?void 0:i.id)})})}}return t.\u0275fac=function(n){return new(n||t)(o.Kb(d.a),o.Kb(a.a),o.Kb(l.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-recommend-page"]],decls:9,vars:4,consts:[["class","list",4,"ngFor","ngForOf"],[1,"list"],[3,"src"],[3,"click"],[1,"material-icons",3,"click"]],template:function(t,n){1&t&&(o.Pb(0,"section"),o.Pb(1,"ul"),o.Pb(2,"h3"),o.sc(3),o.Ob(),o.qc(4,b,10,2,"li",0),o.Ob(),o.Pb(5,"ul"),o.Pb(6,"h3"),o.sc(7),o.Ob(),o.qc(8,u,7,2,"li",0),o.Ob(),o.Ob()),2&t&&(o.yb(3),o.uc("\u597d\u53cb\u9080\u8acb ",n.inviteList.length,""),o.yb(1),o.fc("ngForOf",n.inviteList),o.yb(3),o.uc("\u4f60\u53ef\u80fd\u8a8d\u8b58\u7684\u4eba\uff1f ",n.recommendList.length,""),o.yb(1),o.fc("ngForOf",n.recommendList))},directives:[e.l],styles:["[_nghost-%COMP%], section[_ngcontent-%COMP%]{width:100%;height:100%}section[_ngcontent-%COMP%]{padding:15px 20px}ul[_ngcontent-%COMP%]{width:auto;height:auto}ul[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:15px 0;font-weight:700}.list[_ngcontent-%COMP%]{justify-content:space-between;width:50%;min-width:300px;padding:7px 0}.list[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{align-items:center}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:40px;height:40px;border-radius:50%}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:10px}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;width:49px;height:27px;margin-right:20px;color:#afb1b5;border:1px solid #cfcfcf;border-radius:4px;background:none}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#acacac;border:1px solid #acacac}.list[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:#afb1b5}"]}),t})();var g=i("tyNb");const f=[{path:"",component:h},{path:"recommend",component:h}];let p=(()=>{class t{}return t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({factory:function(n){return new(n||t)},imports:[[g.e.forChild(f)],g.e]}),t})(),m=(()=>{class t{}return t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({factory:function(n){return new(n||t)},imports:[[e.c,p]]}),t})()}}]);