(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{yGy4:function(t,n,i){"use strict";i.r(n),i.d(n,"FriendModule",function(){return m});var e=i("ofXK"),c=i("IzEk"),o=i("iuoO"),s=i("AytR"),r=i("fXoL"),a=i("AWfg"),d=i("LJo4"),b=i("PvES");function l(t,n){if(1&t){const t=r.Ob();r.Nb(0,"li",1),r.Nb(1,"div"),r.Jb(2,"img",2),r.Nb(3,"p"),r.mc(4),r.Mb(),r.Mb(),r.Nb(5,"div"),r.Nb(6,"button",3),r.Ub("click",function(){r.fc(t);const i=n.$implicit;return r.Xb().ignoreInvite(i.id)}),r.mc(7,"\u5ffd\u7565"),r.Mb(),r.Nb(8,"span",4),r.Ub("click",function(){r.fc(t);const i=n.$implicit;return r.Xb().addFriend(i.id)}),r.mc(9," person_add_alt "),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=n.$implicit,i=r.Xb();r.yb(2),r.ac("src",t.avatar||i.defaultAvatar,r.hc),r.yb(2),r.nc(t.name||"\u672a\u8a2d\u5b9a\u66b1\u7a31")}}function u(t,n){if(1&t){const t=r.Ob();r.Nb(0,"li",1),r.Nb(1,"div"),r.Jb(2,"img",2),r.Nb(3,"p"),r.mc(4),r.Mb(),r.Mb(),r.Nb(5,"span",4),r.Ub("click",function(){r.fc(t);const i=n.$implicit;return r.Xb().addFriend(i.id)}),r.mc(6," person_add_alt "),r.Mb(),r.Mb()}if(2&t){const t=n.$implicit,i=r.Xb();r.yb(2),r.ac("src",t.avatar||i.defaultAvatar,r.hc),r.yb(2),r.nc(t.name||"\u672a\u8a2d\u5b9a\u66b1\u7a31")}}let g=(()=>{class t{constructor(t,n,i){this.$feature=t,this.$user=n,this.$logger=i,this.defaultAvatar=s.a.defaultAvatar,this.inviteList=[],this.recommendList=[]}get id(){return this.user.id}ngOnInit(){this.$user.user$.pipe(Object(c.a)(1)).subscribe(t=>{this.user=t,this.init()})}addFriend(t){this.$feature.fireEvent({action:o.a.AddFriend,id:t,user:this.user}).then(()=>this.inviteList=this.inviteList.filter(n=>n.id!==t))}ignoreInvite(t){this.$feature.fireEvent({action:o.a.IgnoreInvite,user:this.user,id:t}).then(()=>this.inviteList=this.inviteList.filter(n=>n.id!==t))}init(){this.$feature.fireEvent({action:o.a.FetchInviteList,user:this.user}).then(t=>{this.$logger.systemMessage(t.length+" invitations were received "),this.inviteList=t}),this.$feature.fireEvent({action:o.a.FetchRecommendList}).then(t=>{this.$logger.systemMessage(t.length+" recommendations were received "),this.recommendList=t.filter(({id:t})=>{var n,i;return!(null===(n=this.user)||void 0===n?void 0:n.friends.includes(t))&&t!==(null===(i=this.user)||void 0===i?void 0:i.id)})})}}return t.\u0275fac=function(n){return new(n||t)(r.Ib(a.a),r.Ib(d.a),r.Ib(b.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-recommend-page"]],decls:9,vars:4,consts:[["class","list",4,"ngFor","ngForOf"],[1,"list"],[3,"src"],[3,"click"],[1,"material-icons",3,"click"]],template:function(t,n){1&t&&(r.Nb(0,"section"),r.Nb(1,"ul"),r.Nb(2,"h3"),r.mc(3),r.Mb(),r.kc(4,l,10,2,"li",0),r.Mb(),r.Nb(5,"ul"),r.Nb(6,"h3"),r.mc(7),r.Mb(),r.kc(8,u,7,2,"li",0),r.Mb(),r.Mb()),2&t&&(r.yb(3),r.oc("\u597d\u53cb\u9080\u8acb ",n.inviteList.length,""),r.yb(1),r.ac("ngForOf",n.inviteList),r.yb(3),r.oc("\u4f60\u53ef\u80fd\u8a8d\u8b58\u7684\u4eba\uff1f ",n.recommendList.length,""),r.yb(1),r.ac("ngForOf",n.recommendList))},directives:[e.j],styles:["[_nghost-%COMP%], section[_ngcontent-%COMP%]{width:100%;height:100%}section[_ngcontent-%COMP%]{padding:15px 20px}ul[_ngcontent-%COMP%]{width:auto;height:auto}ul[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:15px 0;font-weight:700}.list[_ngcontent-%COMP%]{justify-content:space-between;width:50%;min-width:300px;padding:7px 0}.list[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{align-items:center}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:40px;height:40px;border-radius:50%}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:10px}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;width:49px;height:27px;margin-right:20px;color:#afb1b5;border:1px solid #cfcfcf;border-radius:4px;background:none}.list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#acacac;border:1px solid #acacac}.list[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:#afb1b5}"]}),t})();var h=i("tyNb");const f=[{path:"",component:g},{path:"recommend",component:g}];let p=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(n){return new(n||t)},imports:[[h.e.forChild(f)],h.e]}),t})(),m=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(n){return new(n||t)},imports:[[e.c,p]]}),t})()}}]);